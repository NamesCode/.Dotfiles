"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{99922:(e,t,a)=>{a.d(t,{o:()=>i});var n=a(87577),r=a(49207);function i(){return{version:(0,n.W6)(r.GE)?2:1}}},40771:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(87462),r=a(45987),i=a(67294),l=a(67892),o=["href","children"],c=function(e){var t=e.href,a=e.children,c=(0,r.Z)(e,o);return i.createElement(l.Z,(0,n.Z)({to:t},c),a)}},43683:(e,t,a)=>{a.d(t,{q:()=>N,o:()=>S});var n=a(29439),r=a(4942),i=a(67294),l=a(94184),o=a.n(l),c=a(59440),s=a(97081),u=a(96206),d=a(51674),m=a(79896),p=a(26482),v=a(21663),f=a(88387),g=a(75012),y=a(40080),E=a(14130);const k="l_MW0G9qeeCKlVJwBykT",b="BKsbV2Xl786X9a09XROH",h="x-downloadButton-DownloadButton",P="_APVWqivXc4YqgsnpFkP",C="VmwiDoU6RpqyzK_n7XRO",T="rEx3EYgBzS8SoY7dmC6x";var N;!function(e){e[e.sm=24]="sm",e[e.md=32]="md"}(N||(N={}));var I=function(e){var t=e.currentTarget;e.detail>0&&t&&t.blur()},S=function(e){var t=e.uri,a=e.isFollowing,l=e.canDownload,S=void 0===l||l,x=e.onFollow,w=e.size,U=void 0===w?N.sm:w,D=e.className,M=e.onClick,A=void 0===M?function(){}:M,R=(0,r.Z)({},"--size","".concat(U,"px")),L=(0,i.useState)(!1),O=(0,n.Z)(L,2),B=O[0],F=O[1],_=(0,v._)(t),Z=_.capability,K=_.availability,z=_.addDownload,W=_.removeDownload,q=(0,f.A)(t);!function(e,t){var a=(0,E.r)(),n=(0,i.useRef)(!1);(0,i.useEffect)((function(){e===p.Om.DOWNLOADING&&!1===n.current&&(n.current=!0,a.say(u.ag.get("download.downloading",t.totalItems)))}),[a,e,t]);var r=(0,y.D)(e);(0,i.useEffect)((function(){r===p.Om.DOWNLOADING&&e===p.Om.YES&&(n.current=!1,a.say(u.ag.get("download.complete")))}),[a,r,e])}(K,q);var H=(0,i.useCallback)((function(e){Z===p.PQ.NO_PERMISSION?A(e,p.mc.NO_PERMISSION):(!1===a?(x(),F(!0)):z(),A(e,p.mc.ADD)),I(e)}),[z,Z,a,A,x]),X=(0,i.useCallback)((function(e){W(),I(e),A(e,p.mc.REMOVE)}),[W,A]);(0,i.useEffect)((function(){!0===B&&!0===a&&(z(),F(!1))}),[a,B,z]);var J=K===p.Om.YES;return Z===p.PQ.NO_CAPABILITY?null:S||J?Z===p.PQ.NO_PERMISSION?i.createElement("div",{className:b},i.createElement(m.Nt,{offset:[-2,20],action:"toggle",trigger:"click",content:i.createElement(m.yv,null,i.createElement("span",null,u.ag.get("download.upsell"))),renderInline:!1},i.createElement("div",null,i.createElement(d._,{label:u.ag.get("download.download")},i.createElement("button",{className:o()(h,D),role:"switch",onClick:H,"aria-label":u.ag.get("download.download"),"aria-checked":!1},i.createElement(c.D,{iconSize:U})))))):J?i.createElement(d._,{label:u.ag.get("download.remove")},i.createElement("button",{className:o()(h,D,P),role:"switch",onClick:X,"aria-label":u.ag.get("download.remove"),"aria-checked":!0},i.createElement(s.E,{iconSize:U}))):K===p.Om.NO?i.createElement(d._,{label:u.ag.get("download.download")},i.createElement("button",{className:o()(h,D),role:"switch",onClick:H,"aria-label":u.ag.get("download.download"),"aria-checked":!1},i.createElement(c.D,{iconSize:U}))):i.createElement("div",{className:o()(C,D),role:"switch","aria-checked":!0},i.createElement(d._,{label:u.ag.get("download.cancel")},i.createElement("button",{style:R,className:o()(h,k,D),onClick:X,"aria-label":u.ag.get("download.cancel")})),i.createElement("span",{style:R,className:o()(T,k)},i.createElement(g.e,{"aria-valuetext":u.ag.get("progress.downloading-tracks"),percentage:q.percentage,size:U}))):null}},37483:(e,t,a)=>{a.d(t,{p:()=>d,q:()=>s.q});var n=a(29439),r=a(67294),i=a(86706),l=a(4383),o=a(67870),c=a(56802),s=a(43683),u=r.memo((function(e){var t=e.uri,a=e.size,u=void 0===a?s.q.md:a,d=e.className,m=e.onClick,p=(0,l.Z)(t),v=(0,n.Z)(p,2),f=v[0],g=v[1],y=(0,i.I0)(),E=(0,c.o)(),k=(0,r.useCallback)((function(){E({targetUri:t,intent:f?"remove-from-library":"add-to-library",type:"click"}),g(!f),y(f?(0,o.SS)():(0,o.kK)())}),[E,t,f,g,y]);return r.createElement(s.o,{className:d,isFollowing:f,onFollow:k,onClick:m,uri:t,size:u})})),d=r.memo((function(e){return r.createElement(u,e)}))},22578:(e,t,a)=>{a.d(t,{$:()=>m});a(26699),a(32023),a(69600),a(68309),a(21249);var n=a(67294),r=a(64593),i=a(96206),l=a(69691),o=a(8341),c=a(89952),s=a(51615),u=a(24183);function d(e){return e.includes("Spotify")?e:"Spotify – ".concat(e)}var m=function(e){var t,a,m,p,v,f,g,y=e.children,E=e.usePlayingItem,k=d(y);t=y,p=(0,u.Oh)().mainLandmarkRef,v=(0,s.k6)(),f=null===(a=v.location)||void 0===a||null===(m=a.state)||void 0===m?void 0:m.preventMoveFocus,(g=(0,n.useRef)(v.length<2)).current=v.length<2,(0,n.useEffect)((function(){var e=p.current;!f&&!g.current&&e&&t&&(e.setAttribute("aria-label",t),e.focus())}),[t,p,f]);var b=(0,l.IK)().isPlaying,h=(0,o.Y)((function(e){return null==e?void 0:e.item}));return h&&(b||E)&&((0,c.G_)(h)?k=[h.name,h.artists.map((function(e){return e.name})).join(i.ag.getSeparator())].join(" • "):(0,c.iw)(h)?k=[h.name,h.show.name].join(" • "):(0,c.k6)(h)&&(k=d(i.ag.get("ad-formats.advertisement")))),n.createElement(r.q,{defaultTitle:"Spotify",defer:!1},n.createElement("title",null,k))}},23103:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ia});var n=a(29439),r=(a(82526),a(41817),a(66992),a(41539),a(78783),a(33948),a(41637),a(74916),a(64765),a(91058),a(68309),a(15306),a(67294)),i=a(51615),l=a(69518),o=a.n(l),c=a(87577),s=a(97348),u=a(73305),d=a(96206),m=a(70369),p=a(63567),v=a(6158),f=a(86706),g=a(74257),y=a(77995),E=a(84629),k=a(18270),b=a(48690),h=a(22345),P=a(60289),C=a(59482),T=a(72907),N=a(67892),I=a(62515),S=a(32626),x=a(18261),w=a(57978),U=a(26482),D=a(84242),M=a(8341),A=a(5944),R=a(15852),L=a(7073),O=a(13759),B=a(84788),F=a(60410),_=a(40771),Z=a(38894),K=a(51441),z=a(79896),W=a(15861),q=a(87757),H=a.n(q),X=a(32667),J=a(86025),Y=a(34011),V=a(1447),G=a(9983),Q=a(49125),j=a(42781);const $="u0Jj3wfs4s9tmaXUTK41",ee="NSXGSulVKC8FxHx5f1f3",te="PN1uMk_51r_KQvgJ6sCR",ae="N6NnRc_msmFFxUoAfuKQ",ne="qaYOSFBanH3vJvosOwsU";var re=function(e){var t,a,n,i,l=e.showUri,o=(0,V.qT)(),c=(0,Q.l)(l,!0).data;if((null==c?void 0:c.type)!==j.p.AUDIOBOOK)return null;var s=null===(t=c.price)||void 0===t||null===(a=t.finalPrice)||void 0===a?void 0:a.amount,u=null===(n=c.price)||void 0===n||null===(i=n.finalPrice)||void 0===i?void 0:i.currency;return s&&u?r.createElement("div",{className:$},r.createElement(X.D,{as:"div",variant:"cello",className:ee},d.ag.get("web-player.audiobooks.chapterUpsell.title")),r.createElement(X.D,{as:"div",variant:"mesto",className:te},d.ag.get("web-player.audiobooks.chapterUpsell.description")),r.createElement("div",{className:ae},r.createElement(J.o,{className:ne,buttonSize:"sm",onClick:function(){o({type:"close"})}},d.ag.get("action-trigger.button.not-now")),r.createElement(Y.D,{buttonSize:"sm",colorSet:"invertedLight",onClick:(0,W.Z)(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.Q)({show_uri:l,currency:u,price:s});case 2:case"end":return e.stop()}}),e)})))},d.ag.get("web-player.audiobooks.chapterUpsell.cta")))):(console.error("Audiobook has no price information."),null)},ie=function(e){var t=e.children,a=e.enabled,n=e.showUri,i=e.renderInline,l=void 0===i||i;return a?r.createElement(z.Nt,{trigger:"click",action:"toggle",offset:[-2,20],renderInline:l,content:r.createElement(z.yv,null,r.createElement(re,{showUri:n}))},t):r.createElement(r.Fragment,null,t)},le=function(e){var t=e.chapterUri,a=e.showUri,n=e.isLocked,i=e.isPlayDisabled,l=e.isActive,o=e.isPlaying,c=e.togglePlay,s=e.triggerPlay,u=e.playButtonPlayLabel,d=e.playButtonPauseLabel,m=e.playPositionMs,p=e.durationMs,v=e.logger,f=e.event,g=(0,Z.g)(),y=(0,r.useCallback)((function(e){var a;n?v.logInteraction(f.hitShowPaywall({paywalledItem:t})):l?(a=o?v.logInteraction(f.hitPause({itemToBePaused:t})):v.logInteraction(f.hitResume({itemToBeResumed:t})),c({loggingParams:a})):(a=v.logInteraction(f.hitPlay({itemToBePlayed:t})),s({seekTo:e,loggingParams:a}))}),[n,l,v,f,t,o,c,s]);(0,r.useEffect)((function(){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=p&&y(a)}}),[p,y]);var E=function(){return r.createElement(K.JM,{size:K.qE.lg,onClick:function(){y(m)},isPlaying:o,disabled:i,locked:n,ariaPlayLabel:u,ariaPauseLabel:d})};return g?E():r.createElement(ie,{showUri:a,enabled:n,renderInline:!1},E())},oe=a(31610);const ce="UVWRbDQd2DM0ShkvMq54",se="Eoy1M3AAKeAUI9cNWsuq",ue="rmgkmccGmTBvrw7gXMyS",de="JKIiOrx9EhZCkyBsu7YI";var me=r.memo((function(e){var t,a=e.chapter,i=a.name,l=a.uri,c=a.playedState,s=a.contentRating,u=a.duration,m=a.playability,p=a.book,v=a.coverArt.length?a.coverArt:p.coverArt||[],Z=null===(t=v[0])||void 0===t?void 0:t.url,K=(0,I.Z)(Z||null),z=(0,f.I0)(),W=(0,r.useState)(c.state===L.sY.Completed),q=(0,n.Z)(W,2),H=q[0],X=q[1],J=(0,R.fU)(y.createDesktopAudiobookChapterEventFactory,{data:{uri:l}}),Y=J.spec,V=J.logger,G=(0,D.n)({uri:l},{featureIdentifier:"chapter"}),Q=G.triggerPlay,j=G.togglePlay,$=G.isPlaying,ee=G.isActive,te=(0,M.Y)((function(e){var t;return null!==(t=(0,A.k)(e))&&void 0!==t?t:void 0})),ae=(0,F.S)(a),ne=(0,B.r)({contentRating:null==s?void 0:s.label}).badges,re=(0,r.useCallback)((function(e){!m.playable&&ne.nineteen&&(e.stopPropagation(),z((0,E.RM)(l||"")))}),[l,m.playable,ne.nineteen,z]),ie=p.uri,me=function(e){var t=o().from(e),a=o().hexToId((null==t?void 0:t.id)||"");return"/show/".concat(a)}(ie),pe=(0,r.useCallback)((function(){var e=Y.headerFactory().audiobookLinkFactory().hitUiNavigate({destination:me});V.logInteraction(e)}),[V,me,Y]),ve=(0,r.useCallback)((function(e,t){var a=Y.actionBarFactory().downloadButtonFactory();t===U.mc.ADD?V.logInteraction(a.hitDownload({itemToDownload:l})):t===U.mc.REMOVE?V.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:l})):t===U.mc.NO_PERMISSION&&V.logInteraction(a.hitUiReveal())}),[V,Y,l]),fe=(0,r.useCallback)((function(){var e=Y.actionBarFactory().contextMenuButtonFactory().hitUiReveal();V.logInteraction(e)}),[V,Y]),ge=(0,r.useCallback)((function(){var e=Y.allChaptersLinkFactory().hitUiNavigate({destination:me});V.logInteraction(e)}),[V,me,Y]),ye=!ae&&!m.playable,Ee=p.name,ke=d.ag.get("tracklist.a11y.play",i,Ee),be=d.ag.get("tracklist.a11y.pause",i,Ee);return r.createElement("section",{"data-testid":"chapter",className:ce},r.createElement(P.gF,{backgroundColor:K},r.createElement(C.W,null,r.createElement(T.i,{text:i})),r.createElement("div",{className:ue},r.createElement(x._,{menu:r.createElement(h.r,{uri:l,isPlayed:H,onMarkAsPlayed:X,contextUri:l,isLocked:ae})},r.createElement(P.Oe,{loading:"eager",name:i,images:v,placeholderType:"episode",shape:P.Kc.ROUNDED_CORNERS}))),r.createElement(P.sP,null,r.createElement(P.dy,{small:!0,uppercase:!0},d.ag.get("web-player.audiobooks.chapter")),r.createElement(x._,{menu:r.createElement(h.r,{uri:l,isPlayed:H,onMarkAsPlayed:X,contextUri:l,isLocked:ae})},r.createElement(P.xd,{dragUri:l,dragLabel:i},r.createElement("span",{"data-testid":"chapterTitle"},i))),r.createElement(x._,{menu:r.createElement(h.r,{uri:l,isPlayed:H,onMarkAsPlayed:X,contextUri:l,isLocked:ae})},r.createElement(N.Z,{to:me,onClick:pe},r.createElement(P.dy,{large:!0,bold:!0},r.createElement("span",{"data-testid":"bookTitle"},Ee)))))),r.createElement(k.o,{backgroundColor:K},r.createElement(k.F,null,ne.nineteen&&r.createElement(w.X,{className:se,size:16}),r.createElement(O.E,{size:O.$.LARGE,fullyPlayed:H,durationMs:u.milliseconds,resumePositionMs:c.playPositionMilliseconds,isPlaying:$,position:ee&&te||void 0})),r.createElement(k.F,null,r.createElement("div",{onClick:re},r.createElement(le,{chapterUri:l,showUri:ie,isLocked:ae,durationMs:u.milliseconds,playPositionMs:c.playPositionMilliseconds,isPlayDisabled:ye,isActive:ee,isPlaying:$,togglePlay:j,triggerPlay:Q,playButtonPlayLabel:ke,playButtonPauseLabel:be,logger:V,event:Y.actionBarFactory().playButtonFactory()})),!ae&&r.createElement(oe.o,{uri:l,bookUri:ie,onClick:ve}),!ae&&r.createElement(S.yj,{menu:r.createElement(h.r,{uri:l,isPlayed:H,onMarkAsPlayed:X,contextUri:l,isLocked:ae})},r.createElement(b.z,{label:d.ag.get("more.label.context",i),onClick:fe})))),r.createElement("div",{className:"contentSpacing"},r.createElement(g.P,{buttonSize:"sm",href:ie,component:_.Z,className:de,onClick:ge},d.ag.get("web-player.audiobooks.seeAllChapters"))))})),pe=a(87462),ve=(a(88674),a(99922)),fe=a(74849),ge=(0,r.lazy)((function(){return Promise.all([a.e(1814),a.e(8396)]).then(a.bind(a,88396))}));function ye(e){var t=(0,fe.m)(),a=(0,ve.o)();return t?r.createElement(r.Suspense,{fallback:!0},r.createElement(ge,(0,pe.Z)({reason:"Episode page"},a,e))):null}const Ee="dpN5ViPOceUWNB5EQPHN",ke="vBcxPq3E2okwgXOkVPEM",be="HCCBXwdFvq6omWW2hR0N",he="bJOPO5Zo7dpjSVDwEpSw",Pe="TXdDDpokVTyJzDEDWHHf",Ce="HaSbtEVJnxBsaJ5SRi0M",Te="YldGldlfaI9myEGXQf9g",Ne="qJHVIpJn1vLPWsAKfTEZ",Ie="wSIzjkVlr0Zdy7di2vRm",Se="hYS_K1NATGyWt6tCSRqQ",xe="hVVaM4pF9arpQ8Nvn2a1",we="zf0Eac1LugsHUacz74Zf",Ue="TnNaqxbaI0hzhBQZ7wE0",De="zSw1lG1TNe_xm6KTqtCv",Me="MlEQDkXnjdKKJueJ9kkB",Ae="jg0xlyD1yjh0DPNG6eOg",Re="QiHXpFb4dLZNOFe5gpp3";a(73210);var Le,Oe=a(97656),Be=a(49207),Fe=function(e){var t=e.cardHeaderText,a=e.cardBodyText,n=e.buttonText,i=e.buttonTarget;return(0,c.W6)(Be.Xd)?r.createElement("div",{className:Te},r.createElement("div",{className:Ne},r.createElement(X.D,{variant:"balladBold",semanticColor:"textBase"},t),r.createElement(X.D,{semanticColor:"textBase"},a)),r.createElement(Y.D,{buttonSize:"sm",colorSet:"invertedLight",href:o().from(i).toURLPath(!0),component:_.Z},n)):null},_e=function(e){var t=e.areHTMLDescriptionsEnabled,a=e.contentInformation,n=e.description,i=e.hasDescription,l=e.htmlDescription,o=e.onExpanded,c=e.onTimeStampClick,s=e.playability,u=e.showHeader,m=void 0===u||u,p=e.spec,v=(0,R.$P)(),f=(i||a)&&m,g=(0,r.useCallback)((function(e){var t=p.readMoreButtonFactory();v.logInteraction(e?t.hitUiReveal():t.hitUiHide()),null==o||o()}),[p,v,o]);return r.createElement(r.Fragment,null,f&&r.createElement(X.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:be},d.ag.get("episode.description-title")),a&&r.createElement(Fe,{cardHeaderText:a.cardHeaderText,cardBodyText:a.cardBodyText,buttonText:a.buttonText,buttonTarget:a.buttonTarget}),i&&r.createElement(Oe.o,{className:ke,onTimeStampClick:c,maxLines:4,onExpanded:g,content:(n||"").trim(),htmlContent:t&&l?l:void 0,enableTimestamps:s.playable}))},Ze=a(4942),Ke=a(94184),ze=a.n(Ke),We=a(97650),qe=a(29325),He=a(61102),Xe=a(3822),Je=a(13406),Ye=a(32648);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(Le||(Le={}));var Ve=r.memo((function(e){var t=e.transcriptSections,a=e.descriptionContent,i=e.transcriptContent,l=e.spec,o=(0,R.$P)(),c=(0,r.useState)(Le.DESCRIPTION),s=(0,n.Z)(c,2),u=s[0],m=s[1],p=r.useContext(Ye.VX).scrollNodeRef,v=(0,We.YD)({threshold:[1],root:p.current,rootMargin:"-".concat(Je.K1+1,"px 100000px 0px 100000px")}),f=v.ref,g=v.inView,y=(0,r.useRef)(null),E=(0,r.useCallback)((function(e){y.current=e,f(e)}),[f]);return(0,r.useEffect)((function(){var e,t,a=null===(e=y.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.offsetTop,n=null==p?void 0:p.current;if(a&&n){var r=a-Je.K1;n.scrollTop>r&&n.scrollTo({top:r})}}),[p,u]),r.createElement(qe.l,{list:r.createElement(He.F,{className:ze()(Me,(0,Ze.Z)({},Ae,!g)),ref:E},r.createElement(Xe.c,{label:d.ag.get("web-player.episode.description"),sentenceCase:!0,active:u===Le.DESCRIPTION,onClick:function(){var e=l.tabsFactory().descriptionTabButtonFactory().hitUiReveal();o.logInteraction(e),m(Le.DESCRIPTION)},className:ze()(Re,(0,Ze.Z)({},Ie,u===Le.DESCRIPTION))}),r.createElement(Xe.c,{label:d.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===t,active:u===Le.TRANSCRIPT,onClick:function(){var e=l.tabsFactory().transcriptTabButtonFactory().hitUiReveal();o.logInteraction(e),m(Le.TRANSCRIPT)},className:ze()(Re,(0,Ze.Z)({},Ie,u===Le.TRANSCRIPT))}))},null===t||u===Le.DESCRIPTION?a:i)})),Ge=(a(21249),a(43914)),Qe=a(49104),je=r.memo((function(e){var t=e.transcriptSections,a=e.onTimeStampClick,n=e.episodeUri;return r.createElement(r.Fragment,null,r.createElement("div",{className:xe},r.createElement(X.D,{variant:"viola",semanticColor:"textBase"},d.ag.get("web-player.episode.transcript.disclaimer"))),t.map((function(e,t){var i="transcript-section-".concat(t);return r.createElement("div",{className:Se,key:i},r.createElement("button",{className:we,onClick:function(){a(e.startMs,i)}},r.createElement(Ge.D,{id:i,targetURI:o().from(n),fadeOut:!0},r.createElement(X.D,{variant:"finaleBold",semanticColor:"textSubdued",className:Ue},(0,Qe.m)(e.startMs)))),e.content.map((function(e,t){return r.createElement(X.D,{variant:"viola",semanticColor:"textBase",className:De,key:"transcript-text-".concat(t),dir:"auto"},e)})))})))})),$e=(a(92222),a(85827),a(74600)),et=a(28248),tt=a(86543),at=a(38470),nt=a(1848),rt=a(88214),it=a(21509),lt=a(82760),ot=a(86064),ct=a(42922);const st="OYehkMWcGJRKPkByp46K",ut="uc1bXkrZqrCz0CMK4lBb",dt="qZeibBbA3SVClzEueYND";var mt=function(e){var t,a=e.episodeUri,n=e.index,i=e.duration,l=e.start,o=e.stop,c=e.name,s=e.uri,u=e.artists,m=e.album,p=e.playable,v=(0,ot.k)({episodeUri:a,start:l,stop:o}),f=v.isActive,g=v.isPlaying,y=v.onClick,E=(0,r.useCallback)((function(e,t){y(t)}),[y]),k=(0,R.fU)(nt.createDesktopTrackListRowEventFactory,{data:{position:n,reason:"",uri:s}}).spec;return r.createElement(ct.ZP,{value:"row",index:n},r.createElement(S.xV,{trigger:"right-click",action:"open",menu:r.createElement(rt.$,{uri:s})},r.createElement(lt.c,{uri:s,index:n,ariaRowIndex:n+1,dragMetadata:{name:c,createdBy:null!==(t=null==u?void 0:u[0].name)&&void 0!==t?t:""},onTriggerPlay:E,isActive:f,isPlayable:p,spec:k},r.createElement(it.vZ,{ariaColIndex:0},r.createElement(it.Du,{uri:s,playAriaLabel:d.ag.get("tracklist.a11y.play",c,null==u?void 0:u[0].name),onClick:E,isPlaying:g,isActive:f,spec:k},r.createElement(it.km,null,r.createElement("img",{className:ut,src:m.image,alt:m.name}))),r.createElement(it.vm,null,r.createElement(it.Wh,{titleText:c},c),r.createElement(it.K9,null,r.createElement(it.T6,{artists:u,spec:k})))),r.createElement(it.UA,{ariaColIndex:1},r.createElement(it.BM,{uri:m.uri,name:m.name,spec:k},m.name)),r.createElement(it.mU,{ariaColIndex:2},r.createElement(it.qS,{uri:s,spec:k}),r.createElement(it.A$,{duration:i}),r.createElement(it.Zv,{spec:k,menu:r.createElement(rt.$,{uri:s,artists:u}),label:d.ag.get("more.label.track",c,null==u?void 0:u[0].name)})))))};function pt(e,t,a){return e.reduce((function(e,n,r){return(r>0||t>0)&&e.push({type:"SPACER",id:"spacer-".concat(e.length)}),"MUSIC"===n.type?e.push(function(e,t,a){return{type:"MUSIC",index:t,uri:a.uri,episodeUri:e,start:a.start,stop:a.stop,duration:a.duration,name:a.track.name,artists:a.track.artists,album:a.track.album,playable:a.track.playable}}(a,r,n)):"TALK"===n.type&&e.push(function(e,t,a){return{type:"TALK",index:t,uri:e,title:a.title,subtitle:a.subtitle,start:a.start,stop:a.stop,duration:a.duration,showUri:a.show.uri,showName:a.show.name}}(a,r,n)),e}),[])}const vt=function(e){var t=e.uri,a=e.segmentCount,n=(0,tt.G)(),i=(0,r.useCallback)(function(){var e=(0,W.Z)(H().mark((function e(a,r){var i,l;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Math.ceil(a/2),e.prev=1,e.next=4,n.getSegments(t,i,r);case 4:return l=e.sent,e.abrupt("return",pt(l,i,t));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),[n,t]),l=(0,r.useCallback)((function(e){switch(e.type){case"SPACER":return r.createElement("div",{key:e.id,className:dt});case"MUSIC":return r.createElement(mt,(0,pe.Z)({key:"".concat(t,"-").concat(e.index)},e));case"TALK":return r.createElement($e.t,(0,pe.Z)({key:"".concat(t,"-").concat(e.index)},e));default:return(0,at.U)(e)}}),[t]),o=d.ag.get("music_and_talk.in_this_episode");return r.createElement("div",null,r.createElement(X.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:st},o),r.createElement(et.Pv,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:et.hU,columns:[et.QD.TITLE,et.QD.ALBUM_OR_SHOW,et.QD.DURATION],renderRow:l,fetchTracks:i,resolveUri:function(e){return"MUSIC"===e.type?e.uri:""},limit:50,nrTracks:2*a-1,testID:"music-and-talk-tracklist"}))};a(39575),a(82472),a(48675),a(92990),a(18927),a(33105),a(35035),a(74345),a(7174),a(32846),a(44731),a(77209),a(96319),a(58867),a(37789),a(33739),a(29368),a(14483),a(12056),a(3462),a(30678),a(27462),a(33824),a(55021),a(12974),a(15016),a(37380),a(1118),a(79753),a(5735),a(83753),a(9653),a(47042),a(91038),a(77601),a(32165),a(21703),a(96647);var ft=a(43720),gt=a.n(ft),yt=a(62100),Et=a.n(yt);function kt(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return bt(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw i}}}}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ht;function Pt(e){switch(e){case 0:case"UNKNOWN":return ht.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return ht.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return ht.MUSIC_TRACK;default:return ht.UNRECOGNIZED}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ht||(ht={}));var Ct=function(e,t){for(var a=e instanceof Et().Reader?e:new(Et().Reader)(e),n=void 0===t?a.len:a.pos+t,r={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};a.pos<n;){var i=a.uint32();switch(i>>>3){case 1:r.version=a.string();break;case 2:r.episodeUri=a.string();break;case 3:r.publishedAt=a.string();break;case 4:r.sections.push(Tt.decode(a,a.uint32()));break;case 5:r.language=a.string();break;case 6:r.curated=a.bool();break;default:a.skipType(7&i)}}return r};var Tt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et().Writer.create();return 0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&Nt.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&It.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&Nt.encode(e.fallback,t.uint32(42).fork()).ldelim(),t},decode:function(e,t){for(var a=e instanceof Et().Reader?e:new(Et().Reader)(e),n=void 0===t?a.len:a.pos+t,r={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};a.pos<n;){var i=a.uint32();switch(i>>>3){case 1:r.type=a.int32();break;case 2:r.startMs=a.int32();break;case 3:r.plaintextContent=Nt.decode(a,a.uint32());break;case 6:r.musicTrack=It.decode(a,a.uint32());break;case 4:r.title=a.string();break;case 5:r.fallback=Nt.decode(a,a.uint32());break;default:a.skipType(7&i)}}return r},fromJSON:function(e){return{type:St(e.type)?Pt(e.type):0,startMs:St(e.startMs)?Number(e.startMs):0,plaintextContent:St(e.plaintextContent)?Nt.fromJSON(e.plaintextContent):void 0,musicTrack:St(e.musicTrack)?It.fromJSON(e.musicTrack):void 0,title:St(e.title)?String(e.title):"",fallback:St(e.fallback)?Nt.fromJSON(e.fallback):void 0}},toJSON:function(e){var t={};return void 0!==e.type&&(t.type=function(e){switch(e){case ht.UNKNOWN:return"UNKNOWN";case ht.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case ht.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?Nt.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?It.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?Nt.toJSON(e.fallback):void 0),t},fromPartial:function(e){var t,a,n,r={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return r.type=null!==(t=e.type)&&void 0!==t?t:0,r.startMs=null!==(a=e.startMs)&&void 0!==a?a:0,r.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?Nt.fromPartial(e.plaintextContent):void 0,r.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?It.fromPartial(e.musicTrack):void 0,r.title=null!==(n=e.title)&&void 0!==n?n:"",r.fallback=void 0!==e.fallback&&null!==e.fallback?Nt.fromPartial(e.fallback):void 0,r}};var Nt={encode:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et().Writer.create(),n=kt(e.plaintext);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.uint32(10).string(r)}}catch(e){n.e(e)}finally{n.f()}return a},decode:function(e,t){for(var a=e instanceof Et().Reader?e:new(Et().Reader)(e),n=void 0===t?a.len:a.pos+t,r={plaintext:[]};a.pos<n;){var i=a.uint32();if(i>>>3==1)r.plaintext.push(a.string());else a.skipType(7&i)}return r},fromJSON:function(e){return{plaintext:Array.isArray(null==e?void 0:e.plaintext)?e.plaintext.map((function(e){return String(e)})):[]}},toJSON:function(e){var t={};return e.plaintext?t.plaintext=e.plaintext.map((function(e){return e})):t.plaintext=[],t},fromPartial:function(e){var t,a={plaintext:[]};return a.plaintext=(null===(t=e.plaintext)||void 0===t?void 0:t.map((function(e){return e})))||[],a}};var It={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et().Writer.create();return""!==e.uri&&t.uint32(10).string(e.uri),t},decode:function(e,t){for(var a=e instanceof Et().Reader?e:new(Et().Reader)(e),n=void 0===t?a.len:a.pos+t,r={uri:""};a.pos<n;){var i=a.uint32();if(i>>>3==1)r.uri=a.string();else a.skipType(7&i)}return r},fromJSON:function(e){return{uri:St(e.uri)?String(e.uri):""}},toJSON:function(e){var t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial:function(e){var t,a={uri:""};return a.uri=null!==(t=e.uri)&&void 0!==t?t:"",a}};function St(e){return null!=e}function xt(e){var t,a,n;return e.type===ht.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:(null===(a=e.fallback)||void 0===a?void 0:a.plaintext)||[],trackUri:null===(n=e.musicTrack)||void 0===n?void 0:n.uri}:{type:"text",startMs:e.startMs,content:(null===(t=e.plaintextContent)||void 0===t?void 0:t.plaintext)||[]}}function wt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,W.Z)(H().mark((function e(t){var a,n,r,i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{});case 3:if(!(a=e.sent).ok||!a.body){e.next=11;break}return e.next=7,a.arrayBuffer();case 7:return n=e.sent,r=Ct(new Uint8Array(n)),i=r.sections.map(xt),e.abrupt("return",i);case 11:return e.abrupt("return",null);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}Et().util.Long!==gt()&&(Et().util.Long=gt(),Et().configure());var Dt=function(e){var t=e.areHTMLDescriptionsEnabled,a=e.contentInformation,i=e.description,l=e.hasDescription,o=e.hasMusicAndTalkSegements,c=e.htmlDescription,s=e.onExpanded,u=e.onDescriptionTimestampClick,m=e.onTranscriptTimestampClick,p=e.playability,v=e.segmentCount,f=e.showUrl,y=e.transcript,E=e.transcriptEnabled,k=e.uri,b=e.spec,h=(0,R.$P)(),P=(0,r.useMemo)((function(){return b.descriptionSectionFactory()}),[b]),C=(0,r.useMemo)((function(){return P.trackListFactory()}),[P]),T=(0,r.useState)(null),N=(0,n.Z)(T,2),I=N[0],S=N[1],x=(0,r.useCallback)(function(){var e=(0,W.Z)(H().mark((function e(t){var a;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt(t);case 2:a=e.sent,S(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);(0,r.useEffect)((function(){y&&y.length>0&&x(y[0].cdnUrl)}),[x,y]);var w=function(e){return r.createElement(r.Fragment,null,r.createElement(_e,{hasDescription:l,contentInformation:a,onTimeStampClick:u,onExpanded:s,description:i,areHTMLDescriptionsEnabled:t,htmlDescription:c,playability:p,showHeader:e,spec:P}),o&&r.createElement(R.Nh,{spec:C},r.createElement(vt,{segmentCount:v,uri:k})),f&&r.createElement(g.P,{buttonSize:"sm",className:he,href:f,component:_.Z,onClick:function(){h.logInteraction(P.allEpisodesLinkFactory().hitUiNavigate({destination:f}))}},d.ag.get("episode.see_all_episodes")),r.createElement(ye,{uri:k}))};return r.createElement(r.Fragment,null,E&&y&&(null==y?void 0:y.length)>0?r.createElement(Ve,{transcriptSections:I,descriptionContent:w(!1),transcriptContent:r.createElement(je,{transcriptSections:I||[],onTimeStampClick:m,episodeUri:k}),spec:b}):w(!0))},Mt=a(88435),At=a(87093),Rt="activation-trigger-mme",Lt=function(e){var t=e.episodeUri,a=e.showUri,n=e.isLocked,i=e.isPlaying,l=e.isPlayDisabled,c=e.playButtonPlayLabel,s=e.playButtonPauseLabel,u=e.onClick,d=(0,At.E)();if((0,Z.g)())return r.createElement(K.JM,{size:K.qE.lg,onClick:u,isPlaying:i,disabled:l,locked:n,ariaPlayLabel:c,ariaPauseLabel:s});var m=r.createElement(Mt.l,{showUri:a,enabled:n,renderInline:!1},r.createElement(K.JM,{size:K.qE.lg,onClick:u,isPlaying:i,disabled:l,locked:n,ariaPlayLabel:c,ariaPauseLabel:s}));return d?r.createElement(Ge.D,{id:Rt,targetURI:o().from(t),fadeOut:!0},m):m},Ot=a(74414),Bt=a(31990);const Ft="o6AdXY67I_0xmTg8LBCI",_t="MMZAjWZzcPpNIE06SNuf",Zt="Ccgbgvk9PwclKl5rA6Zj",Kt="NHVXJRN6IZANogQjMWei",zt="orBUEK6aY0SZVOnrDerw",Wt="ym1d5PDeTaJLIK0SspBF",qt="Hko6tpIRefr4NKiTEemO",Ht="ptUwXq9IK8IQAOE2UiDA",Xt="mpyCCCudeQ3uBmgrSAcA";var Jt=function(e){var t=e.cardHeaderText,a=e.cardBodyText,n=e.buttonText,i=e.buttonTarget;return(0,c.W6)(Be.Xd)?r.createElement("div",{className:qt},r.createElement("div",{className:Ht},r.createElement(X.D,{variant:"balladBold",semanticColor:"textBase"},t),r.createElement(X.D,{semanticColor:"textBase"},a)),r.createElement(Y.D,{buttonSize:"sm",colorSet:"invertedLight",href:o().from(i).toURLPath(!0),component:_.Z},n)):null},Yt=function(e){var t=e.areHTMLDescriptionsEnabled,a=e.contentInformation,n=e.description,i=e.hasDescription,l=e.htmlDescription,o=e.onExpanded,c=e.onTimeStampClick,s=e.playability,u=e.showHeader,m=(i||a)&&(void 0===u||u);return r.createElement(r.Fragment,null,m&&r.createElement(X.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Zt},d.ag.get("episode.description-title")),a&&r.createElement(Jt,{cardHeaderText:a.cardHeaderText,cardBodyText:a.cardBodyText,buttonText:a.buttonText,buttonTarget:a.buttonTarget}),i&&r.createElement(Oe.o,{className:_t,onTimeStampClick:c,maxLines:4,onExpanded:o,content:(n||"").trim(),htmlContent:t&&l?l:void 0,enableTimestamps:s.playable}))},Vt=function(e){var t,a=e.areHTMLDescriptionsEnabled,n=e.contentInformation,i=e.description,l=e.hasDescription,o=e.htmlDescription,c=e.onExpanded,s=e.onTimeStampClick,u=e.playability,m=e.showUrl,p=e.uri,v=e.seeAllButtonClick;return t=!0,r.createElement(r.Fragment,null,r.createElement(Yt,{hasDescription:l,contentInformation:n,onTimeStampClick:s,onExpanded:c,description:i,areHTMLDescriptionsEnabled:a,htmlDescription:o,playability:u,showHeader:t}),m&&r.createElement(g.P,{onClick:v,buttonSize:"sm",className:Kt,href:m,component:_.Z},d.ag.get("episode.see_all_episodes")),r.createElement(ye,{uri:p}))},Gt=a(82627),Qt="activation-trigger-mme",jt=function(e){var t=e.episodeUri,a=e.showUri,n=e.isLocked,i=e.isPlaying,l=e.isPlayDisabled,c=e.playButtonPlayLabel,s=e.playButtonPauseLabel,u=e.onClick,d=(0,At.E)(),m=r.createElement(Mt.l,{showUri:a,enabled:n,renderInline:!1},r.createElement(Gt.f,{size:"lg",onClick:u,isPlaying:i,disabled:l,locked:n,ariaPlayLabel:c,ariaPauseLabel:s}));return d?r.createElement(Ge.D,{id:Qt,targetURI:o().from(t),fadeOut:!0},m):m},$t=a(56802),ea=a(80219),ta=a(61901),aa=a(53538),na=a(23716),ra=a(69691),ia=a(37483),la=a(89744),oa=a(95134),ca=a(20246),sa=a(87257),ua=a(52759),da=function(e){var t,a,i,l,o=e.podcastShort,c=e.onPlayEpisode,s=e.isPlaying,u=e.isActive,m=e.isFullyPlayed,p=e.setIsFullyPlayed,v=e.backgroundColor,g=e.isLocked,y=e.onDownloadClick,h=e.onContextMenuClick,P=o.uri,C=o.playedState,T=o.contentRating,N=o.playability,I=(0,f.I0)(),S=(0,ua.z)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===P})),x=(0,n.Z)(S,1)[0],U=(0,M.Y)((function(e){return null==e?void 0:e.duration})),D=(0,B.r)({contentRating:null==T?void 0:T.label}),A=D.badges,R=D.hasBadges,L=(0,r.useCallback)((function(e){!N.playable&&A.nineteen&&(e.stopPropagation(),I((0,E.RM)(P||"")))}),[P,N.playable,A.nineteen,I]),F=!g&&!o.playability.playable,_=d.ag.get("tracklist.a11y.play",o.name,null===(t=o.podcast)||void 0===t?void 0:t.name),Z=d.ag.get("tracklist.a11y.pause",o.name,null===(a=o.podcast)||void 0===a?void 0:a.name),K=null===(i=o.podcast)||void 0===i?void 0:i.uri;return r.createElement(k.o,{backgroundColor:v},r.createElement("div",{className:Xt},R&&r.createElement(oa.g,null,A.nineteen&&r.createElement(w.X,{className:zt,size:16}),A.explicit?r.createElement(sa.N,null):null),r.createElement(k.F,null,r.createElement(O.E,{size:O.$.LARGE,fullyPlayed:m,durationMs:u&&U?U:o.duration.milliseconds,releaseDate:fa(null===(l=o.releaseDate)||void 0===l?void 0:l.isoString),resumePositionMs:C.playPositionMilliseconds,isPlaying:s,position:u&&x||void 0}))),r.createElement(k.F,null,r.createElement("div",{onClick:L},r.createElement(jt,{episodeUri:o.uri,showUri:K,isLocked:g,onClick:function(){c(C.playPositionMilliseconds,!1)},isPlaying:s,isPlayDisabled:F,playButtonPlayLabel:_,playButtonPauseLabel:Z})),!g&&r.createElement(ia.p,{onClick:y,uri:o.uri,showUri:K}),r.createElement(ca.y,{onShow:h,menu:r.createElement(la.v,{uri:o.uri,sharingInfo:o.sharingInfo,showUri:K,contextUri:o.uri,isPlayed:m,onMarkAsPlayed:p,userCreated:o.userCreated})},r.createElement(b.z,{label:d.ag.get("more.label.context",o.name)}))))},ma=a(91355);var pa=function(e){var t,a=e.podcastShort,n=e.isFullyPlayed,i=e.setIsFullyPlayed,l=e.backgroundColor,o=e.spec,c=a.uri,s=a.name,u=a.sharingInfo,m=a.playedState,p=a.episodeType,v=a.releaseDate,f=a.userCreated,g=(0,R.$P)(),y=function(e,t,a,n,i){var l=t===L.Wf.Episode;return(0,ma.G3)(e,n,a,i)?r.createElement(ma.Fg,{isMusicAndTalk:l}):l?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(c,p||L.Wf.Unknown,m.playPositionMilliseconds,fa(null==v?void 0:v.isoString),m.state===L.sY.Completed),E=null===(t=a.podcast)||void 0===t?void 0:t.uri;return r.createElement(P.gF,{backgroundColor:l},r.createElement(C.W,null,r.createElement(T.i,{text:a.name,dragUri:c,dragLabel:a.name})),r.createElement("div",{className:Wt},(null==f?void 0:f.userUri)&&r.createElement(x._,{menu:r.createElement(la.v,{uri:a.uri,sharingInfo:a.sharingInfo,showUri:E,contextUri:a.uri,isPlayed:n,onMarkAsPlayed:i,userCreated:f})},r.createElement(P.Oe,{loading:"eager",name:a.name,images:a.coverArt,placeholderType:"episode",shape:P.Kc.ROUNDED_CORNERS}))),r.createElement(P.sP,null,r.createElement(P.dy,{small:!0,uppercase:!0},y),(null==f?void 0:f.userUri)&&r.createElement(x._,{menu:r.createElement(la.v,{uri:c,sharingInfo:u,showUri:E,contextUri:c,isPlayed:n,onMarkAsPlayed:i,userCreated:f})},r.createElement(P.xd,{dragUri:c,dragLabel:s},s)),(null==f?void 0:f.userUri)&&r.createElement(x._,{menu:r.createElement(la.v,{uri:a.uri,sharingInfo:a.sharingInfo,showUri:E,contextUri:a.uri,isPlayed:n,onMarkAsPlayed:i,userCreated:f})},r.createElement(N.Z,{onClick:function(){var e,t=o.hitUiNavigate({destination:null!==(e=null==f?void 0:f.userUri)&&void 0!==e?e:""});g.logInteraction(t)},to:f.userUri},r.createElement(P.dy,{large:!0,bold:!0},r.createElement("span",{"data-testid":"showTitle"},null==f?void 0:f.displayName))))))},va=function(e){var t,a,i,l,s=e.podcastShort,u=s.uri,v=s.episodeType,f=s.description,g=s.htmlDescription,y=s.podcastSubscription,E=s.segmentsCount,k=s.podcast,b=s.contentInformation,h=s.playedState,P=s.coverArt,C=s.userCreated,T=(0,R.fU)(Bt.createDesktopPodcastShortEventFactory,{data:{uri:u}}).spec,N=r.useMemo((function(){return T.userProfileLinkFactory({uri:u})}),[T,u]),I=r.useMemo((function(){return T.actionBarFactory()}),[T]),S=(0,r.useState)(h.state===L.sY.Completed),x=(0,n.Z)(S,2),w=x[0],U=x[1],A=(0,na.g)(),O=(0,$t.o)(),B=(0,c.W6)(Be.Cz),F=void 0!==E&&E>0,_=(0,Z.g)(),K=(0,D.n)({uri:u},{featureIdentifier:"episode"}),z=K.triggerPlay,W=K.togglePlay,q=K.isActive,H=(0,ra.$o)(u),X=H.isPlaying,J=H.isActive,Y=P[0].url,V=(0,ta.Zj)(Y||null),G=(0,M.Y)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),Q=(0,At.E)(),j=(null==y?void 0:y.isPaywalled)&&!y.isUserSubscribed,$=(0,ea.s)(s,k),ee=(0,R.$P)(),te=(0,r.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,n=function(){G?A.resume():A.pause()};if(!j){var r="play";if(!X||0!==e&&t||(r="pause"),O({intent:r,targetUri:u,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),v===L.Wf.Episode&&Q)p.y.set((function(){return{triggerId:a||Qt,triggerAction:null}}));else if(q&&!t)if(_)n();else{var i=(0,aa.aK)({isPlaying:X,isActive:J,spec:T.actionBarFactory().playButtonFactory(),logger:ee,uri:u});W({loggingParams:i})}else J?n():_?$({seekTo:e}):z({seekTo:e})}}),[j,X,O,u,J,T,ee,W,v,Q,q,G,A,_,$,z]),ae=(0,r.useCallback)((function(){(0,aa.qq)(I,ee)}),[I,ee]),ne=(0,r.useCallback)((function(e,t){(0,aa.l7)(t,I.downloadButtonFactory(),ee,u)}),[ee,u,I]),re=(0,r.useCallback)((function(){O({intent:"expand-description",type:"click"})}),[O]),ie=(0,r.useCallback)((function(){var e,t=null!==(e=null==C?void 0:C.userUri)&&void 0!==e?e:"",a=T.seeAllEpisodesButtonFactory({uri:t}).hitUiNavigate({destination:t});ee.logInteraction(a)}),[C,ee,T]);(0,r.useEffect)((function(){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=s.duration.milliseconds&&te(a)}}),[te,s.duration.milliseconds]);var le=!!f||B&&!!g,oe=null===(t=s.podcast)||void 0===t?void 0:t.uri,ce=null===(a=o().from(oe))||void 0===a?void 0:a.toURLPath(!0);return r.createElement("section",{"data-testid":"episode",className:Ft},r.createElement(m.$,null,d.ag.get("podcasts.episode.seo.title",{name:s.name,show:null!==(i=null===(l=s.podcast)||void 0===l?void 0:l.name)&&void 0!==i?i:""})),r.createElement(pa,{podcastShort:s,isFullyPlayed:w,setIsFullyPlayed:U,backgroundColor:V,spec:N}),r.createElement(da,{podcastShort:s,onPlayEpisode:te,isPlaying:X,isActive:J||q,isFullyPlayed:w,setIsFullyPlayed:U,backgroundColor:V,isLocked:!!j,onContextMenuClick:ae,onDownloadClick:ne}),r.createElement("div",{className:"contentSpacing"},r.createElement(Vt,{seeAllButtonClick:ie,hasDescription:le,contentInformation:b,onTimeStampClick:te,onExpanded:re,description:s.description,areHTMLDescriptionsEnabled:B,htmlDescription:s.htmlDescription,playability:s.playability,hasMusicAndTalkSegements:F,segmentCount:E,uri:s.uri,showUrl:ce})))};function fa(e){return(null==e?void 0:e.replace(/T.*/,""))||""}var ga=a(11486),ya=a(52404),Ea=a(86649),ka=a(87834),ba=a(51871),ha=a(25988),Pa=a(44065),Ca=function(e){var t,a,i,l,o=e.episode,c=e.onPlayEpisode,s=e.isPlaying,u=e.isActive,m=e.isFullyPlayed,p=e.setIsFullyPlayed,v=e.backgroundColor,g=e.isLocked,y=e.spec,h=o.uri,P=o.playedState,C=o.contentRating,T=o.playability,N=(0,R.$P)(),I=(0,f.I0)(),S=(0,ua.z)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===h})),x=(0,n.Z)(S,1)[0],U=(0,M.Y)((function(e){return null==e?void 0:e.duration})),D=(0,B.r)({contentRating:null==C?void 0:C.label}).badges,A=(0,r.useCallback)((function(e){!T.playable&&D.nineteen&&(e.stopPropagation(),I((0,E.RM)(h||"")))}),[h,T.playable,D.nineteen,I]),L=(0,r.useCallback)((function(){var e=y.contextMenuButtonFactory().hitUiReveal();N.logInteraction(e)}),[N,y]),F=(0,r.useCallback)((function(e,t){(0,aa.l7)(t,y.downloadButtonFactory(),N,h)}),[N,y,h]),_=(0,r.useCallback)((function(e){var t=y.saveButtonFactory();N.logInteraction(e?t.hitLike({itemToBeLiked:h}):t.hitRemoveLike({itemNoLongerLiked:h}))}),[N,y,h]),Z=!g&&!o.playability.playable,K=d.ag.get("tracklist.a11y.play",o.name,null===(t=o.podcast)||void 0===t?void 0:t.name),z=d.ag.get("tracklist.a11y.pause",o.name,null===(a=o.podcast)||void 0===a?void 0:a.name),W=null===(i=o.podcast)||void 0===i?void 0:i.uri;return r.createElement(k.o,{backgroundColor:v},r.createElement(k.F,null,D.nineteen&&r.createElement(w.X,{className:Pe,size:16}),r.createElement(O.E,{size:O.$.LARGE,fullyPlayed:m,durationMs:u&&U?U:o.duration.milliseconds,releaseDate:Sa(null===(l=o.releaseDate)||void 0===l?void 0:l.isoString),resumePositionMs:P.playPositionMilliseconds,isPlaying:s,position:u&&x||void 0})),r.createElement(k.F,null,r.createElement("div",{onClick:A},r.createElement(Lt,{episodeUri:o.uri,showUri:W,isLocked:g,onClick:function(){c(P.playPositionMilliseconds)},isPlaying:s,isPlayDisabled:Z,playButtonPlayLabel:K,playButtonPauseLabel:z})),!g&&r.createElement(ia.p,{uri:o.uri,showUri:W,onClick:F}),r.createElement(ba.w,{uri:o.uri,size:Pa.q.md,onClick:_}),r.createElement(ca.y,{onShow:L,menu:r.createElement(ha.k,{uri:o.uri,sharingInfo:o.sharingInfo,showUri:W,contextUri:o.uri,isPlayed:m,onMarkAsPlayed:p})},r.createElement(b.z,{label:d.ag.get("more.label.context",o.name)}))))};var Ta=function(e){var t,a,n=e.episode,i=e.isFullyPlayed,l=e.setIsFullyPlayed,c=e.backgroundColor,s=e.spec,u=n.uri,m=n.name,p=n.sharingInfo,v=n.playedState,f=n.episodeType,g=n.releaseDate,y=(0,R.$P)(),E=function(e,t,a,n,i){var l=t===L.Wf.Episode;return(0,ma.G3)(e,n,a,i)?r.createElement(ma.Fg,{isMusicAndTalk:l}):l?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(u,f||L.Wf.Unknown,v.playPositionMilliseconds,Sa(null==g?void 0:g.isoString),v.state===L.sY.Completed),k=null===(t=n.podcast)||void 0===t?void 0:t.uri,b=function(e){var t=o().from(e),a=o().hexToId((null==t?void 0:t.id)||"");return"/show/".concat(a)}(k),h=(0,r.useCallback)((function(){y.logInteraction(s.podcastLinkFactory().hitUiNavigate({destination:b}))}),[y,b,s]);return r.createElement(P.gF,{backgroundColor:c},r.createElement(C.W,null,r.createElement(T.i,{text:n.name,dragUri:u,dragLabel:n.name})),r.createElement("div",{className:Ce},r.createElement(x._,{menu:r.createElement(ha.k,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:k,contextUri:n.uri,isPlayed:i,onMarkAsPlayed:l})},r.createElement(P.Oe,{loading:"eager",name:n.name,images:n.coverArt,placeholderType:"episode",shape:P.Kc.ROUNDED_CORNERS}))),r.createElement(P.sP,null,r.createElement(P.dy,{small:!0,uppercase:!0},E),r.createElement(x._,{menu:r.createElement(ha.k,{uri:u,sharingInfo:p,showUri:k,contextUri:u,isPlayed:i,onMarkAsPlayed:l})},r.createElement(P.xd,{dragUri:u,dragLabel:m},r.createElement("span",{"data-testid":"episodeTitle"},m))),r.createElement(x._,{menu:r.createElement(ha.k,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:k,contextUri:n.uri,isPlayed:i,onMarkAsPlayed:l})},r.createElement(P.dy,{large:!0,bold:!0},r.createElement(N.Z,{to:b,onClick:h},r.createElement("span",{"data-testid":"showTitle"},null===(a=n.podcast)||void 0===a?void 0:a.name))))))},Na=function(e){var t,a,i,l,u=e.episode,v=u.uri,f=u.episodeType,g=u.description,y=u.htmlDescription,E=u.podcastSubscription,k=u.segmentsCount,b=u.podcast,h=u.contentInformation,P=u.playedState,C=u.coverArt,T=(0,R.fU)(s.createDesktopEpisodeEventFactory,{data:{uri:v}}),N=T.spec,I=T.logger,S=(0,r.useMemo)((function(){return N.headerFactory()}),[N]),x=(0,r.useMemo)((function(){return N.actionBarFactory()}),[N]),w=(0,r.useState)(P.state===L.sY.Completed),U=(0,n.Z)(w,2),A=U[0],O=U[1],B=(0,na.g)(),F=(0,$t.o)(),_=(0,c.W6)(Be.Cz),K=void 0!==k&&k>0,z=(0,c.W6)(Be.WE,{loadingValue:!1}),W=(0,Z.g)(),q=(0,D.n)({uri:v},{featureIdentifier:"episode"}),H=q.triggerPlay,X=q.togglePlay,J=q.isActive,Y=(0,ra.$o)(v),V=Y.isPlaying,G=Y.isActive,Q=C[0].url,j=(0,ta.Zj)(Q||null),$=(0,M.Y)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),ee=(0,At.E)(),te=E.isPaywalled&&!E.isUserSubscribed,ae=G||J,ne=(0,ea.s)(u,b),re=(0,r.useCallback)((function(e,t,a,n){var r=function(){$?(null==n||n("resume"),B.resume()):(null==n||n("pause"),B.pause())};if(!te){var i="play";if(!V||0!==e&&t||(i="pause"),F({intent:i,targetUri:v,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),f===L.Wf.Episode&&ee)p.y.set((function(){return{triggerId:a||Rt,triggerAction:null}}));else if(J&&!t)W?r():X({loggingParams:null==n?void 0:n()});else if(G&&!t)r();else{var l=null==n?void 0:n("play");W?ne({seekTo:e,loggingParams:l}):H({seekTo:e,loggingParams:l})}}}),[te,V,F,v,f,ee,G,J,W,$,B,X,ne,H]),ie=(0,r.useCallback)((function(e){re(e,!1,void 0,(function(e){var t,a=N.actionBarFactory().playButtonFactory();return t="pause"===e||V?a.hitPause({itemToBePaused:v}):"resume"===e||ae?a.hitResume({itemToBeResumed:v}):a.hitPlay({itemToBePlayed:v}),I.logInteraction(t)}))}),[re,ae,V,I,N,v]),le=(0,r.useCallback)((function(e){re(e,!0,void 0,(function(){return I.logInteraction(N.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:v}))}))}),[re,I,N,v]),oe=(0,r.useCallback)((function(e,t){re(e,!0,t,(function(){return I.logInteraction(N.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:v}))}))}),[re,I,N,v]),ce=(0,r.useCallback)((function(){F({intent:"expand-description",type:"click"})}),[F]);(0,r.useEffect)((function(){if(u){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=u.duration.milliseconds&&re(a,!0)}}}),[u]);var se=!!g||_&&!!y,ue=null===(t=u.podcast)||void 0===t?void 0:t.uri,de=null===(a=o().from(ue))||void 0===a?void 0:a.toURLPath(!0);return r.createElement("section",{"data-testid":"episode",className:Ee},r.createElement(m.$,null,d.ag.get("podcasts.episode.seo.title",{name:u.name,show:null!==(i=null===(l=u.podcast)||void 0===l?void 0:l.name)&&void 0!==i?i:""})),r.createElement(Ta,{episode:u,isFullyPlayed:A,setIsFullyPlayed:O,backgroundColor:j,spec:S}),r.createElement(Ca,{episode:u,onPlayEpisode:ie,isPlaying:V,isActive:ae,isFullyPlayed:A,setIsFullyPlayed:O,backgroundColor:j,isLocked:te,spec:x}),r.createElement("div",{className:"contentSpacing"},r.createElement(Dt,{transcriptEnabled:z,transcript:u.transcript,hasDescription:se,contentInformation:h,onDescriptionTimestampClick:le,onTranscriptTimestampClick:oe,onExpanded:ce,description:u.description,areHTMLDescriptionsEnabled:_,htmlDescription:u.htmlDescription,playability:u.playability,hasMusicAndTalkSegements:K,segmentCount:k,uri:u.uri,showUrl:de,spec:N})))};const Ia=r.memo((function(){var e=(0,i.UO)().episodeId,t=o().episodeURI(e).toURI(),a=(0,c.W6)(Be.uB),n=(0,c.W6)(Be.Nf),l=(0,ya.I)(t,a),s=(0,ga.V)("episode",l);return s?r.createElement(Ot.o,{to:s}):l?(0,Ea.Ey)(l)?r.createElement(r.Suspense,{fallback:null},r.createElement(ka.C,{pageId:u.Wg.PODCAST_EPISODE_AUDIOBOOK,uri:t},r.createElement(me,{chapter:l}))):(0,Ea.Qj)(l)&&n?r.createElement(r.Suspense,{fallback:null},r.createElement(ka.C,{pageId:u.Wg.PODCAST_EPISODE,uri:t},r.createElement(va,{podcastShort:l}))):r.createElement(r.Suspense,{fallback:null},r.createElement(ka.C,{pageId:u.Wg.PODCAST_EPISODE,uri:t},r.createElement(Na,{episode:l}))):r.createElement(v.h,{hasError:!1,errorMessage:d.ag.get("error.not_found.title.podcast")})}));function Sa(e){return(null==e?void 0:e.replace(/T.*/,""))||""}},40080:(e,t,a)=>{a.d(t,{D:()=>r});var n=a(67294);function r(e){var t=(0,n.useRef)();return(0,n.useEffect)((function(){t.current=e}),[e]),t.current}},13759:(e,t,a)=>{a.d(t,{E:()=>M,$:()=>N});var n=a(4942),r=a(67294),i=a(43315),l=(a(41539),a(81299),a(12419),a(15671)),o=a(43144),c=a(60136),s=a(82963),u=a(61120);const d="wIA_5Ypq0rltNPeZQpM4",m="Swi6YtNEFCCVz8l4y75v",p="pklLPOhfigdytL9bPoth",v="sb24Y8kdMZInJ8aI8dXT";function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.Z)(this,a)}}var g=function(e){(0,c.Z)(a,e);var t=f(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,o.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.ariaValueText,a=e.max,n=e.current,i=a&&n?100*Math.min(1,n/a):0,l={transform:"translateX(-".concat(100-i,"%)")},o=t||"".concat(Math.round(i),"%");return r.createElement("div",{className:d,role:"progressbar",tabIndex:0,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":a,"aria-valuetext":o},r.createElement("div",{className:m}),r.createElement("div",{className:p},r.createElement("div",{"data-testid":"progressBarFg",className:v,style:l})))}}]),a}(r.PureComponent);(0,n.Z)(g,"defaultProps",{current:0,max:1});const y=g,E="qfYkuLpETFW3axnfMntO",k="jOd7lbjiyc_kvRJaAbeL",b="_q93agegdE655O5zPz6l",h="z7Yl7CIT1AB0y91f_moh",P="iLIlkUcfIq56KncGtX7u",C="nV50yZ6BR_TIuWP3l7b1",T="qLjIx_SzBEpDRA_q7kxQ";var N,I=a(32667),S=a(28066),x=a(96206),w=a(94184),U=a.n(w),D=a(33953);!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(N||(N={}));var M=function(e){var t=e.resumePositionMs,a=void 0===t?0:t,l=e.releaseDate,o=e.isPlaying,c=e.fullyPlayed,s=e.durationMs,u=e.size,d=void 0===u?N.SMALL:u,m=e.position,p=void 0===m?a:m;return r.createElement("div",{className:U()(E,(0,n.Z)({},k,d===N.LARGE))},l?r.createElement(I.D,{as:"p",variant:"mesto",className:b},(0,i.rL)((0,i.RX)(l))):null,function(){if(c&&!o)return r.createElement("div",{className:P},r.createElement(I.D,{as:"p",variant:"mesto",className:h},x.ag.get("episode.played")),r.createElement(S.N,{iconSize:16,className:T,"aria-hidden":"true"}));if(p>0||o){var e=Math.ceil(Math.max(s-p,0));return r.createElement("div",{className:P},r.createElement(I.D,{as:"p",variant:"mesto",className:h},r.createElement(D.ng,{durationMs:e})))}return r.createElement(I.D,{as:"p",variant:"mesto",className:b},r.createElement(D.nL,{durationMs:s}))}(),!c&&p>0||o?r.createElement("div",{className:C},r.createElement(y,{current:p,max:s,isEnabled:!1})):null)}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map