"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8228],{7106:(e,t,a)=>{a.r(t),a.d(t,{FeatureActivationShelf:()=>Oe});var n=a(67294),r=a(51615),i=a(69518),s=a.n(i),o=a(17728),l=a(96206),c=(a(68309),a(82526),a(41817),a(32667)),u=a(74257),f=a(72603),d=a(28230),h=a(52208),g=a(94184),p=a.n(g),m=a(98522),v=a(89104);const y="uDOC2Oah0jn_p7N7l2Id",b="hwhquP1FOxRcCnf84P2M",j="bijDFKtWL1TJBF7X9Gp3",C="NTywvDEuW1PlcoR__9XV",x="t1SDLPBbSPbfihznNZdi",w="CvyMWBz1l8dSOsf4r_Ha",N="R32cBJPV9ccjWJYS1TLI",S="fzmowfLpLz7UlIyJThU8",E="MIBwSRJ5XZaCw1WWXXBn",k="dEuzpK3s_BmlRiVNFude",O="MVRnUhNC4ZMglLR56YMn",P="xiaMaZPt8ykPGR8gkQ53",L="mwBKJFOe7ee6V2MdmJyB",F="LziKPm9lTkWR0I7zD_rC";var D=a(85893),A=n.memo((function(e){var t=e.image;return(0,D.jsx)("div",{className:j,children:(0,D.jsx)("div",{className:C,children:(0,D.jsx)(v.E,{className:x,src:t,loading:"lazy"})})})})),I=a(4942),_=a(22247),B=a(96001);const R="mKkYwwDvRoTIEnqf9Mlt",T="ES02HhKmADP_AdcKPs1e",Z="IYwEYGRUJ5RTtr0EyBV1",U="YYlv5PB5fGQthi9XzTQg";var z=n.memo((function(e){var t=e.isLoading,a=(0,B.h)("shimmer");return(0,D.jsx)("div",{ref:a,className:p()(C,(0,I.Z)({},U,t))})})),W=n.memo((function(e){var t=e.cardImage,a=e.isLoading;return(0,D.jsxs)("div",{className:p()(b,R),"aria-hidden":!0,children:[(0,D.jsx)("div",{className:j,children:t||(0,D.jsx)(z,{isLoading:a})}),(0,D.jsx)("div",{className:w,children:(0,D.jsxs)("div",{className:N,children:[(0,D.jsx)(_.C,{as:"div",variant:"balladBold",className:T,charCount:10,isLoading:a}),(0,D.jsx)(_.C,{as:"div",variant:"mesto",className:Z,charCount:15,isLoading:a})]})})]})})),M=n.memo((function(e){var t=e.children,a=e.image,n=e.isLoading,r=e.onClick,i=e.id;return n?(0,D.jsx)(W,{isLoading:!0}):(0,D.jsxs)("div",{className:p()(b),onClick:r,children:[(0,D.jsx)(A,{image:a}),(0,D.jsx)("div",{className:w,children:(0,D.jsx)("div",{className:N,children:(0,D.jsxs)("div",{className:S,children:[(0,D.jsx)(m.D,{color:getComputedStyle(document.body).getPropertyValue("--spice-text").trim(),height:"18",className:E}),t]})})}),(0,D.jsx)("div",{"data-testid":i,onClick:r,className:y})]})})),Q="https://newsroom.spotify.com/2021-09-09/get-perfect-song-recommendations-in-the-playlists-you-create-with-enhance/",V=n.memo((function(e){var t=e.isLoading,a=void 0!==t&&t,r=e.spec,i=e.logger,s=(0,h.e)().openURL;(0,n.useEffect)((function(){i.logImpression(r.shelfContainerFactory().enchanceCardFactory().impression())}),[r,i]);var o=(0,n.useCallback)((function(e){e.stopPropagation(),i.logInteraction(r.shelfContainerFactory().enchanceCardFactory().hitNavigateToExternalUri({destination:Q})),s(Q)}),[s,r,i]);return(0,D.jsxs)(M,{image:(0,d.g)("images/feature-activation-shelf-enhance-placeholder.png"),isLoading:a,onClick:o,children:[(0,D.jsx)(c.D,{as:"p",variant:"balladBold",className:k,children:l.ag.get("web-player.feature-activation-shelf.enhance-placeholder.title")}),(0,D.jsx)(c.D,{as:"p",variant:"mesto",className:O,children:l.ag.get("web-player.feature-activation-shelf.enhance.description")}),(0,D.jsx)(u.P,{className:P,buttonSize:"sm",iconLeading:f.e,onClick:o,children:l.ag.get("web-player.feature-activation-shelf.enhance-placeholder.cta")})]})})),J=a(29439),q=a(15861),G=a(87757),H=a.n(G),K=(a(57327),a(41539),a(69826),a(88674),a(17727),a(47941),a(38880),a(89554),a(54747),a(49337),a(33321),a(69070),a(11680)),Y=a(72138),X=a(72989),$=a(9659);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){(0,I.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ae(e){var t;return null!==(t=e.items.filter($.no).find((function(e){return e.isOwnedBySelf})))&&void 0!==t?t:null}var ne={offset:0,limit:50,flatten:!0,sort:{field:$.bD.RELEVANCE,order:$.As.DESC}};function re(){var e=(0,X.o)(),t=(0,K._)(),a=(0,n.useContext)(Y.ZF),r=(0,n.useMemo)((function(){return function(e){return function(){var t=(0,q.Z)(H().mark((function t(a){var n;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,e.getPlaylist(a.uri);case 5:return n=t.sent,t.abrupt("return",n.metadata.hasSpotifyTracks?n:null);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}(a)}),[a]),i=(0,n.useMemo)((function(){return function(e){return function(){var t=(0,q.Z)(H().mark((function t(a){var n,r;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,e.getContextState(a.metadata.uri);case 5:return n=t.sent,r=n.isEnhanced,t.abrupt("return",te(te({},a),{},{isEnhanced:r}));case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)}),[t]),s=(0,n.useState)(null),o=(0,J.Z)(s,2),l=o[0],c=o[1],u=(0,n.useState)(!1),f=(0,J.Z)(u,2),d=f[0],h=f[1],g=(0,n.useState)(null),p=(0,J.Z)(g,2),m=p[0],v=p[1];(0,n.useEffect)((function(){h(!0),e.getContents(ne).then(ae).then(r).then(i).then(c).catch(v).finally((function(){return h(!1)}))}),[e,r,i]);var y=(0,n.useCallback)((function(){return null===l?Promise.reject("No playlist found."):t.getContextState(l.metadata.uri).then((function(e){return t.setIsEnhanced(l.metadata.uri,!e.isEnhanced)}))}),[l,t]);return{loading:d,playlistWithEnhanceState:l,toggleEnhanceState:y,error:m}}var ie=a(15852),se=(a(32564),a(69846)),oe=n.memo((function(e){var t=e.isLoading,a=void 0!==t&&t,r=e.playlist,i=e.toggleEnhanceState,s=e.navigateToPlaylist,o=e.spec,d=e.logger,h=(0,se.U)(r.metadata.uri).isEnhanced;(0,n.useEffect)((function(){d.logImpression(o.shelfContainerFactory().enchanceCardFactory().impression())}),[o,d]);var g=(0,n.useCallback)((function(){d.logInteraction(o.shelfContainerFactory().enchanceCardFactory().hitEnhancePlaylist({playlist:r.metadata.uri})),s(r.metadata.uri),h||setTimeout(i,1e3)}),[i,h,r.metadata.uri,s,d,o]);return(0,D.jsxs)(M,{image:r.metadata.images[0].url,isLoading:a,onClick:g,children:[(0,D.jsx)(c.D,{as:"p",variant:"balladBold",className:k,children:l.ag.get("web-player.feature-activation-shelf.enhance.title",{playlist:r.metadata.name})}),(0,D.jsx)(c.D,{as:"p",variant:"mesto",className:O,children:l.ag.get("web-player.feature-activation-shelf.enhance.description")}),(0,D.jsx)(u.P,{className:p()(P,(0,I.Z)({},L,h)),buttonSize:"sm",iconLeading:f.e,onClick:g,children:h?l.ag.get("web-player.feature-activation-shelf.enhance.cta-enhanced"):l.ag.get("web-player.feature-activation-shelf.enhance.cta")})]})})),le=a(53107),ce=n.memo((function(e){var t=e.isLoading,a=void 0!==t&&t,r=e.spec,i=e.logger,s=(0,n.useContext)(le.O).setVisible;(0,n.useEffect)((function(){i.logImpression(r.shelfContainerFactory().groupSessionsCardFactory().impression())}),[r,i]);var o=function(){i.logInteraction(r.shelfContainerFactory().groupSessionsCardFactory().hitUiReveal()),s(!0)};return(0,D.jsxs)(M,{image:(0,d.g)("images/feature-activation-shelf-group-sessions.png"),isLoading:a,onClick:o,children:[(0,D.jsx)(c.D,{as:"p",variant:"balladBold",className:k,children:l.ag.get("web-player.feature-activation-shelf.group-sessions.title")}),(0,D.jsx)(c.D,{as:"p",variant:"mesto",className:O,children:l.ag.get("web-player.feature-activation-shelf.group-sessions.description")}),(0,D.jsx)(u.P,{className:P,buttonSize:"sm",onClick:o,children:l.ag.get("web-player.feature-activation-shelf.group-sessions.cta")})]})})),ue=a(28066),fe=(a(66992),a(33948),a(96647),a(83710),a(39714),a(75102)),de=a(55400),he=n.memo((function(e){var t,a,i,s,o=e.isLoading,f=void 0!==o&&o,h=e.spec,g=e.logger,m=(0,r.k6)(),v=(t=(0,de.r)(),a=t.settings.values,i=t.setValue,{isAvailable:!!(s=a["audio.play_bitrate_enumeration"])&&(0,fe.kN)(s.toString(),a)&&(0,fe.gj)(a),isEnabled:s===fe.PF.veryhigh.enum.toString(),enableVeryHighQualityAudio:function(){i("audio.play_bitrate_non_metered_enumeration",fe.PF.veryhigh.enum),i("audio.play_bitrate_enumeration",fe.PF.veryhigh.enum)}}),y=v.isAvailable,b=v.isEnabled,j=v.enableVeryHighQualityAudio;(0,n.useEffect)((function(){y&&g.logImpression(h.shelfContainerFactory().audioQualityCardFactory().impression())}),[h,g,y]);var C=function(e){var t="".concat("/preferences").concat(e?"?".concat(e):"");g.logInteraction(h.shelfContainerFactory().audioQualityCardFactory().hitUiNavigate({destination:t})),m.push(t)},x=function(){g.logInteraction(h.shelfContainerFactory().audioQualityCardFactory().hitSetSettingField()),j(),C("feature-activation")};return y?(0,D.jsxs)(M,{image:(0,d.g)("images/feature-activation-shelf-audio-quality.png"),isLoading:f,id:"audio-quality-card",onClick:b?function(){return C()}:x,children:[(0,D.jsx)(c.D,{as:"p",variant:"balladBold",className:k,children:l.ag.get("web-player.feature-activation-shelf.audio-quality.title")}),(0,D.jsx)(c.D,{as:"p",variant:"mesto",className:O,children:l.ag.get("web-player.feature-activation-shelf.audio-quality.description")}),(0,D.jsx)(u.P,{className:p()(P,(0,I.Z)({},F,b)),onClick:b?function(){return C()}:x,buttonSize:"sm",iconLeading:b?ue.N:void 0,children:b?l.ag.get("web-player.feature-activation-shelf.audio-quality.cta_alt"):l.ag.get("web-player.feature-activation-shelf.audio-quality.cta")})]}):null})),ge=(a(79753),a(24391)),pe=a(13218),me=a(27937),ve=a(85951);const ye="RvSsw_CWBCtHhojt6bY_";var be=n.memo(n.forwardRef((function(e,t){var a=e.className,r=e.render,i=(0,n.useRef)(null),s=(0,n.useState)({columnCount:-1,columnWidth:-1,gridGap:24}),o=(0,J.Z)(s,2),l=o[0],c=o[1];(0,n.useImperativeHandle)(t,(function(){return i.current}));var u=(0,n.useCallback)((function(){var e=i.current;if(e&&e.parentElement){var t=e.parentElement.offsetWidth,a=function(e){return e<700?1:e<1e3?2:3}(t),n=function(e){return 2===e?12:3===e?18:24}(a),r=Math.floor((t-(a-1)*n)/a);c({columnCount:a,columnWidth:r,gridGap:n})}}),[]);(0,ve.y)({refOrElement:i,observeOnly:"width",onResize:function(){u()}}),(0,n.useLayoutEffect)((function(){u()}),[u]);var f={"--column-width":"".concat(l.columnWidth,"px"),"--column-count":"".concat(l.columnCount),"--grid-gap":"".concat(l.gridGap,"px")};return(0,D.jsx)("div",{ref:i,className:p()(ye,a),style:f,children:r(l)})})));be.displayName="GridContainer";const je="QD8u8vCxcfIpJC14IBqg",Ce="H4yLgZB7CQJlPH3u5Qbi",xe="jNsZ_X7AAz13oxU5Sx0G";function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(Object(a),!0).forEach((function(t){(0,I.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Se=n.memo((function(e){var t=e.title,a=e.children,r=e.seeAllUri,i=e.className,s=void 0===i?"":i,o=e.testId,l=void 0===o?"component":o,c=e.seeAllLabel,u=e.onClickShelfTitle,f=e.onClickShelfSeeAll,d=e.elementRef,h=(0,n.useCallback)((function(e){var t=e.columnCount;return(0,D.jsx)(D.Fragment,{children:Array.isArray(a)&&a.filter((function(e,a){return a<t}))})}),[a]);return Array.isArray(a)&&0===a.length?null:(0,D.jsxs)("section",{ref:d,className:p()(s,je),"data-testid":"".concat(l,"-shelf"),"aria-label":t,children:[(0,D.jsx)("div",{className:Ce,children:(0,D.jsx)(pe.r,{title:t,seeAllUri:r,seeAllLabel:c,hasMoreElements:!0,onClickTitle:u,onClickSeeAll:f})}),(0,D.jsx)(be,{className:p()(xe),render:h})]})}));Se.displayName="BaseShelf";var Ee=function(e){return(0,D.jsx)(ge.L,{onError:function(e){(0,me.vK)(e,"Shelf")},children:(0,D.jsx)(Se,Ne({},e))})},ke="https://support.spotify.com/us/article/premium-plans/",Oe=n.memo((function(){var e=re(),t=e.loading,a=e.error,i=e.toggleEnhanceState,c=e.playlistWithEnhanceState,u=(0,r.k6)(),f=(0,ie.fU)(o.createDesktopFeatureActivationShelfEventFactory,{}),d=f.spec,h=f.logger;(0,n.useEffect)((function(){h.logImpression(d.shelfContainerFactory().impression())}),[d,h]);var g=(0,n.useCallback)((function(e){var t=s().from(e).toURLPath(!0);u.push(t)}),[u]),p=null!==c&&!a,m=(0,n.useCallback)((function(){h.logInteraction(d.shelfTitleFactory().hitNavigateToExternalUri({destination:ke}))}),[d,h]),v=(0,n.useCallback)((function(){h.logInteraction(d.seeAllFeaturesFactory().hitNavigateToExternalUri({destination:ke}))}),[d,h]);return(0,D.jsxs)(Ee,{seeAllUri:ke,title:l.ag.get("web-player.feature-activation-shelf.title"),seeAllLabel:l.ag.get("web-player.feature-activation-shelf.see_more"),onClickShelfTitle:m,onClickShelfSeeAll:v,children:[p?(0,D.jsx)(oe,{playlist:c,isLoading:t,toggleEnhanceState:i,navigateToPlaylist:g,spec:d,logger:h}):(0,D.jsx)(V,{isLoading:t,spec:d,logger:h}),(0,D.jsx)(ce,{isLoading:t,spec:d,logger:h}),(0,D.jsx)(he,{isLoading:t,spec:d,logger:h})]})}))}}]);
//# sourceMappingURL=xpui-feature-activation-shelf.js.map