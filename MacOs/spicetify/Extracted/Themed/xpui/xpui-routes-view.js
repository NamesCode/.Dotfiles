"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[6450],{401:(e,n,t)=>{t.r(n),t.d(n,{DISALLOWED_VIEWS:()=>Y,View:()=>Z,default:()=>z});var s=t(59496),r=t(84875),i=t.n(r),a=t(77646),o=t(377),l=t(25007),c=t(25937),u=t(74307),d=t(71055),m=t(30554),g=t(77003),h=t(16001),x=t(31716),v=t(91393),f=t(68415),p=t(21855),j=t(4763),b=t(64266),y=t(7184),w=t(29009),k=t(88778),A=t(83600),I=t(33428),N=t(91800);const P="EPMDgp7znILo0hvyirzv",D="noUm6pjQ6KWq7mVxYDor",C="PqnKjxzJ1Zvr9qKRlRbO",E="uuBQS9Ym_VPmAQrLhPQb";var M=t(4637);const F=e=>(0,A.W6)(I.sE)?(0,M.jsxs)(N.Z,{to:e.uri,target:"_blank",className:P,children:[(0,M.jsx)("div",{className:D}),(0,M.jsx)(k.D,{className:C,as:"h2",variant:"alto",children:e.label}),(0,M.jsx)(k.D,{className:E,as:"p",variant:"mesto",children:e.tagline})]}):null,L=e=>(0,M.jsx)(s.Suspense,{fallback:null,children:(0,M.jsx)(F,{...e})}),q=e=>e.id?.startsWith("scc-corona"),W=({spaces:e,viewName:n,viewId:t,isAnonymous:r})=>{const i=(0,s.useCallback)(((e,n)=>{const s=((e,n)=>{let{uri:t}=e;return e.href.includes("https://api.spotify.com/v1/views/")&&(t=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),"hub-browse-grid"===n&&(t=t.replace(":view:",":genre:"))),t})(e,t);return(0,M.jsx)(b.q,{index:n,entity:{...e,uri:s}},e.href)}),[t]),a=(0,s.useCallback)(((e,n)=>(0,M.jsx)(w.JL,{value:"card",index:n,children:(0,M.jsx)(b.q,{index:n,entity:e})},e.uri||n)),[]),o=(0,s.useCallback)(((e,n)=>"link"===e.type?i(e,n):a(e,n)),[a,i]),l=(0,s.useCallback)((e=>!!q(e)||!((e=>"HEADER"===e.rendering)(e)||0===e.content.total||r&&"uniquely-yours-shelf"===e.id)),[r]);return e&&0!==e.length?e[0].content?(0,M.jsx)(M.Fragment,{children:e.filter(l).map(((e,n)=>{const s=e.content&&(0,h.p)((0,h.S)(e.href));if(q(e)){const n=e.content.items[0];return n&&n.name&&n.description&&n.href?(0,M.jsx)(L,{label:n.name,tagline:n.description,uri:n.href},"corona-banner"):null}return(0,M.jsx)(w.JL,{value:"headered-grid",index:n,children:(0,M.jsx)(y.q,{total:e.content.total,seeAllUri:s,pageId:t,title:e.name,tagline:e.tag_line||void 0,index:n,id:e.id,children:e.content.items.map(o)})},e.id)}))}):(0,M.jsx)(w.JL,{value:"headered-grid",children:(0,M.jsx)(y.q,{showAll:!0,title:n,total:e?.length||0,index:0,id:t??"spaces-see-all-grid",children:e?.map(o)})}):null};var S=t(38550);const _="XD65NhAD6ebYxMaW9cZZ",G="AJqEY1gblQDvIgjU0jAH",Q="Ft1cMGlqDsCbqmXQyeKN",R="zlBEnsMyvUhuHSEtst4Q",U="INYpiFRlwWIZ0vH30xW2",V=e=>"HEADER"===e.rendering,H=(e,n=[],t)=>{if(!e)return(0,M.jsx)("div",{className:U});const s=n.filter((e=>"background"===e.name));return(0,M.jsxs)(v.gF,{backgroundImages:s,backgroundColor:t,size:0===s.length?v.fR.SMALL:v.fR.DEFAULT,children:[(0,M.jsx)(f.W,{children:(0,M.jsx)(p.i,{text:e})}),(0,M.jsx)(v.sP,{children:(0,M.jsx)(v.xd,{children:e})})]})},T=e=>{const{title:n,images:t,backgroundColor:s}=e;return(0,M.jsx)(M.Fragment,{children:H(n,t,s)})},Y=["ginger-genre-affinity"],Z=s.memo((function({viewData:e,viewId:n,backgroundColor:t,isFullyLoaded:r,isGenre:a,isAnonymous:d,getNextPage:h}){const f=e?.name,{spec:p,UBIFragment:b}=(0,g.fU)(o.createDesktopGenreEventFactory,{data:{identifier:n,uri:`spotify:genre:${n}`}}),y=(0,s.useCallback)((()=>Y.some((n=>e?.href?.includes(n)))),[e]),w=(0,s.useCallback)((()=>{if(!e)return;const n=y();r||n||h()}),[e,y,r,h]),k=(0,s.useMemo)((()=>{const{content:{items:n=[]}={}}=e||{},t=n.filter(V);return t.length>0?t[0]:null}),[e]),A=(0,s.useMemo)((()=>{const{name:n}=e||{};return k?k.name:t&&n}),[t,k,e]),I=(0,s.useMemo)((()=>a||Boolean(A)),[a,A]),N=(0,s.useMemo)((()=>!(!e||!Array.isArray(e.content.items))&&I),[I,e]),P=(0,v.oX)(n)?(0,M.jsx)(v.YD,{isAnonymous:d}):(0,M.jsx)(T,{title:k?.name||A,images:k?.images||[],backgroundColor:t}),D=e?.content.items,C=(0,s.useMemo)((()=>p.shelvesFactory()),[p]);return e?(0,M.jsxs)(M.Fragment,{children:[f?(0,M.jsx)(x.$,{children:f}):null,(0,M.jsx)(m.C,{onReachBottom:w,children:(0,M.jsxs)("section",{className:_,children:[N&&(0,M.jsx)(u.H,{color:t||null}),I?P:(0,M.jsx)("div",{className:U}),(0,M.jsxs)("div",{className:Q,children:[I&&P&&(0,M.jsx)(c.I,{backgroundColor:t}),(0,M.jsx)("div",{className:i()(G,"contentSpacing",{[R]:a}),children:(0,M.jsx)(b,{spec:C,children:(0,M.jsx)(W,{spaces:D,viewName:e.name,viewId:n,isAnonymous:d})})})]})]})})]}):(0,M.jsx)(j.h,{hasError:!1,errorMessage:l.ag.get("error.not_found.title.page")})})),z=s.memo((function({viewId:e}){const{isAnonymous:n}=(0,a.v9)(S.Gg),{view:t,getNextPage:s}=(0,d.P)(e),r=!t||null===t.content.next,i=e.endsWith("-page")?e:`${e}-page`,o=(0,a.v9)((e=>e.browse.allItemsStyle?.[i]?.color||"")),l=n=>n.viewId===e||"href"in n&&n.href===(0,h.p)(e),c=(0,a.v9)((e=>e?.browse?.browseAll?.items.some(l)||e?.browse?.topGenres?.items.some(l)||!!o));return(0,M.jsx)(Z,{viewData:t,isFullyLoaded:r,viewId:e,backgroundColor:o,isGenre:c,isAnonymous:n,getNextPage:s})}))},71055:(e,n,t)=>{t.d(n,{P:()=>m});var s=t(59496),r=t(59689),i=t(69647),a=t(3142),o=(t(10817),t(77646)),l=t(83600),c=t(18060),u=t(38550),d=t(30845);const m=(e,n)=>{const t=(()=>{const e=(0,l.W6)(d.Xf),n=(0,o.v9)(c.rZ),{locale:t,overrides:r}=(0,o.v9)(u.Gg),i=r?.country||n,a=r?.locale||t;return(0,s.useMemo)((()=>{const n=["album","playlist","artist","show","station","episode","merch","artist_concerts"];return e&&n.push("uri_link"),{country:i,locale:a,types:n.join(",")}}),[i,e,a])})(),{data:m,fetchNextPage:g}=(0,r.useInfiniteQuery)(["useView",e,t],(async({pageParam:n})=>void 0===n?async function(e,n){const{body:t}=await a.kO.getView(i.b.getInstance(),e,n);return t}(e,t):async function(e){const{body:n}=await a.TV.getGeneric(i.b.getInstance(),e);return n}(n)),{cacheTime:n?.cacheTime??18e5,staleTime:n?.staleTime??3e5,getNextPageParam:e=>e.content.next??void 0,getPreviousPageParam:e=>e.content.previous??void 0});return{view:(0,s.useMemo)((()=>m?.pages.reduce(((e,n)=>({...e,content:{...e.content,href:n.content.href,next:n.content.next,offset:n.content.offset,previous:n.content.previous,total:n.content.total,items:e.content.items.concat(n.content.items)}})))),[m?.pages]),getNextPage:g}}}}]);
//# sourceMappingURL=xpui-routes-view.js.map