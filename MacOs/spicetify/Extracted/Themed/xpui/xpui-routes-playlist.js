"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3878],{8447:(e,n,t)=>{t.r(n),t.d(n,{default:()=>tt});var a=t(93433),i=t(15861),l=t(29439),r=t(87757),s=t.n(r),o=(t(66992),t(41539),t(88674),t(78783),t(33948),t(68309),t(82772),t(91058),t(41637),t(74916),t(64765),t(57327),t(21249),t(23123),t(47042),t(92222),t(67294)),c=t(86706),u=t(51615),d=t(69518),m=t.n(d),k=t(32667),v=t(87577),p=t(95222),f=t(96206),b=t(42038),S=(t(3843),t(83710),t(5212),t(83056)),y=(t(38862),function(e,n,t){return{event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(n),lineitem_id:String(t),creative_id:String(n),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}}),g=function(e){var n=e.clickTracking,t=e.clickThrough,a=e.thirdPartyImpression,i=e.impression,r=e.logoUrl,s=e.advertiserName,u=e.creativeId,d=e.lineItemId,m=(0,c.I0)(),v=(0,o.useState)(!1),p=(0,l.Z)(v,2),b=p[0],g=p[1];return(0,o.useEffect)((function(){return m((0,S.Vw)()),m((0,S.kh)(y("event_viewed",u,d))),function(){m((0,S.AG)())}}),[m,u,d]),o.createElement("div",{className:"sponsor-container"},o.createElement(k.D,{variant:"minuet",className:"sponsor-text","data-ta-id":"sponsor-text"},f.ag.get("playlist.presented_by",s)),o.createElement("div",{className:"sponsor-logo"},o.createElement("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:function(){m((0,S.kh)(y("event_clicked",u,d))),g(!0)}},o.createElement("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:s,"data-ta-id":"sponsor-logo"})),o.createElement("img",{className:"sponsor-logo__imp-pixel",src:i,alt:""}),a&&o.createElement("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),b&&o.createElement("img",{className:"sponsor-logo__click-img-pixel",src:n,alt:""})))},N=function(e){var n=e.playlistUri,t=(0,c.I0)(),a=(0,c.v9)((function(e){return e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(n)}));return(0,o.useEffect)((function(){a||t((0,S.fd)(n))}),[t,n,a]),a?o.createElement("div",null,o.createElement(g,a)):null},E=function(e){var n=e.playlistUri,t=(0,c.I0)(),a=(0,c.v9)((function(e){return e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships")})),i=(0,c.v9)((function(e){return e.ads.sponsoredPlaylist.previewAd}));(0,o.useEffect)((function(){a||t((0,S.z8)())}),[t,a]);var l=i||a&&function(e,n){var t=Date.now()/1e3,a=e.split(":"),i=a[a.length-1];return n.some((function(e){var n=e.playlistId,a=e.endTime,l=e.startTime;return n===i&&t>=l&&t<(a||t+1)}))}(n,a);return l?o.createElement(N,{playlistUri:n}):null},h=t(18270),F=t(43683),T=t(48690),C=t(35410),R=t(20534),A=t(70369),D=t(98778),L=(t(15306),t(21317)),I=t(34011),P=t(4383);const x="hOOwEKqNuXrNvOCB1SgZ",O="csEdkIN9z2LjJIuZraqz";var U=function(e){var n=e.uri,t=(0,P.Z)(n),a=(0,l.Z)(t,2),i=a[0],r=a[1],s=(0,u.k6)(),c=(0,o.useCallback)((function(){r(!1),s.replace("/collection/playlists")}),[s,r]);return o.createElement("div",{className:x},o.createElement(L.l,{iconSize:64}),o.createElement("div",{className:O},o.createElement(k.D,{as:"p",variant:"canon"},f.ag.get("forbidden-page.title")),o.createElement(k.D,{as:"p",variant:"mesto"},f.ag.get("forbidden-page.description"))),i&&o.createElement(I.D,{colorSet:"invertedLight",onClick:c},f.ag.get("remove_from_your_library")))},w=t(6158),M=t(58679),_=t(55120),Z=t(77834),B=t(1838),j=t(22423),V=t(78462),Q=t(61412),G=t(12498),z=t(69846),K=t(57784),q=t(56802),X=t(4236),W=t(62515),H=t(97181),J=t(53538),Y=t(49207),$=t(29255),ee=t(44065),ne=t(20246),te=t(32648),ae=t(84242),ie=t(72138),le=t(73893),re=(t(47941),t(82526),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070),t(4942)),se=t(42714),oe=t(28018),ce=t(88767),ue=t(62830);function de(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function me(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?de(Object(t),!0).forEach((function(n){(0,re.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ke=t(97194),ve=t(15852),pe=(t(70189),t(28248)),fe=t(42922),be=t(49961),Se=new Set(V.RJ),ye=new Set([]),ge={column:null,order:pe.kn.NONE},Ne=o.memo((function(e){var n=e.ariaLabel,t=e.nrTracks,a=e.playlistUri,r=e.rankType,c=e.scrollToUid,u=e.usePlayContextItem,d=e.tracklistDomRef,m=(0,o.useContext)(ie.ZF),k=(0,o.useContext)(j.fo),v=k.filter,p=k.setFilter,f=(0,o.useRef)(null),b=(0,o.useState)(t),S=(0,l.Z)(b,2),y=S[0],g=S[1],N=(0,o.useCallback)((function(){f.current&&f.current.update()}),[]);(0,oe.r)(a,N);var E=(0,o.useContext)(V.Gb),h=E.sortState,F=E.setSortState,T=(0,o.useCallback)((function(e){F((0,B.VK)(e,h))}),[h,F]);(0,o.useEffect)((function(){f.current&&f.current.update()}),[h,v]),(0,o.useEffect)((function(){F(ge),p("")}),[a,p,F]),(0,o.useEffect)((function(){f.current&&c&&f.current.scrollToItem({uid:c})}),[c]),(0,o.useEffect)((function(){f.current&&""===v&&f.current.scrollToFirstSelected()}),[v,y]);var C=(0,o.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(n,t){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getContents(a,{offset:n,limit:t,sort:(0,B._j)(h),filter:v,decorateFormatListData:!0});case 2:return(i=e.sent).totalLength!==y&&g(i.totalLength),e.abrupt("return",i.items);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[a,m,y,h,v]),R="plays"===r,A=(0,o.useCallback)((function(e,n){var t,i,l,r=(0,be.X)(null===(t=e.album)||void 0===t?void 0:t.images,{desiredSize:40,desiredLabel:"small"});return o.createElement(pe.h_,{key:n+e.uri,index:n,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==r?void 0:r.url)||"",statusChange:null===(i=e.formatListAttributes)||void 0===i?void 0:i.status,showPlayCount:R,playCount:parseInt((null===(l=e.formatListAttributes)||void 0===l?void 0:l.rank)||"0",10),usePlayContextItem:u})}),[a,R,u]),D=(0,o.useMemo)((function(){return R?[pe.QD.INDEX,pe.QD.TITLE,pe.QD.PLAYS,pe.QD.ALBUM,pe.QD.DURATION]:[pe.QD.INDEX,pe.QD.TITLE,pe.QD.ALBUM,pe.QD.DURATION]}),[R]),L=(0,o.useCallback)((function(e){return e.uri}),[]),I=(0,o.useCallback)((function(e){return e.id}),[]);return o.createElement(fe.ZP,{value:"chart-tracklist"},o.createElement(pe.Pv,{key:a,ariaLabel:n,hasHeaderRow:!0,columns:D,sortableColumns:m.getCapabilities().canSort?Se:ye,sortState:h,onSort:T,renderRow:A,resolveUri:L,resolveUid:I,nrTracks:y,fetchTracks:C,limit:100,canFetchAllTracks:m.getCapabilities().canFetchAllTracks,outerRef:f,outerDomRef:d}))})),Ee=t(87462),he=t(45987),Fe=t(47647),Te=t(51674),Ce=t(51627);const Re="jMg2yhvAA3YfgM1Ix5GL",Ae="X1lXSiVj0pzhQCUo_72A";var De=["uri","label","onClick"],Le=function(e){var n=e.uri,t=e.label,a=e.onClick,i=(0,he.Z)(e,De),l=(0,Ce.l)({uri:n,permissionLevel:"CONTRIBUTOR"}).onCopyLink;return o.createElement(Te._,{label:t},o.createElement("button",{className:Re,onClick:function(e){null==a||a(e),null==l||l()},"aria-label":t},o.createElement(Fe.t,(0,Ee.Z)({},i,{className:Ae,iconSize:32,"aria-hidden":"true"}))))},Ie=t(40786),Pe=t(74410),xe=t(86604),Oe=t(98197),Ue=t(3775),we=(t(98984),{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"querySearch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"5"}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"album"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"episode"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcast"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}}]}),Me={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"querySearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"album"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]}}]}}]}}]}}]},_e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"querySearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artist"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"following"}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"album"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]},Ze=t(94184),Be=t.n(Ze),je=t(24697),Ve=t(44295);const Qe="WIBrW3xa1aqQaLWZhp5U",Ge="l42JW4EP_5CU1Ba7jYIc",ze="yGtsjz2AjzhRMTphe2BO",Ke="TuU4JSqLFdjOeTaHaDmA",qe="zOwN1vkkgX9JIvE81_B2",Xe="eWEdt6BMCWITt5najIg_";var We=o.memo((function(e){var n=e.placeholder,t=e.onChange,a=void 0===t?function(){}:t,i=e.onFocus,r=void 0===i?function(){}:i,s=(0,o.useState)(""),c=(0,l.Z)(s,2),u=c[0],d=c[1],m=(0,o.useRef)(null),v=(0,je.y1)((function(e){a(e)}),200),p=(0,o.useCallback)((function(e){var n=e.currentTarget.value;d(n),v(n)}),[d,v]),b=(0,o.useCallback)((function(){m.current&&m.current.focus(),d(""),a("")}),[d,a]),S=(0,o.useCallback)((function(e){"Escape"===e.key&&u&&b()}),[u,b]);return o.createElement("div",{className:Qe,role:"search"},o.createElement(k.D,{as:"input",variant:"mesto",ref:m,className:Be()(Ge),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:n,onChange:p,onKeyDown:S,onFocus:r,value:u}),o.createElement("div",{className:ze},o.createElement("span",{className:Ke},o.createElement(Ve.j,{iconSize:16,className:qe,"aria-hidden":"true"})),u&&o.createElement("button",{className:Xe,onClick:b,"aria-label":f.ag.get("search.a11y.clear-input")},o.createElement(Pe.k,{iconSize:16}))))})),He=(t(69826),t(85827),t(7073)),Je=t(42781);function Ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function $e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ye(Object(t),!0).forEach((function(n){(0,re.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var en=function(e){var n;return{uid:e.uid,uri:e.track.uri,name:e.track.name,isPlayable:e.track.playability.playable,isMOGEFRestricted:e.track.contentRating.label===He.KS.NineteenPlus,isExplicit:e.track.contentRating.label===He.KS.Explicit,album:{id:e.track.album.id,name:e.track.album.name,imgUrl:(null===(n=e.track.album.coverArt)||void 0===n?void 0:n.sources[0].url)||"",uri:e.track.album.uri},artists:e.track.artists.items.map((function(e){return{id:e.id,uri:e.uri,name:e.profile.name}}))}},nn=function(e){return{uid:e.uid,uri:e.episode.uri,name:e.episode.name,isPlayable:e.episode.playability.playable,isMOGEFRestricted:e.episode.contentRating.label===He.KS.NineteenPlus,isExplicit:e.episode.contentRating.label===He.KS.Explicit,imgUrl:e.episode.coverArt.sources[0].url,podcast:{id:e.episode.podcast.id,uri:e.episode.podcast.uri,name:e.episode.podcast.name}}},tn=function(e){var n,t,a=null!==(n=null==e||null===(t=e.topResults)||void 0===t?void 0:t.items)&&void 0!==n?n:[];return a.length?a.reduce((function(n,t){var a=t.uri,i=m().from(a);if(a&&i)switch(m().from(a)&&m().from(a).type){case m().Type.ALBUM:var l,r=function(e,n){return n.find((function(n){return n.uri===e}))}(a,(null==e||null===(l=e.albums)||void 0===l?void 0:l.items)||[]);r&&n.push(r);break;case m().Type.ARTIST:var s,o=function(e,n){return n.find((function(n){return n.uri===e}))}(a,(null==e||null===(s=e.artists)||void 0===s?void 0:s.items)||[]);o&&n.push(o);break;case m().Type.TRACK:var c,u=function(e,n){return n.find((function(n){return n.track.uri===e}))}(a,(null==e||null===(c=e.tracks)||void 0===c?void 0:c.items)||[]);u&&n.push(en(u));break;case m().Type.EPISODE:var d,k=function(e,n){return n.find((function(n){return n.episode.uri===e}))}(a,(null==e||null===(d=e.episodes)||void 0===d?void 0:d.items)||[]);k&&n.push(nn(k))}return n}),[]):[]},an=function(e){var n={uri:e.uri,id:e.id,name:e.name,coverArt:e.coverArt};return e.tracks.items.map((function(e){return $e($e({},e),{},{track:$e($e({},e.track),{},{album:n})})}))},ln=function(e){if(!e.discography)return[];var n=e.discography.topTracks.items.map((function(e){return en(e)})),t=e.discography.popularReleases.items.map((function(e){var n=e.releases.items[0];return{uri:n.uri,name:n.name,coverArt:{sources:n.coverArt.sources}}}));return[].concat((0,a.Z)(n),(0,a.Z)(t))},rn=(t(26699),t(32023),function(e){var n=e.renderRow,t=e.searchResults;return o.createElement(pe.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:pe.hU,nrTracks:t.length,tracks:t,resolveUri:function(e){return e.uri},columns:[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD],testID:"playlist-inline-curation-loaded-results"})}),sn=function(e){var n=e.renderRow,t=e.searchResults;return o.createElement(pe.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:pe.hU,nrTracks:t.length,tracks:t,resolveUri:function(e){return e.uri},columns:[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD]})},on=function(e){var n=e.renderRow,t=e.searchResults,a=t.filter((function(e){return void 0!==e.album})),i=t.filter((function(e){return e.uri.includes("album")}));return o.createElement("div",null,o.createElement(k.D,{as:"p",variant:"cello",className:Z.Z.artistResultListTitle},f.ag.get("playlist.curation.popular_songs")),o.createElement(pe.Pv,{ariaLabel:f.ag.get("playlist.curation.popular_songs"),renderRow:n,rowPlaceholder:pe.hU,nrTracks:a.length,tracks:a,resolveUri:function(e){return e.uri},columns:[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD]}),o.createElement(k.D,{as:"p",variant:"cello",className:Z.Z.artistResultListTitle},f.ag.get("playlist.curation.albums")),o.createElement(pe.Pv,{ariaLabel:f.ag.get("playlist.curation.albums"),renderRow:n,rowPlaceholder:pe.hU,nrTracks:i.length,tracks:i,resolveUri:function(e){return e.uri},columns:[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD]}))},cn=function(e){var n=e.renderRow,t=e.searchResults;return o.createElement(pe.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:pe.hU,nrTracks:t.length,tracks:t,resolveUri:function(e){return e.uri},columns:[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD]})},un=function(e){var n=e.renderRow,t=e.searchResults;return o.createElement(pe.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:pe.hU,nrTracks:t.length,tracks:t,resolveUri:function(e){return e.uri},columns:[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD]})},dn=function(e){var n=e.renderRow,t=e.searchResults;return o.createElement(pe.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:pe.hU,nrTracks:t.length,tracks:t,resolveUri:function(e){return e.uri},columns:[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD]})},mn=t(70325);const kn="Gt26Myd3dsGrVxW9ArZW",vn="MLeLx_C7OnluWx8e9S88",pn="p8hNoO_LkxYLrEJ2cCSF",fn="FETh66aSunr0whiLsmk4",bn="KAuXIg8XQPSRMRqTjvAD",Sn="NB2fhkFoxu_ZCQlzHhha",yn="saXvuHxalPYz3i36v1Ve",gn="DhMJGiOreiPrq04sm2AF",Nn="gkgL9fB_pyDL75m9HKdu";var En,hn=function(e){var n,t=e.searchResult,a=e.index,i=e.isRTL,l=e.onClick,r=null===(n=t.coverArt)||void 0===n?void 0:n.sources[0].url;return o.createElement(mn.RX,{className:bn,rowIndex:a,"aria-selected":!1},o.createElement("div",{"aria-label":"".concat(f.ag.get("artist-page.tracks.seemore")," ").concat(t.name),className:Nn,onClick:l},o.createElement(mn.id,{columnIndex:0,className:Sn},void 0!==r?o.createElement("img",{className:pn,src:t.coverArt.sources[0].url,alt:t.name}):null,o.createElement("div",{className:yn},o.createElement(k.D,{as:"p",className:fn,variant:"ballad"},t.name),o.createElement(k.D,{as:"p",variant:"mesto",semanticColor:"textSubdued"},f.ag.get("album")))),o.createElement(mn.id,{columnIndex:1}),o.createElement(mn.id,{columnIndex:2},o.createElement("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(t.name),className:gn,onClick:l},i?o.createElement(Oe.e,null):o.createElement(xe.V,null)))))},Fn=t(39278),Tn=function(e){var n=e.size;return o.createElement("div",{className:vn},o.createElement(Fn.a,{iconSize:n}))},Cn=function(e){var n,t=e.searchResult,a=e.index,i=e.isRTL,l=e.onClick,r=null===(n=t.visuals.avatarImage)||void 0===n?void 0:n.sources[0].url;return o.createElement(mn.RX,{className:bn,rowIndex:a,"aria-selected":!1},o.createElement("div",{"aria-label":"".concat(f.ag.get("artist-page.tracks.seemore")," ").concat(t.profile.name),className:Nn,onClick:l,"data-testid":"playlist-inline-curation-artist"},o.createElement(mn.id,{columnIndex:0,className:Sn},void 0!==r?o.createElement("img",{className:kn,src:r,alt:t.profile.name}):o.createElement(Tn,{size:16}),o.createElement("div",{className:yn},o.createElement(k.D,{as:"p",className:fn,variant:"ballad"},t.profile.name),o.createElement(k.D,{as:"p",variant:"mesto",semanticColor:"textSubdued"},f.ag.get("artist")))),o.createElement(mn.id,{columnIndex:1}),o.createElement(mn.id,{columnIndex:2},o.createElement("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(t.profile.name),className:gn,onClick:l},i?o.createElement(Oe.e,null):o.createElement(xe.V,null)))))},Rn=function(e){var n=e.episode,t=n.uid,a=n.uri,i=n.name,l=n.imgUrl,r=n.podcast,s=n.isPlayable,c=n.isMOGEFRestricted,u=n.isExplicit,d=e.contextUri,m=e.index,k=e.usePlayContextItem;return o.createElement(pe.YK,{uid:t,uri:a,isPlayable:s,isMOGEFRestricted:c,isExplicit:u,contextUri:d,name:i,imgUrl:l,index:m,podcast:r,usePlayContextItem:k})},An=function(e){var n=e.label,t=e.index,a=e.isRTL,i=e.onClick;return o.createElement(mn.RX,{className:bn,rowIndex:t,"aria-selected":!1},o.createElement("div",{"aria-label":n,className:Nn,onClick:i},o.createElement(mn.id,{columnIndex:0,className:Sn},o.createElement(k.D,{as:"p",className:fn,variant:"ballad"},n)),o.createElement(mn.id,{columnIndex:1}),o.createElement(mn.id,{columnIndex:2},o.createElement("button",{"data-testid":"top-bar-forward-button","aria-label":n,className:gn,onClick:i},a?o.createElement(Oe.e,null):o.createElement(xe.V,null)))))},Dn=function(e){var n=e.track,t=n.uid,a=n.uri,i=n.album,l=n.name,r=n.artists,s=n.isPlayable,c=n.isExplicit,u=n.isMOGEFRestricted,d=e.contextUri,m=e.index,k=e.usePlayContextItem;return o.createElement(pe.cp,{uid:t,uri:a,isPlayable:s,isMOGEFRestricted:u,isExplicit:c,contextUri:d,name:l,imgUrl:i.imgUrl,index:m,album:i,artists:r,usePlayContextItem:k})};function Ln(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function In(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ln(Object(t),!0).forEach((function(n){(0,re.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS"}(En||(En={}));var Pn=function(e,n){return"GO_BACK"===n.type?1===e.breadcrumbs.length?e:e=In(In({},e),{},{breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}):"NAV_TO_ENTITY"===n.type?e=In(In({},e),{},{breadcrumbs:[].concat((0,a.Z)(e.breadcrumbs),[n.level])}):("NAV_TO_RESULTS"===n.type?e=In(In({},e),{},{breadcrumbs:[].concat((0,a.Z)(e.breadcrumbs),[n.level])}):"CHANGE_TERM"===n.type&&(e={term:n.term,breadcrumbs:[{navType:En.SEARCH,term:n.term,title:""}]}),e)},xn=function(e){var n,t=e.resultList,i=e.level,l=e.isRTL,r=e.playlistUri,s=e.navToResults,c=e.navToEntity,u=e.term,d=t,v=function(e){return e.filter((function(e){var n=e.uri;return m().isTrack(n)||m().isEpisode(n)})).map((function(e){var n=e.uri,t=e.uid;return{type:m().isTrack(n)?Je.p.TRACK:Je.p.EPISODE,uri:n,uid:t,provider:null}}))}(t),p=(0,ae.n)({uri:"".concat(r.replace("spotify:","spotify:internal:recs:"),":").concat(encodeURIComponent(u),":").concat(null!==(n=null==i?void 0:i.navType)&&void 0!==n?n:0),pages:[{items:v}]},{featureIdentifier:"search"}).usePlayContextItem,b=(0,o.useCallback)((function(e,n){return e?void 0!==e.profile?o.createElement(Cn,{isRTL:l,index:n,key:e.uri,searchResult:e,onClick:function(){c({navType:En.ARTIST,uri:e.uri,title:e.profile.name})}}):void 0!==e.podcast?o.createElement(Rn,{key:e.uri,index:n,episode:e,contextUri:r.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p}):void 0!==e.album?o.createElement(Dn,{key:e.uri,index:n,track:e,contextUri:r.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p}):e.isSeeAllXRow?o.createElement(An,{isRTL:l,index:n,label:e.label,key:e.uri,onClick:function(){s({navType:e.type,term:u,title:e.label})}}):e.uri.includes("album")?o.createElement(hn,{index:n,key:e.uri,isRTL:l,searchResult:e,onClick:function(){c({navType:En.ALBUM,uri:e.uri,title:e.name})}}):null:null}),[l,c,s,r,u,p]);if(""===u)return o.createElement("div",{className:Z.Z.emptySearchTermContainer});if(!t||0===(null==t?void 0:t.length))return o.createElement("div",{className:Z.Z.emptyStateContainer},o.createElement(k.D,{as:"h1",variant:"canon"},f.ag.get("search.empty-results-title",u)),o.createElement(k.D,{as:"p",variant:"mesto"},f.ag.get("search.empty-results-text")));if((null==i?void 0:i.navType)===En.SEARCH){var S=[{type:En.ARTISTRESULTS,label:f.ag.get("playlist.curation.see_all_artists"),isSeeAllXRow:!0,uri:"spotify:internal:recs:see-all-artists"},{type:En.ALBUMRESULTS,label:f.ag.get("playlist.curation.see_all_album"),isSeeAllXRow:!0,uri:"spotify:internal:recs:see-all-albums"},{type:En.TRACKRESULTS,label:f.ag.get("playlist.curation.see_all_songs"),isSeeAllXRow:!0,uri:"spotify:internal:recs:see-all-songs"}];return d=[].concat((0,a.Z)(t),S),o.createElement(rn,{renderRow:b,searchResults:d})}return(null==i?void 0:i.navType)===En.ALBUM?o.createElement(sn,{renderRow:b,searchResults:d}):(null==i?void 0:i.navType)===En.ARTIST?o.createElement(on,{renderRow:b,searchResults:d}):(null==i?void 0:i.navType)===En.ALBUMRESULTS?o.createElement(cn,{renderRow:b,searchResults:d}):(null==i?void 0:i.navType)===En.TRACKRESULTS?o.createElement(un,{renderRow:b,searchResults:d}):(null==i?void 0:i.navType)===En.ARTISTRESULTS?o.createElement(dn,{renderRow:b,searchResults:d}):null},On=function(e){var n=e.playlistUri,t=e.onCurationModeChange,a=(0,o.useState)([]),r=(0,l.Z)(a,2),u=r[0],d=r[1],m=(0,o.useState)(),v=(0,l.Z)(m,2),p=v[0],b=v[1],S=(0,c.v9)((function(e){return e.ui.textDirection.isRTL})),y=function(){var e=(0,o.useReducer)(Pn,{term:"",breadcrumbs:[]}),n=(0,l.Z)(e,2),t=n[0],a=n[1],i=t.breadcrumbs,r=t.term;return{changeTerm:function(e){a({type:"CHANGE_TERM",term:e})},level:i[i.length-1]||null,goBack:function(){a({type:"GO_BACK"})},navToEntity:function(e){a({type:"NAV_TO_ENTITY",level:e})},navToResults:function(e){a({type:"NAV_TO_RESULTS",level:e})},term:r}}(),g=y.level,N=y.changeTerm,E=y.goBack,h=y.navToEntity,F=y.navToResults,T=y.term,C=(0,o.useContext)(Ue.Ax).request,R=(0,o.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(we,{term:n});case 2:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data.search)||null);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[C]),A=(0,o.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(Me,{uri:n,offset:0,limit:100});case 2:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data.album)||null);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[C]),D=(0,o.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(_e,{uri:n,offset:0,limit:100});case 2:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data.artist)||null);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[C]);return(0,o.useEffect)((function(){var e=!0,n=function(){var n=(0,i.Z)(s().mark((function n(){var t,a,i,l,r,o,c,u,m,k;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(g){n.next=2;break}return n.abrupt("return");case 2:n.t0=g.navType,n.next=n.t0===En.SEARCH?5:n.t0===En.ARTISTRESULTS?21:n.t0===En.ALBUMRESULTS?23:n.t0===En.TRACKRESULTS?25:n.t0===En.EPISODERESULTS?28:n.t0===En.ALBUM?31:n.t0===En.ARTIST?42:53;break;case 5:if(n.prev=5,p&&(p.query===T||""===T)){n.next=13;break}return n.next=9,R(T);case 9:i=n.sent,e&&b(i),n.next=14;break;case 13:""===T&&d([]);case 14:n.next=19;break;case 16:n.prev=16,n.t1=n.catch(5),d([]);case 19:return p&&(l=tn(p),d(l)),n.abrupt("break",54);case 21:return d(null==p||null===(t=p.artists)||void 0===t?void 0:t.items),n.abrupt("break",54);case 23:return d(null==p||null===(a=p.albums)||void 0===a?void 0:a.items),n.abrupt("break",54);case 25:return null!=(o=null==p||null===(r=p.tracks)||void 0===r?void 0:r.items)&&o.length&&d(o.map((function(e){return en(e)}))),n.abrupt("break",54);case 28:return null!=(u=null==p||null===(c=p.episodes)||void 0===c?void 0:c.items)&&u.length&&d(u.map((function(e){return nn(e)}))),n.abrupt("break",54);case 31:return n.prev=31,n.next=34,A(g.uri);case 34:m=n.sent,e&&d(an(m).map((function(e){return en(e)}))),n.next=41;break;case 38:n.prev=38,n.t2=n.catch(31),d([]);case 41:return n.abrupt("break",54);case 42:return n.prev=42,n.next=45,D(g.uri);case 45:k=n.sent,e&&d(ln(k)),n.next=52;break;case 49:n.prev=49,n.t3=n.catch(42),d([]);case 52:case 53:return n.abrupt("break",54);case 54:case"end":return n.stop()}}),n,null,[[5,16],[31,38],[42,49]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!1}}),[g,R,A,D,T,p]),o.createElement(o.Fragment,null,o.createElement("section",{className:Z.Z.playlistInlineCurationSection},o.createElement("div",{className:Z.Z.playlistInlineCurationWrapper},o.createElement(k.D,{as:"h1",className:Z.Z.playlistInlineCurationTitle,variant:"canon"},f.ag.get("playlist.curation.title")),o.createElement(o.Suspense,{fallback:null},o.createElement(We,{placeholder:f.ag.get("playlist.curation.search_placeholder"),onFocus:function(){t(!0)},onChange:function(e){N(e)}}))),o.createElement("button",{className:Z.Z.playlistInlineCurationCloseButton,onClick:function(){return t(!1)}},o.createElement(Pe.k,{"aria-label":f.ag.get("close")}))),null!==g&&g.navType!==En.SEARCH?o.createElement("button",{className:Z.Z.playlistInlineCurationBackButton,onClick:function(){return E()}},S?o.createElement(xe.V,{"aria-label":f.ag.get("navbar.go-back"),className:Z.Z.icon}):o.createElement(Oe.e,{"aria-label":f.ag.get("navbar.go-back"),className:Z.Z.icon}),o.createElement(k.D,{as:"p",variant:"cello"},g.title)):null,o.createElement("div",{className:Z.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results"},o.createElement(xn,{playlistUri:n,term:T,level:g,resultList:u,navToEntity:h,navToResults:F,isRTL:S})))},Un=t(98816),wn=t(98562),Mn=t(35213),_n=o.memo((function(e){var n=e.metadata,t=e.tracklistDomRef,a=n.hasEpisodes,i=n.isCollaborative,l=n.formatListData,r=n.hasDateAdded,s=n.collaborators,c="chart"===(null==l?void 0:l.type),u="live-streams"===(null==l?void 0:l.type),d=["blend","celebrity-blend","friends-mix"].indexOf((null==l?void 0:l.type)||"")>-1,m=!!a,k=(0,ve.fU)(Un.createDesktopSearchBarEventFactory,{}),v=k.spec,p=k.logger,b=(0,o.useCallback)((function(){p.logInteraction(v.filterFieldFactory().keyStrokeFilter())}),[p,v]),S=(0,o.useCallback)((function(){p.logInteraction(v.filterFieldFactory().hitClearFilter())}),[p,v]),y=(0,o.useCallback)((function(){p.logInteraction(v.sortButtonFactory().hitSort())}),[p,v]),g=(0,o.useMemo)((function(){var e;return function(e,n,t,a,i,l,r){return e?V.RJ:(0,B.RG)(n,t,a,i,l,r)}(c,i,m,r,u,d,null!==(e=null==s?void 0:s.count)&&void 0!==e?e:1)}),[c,i,m,r,u,d,s]);return o.createElement("div",{className:Z.Z.searchBoxContainer},o.createElement(o.Suspense,{fallback:null},o.createElement(wn.K,{placeholder:f.ag.get("playlist.search_in_playlist"),onFilter:b,onClear:S,clearOnEscapeInElementRef:t})),o.createElement(Mn.l,{columns:g,onSort:y}))})),Zn=t(61728),Bn=t(82760),jn=(t(2707),"multiUserAttributionDisplayNamesV2"),Vn=t(59916);function Qn(e){return(0,Vn.MW)(e)||(0,Vn.JF)(e)}var Gn=new Set(V.zq),zn=new Set([]),Kn=o.memo((function(e){var n=e.ariaLabel,t=e.nrTracks,a=e.playlistUri,r=e.playlistName,u=e.isCollaborative,d=e.isMixedMedia,k=e.isLive,v=e.isBlend,p=e.hasDateAdded,S=e.canEdit,y=e.scrollToUid,g=e.feedbackPath,N=e.deleteFeedbackPath,E=e.usePlayContextItem,h=e.tracklistRef,F=e.tracklistDomRef,T=e.nrCollaborators,C=void 0===T?1:T,R=e.canRemove,A=e.spec,D=e.initialItems,L=(0,ve.$P)(),I=(0,o.useContext)(ie.ZF),P=(0,o.useContext)(j.fo).filter,x=(0,o.useContext)(V.Gb),O=x.sortState,U=x.setSortState,w=(0,o.useState)(t),M=(0,l.Z)(w,2),_=M[0],Z=M[1],Q=(0,o.useRef)((function(){})),G=(0,o.useState)([]),z=(0,l.Z)(G,2),q=z[0],X=z[1],W=(0,o.useRef)({}),H=(0,c.I0)(),J=(0,o.useCallback)((function(){null!=h&&h.current&&h.current.update()}),[h]);(0,oe.r)(a,J);var Y=(0,o.useCallback)((function(e,n){U((0,B.VK)(e,O)),L.logInteraction(A.columnHeaderFactory({identifier:e,position:n||0}).hitSort())}),[U,O,L,A]),$=(0,o.useCallback)((function(e){Q.current(),I.remove(a,e)}),[I,a]),ee=(0,o.useCallback)((function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];R&&(Q.current=n,e.length>1&&!t?X(e):$(e))}),[R,$]);(0,o.useEffect)((function(){null!=h&&h.current&&h.current.update()}),[O,P,h]),(0,o.useEffect)((function(){null!=h&&h.current&&y&&h.current.scrollToItem({uid:y})}),[y,h]),(0,o.useEffect)((function(){null!=h&&h.current&&""===P&&h.current.scrollToFirstSelected()}),[P,_,h]),(0,o.useEffect)((function(){Z(t)}),[t]);var ne=(0,o.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(n,t){var i,l,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getContents(a,{offset:n,limit:t,sort:(0,B._j)(O),filter:P,decorateFormatListData:!!g||k||v});case 2:return i=e.sent,l=i.items.filter((function(e,t){return null!==e||(W.current[t+n]=!0,!1)})),r=Object.keys(W.current).length,i.totalLength-r!==_&&Z(i.totalLength-r),e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[a,I,_,O,P,g,k,v]),te=(0,o.useCallback)((function(e,n,t){if(null!=h&&h.current){var i=h.current.getRows();i[n].id&&(L.logInteraction(A.dragSort()),t===Bn.W.Before?I.move(a,e,{before:i[n].id}):I.move(a,e,{after:i[n].id}))}}),[h,L,A,I,a]),ae=(0,o.useCallback)((function(e,n,t){if(null!=h&&h.current){var i=h.current.getRows();i[n].id&&(L.logInteraction(A.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),t===Bn.W.Before?H((0,b.jV)(a,e,{before:i[n].id})):H((0,b.jV)(a,e,{after:i[n].id})))}}),[h,L,A,a,H]),le=(0,o.useCallback)((function(){I.resync(a)}),[I,a]),re=(0,o.useCallback)((function(e,n){var t,i,l,s,c,p,f,b,y=!!(0,Vn.JF)(e)&&e.podcastSubscription.isUserSubscribed;if((0,Vn.JF)(e))f=e.show,b=e.images.concat(e.show.images);else if((0,Vn.MW)(e)){var h;f=e.album,b=null===(h=e.album)||void 0===h?void 0:h.images}var F=(0,be.X)(b,{desiredSize:40,desiredLabel:"small"}),T=[];S&&O.order===pe.kn.NONE&&(T=[K.aN[m().Type.TRACK],K.aN[m().Type.LOCAL],K.aN[m().Type.EPISODE]]);var A="1"===(null==e||null===(t=e.formatListAttributes)||void 0===t?void 0:t["dislike-feedback-selected"]),D=!1;(0,Vn.JF)(e)&&e.podcastSubscription.isPaywalled&&!y?D=!0:Qn(e)&&(D=e.isPlayable&&!A);var L=v&&function(e,n){var t,a,i,l,r=[];if(!n)return r;var s=n[jn]?jn:"multiUserAttributionDisplayNames",o=null==n||null===(t=n[s])||void 0===t?void 0:t.split(","),c=null==n||null===(a=n.multiUserAttributionImages)||void 0===a?void 0:a.split(",");if(!o||!c)return r;for(var u,d=(null==n||null===(i=n.multiUserAttributionUsernamesV2)||void 0===i?void 0:i.split(","))||[],k=(null==n||null===(l=n.multiUserAttributionType)||void 0===l?void 0:l.split(","))||[],v=o.length,p=0;p<v;p++){var f=d[p],b=f&&m().profileURI(f).toURI();r.push({username:f,uri:b,displayName:o[p],images:(u=c[p],u.length>1?[{url:u}]:[]),recsplanation:k[p]})}return r.sort((function(n,t){return n.username?n.username===(null==e?void 0:e.username)?-1:t.username===(null==e?void 0:e.username)?1:0:0}))}(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[];return o.createElement(pe.dx,{key:n+e.uri,index:n,playIndex:null!==(i=e.playIndex)&&void 0!==i?i:void 0,contextUri:a,uri:e.uri,uid:null!==(l=e.uid)&&void 0!==l?l:void 0,id:e.id,isPlayable:D,duration_ms:Qn(e)?e.duration.milliseconds:0,isPaywalled:!!(0,Vn.JF)(e)&&e.podcastSubscription.isPaywalled,isUserSubscribed:y,name:Qn(e)?e.name:"",artists:(0,Vn.MW)(e)?e.artists:void 0,albumOrShow:f,isExplicit:(0,Vn.MW)(e)&&e.isExplicit,isCollaborative:u,nrCollaborators:C,isMixedMedia:d,isLocal:(0,Vn.MW)(e)&&e.isLocal,addedBy:L,hasDecoratedAddedBy:I.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Vn.JF)(e)&&e.release.date||"",isMOGEFRestricted:(0,Vn.MW)(e)&&e.is19PlusOnly,type:e.type,imgUrl:(null==F?void 0:F.url)||"",onMove:te,onInsert:ae,usePlayContextItem:E,allowedDropTypes:T,feedbackPath:g,feedbackUri:null==e||null===(s=e.formatListAttributes)||void 0===s?void 0:s.feedback_uri,deleteFeedbackPath:N,isDisliked:A,isLive:k,isBlend:v,ticketingSiteURL:null==e||null===(c=e.formatListAttributes)||void 0===c?void 0:c.ticketingSite,eventDate:null==e||null===(p=e.formatListAttributes)||void 0===p?void 0:p.eventDate,canRemove:R,onFeedbackClick:le,playlistName:r})}),[S,O.order,v,a,u,C,d,I,te,ae,E,g,N,k,R,le,r]);return o.createElement(o.Fragment,null,o.createElement(fe.ZP,{value:"playlist-tracklist"},o.createElement(pe.Pv,{testID:"playlist-tracklist",key:a,ariaLabel:n,hasHeaderRow:!0,columns:(0,B.RG)(u,d,p,k,v,C),sortableColumns:I.getCapabilities().canSort?Gn:zn,sortState:O,onSort:Y,onRemove:ee,renderRow:re,resolveUri:function(e){return e.uri},resolveUid:function(e){return e.id},nrTracks:_,fetchTracks:ne,limit:100,canFetchAllTracks:I.getCapabilities().canFetchAllTracks,outerRef:h,outerDomRef:F,tracks:D.filter(Boolean)})),o.createElement(Zn.h,{title:f.ag.get("playlist.remove_from_playlist",r),isOpen:q.length>0,tracks:q,onClose:function(e){e.stopPropagation(),X([])},onRemove:$}))})),qn=t(86025),Xn=(t(26541),t(27826)),Wn=t(61634);function Hn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Jn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Hn(Object(t),!0).forEach((function(n){(0,re.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Yn=o.memo((function(e){var n=e.playlistUri,t=e.playlistLength,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=2*n,i=3*n,r=(0,o.useRef)(0),s=(0,o.useState)(e),c=(0,l.Z)(s,2),u=c[0],d=c[1],m=(0,o.useState)([]),k=(0,l.Z)(m,2),v=k[0],f=k[1],b=(0,o.useRef)([]),S=(0,o.useContext)(se.Z),y=(0,ve.fU)(p.createDesktopPlaylistEventFactory,{data:{uri:e}}),g=y.spec,N=y.logger,E=o.useMemo((function(){return g.recommendedFactory()}),[g]);(0,o.useEffect)((function(){var n=S.getEvents(),t=function(n){n.data.uri===e&&f((function(e){return e.filter((function(e){return n.data.items.every((function(n){return n.uri!==e.uri}))}))}))};return n.addListener(Wn.XL.OPERATION_COMPLETE,t),function(){n.removeListener(Wn.XL.OPERATION_COMPLETE,t)}}),[S,e]),(0,o.useEffect)((function(){return f([]),d(e),b.current=[],r.current=r.current+1,function(){r.current=r.current+1}}),[e]),(0,o.useEffect)((function(){if(v.length<t){var e=Math.min(t,i-v.length),n=r.current;S.getRecommendedTracks(u,b.current,e).then((function(t){if(n===r.current){var i=t.map((function(e){return(null==e?void 0:e.uri)&&Xn.o.from(e.uri).id})).filter((function(e){return null!==e}));t.length<e&&b.current.length?b.current=[]:b.current=[].concat((0,a.Z)(b.current),(0,a.Z)(i)),f((function(e){return[].concat((0,a.Z)(e),(0,a.Z)(t))}))}}))}}),[t,i,S,u,v.length]);var h=(0,o.useCallback)((function(){if(g){var e=E.refreshButtonFactory().hitRefreshContent();N.logInteraction(e)}f((function(e){return e.slice(n)}))}),[N,E,g,n]);return{tracks:v.slice(0,n),_bufferedTracks:v.slice(n),refresh:h}}(n),r=i.tracks,s=i.refresh,c=!t||0===t,u=(0,ae.n)({uri:n.replace("spotify:","spotify:internal:recs:"),pages:[{items:r.map((function(e){return Jn(Jn({},e),{},{provider:null,type:Je.p.TRACK,uid:null})}))}]},{featureIdentifier:"playlist_recommendations"}).usePlayContextItem,d=(0,o.useCallback)((function(e,t){return o.createElement(pe.cp,{key:"".concat(t,"-").concat(e.uri),index:t,imgUrl:e.album.imageUrl,contextUri:n.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!e.isMOGEFRestricted,name:e.name,artists:e.artists,album:Jn(Jn({},e.album),{},{imgUrl:e.album.imageUrl}),isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:u})}),[n,u]),m=(0,o.useMemo)((function(){return[pe.QD.TITLE,pe.QD.ALBUM,pe.QD.ADD]}),[]),v=(0,o.useCallback)((function(e){return e.uri}),[]),b=(0,o.useCallback)((function(e){return e.id}),[]),S=(0,o.useMemo)((function(){return r.slice(0,Math.min(r.length,10))}),[r]);return r.length>0?o.createElement("div",{className:Z.Z.recommendedTrackList},o.createElement("div",{className:Z.Z.top},o.createElement("div",{className:Z.Z.header},o.createElement(k.D,{variant:"canon"},f.ag.get("playlist.extender.recommended.title")),o.createElement(k.D,{variant:"mesto",className:Z.Z.subtitle},c?f.ag.get("playlist.extender.title.in.playlist"):f.ag.get("playlist.extender.songs.in.playlist")))),r.length?o.createElement(o.Fragment,null,o.createElement(pe.Pv,{ariaLabel:f.ag.get("playlist.extender.recommended.header"),key:"".concat(n,"-recommended"),nrTracks:Math.min(r.length,10),rowPlaceholder:pe.hU,tracks:S,renderRow:d,resolveUri:v,resolveUid:b,columns:m}),o.createElement(qn.o,{className:Z.Z.refreshButton,onClick:s},f.ag.get("playlist.extender.refresh"))):null):null})),$n=o.lazy((function(){return Promise.all([t.e(1814),t.e(2716),t.e(7405)]).then(t.bind(t,82716))})),et=o.memo((function(e){var n=e.playlist,t=e.capabilities,r=n.metadata,d=r.uri,v=r.name,S=r.images,y=r.totalLength,g=r.isOwnedBySelf,N=r.isCollaborative,L=r.hasEpisodes,I=r.hasSpotifyTracks,x=r.canAdd,O=r.canRemove,U=r.canPlay,w=r.formatListData,z=r.hasDateAdded,ie=r.collaborators,re=n.contents.items,se=(0,ve.fU)(p.createDesktopPlaylistEventFactory,{data:{uri:d}}),oe=se.spec,ce=se.logger,ue=se.UBIFragment,de=(0,X.k)(),me=o.useMemo((function(){return oe.headerFactory()}),[oe]),ke=o.useMemo((function(){return oe.tracklistFactory()}),[oe]),pe="chart"===(null==w?void 0:w.type),fe="live-streams"===(null==w?void 0:w.type),be=["blend","celebrity-blend","friends-mix"].indexOf((null==w?void 0:w.type)||"")>-1,Se=!!L,ye=(null==w?void 0:w.attributes)||{},ge=ye.header_image_url_desktop||ye.image_url||null,Ee=x&&O,he=function(e,n){var t=(0,o.useState)(e&&0===n),a=(0,l.Z)(t,2),i=a[0],r=a[1],s=(0,o.useContext)(te.VX).scrollNodeChildRef,c=(0,o.useRef)(i);return(0,o.useEffect)((function(){var e,n=!c.current;s&&n&&i&&(null===(e=s.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})),c.current=i}),[s,i]),{inlineCurationModeIsOn:i,handleInlineCurationModeChange:function(e){r(e)}}}(Ee,y),Fe=he.inlineCurationModeIsOn,Te=he.handleInlineCurationModeChange,Ce=t.canFilter&&y>0,Re=t.canSort&&y>0,Ae=y>0,De=(0,c.v9)($.Gg).productState,Pe=!!De&&parseInt(De.ads,10)>0,xe=(0,c.I0)(),Oe=(0,u.k6)(),Ue="POP"!==Oe.action?new URLSearchParams(Oe.location.search).get("uid"):null,we=(0,P.Z)(d),Me=(0,l.Z)(we,2),_e=Me[0],Ze=Me[1],Be=(0,q.o)(),je=(0,o.useContext)(j.fo).filter,Ve=(0,o.useContext)(V.Gb).sortState,Qe=(0,o.useRef)(null),Ge=(0,o.useRef)(null),ze=(0,l.Z)(S,1)[0],Ke=(0,W.Z)(null!==ge?ge:(null==ze?void 0:ze.url)||null),qe=o.useMemo((function(){return oe.actionBarFactory()}),[oe]),Xe=(0,ae.n)((0,le.U)(d,(0,B._j)(Ve),je),{featureIdentifier:"playlist"}),We=Xe.isPlaying,He=Xe.isActive,Je=Xe.togglePlay,Ye=Xe.usePlayContextItem,$e=(0,o.useCallback)((function(){var e=(0,J.aK)({isPlaying:We,isActive:He,spec:qe.playButtonFactory(),logger:ce,uri:d});Je({loggingParams:e})}),[We,He,Je,qe,ce,d]),en=(0,o.useCallback)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be({targetUri:d,intent:_e?"unsave":"save",type:"click"}),e.prev=1,e.next=4,Ze(!_e);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))),[_e,Be,Ze,d]),nn=(0,o.useCallback)((function(){var e=qe.shareButtonFactory().hitShare({entityToBeShared:d,shareId:""});ce.logInteraction(e)}),[qe,ce,d]),tn=(0,o.useCallback)((function(){var e,n=qe.heartButtonFactory();e=_e?n.hitRemoveLike({itemNoLongerLiked:d}):n.hitLike({itemToBeLiked:d}),ce.logInteraction(e),en()}),[qe,en,_e,ce,d]),an=(0,o.useCallback)((function(e){var n=e.split(/[\r\n]+/g).map((function(e){return m().from(e)})).filter((function(e){return m().isTrack(e)||m().isEpisode(e)||m().isLocalTrack(e)}));if(n.length>0&&x){var t,a,i,l=n.map((function(e){return e.toURI()})),r=null===(t=Qe.current)||void 0===t||null===(a=t.getSelected())||void 0===a||null===(i=a.slice(-1))||void 0===i?void 0:i[0],s={after:(null==r?void 0:r.uid)||"end"};xe((0,b.jV)(d,l,s))}}),[x,xe,d]);(0,H.aw)(an);var ln=(0,o.useCallback)((function(e,n){var t=[].concat((0,a.Z)(n[K.aN[m().Type.TRACK]]||[]),(0,a.Z)(n[K.aN[m().Type.LOCAL]]||[]),(0,a.Z)(n[K.aN[m().Type.EPISODE]]||[]),(0,a.Z)(n[K.aN[m().Type.ALBUM]]||[]));t.length>0&&x&&(ce.logInteraction(oe.dragAddToPlaylist({playlist:d,itemToBeAdded:t[0]})),xe((0,b.jV)(d,t)),Be({targetUri:d,intent:"add",type:"drop"}))}),[x,ce,oe,d,xe,Be]);return o.createElement(o.Suspense,{fallback:null},o.createElement(A.$,null,f.ag.get("playlist.page-title",v)),o.createElement(R.Z,{types:[K.aN[m().Type.TRACK],K.aN[m().Type.LOCAL],K.aN[m().Type.EPISODE],K.aN[m().Type.ALBUM]],onDrop:ln},o.createElement("section",{role:"presentation",className:Z.Z.playlist,"data-testid":"playlist-page","data-test-uri":d},o.createElement(Ie.s,{metadata:n.metadata,isPlaying:We,togglePlay:$e,backgroundColor:Ke,spec:me}),o.createElement("div",{className:Z.Z.playlistContent},o.createElement(h.o,{backgroundColor:Ke},o.createElement(h.F,null,U?o.createElement(_.$,{onClick:$e,isPlaying:We,size:"lg",uri:d,ariaPlayLabel:f.ag.get("playlist.a11y.play",v),ariaPauseLabel:f.ag.get("playlist.a11y.pause",v)}):null,g&&I&&o.createElement(G.v,{uri:d,renderEnabled:function(){return o.createElement(Q.v,{uri:d})}}),g?null:o.createElement(D.r,null,o.createElement(ee.H,{isAdded:!!_e,onClick:tn,size:ee.q.md})),o.createElement(F.o,{uri:d,isFollowing:!!_e,canDownload:Ae,onClick:function(e,n){return(0,J.l7)(n,qe.downloadButtonFactory(),ce,d)},onFollow:en,size:F.q.md}),o.createElement(M.F,{property:Y.bM,renderNewExperience:function(){var e;return null!==(e=n.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions?o.createElement(Le,{onClick:nn,label:f.ag.get("permissions.invite-collaborators",v),uri:d}):null}}),o.createElement(ne.y,{onShow:function(){return(0,J.qq)(qe,ce)},menu:o.createElement(C.X,{uri:d})},o.createElement(T.z,{label:f.ag.get("more.label.context",v)})),Ce&&Re&&o.createElement(ue,{spec:qe},o.createElement(_n,{metadata:n.metadata,tracklistDomRef:Ge})))),o.createElement("div",{className:"contentSpacing"},Pe?o.createElement(E,{playlistUri:d}):null,y>0&&o.createElement(o.Suspense,{fallback:null},o.createElement(ue,{spec:ke},pe?o.createElement(Ne,{key:d,ariaLabel:v,nrTracks:y,playlistUri:d,rankType:ye.rank_type||"",scrollToUid:Ue,usePlayContextItem:Ye,tracklistDomRef:Ge}):o.createElement(Kn,{key:d,ariaLabel:v,nrTracks:y,playlistUri:d,playlistName:v,hasDateAdded:z,isCollaborative:N,isMixedMedia:Se,isLive:fe,isBlend:be,canEdit:Ee,scrollToUid:Ue,feedbackPath:ye["dislike-endpoint"],deleteFeedbackPath:ye["delete-endpoint"],usePlayContextItem:Ye,tracklistRef:Qe,tracklistDomRef:Ge,nrCollaborators:null==ie?void 0:ie.count,canRemove:O,spec:ke,initialItems:re}))),g&&o.createElement(o.Suspense,{fallback:null},Fe?o.createElement(On,{playlistUri:d,onCurationModeChange:Te}):o.createElement("button",{className:Z.Z.seeMore,onClick:function(){Te(!0)}},o.createElement(k.D,{as:"div",variant:"minuetBold"},f.ag.get("playlist.curation.find_more")))),Ee&&!Fe&&de?o.createElement(Yn,{playlistUri:d,playlistLength:n.metadata.totalLength}):null)))))})),nt=o.memo((function(e){var n=e.uri,t=(0,u.TH)().search,a=(0,v.W6)(Y.bM),i=(0,o.useContext)(ie.ZF).getCapabilities(),l=(0,c.v9)($.Gg).isAnonymous,r=(0,z.U)(n).isEnhanced,s=(0,o.useContext)(j.fo).filter,d=(0,o.useContext)(V.Gb).sortState,m=function(e,n,t){var a=(0,o.useContext)(se.Z),i=(0,ce.useQueryClient)(),l=(0,o.useRef)(null==n?void 0:n.withSync),r=(0,ue.jP)((function(){return["usePlaylist",e,n,t]}),[e,n,t]),s=(0,ce.useQuery)(r(),(function(){return a.getPlaylist(e,me(me({},n),{},{withSync:l.current}),t)}),{cacheTime:36e5,keepPreviousData:!0}).data,c=(0,o.useCallback)((function(){l.current=!1,i.invalidateQueries(r())}),[i,r]);return(0,oe.r)(e,c),null!=s?s:null}(n,{decorateFormatListData:!0,withSync:!0,hydrateCollaboratorsWithMembers:a},{offset:0,limit:25,sort:(0,B._j)(d),filter:s});return(0,o.useEffect)((function(){var e=new URLSearchParams(t).get("prid");if(!l&&e){var a="https://spclient.wg.spotify.com/algotorial-sharing-service/v1/shared?playlistId=".concat(n,"&sharedEntityUri=").concat(e);(0,ke.k)().request(a,{method:"POST",authorize:!0,allowOffline:!0})}}),[n,l,t]),m?m.metadata.permissions&&!m.metadata.permissions.canView?o.createElement(U,{uri:n}):o.createElement(G.v,{uri:n,renderEnabled:function(){return r?o.createElement(o.Suspense,{fallback:null},o.createElement($n,{metadata:m.metadata,capabilities:i,featureIdentifier:"playlist"})):o.createElement(et,{playlist:m,capabilities:i})},renderDisabled:function(){return o.createElement(et,{playlist:m,capabilities:i})}}):o.createElement(w.h,{hasError:!1,errorMessage:f.ag.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline})}));const tt=function(){var e=(0,u.UO)().playlistId,n=m().playlistV2URI((e||"").split("&")[0]).toURI();return o.createElement(V.kz,{uri:n},o.createElement(j.hz,{uri:n},o.createElement(nt,{uri:n})))}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map