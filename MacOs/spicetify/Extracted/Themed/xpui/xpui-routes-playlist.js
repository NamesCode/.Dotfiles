"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3878],{15447:(e,n,i)=>{i.r(n),i.d(n,{default:()=>Ci});var t=i(93433),a=i(15861),l=i(29439),r=i(87757),s=i.n(r),o=(i(66992),i(41539),i(88674),i(78783),i(33948),i(68309),i(82772),i(91058),i(41637),i(74916),i(64765),i(57327),i(21249),i(23123),i(47042),i(92222),i(67294)),d=i(86706),u=i(51615),c=i(69518),m=i.n(c),k=i(32667),p=i(87577),v=i(95222),f=i(96206),y=i(42038),b=(i(3843),i(83710),i(5212),i(83056)),S=(i(47941),i(82526),i(38880),i(89554),i(54747),i(49337),i(33321),i(69070),i(4942)),h=(i(38862),i(85893)),g=function(e,n,i){return{event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(n),lineitem_id:String(i),creative_id:String(n),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}},N=function(e){var n=e.clickTracking,i=e.clickThrough,t=e.thirdPartyImpression,a=e.impression,r=e.logoUrl,s=e.advertiserName,u=e.creativeId,c=e.lineItemId,m=(0,d.I0)(),p=(0,o.useState)(!1),v=(0,l.Z)(p,2),y=v[0],S=v[1];return(0,o.useEffect)((function(){return m((0,b.Vw)()),m((0,b.kh)(g("event_viewed",u,c))),function(){m((0,b.AG)())}}),[m,u,c]),(0,h.jsxs)("div",{className:"sponsor-container",children:[(0,h.jsx)(k.D,{variant:"minuet",className:"sponsor-text","data-ta-id":"sponsor-text",children:f.ag.get("playlist.presented_by",s)}),(0,h.jsxs)("div",{className:"sponsor-logo",children:[(0,h.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:function(){m((0,b.kh)(g("event_clicked",u,c))),S(!0)},children:(0,h.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:s,"data-ta-id":"sponsor-logo"})}),(0,h.jsx)("img",{className:"sponsor-logo__imp-pixel",src:a,alt:""}),t&&(0,h.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:t,alt:""}),y&&(0,h.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:n,alt:""})]})]})};function x(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function T(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?x(Object(i),!0).forEach((function(n){(0,S.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var j=function(e){var n=e.playlistUri,i=(0,d.I0)(),t=(0,d.v9)((function(e){return e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(n)}));return(0,o.useEffect)((function(){t||i((0,b.fd)(n))}),[i,n,t]),t?(0,h.jsx)("div",{children:(0,h.jsx)(N,T({},t))}):null},C=function(e){var n=e.playlistUri,i=(0,d.I0)(),t=(0,d.v9)((function(e){return e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships")})),a=(0,d.v9)((function(e){return e.ads.sponsoredPlaylist.previewAd}));(0,o.useEffect)((function(){t||i((0,b.z8)())}),[i,t]);var l=a||t&&function(e,n){var i=Date.now()/1e3,t=e.split(":"),a=t[t.length-1];return n.some((function(e){var n=e.playlistId,t=e.endTime,l=e.startTime;return n===a&&i>=l&&i<(t||i+1)}))}(n,t);return l?(0,h.jsx)(j,{playlistUri:n}):null},F=i(60210),R=i(43683),A=i(48690),D=i(35410),E=i(20534),P=i(70369),O=i(98778),I=(i(15306),i(21317)),L=i(34011),U=i(4383);const w="hOOwEKqNuXrNvOCB1SgZ",_="csEdkIN9z2LjJIuZraqz";var V=function(e){var n=e.uri,i=(0,U.Z)(n),t=(0,l.Z)(i,2),a=t[0],r=t[1],s=(0,u.k6)(),d=(0,o.useCallback)((function(){r(!1),s.replace("/collection/playlists")}),[s,r]);return(0,h.jsxs)("div",{className:w,children:[(0,h.jsx)(I.l,{iconSize:64}),(0,h.jsxs)("div",{className:_,children:[(0,h.jsx)(k.D,{as:"p",variant:"canon",children:f.ag.get("forbidden-page.title")}),(0,h.jsx)(k.D,{as:"p",variant:"mesto",children:f.ag.get("forbidden-page.description")})]}),a&&(0,h.jsx)(L.D,{colorSet:"invertedLight",onClick:d,children:f.ag.get("remove_from_your_library")})]})},Z=i(6158),M=i(58679),B=i(55120),Q=i(77834),W=i(1838),K=i(22423),z=i(78462),G=i(61412),q=i(12498),H=i(69846),X=i(57784),J=i(92823),Y=i(4236),$=i(62515),ee=i(94349),ne=i(53538),ie=i(49207),te=i(29255),ae=i(44065),le=i(20246),re=i(32648),se=i(84242),oe=i(72138),de=i(73893),ue=i(42714),ce=i(28018),me=i(88767),ke=i(62830);function pe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ve(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?pe(Object(i),!0).forEach((function(n){(0,S.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var fe=i(97194),ye=i(15852),be=i(74410),Se=i(86604),he=i(98197),ge=i(3775),Ne=(i(98984),[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]),xe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}}].concat((0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]),(0,t.Z)(Ne),(0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}}]),(0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]),(0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}}]),(0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]),(0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}}]),(0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]))},Te={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}}].concat((0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]),(0,t.Z)(Ne))},je={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}}].concat((0,t.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}}]),(0,t.Z)(Ne))},Ce=(i(52262),i(24506),i(7073)),Fe=i(72169),Re=i(42781),Ae=i(23384),De=i(38470);function Ee(e,n){var i,t,a,l,r,s,o,d,u,c,m,k,p,v,f,y;return{albums:null!==(f=e.albums,i=(null!==(y=null==f?void 0:f.items)&&void 0!==y?y:[]).map((function(e){return Oe(e)})).filter(Ae.K)||[])&&void 0!==i?i:[],artists:null!==(p=e.artists,t=(null!==(v=null==p?void 0:p.items)&&void 0!==v?v:[]).map((function(e){return Ie(e)})).filter(Ae.K)||[])&&void 0!==t?t:[],episodes:null!==(m=e.episodes,a=(null!==(k=null==m?void 0:m.items)&&void 0!==k?k:[]).map((function(e){return Le(e)})).filter(Ae.K)||[])&&void 0!==a?a:[],tracks:null!==(u=e.tracksV2,l=(null!==(c=null==u?void 0:u.items)&&void 0!==c?c:[]).map((function(e){return we(e.item)})).filter(Ae.K)||[])&&void 0!==l?l:[],topResults:null!==(s=e.topResults,d=null!==(o=null==s?void 0:s.itemsV2)&&void 0!==o?o:[],r=d.map((function(e){var n=(0,Fe.U2)(e,"item");switch(n.__typename){case"AlbumResponseWrapper":return Oe(n);case"ArtistResponseWrapper":return Ie(n);case"EpisodeResponseWrapper":return Le(n);case"TrackResponseWrapper":return we(n);default:return(0,De._)(n),null}})).filter(Ae.K)||[])&&void 0!==r?r:[],query:n}}function Pe(e){return{type:Re.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Fe.NS)(e.coverArt)}}function Oe(e){return"Album"!==e.data.__typename?null:Pe(e.data)}function Ie(e){if("Artist"!==e.data.__typename)return null;var n=e.data;return{type:Re.p.ARTIST,uri:n.uri,id:n.id,name:n.profile.name,images:(0,Fe.NS)(n.visuals.avatarImage)}}function Le(e){var n,i;if("Episode"!==e.data.__typename)return null;var t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:Re.p.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,Fe.NS)(t.coverArt),isExplicit:(null===(n=t.contentRating)||void 0===n?void 0:n.label)===Ce.KS.Explicit,is19PlusOnly:(null===(i=t.contentRating)||void 0===i?void 0:i.label)===Ce.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function Ue(e){var n,i,t,a,l,r,s,o=(0,Fe.NS)((null===(n=e.albumOfTrack)||void 0===n?void 0:n.coverArt)||null);return{type:Re.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:(null===(i=e.albumOfTrack)||void 0===i?void 0:i.name)||"",uri:(null===(t=e.albumOfTrack)||void 0===t?void 0:t.uri)||"",imgUrl:(null===(a=o.at(0))||void 0===a?void 0:a.url)||"",id:(null===(l=e.albumOfTrack)||void 0===l?void 0:l.id)||""},artists:e.artists.items.map((function(e){return{id:e.id,name:e.profile.name,uri:e.uri}})),isPlayable:e.playability.playable,isExplicit:(null===(r=e.contentRating)||void 0===r?void 0:r.label)===Ce.KS.Explicit,is19PlusOnly:(null===(s=e.contentRating)||void 0===s?void 0:s.label)===Ce.KS.NineteenPlus}}function we(e){return"Track"!==e.data.__typename?null:Ue(e.data)}function _e(e){var n=e.at(0);if(!n)return null;switch(n.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:n.tracks.items.map((function(e){return Ue(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,De._)(n),null}}function Ve(e){var n=e.at(0);if(!n)return null;switch(n.__typename){case"Artist":return{albums:n.discography.popularReleasesAlbums.items.map((function(e){return Pe(e)}))||[],artists:[],episodes:[],tracks:n.discography.topTracks.items.map((function(e){return Ue(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,De._)(n),null}}var Ze=function(){var e=(0,a.Z)(s().mark((function e(n,i){var t,a,l,r,o,d,u=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>2&&void 0!==u[2]?u[2]:0,a=u.length>3&&void 0!==u[3]?u[3]:10,l=u.length>4&&void 0!==u[4]?u[4]:10,r={term:i,offset:t,limit:a,numberOfTopResults:l},e.next=6,n(xe,r);case 6:if(o=e.sent,d=null==o?void 0:o.data.searchV2){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",Ee(d,i));case 11:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),Me=function(){var e=(0,a.Z)(s().mark((function e(n,i){var t,a,l,r,o,d=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>2&&void 0!==d[2]?d[2]:50,a=d.length>3&&void 0!==d[3]?d[3]:0,l={uris:[i],limit:t,offset:a},e.next=5,n(Te,l);case 5:if(r=e.sent,o=null==r?void 0:r.data.albums){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",_e(o));case 10:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),Be=function(){var e=(0,a.Z)(s().mark((function e(n,i){var t,a,l,r,o,d,u=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>2&&void 0!==u[2]?u[2]:50,a=u.length>3&&void 0!==u[3]?u[3]:0,l={uris:[i],limit:t,offset:a},e.next=5,n(je,l);case 5:if(r=e.sent,o=null==r?void 0:r.data.artists){e.next=9;break}return e.abrupt("return",null);case 9:return d=Ve(o),e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),Qe=i(94184),We=i.n(Qe),Ke=i(24697),ze=i(44295);const Ge="YAYCVnYpPvmYV4JyTmn5",qe="FeWwGSRANj36qpOBoxdx",He="_h5mio6VqcL_fmiXAb1S",Xe="Hfgj4Zbb2ijt8g54MlCA",Je="sgZ_MgcS1NlccH19fYsa",Ye="JzyZE2R09wq7xtjECDeR";var $e=o.memo((function(e){var n=e.placeholder,i=e.onChange,t=void 0===i?function(){}:i,a=e.onFocus,r=void 0===a?function(){}:a,s=(0,o.useState)(""),d=(0,l.Z)(s,2),u=d[0],c=d[1],m=(0,o.useRef)(null),p=(0,Ke.y1)((function(e){t(e)}),200),v=(0,o.useCallback)((function(e){var n=e.currentTarget.value;c(n),p(n)}),[c,p]),y=(0,o.useCallback)((function(){m.current&&m.current.focus(),c(""),t("")}),[c,t]),b=(0,o.useCallback)((function(e){"Escape"===e.key&&u&&y()}),[u,y]);return(0,h.jsxs)("div",{className:Ge,role:"search",children:[(0,h.jsx)(k.D,{as:"input",variant:"mesto",ref:m,className:We()(qe),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:n,onChange:v,onKeyDown:b,onFocus:r,value:u}),(0,h.jsxs)("div",{className:He,children:[(0,h.jsx)("span",{className:Xe,children:(0,h.jsx)(ze.j,{iconSize:16,className:Je,"aria-hidden":"true"})}),u&&(0,h.jsx)("button",{className:Ye,onClick:y,"aria-label":f.ag.get("search.a11y.clear-input"),children:(0,h.jsx)(be.k,{iconSize:16})})]})]})})),en=i(28248),nn=function(e){var n=e.renderRow,i=e.searchResults,t=e.renderSeeAllRow,a=e.seeAllXList;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:en.hU,nrTracks:i.length,tracks:i,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("search.title.all"),renderRow:t,rowPlaceholder:en.hU,nrTracks:a.length,tracks:a,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]})},tn=function(e){var n=e.renderRow,i=e.searchResults;return(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:en.hU,nrTracks:i.length,tracks:i,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD]})},an=function(e){var n=e.renderRow,i=e.searchResults,t=i.filter((function(e){return e.type===Re.p.TRACK})),a=i.filter((function(e){return e.type===Re.p.ALBUM}));return(0,h.jsxs)("div",{children:[(0,h.jsx)(k.D,{as:"p",variant:"cello",className:Q.Z.artistResultListTitle,children:f.ag.get("playlist.curation.popular_songs")}),(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("playlist.curation.popular_songs"),renderRow:n,rowPlaceholder:en.hU,nrTracks:t.length,tracks:t,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD]}),(0,h.jsx)(k.D,{as:"p",variant:"cello",className:Q.Z.artistResultListTitle,children:f.ag.get("playlist.curation.albums")}),(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("playlist.curation.albums"),renderRow:n,rowPlaceholder:en.hU,nrTracks:a.length,tracks:a,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD]})]})},ln=function(e){var n=e.renderRow,i=e.searchResults;return(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:en.hU,nrTracks:i.length,tracks:i,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD]})},rn=function(e){var n=e.renderRow,i=e.searchResults;return(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:en.hU,nrTracks:i.length,tracks:i,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD]})},sn=function(e){var n=e.renderRow,i=e.searchResults;return(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("search.title.top-results"),renderRow:n,rowPlaceholder:en.hU,nrTracks:i.length,tracks:i,resolveUri:function(e){return e.uri},columns:[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD]})},on=i(70325);const dn="G2t3w2AAeb5OXp0_GeWs",un="saVjTFMyWYUz975_tkQm",cn="thi8fNCkEhutRkDC90c0",mn="pHVlkChuJpEnBQyU3ADv",kn="ENWs3JxcqtD98_8fbPz2",pn="L8IUKEJL6JiTyE_qUVCc",vn="XcyjdXgsNX0DBt72tfiD",fn="VhJnuS7UcUPfIlzD8dlU",yn="He29vQ5anFj_bJ5iEaI2";var bn,Sn=function(e){var n,i=e.searchResult,t=e.index,a=e.isRTL,l=e.onClick,r=null===(n=i.images.at(0))||void 0===n?void 0:n.url;return(0,h.jsx)(on.RX,{className:kn,rowIndex:t,"aria-selected":!1,children:(0,h.jsxs)("div",{"aria-label":"".concat(f.ag.get("artist-page.tracks.seemore")," ").concat(i.name),className:yn,onClick:l,children:[(0,h.jsxs)(on.id,{columnIndex:0,className:pn,children:[void 0!==r?(0,h.jsx)("img",{className:cn,src:r,alt:i.name}):null,(0,h.jsxs)("div",{className:vn,children:[(0,h.jsx)(k.D,{as:"p",className:mn,variant:"ballad",children:i.name}),(0,h.jsx)(k.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:f.ag.get("album")})]})]}),(0,h.jsx)(on.id,{columnIndex:1}),(0,h.jsx)(on.id,{columnIndex:2,children:(0,h.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(i.name),className:fn,onClick:l,children:a?(0,h.jsx)(he.e,{}):(0,h.jsx)(Se.V,{})})})]})})},hn=i(39278),gn=function(e){var n=e.size;return(0,h.jsx)("div",{className:un,children:(0,h.jsx)(hn.a,{iconSize:n})})},Nn=function(e){var n,i=e.searchResult,t=e.index,a=e.isRTL,l=e.onClick,r=null===(n=i.images.at(0))||void 0===n?void 0:n.url;return(0,h.jsx)(on.RX,{className:kn,rowIndex:t,"aria-selected":!1,children:(0,h.jsxs)("div",{"aria-label":"".concat(f.ag.get("artist-page.tracks.seemore")," ").concat(i.name),className:yn,onClick:l,"data-testid":"playlist-inline-curation-artist",children:[(0,h.jsxs)(on.id,{columnIndex:0,className:pn,children:[void 0!==r?(0,h.jsx)("img",{className:dn,src:r,alt:i.name}):(0,h.jsx)(gn,{size:16}),(0,h.jsxs)("div",{className:vn,children:[(0,h.jsx)(k.D,{as:"p",className:mn,variant:"ballad",children:i.name}),(0,h.jsx)(k.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:f.ag.get("artist")})]})]}),(0,h.jsx)(on.id,{columnIndex:1}),(0,h.jsx)(on.id,{columnIndex:2,children:(0,h.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(i.name),className:fn,onClick:l,children:a?(0,h.jsx)(he.e,{}):(0,h.jsx)(Se.V,{})})})]})})},xn=function(e){var n,i,t=e.episode,a=e.contextUri,l=e.index,r=e.usePlayContextItem;return(0,h.jsx)(en.YK,{uid:t.id,uri:t.uri,isPlayable:t.isPlayable,isMOGEFRestricted:t.is19PlusOnly,isExplicit:t.isExplicit,contextUri:a,name:t.name,imgUrl:null!==(n=null===(i=t.images.at(0))||void 0===i?void 0:i.url)&&void 0!==n?n:"",index:l,podcast:t.podcast,usePlayContextItem:r})},Tn=function(e){var n=e.label,i=e.index,t=e.isRTL,a=e.onClick;return(0,h.jsx)(on.RX,{className:kn,rowIndex:i,"aria-selected":!1,children:(0,h.jsxs)("div",{"aria-label":n,className:yn,onClick:a,children:[(0,h.jsx)(on.id,{columnIndex:0,className:pn,children:(0,h.jsx)(k.D,{as:"p",className:mn,variant:"ballad",children:n})}),(0,h.jsx)(on.id,{columnIndex:1}),(0,h.jsx)(on.id,{columnIndex:2,children:(0,h.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":n,className:fn,onClick:a,children:t?(0,h.jsx)(he.e,{}):(0,h.jsx)(Se.V,{})})})]})})},jn=function(e){var n=e.track,i=e.contextUri,t=e.index,a=e.usePlayContextItem;return(0,h.jsx)(en.cp,{uid:n.id,uri:n.uri,isPlayable:n.isPlayable,isMOGEFRestricted:n.is19PlusOnly,isExplicit:n.isExplicit,contextUri:i,name:n.name,imgUrl:n.album.imgUrl,index:t,album:n.album,artists:n.artists,usePlayContextItem:a})};function Cn(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Fn(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Cn(Object(i),!0).forEach((function(n){(0,S.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cn(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}!function(e){e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS"}(bn||(bn={}));var Rn=function(e,n){return"GO_BACK"===n.type?1===e.breadcrumbs.length?e:e=Fn(Fn({},e),{},{breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}):"NAV_TO_ENTITY"===n.type?e=Fn(Fn({},e),{},{breadcrumbs:[].concat((0,t.Z)(e.breadcrumbs),[n.level])}):("NAV_TO_RESULTS"===n.type?e=Fn(Fn({},e),{},{breadcrumbs:[].concat((0,t.Z)(e.breadcrumbs),[n.level])}):"CHANGE_TERM"===n.type&&(e={term:n.term,breadcrumbs:[{navType:bn.SEARCH,term:n.term,title:""}]}),e)},An=function(e){var n,i=e.resultList,t=e.level,a=e.isRTL,l=e.playlistUri,r=e.navToResults,s=e.navToEntity,d=e.term,u=i,c=function(e){return e.filter((function(e){return e.type===Re.p.TRACK||e.type===Re.p.EPISODE})).map((function(e){var n=e.uri,i=e.id;return{type:m().isTrack(n)?Re.p.TRACK:Re.p.EPISODE,uri:n,uid:i,provider:null}}))}(i),p=(0,se.n)({uri:"".concat(l.replace("spotify:","spotify:internal:recs:"),":").concat(encodeURIComponent(d),":").concat(null!==(n=null==t?void 0:t.navType)&&void 0!==n?n:0),pages:[{items:c}]},{featureIdentifier:"search"}).usePlayContextItem,v=(0,o.useCallback)((function(e,n){return(0,h.jsx)(Tn,{isRTL:a,index:n,label:e.label,onClick:function(){r({navType:e.type,term:d,title:e.label})}},e.uri)}),[a,r,d]),y=(0,o.useCallback)((function(e,n){return e.type===Re.p.ARTIST?(0,h.jsx)(Nn,{isRTL:a,index:n,searchResult:e,onClick:function(){s({navType:bn.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Re.p.EPISODE?(0,h.jsx)(xn,{index:n,episode:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p},e.uri):e.type===Re.p.TRACK?(0,h.jsx)(jn,{index:n,track:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p},e.uri):(0,h.jsx)(Sn,{index:n,isRTL:a,searchResult:e,onClick:function(){s({navType:bn.ALBUM,uri:e.uri,title:e.name})}},e.uri)}),[a,s,l,p]);if(""===d)return(0,h.jsx)("div",{className:Q.Z.emptySearchTermContainer});if(!i||0===(null==i?void 0:i.length))return(0,h.jsxs)("div",{className:Q.Z.emptyStateContainer,children:[(0,h.jsx)(k.D,{as:"h1",variant:"canon",children:f.ag.get("search.empty-results-title",d)}),(0,h.jsx)(k.D,{as:"p",variant:"mesto",children:f.ag.get("search.empty-results-text")})]});if((null==t?void 0:t.navType)===bn.SEARCH){var b=[{type:bn.ARTISTRESULTS,label:f.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:bn.ALBUMRESULTS,label:f.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:bn.TRACKRESULTS,label:f.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return u=i,(0,h.jsx)(nn,{renderRow:y,searchResults:u,renderSeeAllRow:v,seeAllXList:b})}return(null==t?void 0:t.navType)===bn.ALBUM?(0,h.jsx)(tn,{renderRow:y,searchResults:u}):(null==t?void 0:t.navType)===bn.ARTIST?(0,h.jsx)(an,{renderRow:y,searchResults:u}):(null==t?void 0:t.navType)===bn.ALBUMRESULTS?(0,h.jsx)(ln,{renderRow:y,searchResults:u}):(null==t?void 0:t.navType)===bn.TRACKRESULTS?(0,h.jsx)(rn,{renderRow:y,searchResults:u}):(null==t?void 0:t.navType)===bn.ARTISTRESULTS?(0,h.jsx)(sn,{renderRow:y,searchResults:u}):null},Dn=function(e){var n=e.playlistUri,i=e.onCurationModeChange,r=(0,o.useState)([]),u=(0,l.Z)(r,2),c=u[0],m=u[1],p=(0,o.useState)(),v=(0,l.Z)(p,2),y=v[0],b=v[1],S=(0,d.v9)((function(e){return e.ui.textDirection.isRTL})),g=function(){var e=(0,o.useReducer)(Rn,{term:"",breadcrumbs:[]}),n=(0,l.Z)(e,2),i=n[0],t=n[1],a=i.breadcrumbs,r=i.term;return{changeTerm:function(e){t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:function(){t({type:"GO_BACK"})},navToEntity:function(e){t({type:"NAV_TO_ENTITY",level:e})},navToResults:function(e){t({type:"NAV_TO_RESULTS",level:e})},term:r}}(),N=g.level,x=g.changeTerm,T=g.goBack,j=g.navToEntity,C=g.navToResults,F=g.term,R=(0,o.useContext)(ge.Ax).request;return(0,o.useEffect)((function(){var e=!0,n=function(){var n=(0,a.Z)(s().mark((function n(){var i,a,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(N){n.next=2;break}return n.abrupt("return");case 2:n.t0=N.navType,n.next=n.t0===bn.SEARCH?5:n.t0===bn.ARTISTRESULTS?21:n.t0===bn.ALBUMRESULTS?23:n.t0===bn.TRACKRESULTS?25:n.t0===bn.EPISODERESULTS?27:n.t0===bn.ALBUM?29:n.t0===bn.ARTIST?40:51;break;case 5:if(n.prev=5,y&&(y.query===F||""===F)){n.next=13;break}return n.next=9,Ze(R,F);case 9:i=n.sent,e&&b(i),n.next=14;break;case 13:""===F&&m([]);case 14:n.next=19;break;case 16:n.prev=16,n.t1=n.catch(5),m([]);case 19:return y&&m(y.topResults),n.abrupt("break",52);case 21:return y&&m(null==y?void 0:y.artists),n.abrupt("break",52);case 23:return y&&m(null==y?void 0:y.albums),n.abrupt("break",52);case 25:return y&&m(null==y?void 0:y.tracks),n.abrupt("break",52);case 27:return y&&m(null==y?void 0:y.episodes),n.abrupt("break",52);case 29:return n.prev=29,n.next=32,Me(R,N.uri,100,0);case 32:a=n.sent,e&&a&&m(a.tracks),n.next=39;break;case 36:n.prev=36,n.t2=n.catch(29),m([]);case 39:return n.abrupt("break",52);case 40:return n.prev=40,n.next=43,Be(R,N.uri,100,0);case 43:l=n.sent,e&&l&&m([].concat((0,t.Z)(l.albums),(0,t.Z)(l.tracks))),n.next=50;break;case 47:n.prev=47,n.t3=n.catch(40),m([]);case 50:case 51:return n.abrupt("break",52);case 52:case"end":return n.stop()}}),n,null,[[5,16],[29,36],[40,47]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!1}}),[N,F,y,R]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:Q.Z.playlistInlineCurationSection,children:[(0,h.jsxs)("div",{className:Q.Z.playlistInlineCurationWrapper,children:[(0,h.jsx)(k.D,{as:"h1",className:Q.Z.playlistInlineCurationTitle,variant:"canon",children:f.ag.get("playlist.curation.title")}),(0,h.jsx)(o.Suspense,{fallback:null,children:(0,h.jsx)($e,{placeholder:f.ag.get("playlist.curation.search_placeholder"),onFocus:function(){i(!0)},onChange:function(e){x(e)}})})]}),(0,h.jsx)("button",{className:Q.Z.playlistInlineCurationCloseButton,onClick:function(){return i(!1)},children:(0,h.jsx)(be.k,{"aria-label":f.ag.get("close")})})]}),null!==N&&N.navType!==bn.SEARCH?(0,h.jsxs)("button",{className:Q.Z.playlistInlineCurationBackButton,onClick:function(){return T()},children:[S?(0,h.jsx)(Se.V,{"aria-label":f.ag.get("navbar.go-back"),className:Q.Z.icon}):(0,h.jsx)(he.e,{"aria-label":f.ag.get("navbar.go-back"),className:Q.Z.icon}),(0,h.jsx)(k.D,{as:"p",variant:"cello",children:N.title})]}):null,(0,h.jsx)("div",{className:Q.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,h.jsx)(An,{playlistUri:n,term:F,level:N,resultList:c,navToEntity:j,navToResults:C,isRTL:S})})]})},En=(i(70189),i(42922)),Pn=i(49961),On=new Set(z.RJ),In=new Set([]),Ln={column:null,order:en.kn.NONE},Un=o.memo((function(e){var n=e.ariaLabel,i=e.nrTracks,t=e.playlistUri,r=e.rankType,d=e.scrollToUid,u=e.usePlayContextItem,c=e.tracklistDomRef,m=(0,o.useContext)(oe.ZF),k=(0,o.useContext)(K.fo),p=k.filter,v=k.setFilter,f=(0,o.useRef)(null),y=(0,o.useState)(i),b=(0,l.Z)(y,2),S=b[0],g=b[1],N=(0,o.useCallback)((function(){f.current&&f.current.update()}),[]);(0,ce.r)(t,N);var x=(0,o.useContext)(z.Gb),T=x.sortState,j=x.setSortState,C=(0,o.useCallback)((function(e){j((0,W.VK)(e,T))}),[T,j]);(0,o.useEffect)((function(){f.current&&f.current.update()}),[T,p]),(0,o.useEffect)((function(){j(Ln),v("")}),[t,v,j]),(0,o.useEffect)((function(){f.current&&d&&f.current.scrollToItem({uid:d})}),[d]),(0,o.useEffect)((function(){f.current&&""===p&&f.current.scrollToFirstSelected()}),[p,S]);var F=(0,o.useCallback)(function(){var e=(0,a.Z)(s().mark((function e(n,i){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getContents(t,{offset:n,limit:i,sort:(0,W._j)(T),filter:p,decorateFormatListData:!0});case 2:return(a=e.sent).totalLength!==S&&g(a.totalLength),e.abrupt("return",a.items);case 5:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),[t,m,S,T,p]),R="plays"===r,A=(0,o.useCallback)((function(e,n){var i,a,l,r=(0,Pn.X)(null===(i=e.album)||void 0===i?void 0:i.images,{desiredSize:40,desiredLabel:"small"});return(0,h.jsx)(en.h_,{index:n,contextUri:t,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==r?void 0:r.url)||"",statusChange:null===(a=e.formatListAttributes)||void 0===a?void 0:a.status,showPlayCount:R,playCount:parseInt((null===(l=e.formatListAttributes)||void 0===l?void 0:l.rank)||"0",10),usePlayContextItem:u},n+e.uri)}),[t,R,u]),D=(0,o.useMemo)((function(){return R?[en.QD.INDEX,en.QD.TITLE,en.QD.PLAYS,en.QD.ALBUM,en.QD.DURATION]:[en.QD.INDEX,en.QD.TITLE,en.QD.ALBUM,en.QD.DURATION]}),[R]),E=(0,o.useCallback)((function(e){return e.uri}),[]),P=(0,o.useCallback)((function(e){return e.id}),[]);return(0,h.jsx)(En.ZP,{value:"chart-tracklist",children:(0,h.jsx)(en.Pv,{ariaLabel:n,hasHeaderRow:!0,columns:D,sortableColumns:m.getCapabilities().canSort?On:In,sortState:T,onSort:C,renderRow:A,resolveUri:E,resolveUid:P,nrTracks:S,fetchTracks:F,limit:100,canFetchAllTracks:m.getCapabilities().canFetchAllTracks,outerRef:f,outerDomRef:c},t)})})),wn=i(45987),_n=i(47647),Vn=i(51674),Zn=i(51627);const Mn="x-contributorButton-button",Bn="x-contributorButton-ContributorButton";var Qn=["uri","label","onClick"];function Wn(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Kn(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Wn(Object(i),!0).forEach((function(n){(0,S.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wn(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var zn=function(e){var n=e.uri,i=e.label,t=e.onClick,a=(0,wn.Z)(e,Qn),l=(0,Zn.l)({uri:n,permissionLevel:"CONTRIBUTOR"}).onCopyLink;return(0,h.jsx)(Vn._,{label:i,children:(0,h.jsx)("button",{className:Mn,onClick:function(e){null==t||t(e),null==l||l()},"aria-label":i,children:(0,h.jsx)(_n.t,Kn(Kn({},a),{},{className:Bn,iconSize:32,"aria-hidden":"true"}))})})},Gn=i(40786),qn=i(57520),Hn=i(9279),Xn=i(39054),Jn=i(92877);const Yn="DcSuiVzNWhraCpO8S3lG",$n="DIH1kOAtER9ftnt4scCA",ei="klo2f1PAE6FpXn2BWgw3",ni="y6v4lxHum6vdB8uPo2oM",ii="ALqdGvcp70MBJ6P2MsJc";function ti(){return(0,h.jsxs)(qn.i,{children:[(0,h.jsxs)("colgroup",{children:[(0,h.jsx)("col",{width:"10%"}),(0,h.jsx)("col",{width:"90%"})]}),(0,h.jsxs)(Hn.S,{hover:!0,children:[(0,h.jsxs)(Xn.p,{className:Yn,children:[(0,h.jsx)(Jn.E,{className:We()($n,ei),src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,h.jsx)(Jn.E,{className:We()($n,ni),src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,h.jsx)(Jn.E,{className:We()($n,ii),src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,h.jsxs)(Xn.p,{children:[(0,h.jsx)(k.D,{as:"p",variant:"mestoBold",children:"View employee leaderboard"}),(0,h.jsx)(k.D,{as:"p",variant:"mesto",children:"You're in the top 21% of listeners."})]})]})]})}var ai=i(98816),li=i(98562),ri=i(35213),si=o.memo((function(e){var n=e.metadata,i=e.tracklistDomRef,t=n.hasEpisodes,a=n.isCollaborative,l=n.formatListData,r=n.hasDateAdded,s=n.collaborators,d="chart"===(null==l?void 0:l.type),u="live-streams"===(null==l?void 0:l.type),c=["blend","celebrity-blend","friends-mix"].indexOf((null==l?void 0:l.type)||"")>-1,m=!!t,k=(0,ye.fU)(ai.createDesktopSearchBarEventFactory,{}),p=k.spec,v=k.logger,y=(0,o.useCallback)((function(){v.logInteraction(p.filterFieldFactory().keyStrokeFilter())}),[v,p]),b=(0,o.useCallback)((function(){v.logInteraction(p.filterFieldFactory().hitClearFilter())}),[v,p]),S=(0,o.useCallback)((function(){v.logInteraction(p.sortButtonFactory().hitSort())}),[v,p]),g=(0,o.useMemo)((function(){var e;return function(e,n,i,t,a,l,r){return e?z.RJ:(0,W.RG)(n,i,t,a,l,r)}(d,a,m,r,u,c,null!==(e=null==s?void 0:s.count)&&void 0!==e?e:1)}),[d,a,m,r,u,c,s]);return(0,h.jsxs)("div",{className:Q.Z.searchBoxContainer,children:[(0,h.jsx)(o.Suspense,{fallback:null,children:(0,h.jsx)(li.K,{placeholder:f.ag.get("playlist.search_in_playlist"),onFilter:y,onClear:b,clearOnEscapeInElementRef:i})}),(0,h.jsx)(ri.l,{columns:g,onSort:S})]})})),oi=i(61728),di=i(82760),ui=(i(2707),"multiUserAttributionDisplayNamesV2"),ci=i(59916);function mi(e){return(0,ci.MW)(e)||(0,ci.JF)(e)}var ki=new Set(z.zq),pi=new Set([]),vi=o.memo((function(e){var n=e.ariaLabel,i=e.nrTracks,t=e.playlistUri,r=e.playlistName,u=e.isCollaborative,c=e.isMixedMedia,k=e.isLive,p=e.isBlend,v=e.hasDateAdded,b=e.canEdit,S=e.scrollToUid,g=e.feedbackPath,N=e.deleteFeedbackPath,x=e.usePlayContextItem,T=e.tracklistRef,j=e.tracklistDomRef,C=e.nrCollaborators,F=void 0===C?1:C,R=e.canRemove,A=e.spec,D=e.initialItems,E=(0,ye.$P)(),P=(0,o.useContext)(oe.ZF),O=(0,o.useContext)(K.fo).filter,I=(0,o.useContext)(z.Gb),L=I.sortState,U=I.setSortState,w=(0,o.useState)(i),_=(0,l.Z)(w,2),V=_[0],Z=_[1],M=(0,o.useRef)((function(){})),B=(0,o.useState)([]),Q=(0,l.Z)(B,2),G=Q[0],q=Q[1],H=(0,o.useRef)({}),J=(0,d.I0)(),Y=(0,o.useCallback)((function(){null!=T&&T.current&&T.current.update()}),[T]);(0,ce.r)(t,Y);var $=(0,o.useCallback)((function(e,n){U((0,W.VK)(e,L)),E.logInteraction(A.columnHeaderFactory({identifier:e,position:n||0}).hitSort())}),[U,L,E,A]),ee=(0,o.useCallback)((function(e){M.current(),P.remove(t,e)}),[P,t]),ne=(0,o.useCallback)((function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];R&&(M.current=n,e.length>1&&!i?q(e):ee(e))}),[R,ee]);(0,o.useEffect)((function(){null!=T&&T.current&&T.current.update()}),[L,O,T]),(0,o.useEffect)((function(){null!=T&&T.current&&S&&T.current.scrollToItem({uid:S})}),[S,T]),(0,o.useEffect)((function(){null!=T&&T.current&&""===O&&T.current.scrollToFirstSelected()}),[O,V,T]),(0,o.useEffect)((function(){Z(i)}),[i]);var ie=(0,o.useCallback)(function(){var e=(0,a.Z)(s().mark((function e(n,i){var a,l,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getContents(t,{offset:n,limit:i,sort:(0,W._j)(L),filter:O,decorateFormatListData:!!g||k||p});case 2:return a=e.sent,l=a.items.filter((function(e,i){return null!==e||(H.current[i+n]=!0,!1)})),r=Object.keys(H.current).length,a.totalLength-r!==V&&Z(a.totalLength-r),e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),[t,P,V,L,O,g,k,p]),te=(0,o.useCallback)((function(e,n,i){if(null!=T&&T.current){var a=T.current.getRows();a[n].id&&(E.logInteraction(A.dragSort()),i===di.W.Before?P.move(t,e,{before:a[n].id}):P.move(t,e,{after:a[n].id}))}}),[T,E,A,P,t]),ae=(0,o.useCallback)((function(e,n,i){if(null!=T&&T.current){var a=T.current.getRows();a[n].id&&(E.logInteraction(A.dragAddToPlaylist({playlist:t,itemToBeAdded:e[0]})),i===di.W.Before?J((0,y.jV)(t,e,{before:a[n].id})):J((0,y.jV)(t,e,{after:a[n].id})))}}),[T,E,A,t,J]),le=(0,o.useCallback)((function(){P.resync(t)}),[P,t]),re=(0,o.useCallback)((function(e,n){var i,a,l,s,o,d,v,f,y=!!(0,ci.JF)(e)&&e.podcastSubscription.isUserSubscribed;if((0,ci.JF)(e))v=e.show,f=e.images.concat(e.show.images);else if((0,ci.MW)(e)){var S;v=e.album,f=null===(S=e.album)||void 0===S?void 0:S.images}var T=(0,Pn.X)(f,{desiredSize:40,desiredLabel:"small"}),j=[];b&&L.order===en.kn.NONE&&(j=[X.aN[m().Type.TRACK],X.aN[m().Type.LOCAL],X.aN[m().Type.EPISODE]]);var C="1"===(null==e||null===(i=e.formatListAttributes)||void 0===i?void 0:i["dislike-feedback-selected"]),A=!1;(0,ci.JF)(e)&&e.podcastSubscription.isPaywalled&&!y?A=!0:mi(e)&&(A=e.isPlayable&&!C);var D=p&&function(e,n){var i,t,a,l,r=[];if(!n)return r;var s=n[ui]?ui:"multiUserAttributionDisplayNames",o=null==n||null===(i=n[s])||void 0===i?void 0:i.split(","),d=null==n||null===(t=n.multiUserAttributionImages)||void 0===t?void 0:t.split(",");if(!o||!d)return r;for(var u,c=(null==n||null===(a=n.multiUserAttributionUsernamesV2)||void 0===a?void 0:a.split(","))||[],k=(null==n||null===(l=n.multiUserAttributionType)||void 0===l?void 0:l.split(","))||[],p=o.length,v=0;v<p;v++){var f=c[v],y=f&&m().profileURI(f).toURI();r.push({username:f,uri:y,displayName:o[v],images:(u=d[v],u.length>1?[{url:u}]:[]),recsplanation:k[v]})}return r.sort((function(n,i){return n.username?n.username===(null==e?void 0:e.username)?-1:i.username===(null==e?void 0:e.username)?1:0:0}))}(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[];return(0,h.jsx)(en.dx,{index:n,playIndex:null!==(a=e.playIndex)&&void 0!==a?a:void 0,contextUri:t,uri:e.uri,uid:null!==(l=e.uid)&&void 0!==l?l:void 0,id:e.id,isPlayable:A,duration_ms:mi(e)?e.duration.milliseconds:0,isPaywalled:!!(0,ci.JF)(e)&&e.podcastSubscription.isPaywalled,isUserSubscribed:y,name:mi(e)?e.name:"",artists:(0,ci.MW)(e)?e.artists:void 0,albumOrShow:v,isExplicit:(0,ci.MW)(e)&&e.isExplicit,isCollaborative:u,nrCollaborators:F,isMixedMedia:c,isLocal:(0,ci.MW)(e)&&e.isLocal,addedBy:D,hasDecoratedAddedBy:P.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,ci.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,ci.MW)(e)||(0,ci.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:(null==T?void 0:T.url)||"",onMove:te,onInsert:ae,usePlayContextItem:x,allowedDropTypes:j,feedbackPath:g,feedbackUri:null==e||null===(s=e.formatListAttributes)||void 0===s?void 0:s.feedback_uri,deleteFeedbackPath:N,isDisliked:C,isLive:k,isBlend:p,ticketingSiteURL:null==e||null===(o=e.formatListAttributes)||void 0===o?void 0:o.ticketingSite,eventDate:null==e||null===(d=e.formatListAttributes)||void 0===d?void 0:d.eventDate,canRemove:R,onFeedbackClick:le,playlistName:r},n+e.uri)}),[b,L.order,p,t,u,F,c,P,te,ae,x,g,N,k,R,le,r]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(En.ZP,{value:"playlist-tracklist",children:(0,h.jsx)(en.Pv,{testID:"playlist-tracklist",ariaLabel:n,hasHeaderRow:!0,columns:(0,W.RG)(u,c,v,k,p,F),sortableColumns:P.getCapabilities().canSort?ki:pi,sortState:L,onSort:$,onRemove:ne,renderRow:re,resolveUri:function(e){return e.uri},resolveUid:function(e){return e.id},nrTracks:V,fetchTracks:ie,limit:100,canFetchAllTracks:P.getCapabilities().canFetchAllTracks,outerRef:T,outerDomRef:j,tracks:D.filter(Boolean)},t)}),(0,h.jsx)(oi.h,{title:f.ag.get("playlist.remove_from_playlist",r),isOpen:G.length>0,tracks:G,onClose:function(e){e.stopPropagation(),q([])},onRemove:ee})]})})),fi=i(86025),yi=(i(26541),i(27826)),bi=i(61634);function Si(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function hi(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Si(Object(i),!0).forEach((function(n){(0,S.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Si(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var gi=o.memo((function(e){var n=e.playlistUri,i=e.playlistLength,a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=2*n,a=3*n,r=(0,o.useRef)(0),s=(0,o.useState)(e),d=(0,l.Z)(s,2),u=d[0],c=d[1],m=(0,o.useState)([]),k=(0,l.Z)(m,2),p=k[0],f=k[1],y=(0,o.useRef)([]),b=(0,o.useContext)(ue.Z),S=(0,ye.fU)(v.createDesktopPlaylistEventFactory,{data:{uri:e}}),h=S.spec,g=S.logger,N=(0,o.useMemo)((function(){return h.recommendedFactory()}),[h]);(0,o.useEffect)((function(){var n=b.getEvents(),i=function(n){n.data.uri===e&&f((function(e){return e.filter((function(e){return n.data.items.every((function(n){return n.uri!==e.uri}))}))}))};return n.addListener(bi.XL.OPERATION_COMPLETE,i),function(){n.removeListener(bi.XL.OPERATION_COMPLETE,i)}}),[b,e]),(0,o.useEffect)((function(){return f([]),c(e),y.current=[],r.current=r.current+1,function(){r.current=r.current+1}}),[e]),(0,o.useEffect)((function(){if(p.length<i){var e=Math.min(i,a-p.length),n=r.current;b.getRecommendedTracks(u,y.current,e).then((function(i){if(n===r.current){var a=i.map((function(e){return(null==e?void 0:e.uri)&&yi.o.from(e.uri).id})).filter((function(e){return null!==e}));i.length<e&&y.current.length?y.current=[]:y.current=[].concat((0,t.Z)(y.current),(0,t.Z)(a)),f((function(e){return[].concat((0,t.Z)(e),(0,t.Z)(i))}))}}))}}),[i,a,b,u,p.length]);var x=(0,o.useCallback)((function(){if(h){var e=N.refreshButtonFactory().hitRefreshContent();g.logInteraction(e)}f((function(e){return e.slice(n)}))}),[g,N,h,n]);return{tracks:p.slice(0,n),_bufferedTracks:p.slice(n),refresh:x}}(n),r=a.tracks,s=a.refresh,d=!i||0===i,u=(0,se.n)({uri:n.replace("spotify:","spotify:internal:recs:"),pages:[{items:r.map((function(e){return hi(hi({},e),{},{provider:null,type:Re.p.TRACK,uid:null})}))}]},{featureIdentifier:"playlist_recommendations"}).usePlayContextItem,c=(0,o.useCallback)((function(e,i){return(0,h.jsx)(en.cp,{index:i,imgUrl:e.album.imageUrl,contextUri:n.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!e.isMOGEFRestricted,name:e.name,artists:e.artists,album:hi(hi({},e.album),{},{imgUrl:e.album.imageUrl}),isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:u},"".concat(i,"-").concat(e.uri))}),[n,u]),m=(0,o.useMemo)((function(){return[en.QD.TITLE,en.QD.ALBUM,en.QD.ADD]}),[]),p=(0,o.useCallback)((function(e){return e.uri}),[]),y=(0,o.useCallback)((function(e){return e.id}),[]),b=(0,o.useMemo)((function(){return r.slice(0,Math.min(r.length,10))}),[r]);return r.length>0?(0,h.jsxs)("div",{className:Q.Z.recommendedTrackList,children:[(0,h.jsx)("div",{className:Q.Z.top,children:(0,h.jsxs)("div",{className:Q.Z.header,children:[(0,h.jsx)(k.D,{variant:"canon",children:f.ag.get("playlist.extender.recommended.title")}),(0,h.jsx)(k.D,{variant:"mesto",className:Q.Z.subtitle,children:d?f.ag.get("playlist.extender.title.in.playlist"):f.ag.get("playlist.extender.songs.in.playlist")})]})}),r.length?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(en.Pv,{ariaLabel:f.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(r.length,10),rowPlaceholder:en.hU,tracks:b,renderRow:c,resolveUri:p,resolveUid:y,columns:m},"".concat(n,"-recommended")),(0,h.jsx)(fi.o,{className:Q.Z.refreshButton,onClick:s,children:f.ag.get("playlist.extender.refresh")})]}):null]}):null})),Ni=o.lazy((function(){return Promise.all([i.e(1814),i.e(2716),i.e(7405)]).then(i.bind(i,82716))})),xi=o.lazy((function(){return i.e(7427).then(i.bind(i,61991))})),Ti=o.memo((function(e){var n=e.playlist,i=e.capabilities,r=n.metadata,c=r.uri,b=r.name,S=r.images,g=r.totalLength,N=r.isOwnedBySelf,x=r.isCollaborative,T=r.hasEpisodes,j=r.hasSpotifyTracks,I=r.canAdd,L=r.canRemove,w=r.canPlay,_=r.formatListData,V=r.hasDateAdded,Z=r.collaborators,H=n.contents.items,oe=(0,ye.fU)(v.createDesktopPlaylistEventFactory,{data:{uri:c}}),ue=oe.spec,ce=oe.logger,me=oe.UBIFragment,ke=(0,Y.k)(),pe=o.useMemo((function(){return ue.headerFactory()}),[ue]),ve=o.useMemo((function(){return ue.tracklistFactory()}),[ue]),fe="chart"===(null==_?void 0:_.type),be="live-streams"===(null==_?void 0:_.type),Se=["blend","celebrity-blend","friends-mix"].indexOf((null==_?void 0:_.type)||"")>-1,he=!!T,ge=(null==_?void 0:_.attributes)||{},Ne=ge.header_image_url_desktop||ge.image_url||null,xe=I&&L,Te=function(e,n){var i=(0,o.useState)(e&&0===n),t=(0,l.Z)(i,2),a=t[0],r=t[1],s=(0,o.useContext)(re.VX).scrollNodeChildRef,d=(0,o.useRef)(a);return(0,o.useEffect)((function(){var e,n=!d.current;s&&n&&a&&(null===(e=s.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})),d.current=a}),[s,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:function(e){r(e)}}}(xe,g),je=Te.inlineCurationModeIsOn,Ce=Te.handleInlineCurationModeChange,Fe=i.canFilter&&g>0,Re=i.canSort&&g>0,Ae=g>0,De=(0,d.v9)(te.Gg).productState,Ee=!!De&&parseInt(De.ads,10)>0,Pe=(0,d.I0)(),Oe=(0,u.k6)(),Ie=(0,p.W6)(ie.v8),Le="POP"!==Oe.action?new URLSearchParams(Oe.location.search).get("uid"):null,Ue=(0,U.Z)(c),we=(0,l.Z)(Ue,2),_e=we[0],Ve=we[1],Ze=(0,J.o)(),Me=(0,o.useContext)(K.fo).filter,Be=(0,o.useContext)(z.Gb).sortState,Qe=(0,o.useRef)(null),We=(0,o.useRef)(null),Ke=(0,l.Z)(S,1)[0],ze=(0,$.Z)(null!==Ne?Ne:(null==Ke?void 0:Ke.url)||null),Ge=o.useMemo((function(){return ue.actionBarFactory()}),[ue]),qe=(0,se.n)((0,de.U)(c,(0,W._j)(Be),Me),{featureIdentifier:"playlist"}),He=qe.isPlaying,Xe=qe.isActive,Je=qe.togglePlay,Ye=qe.usePlayContextItem,$e=(0,o.useCallback)((function(){var e=(0,ne.aK)({isPlaying:He,isActive:Xe,spec:Ge.playButtonFactory(),logger:ce,uri:c});Je({loggingParams:e})}),[He,Xe,Je,Ge,ce,c]),en=(0,o.useCallback)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ze({targetUri:c,intent:_e?"unsave":"save",type:"click"}),e.prev=1,e.next=4,Ve(!_e);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))),[_e,Ze,Ve,c]),nn=(0,o.useCallback)((function(){var e=Ge.shareButtonFactory().hitShare({entityToBeShared:c,shareId:""});ce.logInteraction(e)}),[Ge,ce,c]),tn=(0,o.useCallback)((function(){var e,n=Ge.heartButtonFactory();e=_e?n.hitRemoveLike({itemNoLongerLiked:c}):n.hitLike({itemToBeLiked:c}),ce.logInteraction(e),en()}),[Ge,en,_e,ce,c]),an=(0,o.useCallback)((function(e){var n=e.split(/[\r\n]+/g).map((function(e){return m().from(e)})).filter((function(e){return m().isTrack(e)||m().isEpisode(e)||m().isLocalTrack(e)}));if(n.length>0&&I){var i,t,a,l=n.map((function(e){return e.toURI()})),r=null===(i=Qe.current)||void 0===i||null===(t=i.getSelected())||void 0===t||null===(a=t.slice(-1))||void 0===a?void 0:a[0],s={after:(null==r?void 0:r.uid)||"end"};Pe((0,y.jV)(c,l,s))}}),[I,Pe,c]);(0,ee.aw)(an);var ln=(0,o.useCallback)((function(e,n){var i=[].concat((0,t.Z)(n[X.aN[m().Type.TRACK]]||[]),(0,t.Z)(n[X.aN[m().Type.LOCAL]]||[]),(0,t.Z)(n[X.aN[m().Type.EPISODE]]||[]),(0,t.Z)(n[X.aN[m().Type.ALBUM]]||[]));i.length>0&&I&&(ce.logInteraction(ue.dragAddToPlaylist({playlist:c,itemToBeAdded:i[0]})),Pe((0,y.jV)(c,i)),Ze({targetUri:c,intent:"add",type:"drop"}))}),[I,ce,ue,c,Pe,Ze]);return(0,h.jsxs)(o.Suspense,{fallback:null,children:[(0,h.jsx)(P.$,{children:f.ag.get("playlist.page-title",b)}),(0,h.jsx)(E.Z,{types:[X.aN[m().Type.TRACK],X.aN[m().Type.LOCAL],X.aN[m().Type.EPISODE],X.aN[m().Type.ALBUM]],onDrop:ln,children:(0,h.jsxs)("section",{role:"presentation",className:Q.Z.playlist,"data-testid":"playlist-page","data-test-uri":c,children:[(0,h.jsx)(Gn.s,{metadata:n.metadata,isPlaying:He,togglePlay:$e,backgroundColor:ze,spec:pe}),(0,h.jsxs)("div",{className:Q.Z.playlistContent,children:[(0,h.jsxs)(F.o,{backgroundColor:ze,children:[(0,h.jsxs)(F.F,{children:[w?(0,h.jsx)(B.$,{onClick:$e,isPlaying:He,size:"lg",uri:c,ariaPlayLabel:f.ag.get("playlist.a11y.play",b),ariaPauseLabel:f.ag.get("playlist.a11y.pause",b)}):null,N&&j&&(0,h.jsx)(q.v,{uri:c,renderEnabled:function(){return(0,h.jsx)(G.v,{uri:c})}}),N?null:(0,h.jsx)(O.r,{children:(0,h.jsx)(ae.H,{isAdded:!!_e,onClick:tn,size:ae.q.md})}),(0,h.jsx)(R.o,{uri:c,isFollowing:!!_e,canDownload:Ae,onClick:function(e,n){return(0,ne.l7)(n,Ge.downloadButtonFactory(),ce,c)},onFollow:en,size:R.q.md}),(0,h.jsx)(M.F,{property:ie.bM,renderNewExperience:function(){var e;return null!==(e=n.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions?(0,h.jsx)(zn,{onClick:nn,label:f.ag.get("permissions.invite-collaborators",b),uri:c}):null}}),(0,h.jsx)(le.y,{onShow:function(){return(0,ne.qq)(Ge,ce)},menu:(0,h.jsx)(D.X,{uri:c}),children:(0,h.jsx)(A.z,{label:f.ag.get("more.label.context",b)})}),Fe&&Re&&(0,h.jsx)(me,{spec:Ge,children:(0,h.jsx)(si,{metadata:n.metadata,tracklistDomRef:We})})]}),Ie&&(0,h.jsx)(ti,{})]}),(0,h.jsx)(o.Suspense,{fallback:null,children:(0,h.jsx)(xi,{formatListData:n.metadata.formatListData})}),(0,h.jsxs)("div",{className:"contentSpacing",children:[Ee?(0,h.jsx)(C,{playlistUri:c}):null,g>0&&(0,h.jsx)(o.Suspense,{fallback:null,children:(0,h.jsx)(me,{spec:ve,children:fe?(0,h.jsx)(Un,{ariaLabel:b,nrTracks:g,playlistUri:c,rankType:ge.rank_type||"",scrollToUid:Le,usePlayContextItem:Ye,tracklistDomRef:We},c):(0,h.jsx)(vi,{ariaLabel:b,nrTracks:g,playlistUri:c,playlistName:b,hasDateAdded:V,isCollaborative:x,isMixedMedia:he,isLive:be,isBlend:Se,canEdit:xe,scrollToUid:Le,feedbackPath:ge["dislike-endpoint"],deleteFeedbackPath:ge["delete-endpoint"],usePlayContextItem:Ye,tracklistRef:Qe,tracklistDomRef:We,nrCollaborators:null==Z?void 0:Z.count,canRemove:L,spec:ve,initialItems:H},c)})}),N&&(0,h.jsx)(o.Suspense,{fallback:null,children:je?(0,h.jsx)(Dn,{playlistUri:c,onCurationModeChange:Ce}):(0,h.jsx)("button",{className:Q.Z.seeMore,onClick:function(){Ce(!0)},children:(0,h.jsx)(k.D,{as:"div",variant:"minuetBold",children:f.ag.get("playlist.curation.find_more")})})}),xe&&!je&&ke?(0,h.jsx)(gi,{playlistUri:c,playlistLength:n.metadata.totalLength}):null]})]})]})})]})})),ji=o.memo((function(e){var n=e.uri,i=(0,u.TH)().search,t=(0,p.W6)(ie.bM),a=(0,o.useContext)(oe.ZF).getCapabilities(),l=(0,d.v9)(te.Gg).isAnonymous,r=(0,H.U)(n).isEnhanced,s=(0,o.useContext)(K.fo).filter,c=(0,o.useContext)(z.Gb).sortState,m=function(e,n,i){var t=(0,o.useContext)(ue.Z),a=(0,me.useQueryClient)(),l=(0,o.useRef)(null==n?void 0:n.withSync),r=(0,ke.jP)((function(){return["usePlaylist",e,n,i]}),[e,n,i]),s=(0,me.useQuery)(r(),(function(){return t.getPlaylist(e,ve(ve({},n),{},{withSync:l.current}),i)}),{cacheTime:36e5,keepPreviousData:!0}).data,d=(0,o.useCallback)((function(){l.current=!1,a.invalidateQueries(r())}),[a,r]);return(0,ce.r)(e,d),null!=s?s:null}(n,{decorateFormatListData:!0,withSync:!0,hydrateCollaboratorsWithMembers:t},{offset:0,limit:25,sort:(0,W._j)(c),filter:s});return(0,o.useEffect)((function(){var e=new URLSearchParams(i).get("prid");if(!l&&e){var t="https://spclient.wg.spotify.com/algotorial-sharing-service/v1/shared?playlistId=".concat(n,"&sharedEntityUri=").concat(e);(0,fe.k)().request(t,{method:"POST",authorize:!0,allowOffline:!0})}}),[n,l,i]),m?m.metadata.permissions&&!m.metadata.permissions.canView?(0,h.jsx)(V,{uri:n}):(0,h.jsx)(q.v,{uri:n,renderEnabled:function(){return r?(0,h.jsx)(o.Suspense,{fallback:null,children:(0,h.jsx)(Ni,{metadata:m.metadata,capabilities:a,featureIdentifier:"playlist"})}):(0,h.jsx)(Ti,{playlist:m,capabilities:a})},renderDisabled:function(){return(0,h.jsx)(Ti,{playlist:m,capabilities:a})}}):(0,h.jsx)(Z.h,{hasError:!1,errorMessage:f.ag.get("error.not_found.title.playlist"),loadOffline:a.canModifyOffline})}));const Ci=function(){var e=(0,u.UO)().playlistId,n=m().playlistV2URI((e||"").split("&")[0]).toURI();return(0,h.jsx)(z.kz,{uri:n,children:(0,h.jsx)(K.hz,{uri:n,children:(0,h.jsx)(ji,{uri:n})})})}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map