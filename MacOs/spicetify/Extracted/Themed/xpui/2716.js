"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[2716],{82716:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_e});var a=n(4942),r=n(93433),i=n(29439),l=(n(68309),n(66992),n(41539),n(78783),n(33948),n(41637),n(74916),n(64765),n(92222),n(40561),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070),n(67294)),o=n(86706),c=n(51615),u=n(69518),s=n.n(u),d=n(48556),m=n(73305),f=n(96206),v=n(42038),p=n(18270),g=n(48690),b=n(35410),y=n(20534),h=n(70369),E=n(55120),I=n(35213),k=n(26700),x=n(23232),R=n(57784),P=n(56802),w=n(62515),C=n(20246),O=n(84242),U=n(15852),T=n(60289),S=n(98562),A=n(45987),D=n(15861),B=n(87757),F=n.n(B),N=(n(3843),n(83710),n(70189),n(91038),n(26541),n(34553),n(9653),n(94967)),_=n(11680),j=n(45287),Z=["pageItems"];function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e,t,n,r){var i=r?{}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return t.forEach((function(e,t){i[n+t]=e})),i}var z=n(87972),K=n(6024),X=n(42781);var V=n(77495),Q=(n(21249),n(46895)),G=n(1848),H=n(61728),J=n(28248),W=n(73785),$=n(4236),Y=n(42922),q=n(7073),ee=n(49961),te=(n(69600),n(6695)),ne=n(74548),ae=n(72527),re=n(88214),ie=n(56294),le=n(21509),oe=n(94107),ce=n(82760),ue=n(32626),se=n(85576),de=n(87257),me=n(57978),fe=n(19986),ve=n(84788),pe=n(43028),ge=n(46128),be=n(94184),ye=n.n(be),he=n(51674);const Ee="TRDgmejiOzKjissuLFSx";var Ie=function(e){var t=e.onClick,n=void 0===t?function(){}:t,a=e.className,r=e.label,i=e.ariaLabel,o=void 0===i?r:i,c=e.Icon;return l.createElement(he._,{label:r},l.createElement("button",{type:"button","aria-label":o,className:ye()(Ee,a),onClick:n},l.createElement(c,{iconSize:16})))},ke=l.memo((function(e){var t,n,a,r,i=e.uri,o=e.uid,c=e.name,u=e.durationMs,d=e.artists,m=e.album,v=e.isMOGEFRestricted,p=e.isExplicit,g=e.isPlayable,b=e.index,y=e.playIndex,h=void 0===y?null:y,E=e.imgUrl,I=e.contextUri,k=e.usePlayContextItem,x=e.isEnhanced,R=e.playContextPageIndex,P=e.isFirstRecommendation,w=e.add,C=e.remove,O=e.canBeRemovedFromPlaylist,T=e.addedBy,S=e.addedAt,A=(0,fe._)(i),D=(0,pe.k)(i,g),B=(0,ve.r)({downloadAvailability:A,isExplicit:p,isMOGEFRestricted:v,isEnhanced:x}),F=B.badges,N=B.hasBadges,_=b+1,j=d.items.map((function(e){return{uri:e.uri,name:e.profile.name}})),Z=l.createElement(re.$,{uri:i,uid:o,albumUri:null==m?void 0:m.uri,artists:j,contextUri:I,isRecommendation:x,removePlaylistItems:function(){return C([o])},removeRecommendation:function(){return C([o])},addRecommendation:function(){return w(o)},canBeRemovedFromPlaylist:O}),L=(null==j?void 0:j.map((function(e){return e.name})).join(f.ag.getSeparator()))||"",M=k({uid:o,uri:i,index:null!=h?h:b,pageIndex:R}),z=M.isActive,K=M.isPlaying,X=M.triggerPlay,V=M.togglePlay,Q=(0,U.fU)(G.createDesktopTrackListRowEventFactory,{data:{position:b,reason:"",uri:i}}),H=Q.spec,J=Q.logger,W=l.createElement(Ie,{onClick:function(){w(o),J.logInteraction(H.addRecommendationButtonFactory().hitAddToPlaylist({playlist:I,itemToBeAdded:i}))},label:f.ag.get("web-player.enhance.button_label_keep_in_playlist"),Icon:te.G});return l.createElement(Y.ZP,{value:"row",index:b},l.createElement(ue._P,{menu:Z},l.createElement(ce.c,{uri:i,contextUri:I,index:b,onTriggerPlay:function(e,t){X({loggingParams:t})},isActive:z,ariaRowIndex:b+1,isPlayable:D,ageRestricted:v,dragMetadata:{name:c,createdBy:L},spec:H,removePlaylistItems:function(e){return C(e.map((function(e){return e.id})))}},l.createElement(le.Dd,{ariaColIndex:0},l.createElement(le.Du,{uri:i,playAriaLabel:f.ag.get("tracklist.a11y.play",c,L),onClick:function(e,t){V({loggingParams:t})},isPlaying:K,isActive:z,spec:H},l.createElement(le.km,null,_))),l.createElement(le.vZ,{ariaColIndex:1},l.createElement(le.lD,{src:E}),l.createElement(le.vm,null,l.createElement(le.Wh,{titleText:c},c),N&&l.createElement(le.g3,null,F.enhanced&&l.createElement(ne._,{iconSize:16,className:oe.Z.enhanced,title:f.ag.get("web-player.enhance.button_text_enhanced"),"aria-label":f.ag.get("web-player.enhance.button_text_enhanced")}),F.download&&l.createElement(se.G,{size:16}),F.explicit&&l.createElement(de.N,null),F.paid&&l.createElement(ie.g,null),F.nineteen&&l.createElement(me.X,{className:oe.Z.nineteen,size:16})),l.createElement(le.K9,null,l.createElement(le.T6,{artists:j,spec:H})))),l.createElement(le.UA,{ariaColIndex:2},l.createElement(le.BM,{uri:m.uri,name:m.name,creatorUri:null==j||null===(t=j[0])||void 0===t?void 0:t.uri,spec:H},m.name)),l.createElement(le.UA,{ariaColIndex:3},l.createElement(le.p_,{name:(null==T?void 0:T.name)||(null==T?void 0:T.id)||"",uri:(null==T?void 0:T.id)&&s().profileURI(T.id).toURI()||"",imageUrl:(null==T||null===(n=T.avatar)||void 0===n?void 0:n.sources)&&(null===(a=(0,ee.X)(null==T||null===(r=T.avatar)||void 0===r?void 0:r.sources,{desiredWidth:24,desiredLabel:"small"}))||void 0===a?void 0:a.url)||"",showAvatar:!0})),l.createElement(le.UA,{ariaColIndex:4},S?l.createElement(le.Op,{dateAdded:S}):null),l.createElement(le.mU,{ariaColIndex:5},x?l.createElement(l.Fragment,null,P?l.createElement(ge.T,{id:"enhance-add-recommendation",bodyText:f.ag.get("web-player.enhance.onboarding.add-recommendation-to-playlist"),shouldScrollIntoView:!0},W):W,l.createElement(Ie,{onClick:function(){C([o]),J.logInteraction(H.removeRecommendationButtonFactory().hitRemoveRecommendation({recommendedItemUri:i,contextUri:I}))},label:f.ag.get("web-player.enhance.button_label_remove_from_playlist"),Icon:ae.H})):l.createElement(le.qS,{uri:i,type:"track",spec:H}),l.createElement(le.A$,{duration:u}),l.createElement(le.Zv,{menu:Z,label:f.ag.get("more.label.track",c,L),spec:H})))))})),xe=[W.Q.INDEX,W.Q.TITLE,W.Q.ALBUM,W.Q.ADDED_BY,W.Q.ADDED_AT,W.Q.DURATION],Re=l.memo((function(e){var t=e.ariaLabel,n=e.uri,a=e.name,r=e.usePlayContextItem,o=e.tracklistRef,c=e.fetchTracks,u=e.addRecommendation,s=e.removeItems,d=e.nrTracks,m=e.canBeRemovedFromPlaylist,v=(0,l.useRef)(!1),p=(0,$.k)();(0,l.useEffect)((function(){var e;v.current&&p&&(null==o||null===(e=o.current)||void 0===e||e.update());v.current=!0}),[p,o]);var g=50,b=(0,l.useRef)((function(){})),y=(0,l.useState)([]),h=(0,i.Z)(y,2),E=h[0],I=h[1],k=(0,U.fU)(Q.createDesktopTrackListEventFactory,{data:{uri:n,identifier:"enhanced-tracklist"}}),x=k.logger,R=k.spec,P=k.UBIFragment,w=(0,l.useCallback)((function(){if(o&&o.current){var e=o.current.getVisibleTrackWindow(),t=e.firstIndex,n=e.lastIndex-t;return Math.max(0,t-Math.round((g-n)/2))}return 0}),[o]),C=(0,l.useCallback)((function(e){var t;b.current(),s({itemIds:e.map((function(e){return e.id})),offset:w(),limit:g});var a,r=new Set(e.map((function(e){return e.id}))),i=(null==o||null===(t=o.current)||void 0===t?void 0:t.getRows())||{},l=[];for(var c in i)if(r.has(i[c].uid)){var u={index:Number(c),item:i[c]};i[c].isEnhanced&&l.push(u)}l.length&&((a=1===l.length?(0,G.createDesktopTrackListRowEventFactory)({data:{uri:l[0].item.uri,position:l[0].index,reason:""}}).removeRecommendationButtonFactory().hitRemoveRecommendation({contextUri:n,recommendedItemUri:l[0].item.uri}):R.removeItemsButtonFactory().hitRemoveRecommendations({contextUri:n,numberOfRecommendationsToRemove:l.length}))&&x.logInteraction(a))}),[s,w,x,o,n,R]),O=(0,l.useCallback)((function(e,t){b.current=t,e.length>1?I(e):C(e)}),[C]),T=(0,l.useCallback)((function(e){u({itemIds:[e],offset:w(),limit:g})}),[u,w]),S=(0,l.useCallback)((function(e){s({itemIds:e,offset:w(),limit:g})}),[s,w]),A=(0,l.useCallback)((function(e,t){var a,i,o,c=(0,ee.X)(null===(a=e.album.coverArt)||void 0===a?void 0:a.sources,{desiredSize:40,desiredLabel:"small"});return l.createElement(ke,{key:e.uid,index:t,playIndex:t,contextUri:n,uri:e.uri,uid:e.uid,isPlayable:e.playability.playable,durationMs:e.duration.totalMilliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:(null===(i=e.contentRating)||void 0===i?void 0:i.label)===q.KS.Explicit,isMOGEFRestricted:(null===(o=e.contentRating)||void 0===o?void 0:o.label)===q.KS.NineteenPlus,imgUrl:(null==c?void 0:c.url)||"",usePlayContextItem:r,isEnhanced:e.isEnhanced,playContextPageIndex:e.playContextPageIndex,isFirstRecommendation:e.isFirstRecommendationOfPage&&t<g,add:T,remove:S,canBeRemovedFromPlaylist:m,addedBy:e.addedBy,addedAt:e.addedAt})}),[r,n,T,S,m]),D=(0,l.useCallback)((function(e){return e.uri}),[]),B=(0,l.useCallback)((function(e){return e.uid}),[]);return l.createElement(P,{spec:R},l.createElement(Y.ZP,{value:"playlist-tracklist"},l.createElement(J.Pv,{testID:"playlist-tracklist",key:n,ariaLabel:t,hasHeaderRow:!0,columns:xe,onRemove:O,renderRow:A,resolveUri:D,resolveUid:B,nrTracks:d,fetchTracks:c,limit:g,outerRef:o})),l.createElement(H.h,{title:f.ag.get("playlist.remove_from_playlist",a),isOpen:E.length>0,tracks:E,onClose:function(e){e.stopPropagation(),I([])},onRemove:C}))})),Pe=n(91281),we=n(55914),Ce=n(86025),Oe=n(39838),Ue=n(34011),Te=n(20452);const Se="z9JdxJgW3OxYysR2dkal";var Ae=function(e){var t=e.contextUri,n=e.title,a=e.message,r=e.children,o=(0,l.useRef)(null),c=(0,l.useState)(!1),u=(0,i.Z)(c,2),s=u[0],d=u[1],m=(0,l.useState)("topStart"),v=(0,i.Z)(m,2),p=v[0],g=v[1],b=(0,l.useCallback)((function(){var e;d(!1),null===(e=o.current)||void 0===e||e.focus()}),[]),y=(0,l.useCallback)((function(){d(!0)}),[]),h=(0,j.U)(t).setIsEnhanced,E=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(E.current){if(!E.current)return;var e=E.current.getBoundingClientRect(),t=e.top,n=e.bottom;t<16?g("bottomStart"):n>window.innerHeight-16&&g("topStart")}}),[s]),l.createElement(Pe.x,{onShow:y,onHide:b,placement:p,withPortal:!0,overlay:s&&l.createElement(Te.i,null,l.createElement("div",{className:"encore-dark-theme",ref:E},l.createElement(we.J,{role:"alertdialog",popoverTitle:n,arrow:"topStart"===p?"bottomEnd":"topEnd",colorSet:"announcement"},a,l.createElement("div",{className:Se},l.createElement(Ce.o,{buttonSize:Oe.z.sm,onClick:b},f.ag.get("web-player.enhance.missing-functionality-callout.dismiss")),l.createElement(Ue.D,{buttonSize:Oe.z.sm,onClick:function(){b(),h(!1)},colorSet:"invertedLight"},f.ag.get("web-player.enhance.missing-functionality-callout.turn-off-enhance"))))))},function(e){return"function"==typeof e}(r)?l.createElement(l.Fragment,null,r(y)):r)};const De="A4dupilHPIEDfhXDE0m0",Be="JYAfUd8XXrVwcPbq9QaC";function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const _e=l.memo((function(e){var t,n,a,u=e.metadata,B=e.capabilities,L=e.featureIdentifier,Q=u.uri,G=u.name,H=u.images,J=u.totalLength,W=(0,i.Z)(H,1)[0],$=(0,w.Z)((null==W?void 0:W.url)||null),Y=(0,c.k6)(),q=(0,o.I0)(),ee=(0,P.o)(),te=(0,l.useRef)(null),ne=s().isPlaylistV1OrV2(Q),ae=function(e){var t,n,a=(0,_._)(),r=(0,j.U)(e),o=r.isEnhanced,c=r.iteration,u=r.setIsEnhanced,s=r.toggleIsEnhanced,d=(0,l.useState)(null),m=(0,i.Z)(d,2),f=m[0],v=m[1],p=(0,l.useRef)(Date.now()),g=(0,l.useCallback)((function(){return Date.now()-p.current>3e3}),[]),b=(0,l.useRef)({}),y=(0,l.useRef)(null),h=(0,l.useCallback)(function(){var e=(0,D.Z)(F().mark((function e(t,n,r,i,l,o,c){var u,s,d,m,f,g,h,E,I,k;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o&&(p.current=Date.now()),f=null===(u=y.current)||void 0===u?void 0:u.enhancedRevision,e.prev=2,e.next=5,c;case 5:g=e.sent,e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),409!==(null===e.t0||void 0===e.t0?void 0:e.t0.status)){e.next=14;break}return e.next=13,a.getPage(t,n,r,i,l);case 13:g=e.sent;case 14:if(h=null===(s=g)||void 0===s?void 0:s.enhancePage){e.next=17;break}return e.abrupt("return",[]);case 17:return E=h.pageItems,I=(0,A.Z)(h,Z),e.next=20,a.decoratePageItems(E);case 20:if(k=e.sent,f===(null===(d=y.current)||void 0===d?void 0:d.enhancedRevision)){e.next=24;break}return e.abrupt("return",[]);case 24:return(null===(m=y.current)||void 0===m?void 0:m.enhancedRevision)!==I.enhancedRevision&&(o=!0),b.current=M(b.current,k,i,o),v(I),y.current=I,e.abrupt("return",k);case 30:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n,a,r,i,l,o){return e.apply(this,arguments)}}(),[a]),E=(0,l.useCallback)(function(){var t=(0,D.Z)(F().mark((function t(n){var r,i,l,o,u;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.itemIds,i=n.offset,l=void 0===i?0:i,o=n.limit,u=void 0===o?1:o,y.current&&c){t.next=3;break}return t.abrupt("return");case 3:h(e,c,y.current.sessionId,l,u,!0,a.addRecommendation(e,y.current.sessionId,r,l,u));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[h,e,a,c]),I=(0,l.useCallback)(function(){var t=(0,D.Z)(F().mark((function t(n){var r,i,l,o,u,s,d,m,f;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.itemIds,i=n.offset,l=void 0===i?0:i,o=n.limit,u=void 0===o?1:o,y.current&&c){t.next=3;break}return t.abrupt("return");case 3:s=b.current,d=new Set(r),m=!1,t.t0=F().keys(s);case 7:if((t.t1=t.t0()).done){t.next=14;break}if(f=t.t1.value,!d.has(s[f].uid)||!s[f].isEnhanced){t.next=12;break}return m=!0,t.abrupt("break",14);case 12:t.next=7;break;case 14:h(e,c,y.current.sessionId,l,u,!0,a.removeItems(e,y.current.sessionId,r,l,u,m));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[h,e,a,c]),k=(0,l.useMemo)((function(){return new N.tL}),[]),x=(0,l.useCallback)(function(){var t=(0,D.Z)(F().mark((function t(n,r){var i,l,o,u,s;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return",[]);case 2:if(u=Math.min(r,((null===(i=y.current)||void 0===i?void 0:i.numTotalItems)||1/0)-n),!(s=Array.from({length:u},(function(e,t){return b.current[t+n]}))).every((function(e){return!!e}))||0===u){t.next=7;break}return t.abrupt("return",s);case 7:return t.abrupt("return",h(e,c,null===(l=y.current)||void 0===l?void 0:l.sessionId,n,r,!1,k.create("".concat(e,":").concat(c,":").concat(null===(o=y.current)||void 0===o?void 0:o.sessionId,":").concat(n,":").concat(r),(function(){var t;return a.getPage(e,c,null===(t=y.current)||void 0===t?void 0:t.sessionId,n,r)}))));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[k,h,e,a,c]),R=(0,l.useMemo)((function(){return{uri:e,url:null==f?void 0:f.dspContextUri}}),[e,null==f?void 0:f.dspContextUri]),P=(0,l.useCallback)((function(){b.current={}}),[]),w=(0,l.useCallback)(function(){var t=(0,D.Z)(F().mark((function t(n){var r,i,l,o;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return",-1);case 2:return t.next=4,a.getPage(e,c,null===(r=y.current)||void 0===r?void 0:r.sessionId,0,a.MAX_PAGE_SIZE);case 4:return l=t.sent,o=l.enhancePage,t.abrupt("return",null!==(i=null==o?void 0:o.pageItems.findIndex((function(e){return e.itemId===n})))&&void 0!==i?i:-1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[a,c,e]);return{isEnhanced:o,setIsEnhanced:u,toggleIsEnhanced:s,addRecommendation:E,removeItems:I,playContext:R,numTotalItems:isNaN(Number(null==f?void 0:f.numTotalItems))?void 0:Number(null==f?void 0:f.numTotalItems),numTotalRecs:isNaN(Number(null==f?void 0:f.numTotalRecs))?void 0:Number(null==f?void 0:f.numTotalRecs),fetchTracks:x,clearCache:P,enhancedInvalidationKey:"".concat(null!==(t=null==f?void 0:f.enhancedRevision)&&void 0!==t?t:"").concat(null!=c?c:""),shouldUnderlyingContextChangeRefreshView:g,UBIReason:f?"enhanced|".concat(null==f?void 0:f.sessionId,"#").concat(null==f||null===(n=f.logging)||void 0===n?void 0:n.correlationId):"enhanced|",fetchIndexOfItemId:w}}(Q),re=ae.isEnhanced,ie=ae.playContext,le=ae.numTotalItems,oe=ae.numTotalRecs,ce=ae.addRecommendation,ue=ae.removeItems,se=ae.fetchTracks,de=ae.enhancedInvalidationKey,me=ae.shouldUnderlyingContextChangeRefreshView,fe=ae.UBIReason,ve=ae.clearCache,pe=ae.fetchIndexOfItemId,ge=(null!=le?le:J)>0,be=(null==B?void 0:B.canFilter)&&J>0,ye=(null==B?void 0:B.canSort)&&J>0;(0,l.useEffect)((function(){if(re&&"POP"!==Y.action){var e=new URLSearchParams(Y.location.search).get("uid");if(!e)return;pe(e).then((function(e){var t;-1!==e&&(null===(t=te.current)||void 0===t||t.scrollToIndex(e))}))}}),[Y,Y.action,Y.location.search,pe,re]),(0,l.useEffect)((function(){var e;de&&(null===(e=te.current)||void 0===e||e.update())}),[de]),(0,l.useEffect)((function(){var e;me()&&(ve(),null===(e=te.current)||void 0===e||e.update())}),[J,ve,me]);var he=(0,U.fU)(d.createDesktopEnhancedEventFactory,{data:{uri:Q,identifier:"enhanced-session",reason:fe}}),Ee=he.spec,Ie=he.logger,ke=he.UBIFragment,xe=(0,l.useMemo)((function(){return{header:Ee.headerFactory()}}),[Ee]),Pe=(0,O.n)(ie,{featureIdentifier:L}),we=Pe.isPlaying,Ce=Pe.isActive,Oe=Pe.togglePlay,Ue=Pe.usePlayContextItem,Te=(0,l.useCallback)((function(){var e;Oe(),e=Ce?we?Ee.playButtonFactory().hitPause({itemToBePaused:Q}):Ee.playButtonFactory().hitResume({itemToBeResumed:Q}):Ee.playButtonFactory().hitPlay({itemToBePlayed:Q}),Ie.logInteraction(e)}),[Oe,we,Ce,Ie,Ee,Q]),Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(0,z.J)(K.n5.getUser,["spotify"]).data;return(0,l.useMemo)((function(){return null!=t&&t.body?{isOwner:!1,tracksAdded:e,user:{uri:t.body.uri,type:X.p.USER,username:t.body.id,displayName:t.body.display_name,images:t.body.images}}:null}),[t,e])}(oe),Fe=null!==(t=null===(n=u.collaborators)||void 0===n||null===(a=n.items)||void 0===a?void 0:a.concat())&&void 0!==t?t:[];Se&&Fe.splice(T.ms-1,0,Se);var _e={count:Fe.length,items:Fe},je=(0,l.useCallback)((function(e,t){var n=[].concat((0,r.Z)(t[R.aN[s().Type.ALBUM]]||[]),(0,r.Z)(t[R.aN[s().Type.TRACK]]||[]));n.length>0&&(q((0,v.jV)(Q,n)),ee({targetUri:Q,intent:"add",type:"drop"}))}),[q,ee,Q]);return l.createElement(l.Suspense,{fallback:null},l.createElement(k.l,{path:"/playlist/:playlistId",pageId:m.Wg.ENHANCED_SESSION}),l.createElement(ke,{spec:Ee},l.createElement(h.$,null,f.ag.get("playlist.page-title",G)),l.createElement(y.Z,{types:[R.aN[s().Type.ALBUM],R.aN[s().Type.TRACK]],onDrop:je},l.createElement("section",{role:"presentation",className:De,"data-testid":"enhanced-page"},l.createElement(ke,{spec:xe.header},l.createElement(x.s,{metadata:Ne(Ne({},u),{},{collaborators:_e,duration:void 0,totalLength:null!=le?le:J}),isPlaying:we,togglePlay:Te,backgroundColor:$}),l.createElement("div",null,l.createElement(p.o,{backgroundColor:$},l.createElement(p.F,null,ge?l.createElement(E.$,{onClick:Te,isPlaying:we,size:"lg",uri:Q}):null,l.createElement(V.v,{uri:Q}),ne&&l.createElement(C.y,{menu:l.createElement(b.X,{uri:Q,isEnhanced:re})},l.createElement(g.z,null)),(be||ye)&&l.createElement("div",{className:Be},be&&l.createElement(l.Suspense,{fallback:null},l.createElement(Ae,{contextUri:Q,title:f.ag.get("web-player.enhance.missing-functionality-callout.filtering-playlist-disabled-title"),message:f.ag.get("web-player.enhance.missing-functionality-callout.filtering-playlist-disabled-message")},(function(e){return l.createElement(S.K,{placeholder:f.ag.get("playlist.search_in_playlist"),onActivate:function(){return e(),!1}})}))),ye&&l.createElement(Ae,{contextUri:Q,title:f.ag.get("web-player.enhance.missing-functionality-callout.sorting-playlist-disabled-title"),message:f.ag.get("web-player.enhance.missing-functionality-callout.sorting-playlist-disabled-message")},l.createElement(I.l,{columns:[],disabled:!0}))))))),l.createElement("div",{className:"contentSpacing"},l.createElement(l.Suspense,{fallback:null},l.createElement(Re,{key:Q,ariaLabel:G,nrTracks:null!=le?le:Math.max(15,J),uri:Q,name:G,usePlayContextItem:Ue,tracklistRef:te,fetchTracks:se,addRecommendation:ce,removeItems:ue,canBeRemovedFromPlaylist:ne})))))))}))}}]);
//# sourceMappingURL=2716.js.map