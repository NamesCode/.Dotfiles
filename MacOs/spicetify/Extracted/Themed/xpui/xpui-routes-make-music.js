"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5786],{61348:(e,r,t)=>{t.d(r,{w:()=>v});t(23157);var n=t(67294),a=t(65598),i=t.n(a),l=t(32667),s=(t(69600),t(21249),t(74916),t(23123),t(4723),t(15306),/(\((?:[0-9]{1,3}:){1,2}[0-9]{2}\))/g);var c=t(99027),o=t(67892);const u="playlist-playlist-playlistDescription",d="QD13ZfPiO5otS0PU89wG",f="ZbLneLRe2x_OBOYZMX3M",m="rjdQaIDkSgcGmxkdI2vU",h="umouqjSkMUbvF4I_Xz6r";var p=t(85893),v=n.memo((function(e){var r=e.html,t=e.onTimeStampClick,a=e.enableTimestamps,l=void 0!==a&&a,c=e.semanticColor,o=void 0===c?"textSubdued":c,d=(0,n.useMemo)((function(){var e,n=l?r.split(s).map((function(e){if(e.match(s)){var r=e.replace("(","").replace(")","");return"(<time>".concat(r,"</time>)")}return e})).join(""):r;try{e=i()(n,{transform:x(t,o),dangerouslySetChildren:[]})}catch(t){e=r}return e}),[l,r,t,o]);return(0,p.jsx)("div",{className:u,children:d})}));function x(e,r){var t=0;return{p:function(e){return(0,p.jsx)(l.D,{as:"p",variant:"ballad",semanticColor:r,className:h,children:e.children})},a:function(r){var t;return null!==(t=r.href)&&void 0!==t&&t.startsWith("#t=")?(0,p.jsx)(c.E,{onClick:e,children:r.children}):r.href?(0,p.jsx)(o.r,{to:r.href,children:r.children}):(0,p.jsx)(p.Fragment,{children:r.children})},ul:function(e){return(0,p.jsx)("ul",{className:f,children:e.children})},ol:function(e){return(0,p.jsx)("ol",{className:f,children:e.children})},li:function(e){return(0,p.jsx)(l.D,{as:"li",variant:"ballad",semanticColor:r,className:m,children:e.children})},br:function(){return(0,p.jsx)("br",{})},h1:function(e){return(0,p.jsx)(l.D,{as:"h1",variant:"balladBold",semanticColor:r,className:d,children:e.children})},h2:function(e){return(0,p.jsx)(l.D,{as:"h2",variant:"balladBold",semanticColor:r,className:d,children:e.children})},h3:function(e){return(0,p.jsx)(l.D,{as:"h3",variant:"balladBold",semanticColor:r,className:d,children:e.children})},h4:function(e){return(0,p.jsx)(l.D,{as:"h4",variant:"balladBold",semanticColor:r,className:d,children:e.children})},h5:function(e){return(0,p.jsx)(l.D,{as:"h5",variant:"balladBold",semanticColor:r,className:d,children:e.children})},h6:function(e){return(0,p.jsx)(l.D,{as:"h6",variant:"balladBold",semanticColor:r,className:d,children:e.children})},time:function(r){return(0,p.jsx)(c.E,{onClick:e,children:r.children})},_:function(e,r,a){var i=void 0===r?e:a;return(0,p.jsx)(n.Fragment,{children:i},"fragment".concat(t++))}}}},95562:(e,r,t)=>{t.r(r),t.d(r,{default:()=>_});var n=t(29439),a=(t(85827),t(41539),t(21249),t(69720),t(67294)),i=t(96206),l=t(6158),s=t(86706),c=t(69518),o=t.n(c),u=t(32667),d=t(61348);const f="nV_0UjulnuGnBYzXiFRd",m="F2fw42rcgQCHUh82jc3U";var h=t(85893),p=function(){var e=(0,s.v9)((function(e){var r;return null===(r=e.session.user)||void 0===r?void 0:r.uri})),r=o().from(e).toURLPath(!0);return(0,h.jsxs)("div",{className:f,children:[(0,h.jsx)(u.D,{variant:"forte",semanticColor:"textBase",dir:"auto",children:i.ag.get("web-player.soundtrap.title")}),(0,h.jsx)(u.D,{variant:"ballad",semanticColor:"textBase",dir:"auto",children:i.ag.get("web-player.soundtrap.subtitle.text")}),(0,h.jsx)(u.D,{variant:"ballad",semanticColor:"textBase",dir:"auto",children:i.ag.get("web-player.soundtrap.confidential")}),(0,h.jsx)(d.w,{html:i.ag.get("web-player.soundtrap.subtitle.link",r),semanticColor:"textBase",onTimeStampClick:function(){}})]})},v=t(53027),x=t(15861),j=t(87757),g=t.n(j),b=(t(92222),t(51615)),k=t(67448);var C=t(11643);var y=t(19480),w=t(85693),N=function(e){var r=e.templates,t=e.title,n=e.onClick;return(0,h.jsx)(y.P,{title:t,className:m,children:r.map((function(e,r){return(0,h.jsx)(w.t,{project:e,index:r,onClick:n},"template-".concat(e.key))}))})};const _=(0,a.memo)((function(){var e=function(){var e=(0,a.useState)(null),r=(0,n.Z)(e,2),t=r[0],i=r[1],l=(0,k.z)(),s=(0,a.useCallback)((0,x.Z)(g().mark((function e(){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getTemplates({query:"",page_number:0,result_per_page:6,sort_by:""});case 2:r=e.sent,i(r.projects);case 4:case"end":return e.stop()}}),e)}))),[l]);return(0,a.useEffect)((function(){s()}),[s]),{templates:t}}(),r=e.templates,t=(0,C.u)().playlists,s=function(){var e=(0,b.k6)(),r=(0,a.useState)(null),t=(0,n.Z)(r,2),i=t[0],l=t[1],s=(0,a.useState)(!1),c=(0,n.Z)(s,2),o=c[0],u=c[1],d=(0,k.z)(),f=(0,a.useCallback)(function(){var r=(0,x.Z)(g().mark((function r(t){var n,a;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u(!0),r.prev=1,r.next=4,d.forkProject({projectKey:t});case 4:n=r.sent,a=n.project,e.push("/make-music/studio/".concat(a.originalTrackUri,"/").concat(a.soundtrapProjectId)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),l("Could not navigate to project, forking failed");case 12:u(!1);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}(),[e,l,d]);return{forkAndNavigate:f,error:i,loading:o}}(),c=s.forkAndNavigate,o=s.error,u=s.loading;if(!r||o||u||!t)return(0,h.jsx)(l.h,{hasError:!!o,errorMessage:null!=o?o:i.ag.get("web-player.soundtrap.error.request-templates-failure")});var d=r.reduce((function(e,r){var t,n;return null!==(n=e[t=r.genre])&&void 0!==n||(e[t]=[]),e[r.genre].push(r),e}),{});return(0,h.jsxs)("div",{className:"contentSpacing",id:"makeMusicPage",children:[(0,h.jsx)(p,{}),Object.entries(d).map((function(e){var r=(0,n.Z)(e,2),t=r[0],a=r[1];return(0,h.jsx)(N,{templates:a,title:t,onClick:c},"template-shelf-".concat(t))})),(0,h.jsx)(v.W,{playlists:t,title:"Hear what others are creating"})]})}))},53027:(e,r,t)=>{t.d(r,{W:()=>l});t(21249),t(82526),t(41817);var n=t(46309),a=t(19480),i=t(85893),l=function(e){var r=e.playlists,t=e.title,l=e.showAll,s=void 0!==l&&l;return(0,i.jsx)(a.P,{total:r.length,title:t,seeAllUri:"/make-music/playlists",showSeeAll:!0,showAll:s,children:r.map((function(e,r){return(0,i.jsx)(n.Z,{uri:e.playlistUri,name:e.title,images:[{url:e.imageUri}],description:e.description,authorName:e.author,index:r},e.playlistUri)}))})}},85693:(e,r,t)=>{t.d(r,{t:()=>s});var n=t(36590),a=t(8498),i=t(75032),l=t(85893),s=function(e){var r=e.project,t=e.index,s=e.onClick;return(0,l.jsx)(n.C,{index:t,onClick:function(){return s(r.key)},headerText:r.title,featureIdentifier:"make_music",uri:r.originalTrackUri,delegateNavigation:!0,renderCardImage:function(){return(0,l.jsx)(a.x,{images:[{url:r.imageUri}]})},renderSubHeaderContent:function(){return(0,l.jsx)(i.NB,{source:r.templateDescription})}})}},11643:(e,r,t)=>{t.d(r,{u:()=>o});var n=t(15861),a=t(29439),i=t(87757),l=t.n(i),s=t(67294),c=t(67448),o=function(){var e=(0,s.useState)(null),r=(0,a.Z)(e,2),t=r[0],i=r[1],o=(0,s.useRef)(!1),u=(0,c.z)(),d=(0,s.useCallback)((0,n.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getPlaylists({query:"",page_number:0,result_per_page:6,sort_by:""});case 2:if(r=e.sent,o.current){e.next=5;break}return e.abrupt("return");case 5:i(r.playlists);case 6:case"end":return e.stop()}}),e)}))),[u]);return(0,s.useEffect)((function(){return o.current=!0,d(),function(){o.current=!1}}),[d]),{playlists:t,fetchPlaylists:d}}}}]);
//# sourceMappingURL=xpui-routes-make-music.js.map