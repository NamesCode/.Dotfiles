"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{63294:(e,n,t)=>{t.d(n,{u:()=>p});var s=t(59496),a=t(84875),i=t.n(a),o=t(88778),c=t(87155),r=t(83719),l=t(93646);const d="FvfvGU3jvHRskUU9v9_8",m="Q9AlbZn2EGzy3MTWXa8X",u="mxmxS0y8LiwSs5nueKPT",h="GXxVAveNFStY3pBI_NO4",v="eHcXC2s97InYP7rMNT0H";var g=t(4637);const p=(0,s.memo)((function(e){const{children:n,message:t,title:s,linkTitle:a,linkTo:p,onClick:x,renderInline:j=!1}=e,{isXSOnly:N,isSMOnly:f}=(0,r.e)(),b=N||f;return(0,g.jsxs)("section",{className:i()(d,{[m]:j}),children:[n,(0,g.jsx)(o.D,{as:"h1",variant:b?"cello":"alto",className:h,children:s}),(0,g.jsx)(o.D,{variant:b?"mesto":"ballad",className:v,children:t}),a&&(p||x)&&(0,g.jsx)(c.D,{colorSet:"invertedLight",className:u,href:p,onClick:x,component:l.Z,children:a})]})}))},45844:(e,n,t)=>{t.d(n,{Z:()=>b});var s=t(59496),a=t(88778),i=t(25007),o=t(91800),c=t(43304),r=t(41299),l=t(35973),d=t(81888);const m="MUiWCNTfb6FcSwVPvQ1V",u="UAk3bMhekwJTV_wIyfsT",h="QHo82lWWkjoCkDa6baB3",v="X9w6LPfKsZHMCs38sVIQ",g="NXn5KjeUOjLGlAfS1Gao",p="N0wgFMDDvCiby4QB5kLJ",x="nloNe2BLRHjz9dxlwfLU",j="JzXND83mXvcEuntCNR34",N="GR08E4L_rOGljyQQX30R";var f=t(4637);const b=(0,s.memo)((e=>{const{concert:n,isVirtual:t,onClick:s}=e,{venue:b,location:k}=n,y=n.artists[0],C=(0,l.CH)(n.startDate.localDate);return(0,f.jsxs)(o.r,{to:`/concert/${n.id}`,className:m,onClick:s,children:[y.imageUri&&(0,f.jsx)(c.Z,{children:(0,f.jsx)("div",{role:"img",className:N,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${y.imageUri})`}})}),(0,f.jsx)("time",{className:u,dateTime:n.startDate.localDate,children:(0,f.jsx)(a.D,{as:"h5",variant:"minuetBold",className:h,children:(0,l.jx)(C)})}),(0,f.jsxs)("div",{className:v,dir:"auto",children:[(0,f.jsxs)(a.D,{as:"h2",className:j,variant:"minuetBold",children:[(0,r.FO)(C)," • ",(0,l.hK)(C)]}),(0,f.jsx)(a.D,{as:"h2",variant:"cello",weight:"bold",className:g,children:(0,d.ij)(n)}),(0,f.jsx)("div",{className:p,children:(0,f.jsx)(a.D,{as:"h2",className:x,variant:"mesto","data-testid":"location-name",children:t?b:[b,k].join(i.ag.getSeparator())})})]})]})}))},81334:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ye});t(10817);var s=t(59496),a=t(77646),i=t(86695),o=t(22997),c=t(88778),r=t(69983),l=t(25007),d=t(25937),m=t(31716),u=t(91393),h=t(68415),v=t(21855),g=(t(36026),t(68001)),p=t(38550),x=t(77003),j=t(35467),N=t(47150),f=t(51677),b=t(46455),k=t(91597),y=t(73037),C=t(42662),D=t(91800),w=t(35973),S=t(81888);const I="cELOd04or4B6BbTbNWA7",_="CHJYbX33oDik9u4n4ohH",O="woQ0wEe6FL4lsGW05bsb",F="KTDREr8pDWjrmnzXzZ2z",G="UUTvdEOH2v_rejoXdl9Z",U="cBbTozR921ppaoNZP0Uh",H="SNyyQ0t_VvlWzzB9li7v",L="lwO4iko6mhCUgZN1s9AW",M="akvZI06vqHOow1pOL29J",E="WWZp3WM0maWJzl2qWEHE",B="YdkAHxbDekz9SiAxHG6M",T="AK37djOBJ2BuJOGuG1kQ",W="JfYURQbEA_ntMsMZV6tK",Z="du0mOGaZfHg3hsHwRMIu",A="Rvzy4ltiiHIp9mvlxf0c";var R=t(4637);const P=(0,s.memo)((e=>{const{concert:n,position:t,modalSpec:a}=e,{id:i,venue:o,location:r}=n,d=n.startDate.localDate,m=(0,w.CH)(d),u="ONLINE"===n.category,h=(0,s.useMemo)((()=>a?.eventRowFactory({position:t,uri:`spotify:concert:${n.id}`})),[a,t,n]),v=(0,x.$P)();return(0,R.jsxs)(D.r,{to:`/concert/${n.id}`,className:L,onClick:()=>{h&&v.logInteraction(h.hitUiNavigate({destination:`/concert/${i}`}))},children:[(0,R.jsxs)("div",{className:M,"aria-hidden":!0,children:[(0,R.jsx)(c.D,{as:"h5",variant:"minuetBold",className:E,children:(0,w.jw)(m)}),(0,R.jsx)(c.D,{as:"h1",variant:"cello",className:B,children:(0,w.wf)(m)})]}),(0,R.jsxs)("div",{className:T,children:[(0,R.jsx)(c.D,{as:"div",variant:"violaBold",className:W,"data-testid":"event-title",children:(0,S.Yl)(n)}),(0,R.jsx)(f.T,{children:(0,w.jx)(m)}),(0,R.jsxs)(c.D,{as:"div",variant:"viola",className:Z,children:[(0,w.FO)(m)," • ",(0,w.hK)(m)]}),(0,R.jsx)(c.D,{as:"div",variant:"viola",className:A,"data-testid":"event-venue",children:u?o:[o,r].join(l.ag.getSeparator())})]})]},n.id)})),X=(0,s.memo)((e=>{const{event:n,locationName:t,onClose:a,feedSpec:i}=e,o=n?.concerts[0]?.concert,r=o?.artists[0],d=(0,s.useMemo)((()=>i?.groupedEventModalFactory({uri:r?.uri||""})),[i,r]),m=(0,x.$P)(),u=(0,x.Wi)(d);if(!n||!o||!r)return null;const h=()=>{d&&m.logInteraction(d.closeButtonFactory().hitUiHide()),a()};return(0,R.jsx)(C.Z,{contentLabel:l.ag.get("live_events.label"),isOpen:!0,className:I,onRequestClose:h,children:(0,R.jsxs)("section",{className:_,ref:u,children:[(0,R.jsx)("div",{className:O,children:(0,R.jsx)(z,{"aria-label":l.ag.get("close"),iconOnly:b.k,buttonSize:"sm",onClick:h})}),(0,R.jsxs)("div",{className:F,children:[(0,R.jsx)(k.E,{height:"48",width:"48",className:G,src:r.imageUri}),(0,R.jsxs)("div",{className:U,children:[(0,R.jsx)(c.D,{as:"h3",variant:"cello",className:H,"data-testid":"event-venue",children:r.name}),(0,R.jsx)(c.D,{as:"h3",variant:"mesto","data-testid":"event-venue",children:`${l.ag.get("concerts.count_near_location",n.concerts.length,t)}`})]})]}),n.concerts.map(((e,n)=>(0,R.jsx)(P,{concert:e.concert,position:n,modalSpec:d},e.concert.id)))]})})}));var z=(0,N.ZP)(y.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),Q=t(63294),$=t(4763),K=t(77899),V=t(29009),J=t(11116),Y=t(45844),q=t(43304);const ee="pU4WoqT8T6PmtjPbFtK0",ne="FC5Y_KFJ9rJyTpydqtOW",te="i8t3LDEorB6m_oFOBEux",se="AAYLcavkBdCuebn9AQxT",ae="lYHCmxpdReachiOORWGo",ie="JtKEdtTtcK7s6EpGecaC",oe="myHDa69cI5CHC8fhIhkG",ce=(0,s.memo)((e=>{const{event:n,onClick:t}=e,a=(0,s.useCallback)((()=>t(n)),[n,t]),i=(0,w.CH)(n.openingDate),o=(0,w.CH)(n.closingDate),r=n.concerts[0].concert,d=r.artists[0];return(0,R.jsxs)(y.o,{onClick:a,className:ee,component:"div",role:"button",children:[d.imageUri&&(0,R.jsx)(q.Z,{children:(0,R.jsx)("div",{role:"img",className:oe,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${d.imageUri})`}})}),(0,R.jsx)("time",{className:ne,dateTime:i.toISOString(),children:(0,R.jsx)(c.D,{as:"h5",variant:"minuetBold",className:te,children:(0,w.Bc)(i,o)})}),(0,R.jsxs)("div",{className:se,dir:"auto",children:[(0,R.jsx)(c.D,{as:"h2",variant:"cello",weight:"bold",className:ae,children:(0,S.ij)(r)}),(0,R.jsx)("div",{className:ie,children:(0,R.jsx)(c.D,{as:"h2",variant:"mesto","data-testid":"concerts-count",children:l.ag.get("concerts.count",n.concerts.length)})})]})]})})),re=(0,s.memo)((e=>{const{event:n,position:t,sectionSpec:a,onOpenGroupedEvent:i}=e,o=n.concerts[0]?.concert,c=o?.id,r=o&&(0,J.g3)(o.id).toURI(),l=(0,s.useMemo)((()=>a?.eventCardFactory({identifier:c??"",position:t,uri:r??""})),[a,c,r,t]),d=(0,x.$P)(),m=e=>{i(e),l&&d.logInteraction(l.hitUiReveal())};if(n.concerts.length>1)return(0,R.jsx)(ce,{event:n,onClick:m});return(0,R.jsx)(Y.Z,{concert:o,isVirtual:"online"===n.source,onClick:()=>{l&&d.logInteraction(l.hitUiNavigate({destination:r}))}})})),le="MVPegsivznZB6gdkcnkH",de="MlK79hskRbFrN2OBjMkl",me="VxaXFH9Uq1NU0LtsVhIu",ue="UDVDNa40iTSPS9uHCG7Q",he=(0,s.memo)((e=>{const{title:n,identifier:t,position:a,events:i,feedSpec:o,onOpenGroupedEvent:c}=e,r=(0,s.useMemo)((()=>o?.eventSectionFactory({identifier:t,position:a})),[o,t,a]),l=(0,x.Wi)(r);return 0===i.length?null:(0,R.jsx)("div",{className:le,ref:l,children:(0,R.jsx)(V.ZP,{value:"headered-grid",index:a,children:(0,R.jsx)(K.P,{total:i.length,title:n,showAll:!0,children:i.map(((e,n)=>{const t=e.concerts[0]?.concert;return(0,R.jsx)(re,{event:e,position:n,sectionSpec:r,onOpenGroupedEvent:c},t.id)}))})})})})),ve=(0,s.memo)((e=>{const{isLoading:n,events:t,locationName:s,spec:a,onOpenGroupedEvent:i}=e;if(n)return(0,R.jsx)($.h,{hasError:!1,errorMessage:""});if(0===t.length)return(0,R.jsx)(Q.u,{title:l.ag.get("concerts.error.no_concerts_found_title"),message:l.ag.get("concerts.error.no_concerts_found_message",s),renderInline:!0});const o=(e=>{const n={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":n.recommended.push(e);break;case"popular":n.popular.push(e);break;case"online":n.online.push(e)}})),n})(t);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(he,{title:l.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:o.online,onOpenGroupedEvent:i,feedSpec:a}),(0,R.jsx)(he,{title:l.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:o.recommended,onOpenGroupedEvent:i,feedSpec:a}),(0,R.jsx)(he,{title:l.ag.get("concerts_popular_near_you"),identifier:"popular",position:2,events:o.popular,onOpenGroupedEvent:i,feedSpec:a})]})}));var ge=t(59689),pe=t(69647),xe=t(63461);const je=e=>{const[n,{isAnonymous:t,geonameId:s}]=e.queryKey;return(async(e,n)=>{const t=e?(0,xe.getConcertsHub)(pe.b.getInstance(),void 0,n):(0,xe.getConcertsForUser)(pe.b.getInstance(),n);return(await t).body})(t,s)},Ne=/^(\d+)/,fe=o.vI0,be={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},ke=(e,n)=>{if(!e)return"/concerts";const t=n?.normalize().replaceAll(/\W+/g,"-");return t?`/concerts/location/${e}-${t}`:`/concerts/location/${e}`},ye=(0,s.memo)((()=>{const e=(0,i.k6)(),{isAnonymous:n}=(0,a.v9)(p.Gg),t=(()=>{const{location:e}=(0,i.UO)(),[,n]=e?.match(Ne)||[];if(n)try{return parseInt(n,10)}catch(e){return}})(),{data:o,isLoading:N}=(e=>{const n=(0,ge.useQueryClient)();return(0,ge.useQuery)(["concerts",e],je,{staleTime:6e5,keepPreviousData:!0,onSuccess(t){if(e.geonameId||!t.userLocationGeonameId)return;const s=parseInt(t.userLocationGeonameId,10),a=["concerts",{...e,geonameId:s}];n.setQueryData(a,(()=>t))}})})({isAnonymous:n,geonameId:t}),{spec:f}=(0,x.fU)(r.createDesktopLiveeventsFeedEventFactory,{}),b=(0,s.useMemo)((()=>f.headerFactory()),[f]),k=(0,g.o)(),[y,C]=(0,s.useState)();const D=o?.userLocation||l.ag.get("concerts.default_location");return(0,R.jsxs)("section",{className:de,children:[(0,R.jsx)(m.$,{children:`${l.ag.get("concerts_shows_in")} ${D}`}),(0,R.jsxs)(u.gF,{size:u.fR.SMALL,backgroundColor:fe,backgroundImages:[be],children:[(0,R.jsx)(u.sP,{children:(0,R.jsx)(u.xd,{children:l.ag.get("live_events.label")})}),(0,R.jsx)(h.W,{children:(0,R.jsx)(v.i,{text:l.ag.get("live_events.label")})})]}),(0,R.jsxs)("div",{className:me,children:[(0,R.jsx)(d.I,{backgroundColor:fe}),(0,R.jsxs)("div",{className:ue,children:[(0,R.jsx)("div",{className:le,"data-testid":"location-selector",children:(0,R.jsx)(j.Z,{handleLocationChange:n=>{k({type:"click",intent:"change-live-events-location"}),n?.geonameId&&e.push(ke(n.geonameId,n.location))},locationStr:D,headerSpec:b})}),(0,R.jsx)(ve,{isLoading:N,events:o?.events||[],locationName:D,spec:f,onOpenGroupedEvent:e=>{C(e);const n=e.concerts[0]?.concert.artistUris[0];k({type:"click",intent:"open-grouped-live-event",targetUri:n})}}),(0,R.jsx)(c.D,{variant:"finale",semanticColor:"textSubdued",children:l.ag.get("live_events.disclaimer")}),(0,R.jsx)(X,{event:y,locationName:D,feedSpec:f,onClose:()=>C(void 0)})]})]})]})}))},83719:(e,n,t)=>{t.d(n,{e:()=>h});var s=t(65297);const a="(min-width: 0px)",i="(min-width: 0px) and (max-width: 767px)",o="(min-width: 768px)",c="(min-width: 768px) and (max-width: 1023px)",r="(min-width: 1024px)",l="(min-width: 1024px) and (max-width: 1279px)",d="(min-width: 1280px)",m="(min-width: 1280px) and (max-width: 1919px)",u="(min-width: 1920px)",h=()=>({isXS:(0,s.a)(a),isXSOnly:(0,s.a)(i),isSM:(0,s.a)(o),isSMOnly:(0,s.a)(c),isMD:(0,s.a)(r),isMDOnly:(0,s.a)(l),isLG:(0,s.a)(d),isLGOnly:(0,s.a)(m),isXL:(0,s.a)(u)})}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map