"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7553],{40771:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(87462),a=r(45987),l=r(67294),o=r(67892),i=["href","children"],c=function(e){var t=e.href,r=e.children,c=(0,a.Z)(e,i);return l.createElement(o.Z,(0,n.Z)({to:t},c),r)}},30731:(e,t,r)=>{r.d(t,{u:()=>y});var n=r(4942),a=r(67294),l=r(94184),o=r.n(l),i=r(32667),c=r(34011),s=r(6330),u=r(40771);const m="FvfvGU3jvHRskUU9v9_8",d="Q9AlbZn2EGzy3MTWXa8X",f="mxmxS0y8LiwSs5nueKPT",g="GXxVAveNFStY3pBI_NO4",p="eHcXC2s97InYP7rMNT0H";var y=a.memo((function(e){var t=e.children,r=e.message,l=e.title,y=e.linkTitle,v=e.linkTo,E=e.onClick,b=e.renderInline,k=void 0!==b&&b,h=(0,s.e)(),D=h.isXSOnly,S=h.isSMOnly,C=D||S;return a.createElement("section",{className:o()(m,(0,n.Z)({},d,k))},t,a.createElement(i.D,{as:"h1",variant:C?"cello":"alto",className:g},l),a.createElement(i.D,{variant:C?"mesto":"ballad",className:p},r),y&&(v||E)&&a.createElement(c.D,{colorSet:"invertedLight",className:f,href:v,onClick:E,component:u.Z},y))}))},8294:(e,t,r)=>{r.d(t,{p:()=>D});var n=r(15861),a=r(93433),l=r(29439),o=r(87757),i=r.n(o),c=(r(66992),r(41539),r(70189),r(78783),r(33948),r(57327),r(21249),r(68309),r(67294)),s=r(96206),u=r(1838),m=r(61728),d=r(22423),f=r(28248),g=r(78462),p=r(42922),y=r(45342),v=r(15852),E=r(49961),b=r(39412),k=new Set(g.P0),h=new Set([]),D=c.memo((function(e){var t=e.nrTracks,r=e.collectionUri,o=e.columns,D=e.initialItems,S=e.uri,C=e.sortable,P=void 0===C||C,w=e.scrollToUri,T=e.usePlayContextItem,F=e.outerDomRef,O=e.spec,I=(0,c.useContext)(y.H),x=(0,c.useRef)(null),R=(0,c.useState)(t),A=(0,l.Z)(R,2),L=A[0],U=A[1],_=(0,c.useContext)(d.fo).filter,N=(0,c.useRef)((function(){})),M=(0,c.useState)([]),Z=(0,l.Z)(M,2),j=Z[0],B=Z[1],Q=(0,c.useContext)(g.Gb),z=Q.sortState,G=Q.setSortState,H=(0,v.$P)(),X=(0,c.useCallback)((function(e,t){e===f.QD.ADDED_AT?G({column:f.QD.ADDED_AT,order:z.order===f.kn.ASC?f.kn.DESC:f.kn.ASC}):G((0,u.VK)(e,z)),O&&H.logInteraction(O.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[H,G,z,O]);(0,c.useEffect)((function(){x.current&&x.current.update()}),[z,_]),(0,c.useEffect)((function(){x.current&&""===_&&x.current.scrollToFirstSelected()}),[_,L]),(0,c.useEffect)((function(){U(t)}),[t]),(0,c.useEffect)((function(){x.current&&w&&x.current.scrollToItem({uri:w})}),[w]);var K=(0,c.useCallback)((function(e){var t=e.map((function(e){return e.uri}));N.current(),null==I||I.remove.apply(I,(0,a.Z)(t))}),[I]),V=(0,c.useCallback)((function(e,t){N.current=t,e.length>1?B(e):K(e)}),[K]),W=(0,c.useCallback)(function(){var e=(0,n.Z)(i().mark((function e(t,r){var n,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==I?void 0:I.getTracks({offset:t,limit:r,uri:S,sort:(0,b.w)(z),filter:_});case 2:return n=e.sent,a=null==n?void 0:n.totalLength,l=(null==n?void 0:n.items)||[],"number"==typeof a&&a!==L&&U(a),e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[_,I,L,z,S]),Y=(0,c.useCallback)((function(e,t){var n,a=(0,E.X)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return c.createElement(f.dx,{key:t+e.uri,index:t,contextUri:r,uri:e.uri,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,albumOrShow:e.album,isExplicit:e.isExplicit,isCollaborative:!1,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:e.isLocal,addedBy:[],dateAdded:e.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==a?void 0:a.url)||"",onMove:function(){},onInsert:function(){},usePlayContextItem:T,allowedDropTypes:[],isDisliked:!1,playlistName:s.ag.get("sidebar.liked_songs")})}),[r,T]);return c.createElement(c.Fragment,null,c.createElement(p.ZP,{value:"liked-songs-tracklist"},c.createElement(f.Pv,{ariaLabel:s.ag.get("sidebar.liked_songs"),key:r,hasHeaderRow:!0,columns:o,sortableColumns:null!=I&&I.getCapabilities().canSort&&P?k:h,sortState:z,onSort:X,renderRow:Y,resolveUri:function(e){return e.uri},resolveUid:function(e){return e.uri},onRemove:V,nrTracks:L,fetchTracks:W,limit:50,canFetchAllTracks:null==I?void 0:I.getCapabilities().canFetchAllTracks,outerRef:x,outerDomRef:F,tracks:D})),c.createElement(m.h,{title:s.ag.get("remove_from_your_liked_songs"),isOpen:j.length>0,tracks:j,onClose:function(e){e.stopPropagation(),B([])},onRemove:K}))}))},69003:(e,t,r)=>{r.r(t),r.d(t,{default:()=>J});var n=r(4942),a=(r(66992),r(41539),r(88674),r(78783),r(33948),r(68309),r(57327),r(41637),r(74916),r(64765),r(47941),r(82526),r(38880),r(89554),r(54747),r(49337),r(33321),r(69070),r(67294)),l=r(86706),o=r(51615),i=r(69518),c=r.n(i),s=r(98983),u=r(93994),m=r(96206),d=r(18270),f=r(43683),g=r(70369),p=r(30731),y=r(6158),v=r(55120),E=r(77834),b=r(22423),k=r(28248),h=r(78462),D=r(61412),S=r(69846),C=r(23232),P=r(61901),w=r(88247),T=r(45342),F=r(26482),O=r(84242),I=r(15852),x=r(53538),R=r(29255),A=r(12498),L=r(88767),U=r(62830),_=r(6489),N=r(76391),M=r(8688),Z=r(98620);var j=r(39412),B=r(98816),Q=r(98562),z=r(35213),G=a.memo((function(e){var t=e.tracklistDomRef,r=(0,I.fU)(B.createDesktopSearchBarEventFactory,{}),n=r.spec,l=r.logger,o=(0,a.useCallback)((function(){l.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[l,n]),i=(0,a.useCallback)((function(){l.logInteraction(n.filterFieldFactory().hitClearFilter())}),[l,n]),c=(0,a.useCallback)((function(){l.logInteraction(n.sortButtonFactory().hitSort())}),[l,n]);return a.createElement("div",{className:E.Z.searchBoxContainer},a.createElement(a.Suspense,{fallback:null},a.createElement(Q.K,{placeholder:m.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:t,onFilter:o,onClear:i})),a.createElement(z.l,{columns:h.P0,onSort:c}))})),H=r(8294);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=a.lazy((function(){return Promise.all([r.e(1814),r.e(2716),r.e(682)]).then(r.bind(r,82716))})),W=[k.QD.INDEX,k.QD.TITLE,k.QD.ALBUM,k.QD.ADDED_AT,k.QD.DURATION],Y="your_library",$=function(e){var t=e.data,r=e.canFilter,n=e.canSort,l=t.metadata,i=l.uri,c=l.name,S=l.totalLength,T=(0,a.useRef)(null),R=S>0,L=S>0,U=(0,P.Y5)("#5038a0"),_=(0,a.useContext)(b.fo).filter,N=(0,a.useContext)(h.Gb),M=N.sortState,Z=N.setSortState,B=(0,I.fU)(u.createDesktopLikedSongsEventFactory,{data:{uri:i}}),Q=B.spec,z=B.logger,X=a.useMemo((function(){return Q.headerFactory()}),[Q]),K=a.useMemo((function(){return Q.tracklistFactory()}),[Q]);(0,a.useEffect)((function(){null===M.column&&Z({column:k.QD.ADDED_AT,order:k.kn.DESC})}),[M,Z]);var V=(0,o.k6)(),$="POP"!==V.action?new URLSearchParams(V.location.search).get("uri"):null,q=(0,O.n)((0,w.I)(i,(0,j.w)(M),_),{featureIdentifier:Y,referrerIdentifier:"your_library"}),J=q.isPlaying,ee=q.togglePlay,te=q.usePlayContextItem,re=q.isActive,ne=function(){var e=(0,x.aK)({isPlaying:J,isActive:re,spec:Q.actionBarFactory().playButtonFactory(),logger:z,uri:i});ee({loggingParams:e})},ae=(0,a.useCallback)((function(e,t){var r=Q.actionBarFactory().downloadButtonFactory();t===F.mc.ADD?z.logInteraction(r.hitDownload({itemToDownload:i})):t===F.mc.REMOVE?z.logInteraction(r.hitRemoveDownload({itemToRemoveFromDownloads:i})):t===F.mc.NO_PERMISSION&&z.logInteraction(r.hitUiReveal())}),[z,Q,i]);return a.createElement("section",{role:"presentation",className:E.Z.playlist,"data-testid":"playlist-page"},a.createElement(g.$,null,m.ag.get("playlist.page-title",c)),a.createElement(C.s,{metadata:t.metadata,isPlaying:J,togglePlay:ne,backgroundColor:U,specLikedSongs:X}),a.createElement(d.o,{backgroundColor:U},a.createElement(d.F,null,L?a.createElement(v.$,{onClick:ne,isPlaying:J,size:"lg",uri:i,ariaPauseLabel:m.ag.get("playlist.a11y.pause",c),ariaPlayLabel:m.ag.get("playlist.a11y.play",c)}):null,t.metadata.totalLength>0&&a.createElement(A.v,{uri:i,renderEnabled:function(){return a.createElement(D.v,{uri:i})}}),a.createElement(f.o,{uri:i,canDownload:R,isFollowing:!0,onFollow:function(){},size:f.q.md,onClick:ae}),r&&n&&a.createElement(I.Nh,{spec:Q.actionBarFactory()},a.createElement(G,{tracklistDomRef:T})))),a.createElement("div",{className:"contentSpacing"},S>0?a.createElement(a.Suspense,{fallback:a.createElement(y.h,{hasError:!1,errorMessage:m.ag.get("error.request-collection-tracks-failure")})},a.createElement(I.Nh,{spec:K},a.createElement(H.p,{nrTracks:S,columns:W,collectionUri:i,scrollToUri:$,usePlayContextItem:te,outerDomRef:T,spec:K,initialItems:t.contents.items}))):a.createElement(p.u,{message:m.ag.get("collection.empty-page.songs-subtitle"),title:m.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:m.ag.get("collection.empty-page.songs-cta"),renderInline:!0},a.createElement(s.F,null))))},q=a.memo((function(e){var t=e.user,r=e.uri,n=(0,a.useContext)(b.fo).filter,o=(0,a.useContext)(h.Gb).sortState,i=function(e,t,r){var n=(0,a.useContext)(T.H),l=(0,L.useQueryClient)(),o=(0,U.jP)((function(){return["useLikedSongs",e,r]}),[e,r]),i=(0,L.useQuery)(o(),(function(){return n.getTracks(r)}),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}).data,c=(0,a.useCallback)((function(){l.invalidateQueries(o())}),[l,o]);(0,N.b)(_.EW.UPDATE,c);var s=(0,Z.I2)(t.id);return s&&i?{metadata:{uri:e,name:s.name,images:s.images,totalLength:null==i?void 0:i.totalLength,unfilteredTotalLength:i.unfilteredTotalLength,owner:(0,M.V3)(t)},contents:i}:null}(r,t,{offset:0,limit:25,sort:(0,j.w)(o),filter:n}),c=(0,a.useContext)(T.H).getCapabilities(),s=(0,l.v9)(R.n5),u=(0,S.U)("spotify:user:".concat(s,":collection")).isEnhanced;if(i){var d=a.createElement($,{data:i,canFilter:c.canFilter&&i.metadata.unfilteredTotalLength>0,canSort:c.canSort&&i.metadata.unfilteredTotalLength>0});return a.createElement(A.v,{uri:i.metadata.uri,renderEnabled:function(){return u?a.createElement(a.Suspense,{fallback:null},a.createElement(h.kz,{uri:i.metadata.uri},a.createElement(V,{metadata:K(K({},i.metadata),{},{collaborators:{count:1,items:[{isOwner:!0,user:i.metadata.owner,tracksAdded:i.metadata.totalLength}]}}),capabilities:c,featureIdentifier:Y}))):d},renderDisabled:function(){return d}})}return a.createElement(y.h,{hasError:!1,errorMessage:m.ag.get("error.not_found.title.playlist"),loadOffline:c.canModifyOffline})}));const J=function(){var e=(0,l.v9)(R.Gg).user;if(null===e)return null;var t=c().collectionURI(e.id).toURI();return a.createElement(h.kz,{uri:t},a.createElement(b.hz,{uri:t},a.createElement(q,{uri:t,user:e})))}},23232:(e,t,r)=>{r.d(t,{s:()=>n.s});var n=r(40786)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map