"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8059,8396],{57106:(e,r,t)=>{t.d(r,{Q:()=>u});t(47941),t(82526),t(57327),t(41539),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070);var n=t(4942),o=t(94184),s=t.n(o);const i="_pMNGOs2KBLWGpGmunYI";var c=t(85893);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function u(e){return(0,c.jsx)("section",p(p({},e),{},{className:s()(i,e.className)}))}},14784:(e,r,t)=>{t.r(r),t.d(r,{ALL_EPISODE_SPONSORS_TESTID:()=>b,AllEpisodeSponsors:()=>v,allEpisodeSponsorsPath:()=>l.e,default:()=>y});t(47941),t(82526),t(57327),t(41539),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070);var n=t(4942),o=t(51615),s=t(74414),i=t(28975),c=t(57106),a=t(77186);var p=t(88396),u=t(99922),f=t(85893),l=t(61737);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var b="all-episode-sponsors";function v(e){var r=e.EpisodeSponsorsWrapper,t=void 0===r?p.EpisodeSponsorsWrapper:r,n=(0,o.UO)()[i.hd],l=(0,a.P)(),d=(0,u.o)();return l.location.state?(0,f.jsx)(c.Q,{"data-testid":b,children:(0,f.jsx)(t,O(O({},d),{},{numberOfSponsorsToDisplay:1/0,reason:"Episode page See All"}))}):(0,f.jsx)(s.o,{to:(0,i.lc)(n)})}const y=v},88396:(e,r,t)=>{t.r(r),t.d(r,{EPISODE_SPONSORS_SHELF_TESTID:()=>D,EpisodeSponsorsWrapper:()=>k,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>m,default:()=>T});var n=t(4942),o=(t(66992),t(41539),t(88674),t(78783),t(33948),t(47941),t(82526),t(57327),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070),t(67294)),s=t(15861),i=t(87757),c=t.n(i),a=(t(21249),t(92222),t(1486)),p=t(8271);t(47042);var u=t(85893);function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var l=(0,o.lazy)((function(){return Promise.all([t.e(1814),t.e(9033)]).then(t.bind(t,99033))}));function d(e){var r=e.fetchedEpisodeSponsorsData,t=e.fireTrackingEvent,i=e.numberOfSponsorsToDisplay,d=e.firedViewedEvents,O=e.version,b=e.reason,v=e.uri,y=function(e){var r=e.fetchedEpisodeSponsorsData,t=e.numberOfSponsorsToDisplay;return(0,o.useMemo)((function(){return{displayedEpisodeSponsorsData:r.slice(0,t)}}),[r,t])}({fetchedEpisodeSponsorsData:r,numberOfSponsorsToDisplay:i}),j=y.displayedEpisodeSponsorsData,S=(0,p.s4)(),E=(0,o.useMemo)((function(){return j.map((function(e,r){return(0,u.jsx)(l,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({fireTrackingEvent:t,firedViewedEvents:d,version:O,onClick:function(){var e=(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.send((0,a.$)({uri:v,reason:b,lineitem_id:j.map((function(e){return e.metadata.lineitemId})),ui_navigate:j.map((function(e,t){var n=e.clickthrough;return r===t?n:""})),navigate_to_external_uri:j.map((function(e,t){return r===t}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e),"".concat(e.metadata.lineitem_id,"-").concat(r))}))}),[j,t,d,O,b,v,S]);return{displayedEpisodeSponsorsData:j,displayedSponsors:E}}var O=t(69518),b=t.n(O);var v=t(51615);var y=t(18693);t(70189);function j(e){var r,t=e.firedViewedEvents,n=(0,o.useRef)();return{firedViewedEvents:n.current=null!==(r=null!=t?t:n.current)&&void 0!==r?r:new Set}}function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function P(e){var r=e.uri,t=e.getEpisodeSponsors,n=e.fireTrackingEvent,s=e.numberOfSponsorsToDisplay,i=e.version,c=e.reason,a=(0,v.TH)().state,p=function(e){var r=e.uri,t=e.episodeBase62Id;return{episodeBase62Id:(0,o.useMemo)((function(){var e;return t||(null===(e=b().from(r))||void 0===e?void 0:e.getBase62Id())}),[r,t])}}(E(E({},a),{},{uri:r})),u=p.episodeBase62Id,f=(0,y.m)(E(E({},a),{},{episodeBase62Id:u,getEpisodeSponsors:t,version:i})).fetchedEpisodeSponsorsData,l=j(E({},a)).firedViewedEvents;return E(E({uri:r,episodeBase62Id:u,fetchedEpisodeSponsorsData:f},d({fetchedEpisodeSponsorsData:f,fireTrackingEvent:n,numberOfSponsorsToDisplay:s,firedViewedEvents:l,version:i,reason:c,uri:r})),{},{firedViewedEvents:l,reason:c})}function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var w=(0,o.lazy)((function(){return t.e(4791).then(t.bind(t,54791))})),D="episode-sponsors-shelf",m="see-all-episode-sponsors";function k(e){var r,t={numberOfSponsorsToDisplay:void 0===(r=e.numberOfSponsorsToDisplay)?3:r}.numberOfSponsorsToDisplay,n=P(h(h({},e),{},{numberOfSponsorsToDisplay:t}));return n.episodeBase62Id&&n.displayedSponsors.length?(0,u.jsx)(o.Suspense,{fallback:!0,children:(0,u.jsx)(w,h(h({},e),{},{numberOfSponsorsToDisplay:t,state:n}))}):null}const T=k},18693:(e,r,t)=>{t.d(r,{F:()=>u,m:()=>f});var n=t(15861),o=t(29439),s=t(87757),i=t.n(s),c=(t(21703),t(96647),t(66992),t(41539),t(88674),t(78783),t(33948),t(67294)),a=t(24697),p=t(31604),u=420;function f(e){var r=e.episodeBase62Id,s=e.getEpisodeSponsors,f=e.fetchedEpisodeSponsorsData,l=void 0===f?[]:f,d=e.version,O=(0,c.useState)(l),b=(0,o.Z)(O,2),v=b[0],y=b[1],j=(0,c.useCallback)((0,n.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("episodeBase62Id is required to fetch episode sponsors");case 3:if(null==s){e.next=7;break}e.t0=s,e.next=10;break;case 7:return e.next=9,Promise.resolve().then(t.bind(t,11401));case 9:e.t0=e.sent.getEpisodeSponsors;case 10:return n=e.t0,e.t1=y,e.next=14,n(r,{version:d});case 14:e.t2=e.sent,(0,e.t1)(e.t2),e.next=21;break;case 18:e.prev=18,e.t3=e.catch(0),y([]);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),[r,s,d]),S=(0,a.y1)(j,u);return(0,c.useEffect)((function(){l.length||S()}),[S,l.length]),(0,p.H)(S),{fetchedEpisodeSponsorsData:v}}},99922:(e,r,t)=>{t.d(r,{o:()=>s});var n=t(87577),o=t(49207);function s(){return{version:(0,n.W6)(o.GE)?2:1}}},31604:(e,r,t)=>{t.d(r,{H:()=>p});t(32564);var n=t(67294),o=t(87577),s=t(49207),i=t(40080),c=t(8341),a=t(89952);function p(e){var r=(0,o.W6)(s.oF),t=(0,c.Y)((function(e){var r,t,n=null!==(r=null==e?void 0:e.item)&&void 0!==r?r:void 0;return(0,a.k6)(n)&&n.isPodcastAd&&null!==(t=n.id)&&void 0!==t?t:void 0})),p=(0,i.D)(t);(0,n.useEffect)((function(){t!==p&&Boolean(t)&&setTimeout(e,r)}),[e,t,p,r])}},77186:(e,r,t)=>{t.d(r,{P:()=>a});t(47941),t(82526),t(57327),t(41539),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070);var n=t(4942),o=t(67294),s=t(51615);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function a(){var e=(0,s.k6)(),r=e.listen,t=e.location;return(0,o.useEffect)((function(){return r((function(e,r){"POP"===r&&(e.state=c(c(c({},void 0),t.state),e.state))}))})),e}},40080:(e,r,t)=>{t.d(r,{D:()=>o});var n=t(67294);function o(e){var r=(0,n.useRef)();return(0,n.useEffect)((function(){r.current=e}),[e]),r.current}}}]);
//# sourceMappingURL=xpui-routes-all-episode-sponsors.js.map