"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1289],{61112:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Pe});var n,r,a=i(4942),s=(i(57327),i(41539),i(67294)),l=i(6695),o=i(96206),u=i(30731),c=i(6158),d=i(1838),f=i(22423),g=i(47032),p=i(38911),y=i(4236),m=i(61901),h=i(45342),x=i(84242),b=i(89952),P=i(70369),j=i(23609),v=(i(68309),i(60210)),E=i(55120),C=i(64971),O=(i(26699),i(32023),i(69600),i(21249),i(92222),i(74483)),A=(n={},(0,a.Z)(n,O.yW.NAME,d.hI.TITLE),(0,a.Z)(n,O.yW.SHOW_NAME,d.hI.SHOW),(0,a.Z)(n,O.yW.ADDED_AT,d.hI.ADDED_AT),n),k=[p.oT.ADDED_AT,p.oT.CREATOR_NAME,p.oT.EPISODE_ALPHABETICAL],D=(r={},(0,a.Z)(r,p.oT.ADDED_AT,{field:O.yW.ADDED_AT,order:O.As.DESC}),(0,a.Z)(r,p.oT.CREATOR_NAME,{field:O.yW.SHOW_NAME,order:O.As.ASC}),(0,a.Z)(r,p.oT.EPISODE_ALPHABETICAL,{field:O.yW.NAME,order:O.As.ASC}),r),I=function(e){if(k.includes(e))return D[e]},S=function(e){if(k.includes(e)){var t=I(e);if(null!=t&&t.field){var i=A[t.field];if(i)return d.Vd[i].map((function(e){return t.order?"".concat(e," ").concat(t.order):e})).join(",")}}};const w="m9xwK71Ieq9cySIq4FAP",T="PkEMTu8sGqJeQWJ7HvEs",_="DbH2KkRA8yVWWpXGaNSW";var N=i(85893),R=function(e){var t=e.metadata,i=e.canSort,n=e.backgroundColor,r=e.isPlaying,a=e.isOnline,s=e.togglePlay,l=t.uri,u=t.name,c=t.totalLength>0;return(0,N.jsx)(v.o,{backgroundColor:n,children:(0,N.jsxs)(v.F,{children:[c&&(0,N.jsx)(E.$,{onClick:function(){return s()},isPlaying:r,size:"lg",uri:l,disabled:!a,ariaPlayLabel:o.ag.get("playlist.a11y.play",u),ariaPauseLabel:o.ag.get("playlist.a11y.pause",u)}),i&&(0,N.jsx)("div",{className:_,children:(0,N.jsx)(C.h,{filterPlaceholder:o.ag.get("playlist.search_in_playlist"),sortOptions:k})})]})})},L=i(93433),Z=i(15861),M=i(29439),U=i(87757),W=i.n(U),H=(i(9653),i(40561),i(47941),i(82526),i(38880),i(89554),i(54747),i(49337),i(33321),i(69070),i(70937)),z=i(42922),G=i(18864),q=(i(41817),i(25988)),F=i(48194),B=i(88435),K=i(56294),$=i(57784),Q=i(92823),V=i(18261),J=i(87257),X=i(57978),Y=i(4383),ee=i(8341),te=i(5944),ie=i(42781),ne=i(84788),re=i(67062),ae=i(43028),se={small:64,standard:300,large:640,xlarge:1024},le=s.memo((function(e){var t,i,n,r,a=e.index,l=e.contextUri,o=e.episode,u=e.onRemove,c=e.usePlayContextItem,d=(0,s.useRef)(o.duration.milliseconds-o.timeLeft.milliseconds),g=o.uri,p=(0,s.useState)(0===o.timeLeft.milliseconds),m=(0,M.Z)(p,2),h=m[0],b=m[1],P=(0,s.useContext)(f.fo).filter,j=(0,$.O1)(),v=(0,G.jh)(),E=(0,Q.o)(),C=(0,Y.Z)(g,!0),O=(0,M.Z)(C,1)[0],A=(0,ae.k)(o.uri,o.isPlayable),k=(0,y.k)(),D=(0,ee.Y)((function(e){var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===o.uri){var i,n=null!==(i=(0,te.k)(e))&&void 0!==i?i:0;return d.current=n,n}return 0})),I=c({uri:g,index:a}),S=I.isPlaying,w=I.isActive,T=I.togglePlay,_=(0,x.n)({uri:g,pages:[{items:[{type:ie.p.EPISODE,uri:g,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),R=_.isPlaying,L=_.isActive,Z=_.togglePlay;(0,s.useEffect)((function(){O||u()}),[O,u]),(0,s.useEffect)((function(){S||o.duration.milliseconds<=d.current&&b(!0)}),[S,o.duration.milliseconds]);var U=(0,s.useCallback)((function(e){e||(d.current=0),b(e)}),[]),W=(0,s.useCallback)((function(){E({type:"click",targetUri:g,intent:"navigate"})}),[g,E]),H=(0,s.useCallback)((function(){k?(E({type:"click",intent:S?"pause":"play"}),T()):(E({type:"click",intent:R?"pause":"play"}),Z())}),[k,S,R,E,T,Z]),le=(0,s.useCallback)((function(e){return(0,N.jsx)(re.o,{searchWords:[P],textToHighlight:e})}),[P]),oe=null!==(t=null===(i=o.podcastSubscription)||void 0===i?void 0:i.isPaywalled)&&void 0!==t&&t,ue=null!==(n=null===(r=o.podcastSubscription)||void 0===r?void 0:r.isUserSubscribed)&&void 0!==n&&n,ce=(0,ne.r)({isExplicit:o.isExplicit,isMOGEFRestricted:o.is19PlusOnly,isPaywalled:oe}).badges,de=!1;return(w||!k&&L)&&(de=!0),O?(0,N.jsx)(z.ZP,{value:"row",index:a,children:(0,N.jsx)(V._,{menu:(0,N.jsx)(q.k,{uri:g,showUri:o.show.uri,isPlayed:h,onMarkAsPlayed:U}),children:(0,N.jsx)(F.X,{requestId:o.requestId,index:a,uri:g,uid:g,size:v,images:o.images.map((function(e){return{url:e.url,width:e.width||(e.label?se[e.label]:null),height:e.height||(e.label?se[e.label]:null)}})),isPaywalled:oe,isUserSubscribed:ue,name:o.name,highlightText:le,showName:o.show.name,showUri:o.show.uri,description:o.description,isPlayable:A,fullyPlayed:h,durationMs:o.duration.milliseconds,releaseDate:o.release.date||"",resumePositionMs:d.current,handleDragStart:function(e){if(e.target===e.currentTarget){var t="".concat(o.name," â€¢ ").concat(o.show.name);j(e,[g],t,l)}},handlePlaybackClick:H,handleClick:W,isCurrentlyPlaying:de,isPlaying:k?S:R,position:de?D:void 0,episodeSharingInfo:null,onMarkAsPlayed:U,badges:(0,N.jsxs)(N.Fragment,{children:[ce.explicit&&(0,N.jsx)(J.N,{}),ce.paid&&(0,N.jsx)(K.g,{}),ce.nineteen&&(0,N.jsx)(X.X,{size:16})]}),playButtonWrapper:function(e){return(0,N.jsx)(B.l,{enabled:oe&&!ue,showUri:o.show.uri,children:e})}})})}):null}));const oe="p6DKqBcwmVtxmHt8ju43",ue="_OxEpxzAgJiTENfolVUN";function ce(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function de(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(i),!0).forEach((function(t){(0,a.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ce(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var fe=s.memo((function(e){var t,i=e.contextUri,n=e.usePlayContextItem,r=(0,s.useContext)(h.H),l=(0,s.useContext)(g.Q).sortState,o=(0,s.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),u=(0,M.Z)(o,2),c=u[0],d=u[1],p=(0,s.useRef)(!1),y=(0,s.useRef)(0),m=(0,s.useRef)(0),x=(0,s.useContext)(f.fo).filter,b=(0,s.useCallback)((function(){m.current++}),[]),P=(0,G.Db)((t={},(0,a.Z)(t,G.Uo.MEDIUM,0),(0,a.Z)(t,G.Uo.LARGE,600),t)),j=P.ref,v=P.breakpoint,E=(0,s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){var e=(0,Z.Z)(W().mark((function e(t){var i;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getEpisodes({offset:t-m.current,limit:50,sort:I(l),filter:x});case 2:return i=e.sent,m.current=0,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=y.current;null!==i&&(p.current||(p.current=!0,t(Number(i)).then((function(t){d((function(n){var r=Number(t.offset)+t.items.length,a=e?[]:(0,L.Z)(n.items);return a.splice.apply(a,[Number(i),t.items.length].concat((0,L.Z)(t.items))),y.current=r<t.totalLength?r:null,de(de({},t),{},{items:a})})),p.current=!1}))))}),[x,r,l]);return(0,s.useEffect)((function(){y.current=0,E(!0)}),[E]),(0,N.jsx)(G.ZU.Provider,{value:v,children:(0,N.jsx)(z.ZP,{value:"track-list",children:(0,N.jsx)("div",{ref:j,children:(0,N.jsx)(H.C,{onReachBottom:E,triggerOnInitialLoad:!0,children:c.items.map((function(e,t){return(0,N.jsxs)("div",{className:ue,children:[(0,N.jsx)("hr",{className:oe,"aria-hidden":!0}),(0,N.jsx)(le,{index:t,episode:e,contextUri:i,onRemove:b,usePlayContextItem:n},"".concat(e.uri,"/").concat(t))]},"".concat(t).concat(e.uri))}))})})})})})),ge=i(60289),pe=i(59482),ye=i(72907),me=i(37761),he=i(83209),xe=function(e){var t=e.metadata,i=e.backgroundColor,n=e.isPlaying,r=e.isOnline,a=e.togglePlay,l=t.uri,u=t.name,c=t.images,d=t.totalLength,f=t.owner,g=(0,s.useMemo)((function(){return{id:f.username,uri:f.uri,name:f.username,displayName:f.displayName||void 0,images:f.images||[]}}),[f]);return(0,N.jsxs)(ge.gF,{backgroundColor:i,children:[(0,N.jsxs)(pe.W,{children:[(0,N.jsx)(E.$,{size:"md",onClick:function(){return a()},isPlaying:n,uri:l,disabled:!r,ariaPlayLabel:o.ag.get("playlist.a11y.play",u),ariaPauseLabel:o.ag.get("playlist.a11y.pause",u)}),(0,N.jsx)(ye.i,{text:u})]}),(0,N.jsx)(ge.Oz,{images:c,name:u,shape:me.K.ROUNDED_CORNERS,renderImage:function(){return(0,N.jsx)(he.$,{})}}),(0,N.jsxs)(ge.sP,{children:[(0,N.jsx)(ge.dy,{small:!0,uppercase:!0,children:o.ag.get("playlist")}),(0,N.jsx)(ge.xd,{canEdit:!1,onClick:function(){},children:u}),(0,N.jsx)(ge.QS,{creators:[g],totalEpisodes:d})]})]})},be=function(e){var t,i=e.metadata,n=e.canSort,r=(0,m.Y5)("#006450"),c=(0,y.k)(),p=(0,s.useContext)(g.Q).sortState,h=(0,s.useContext)(f.fo).filter,j=(0,x.n)({uri:i.uri,metadata:(t={},(0,a.Z)(t,b.sb.SORTING_CRITERIA,S(p)),(0,a.Z)(t,b.sb.FILTERING_PREDICATE,(0,d.aK)(h)),t)},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),v=j.isPlaying,E=j.togglePlay,C=j.usePlayContextItem;return(0,N.jsxs)("section",{className:T,"data-testid":"your-episodes-page",children:[(0,N.jsx)(P.$,{children:o.ag.get("sidebar.your_episodes")}),(0,N.jsx)(xe,{metadata:i,backgroundColor:r,isPlaying:v,isOnline:c,togglePlay:E}),(0,N.jsxs)("div",{className:w,children:[(0,N.jsx)(R,{metadata:i,backgroundColor:r,isPlaying:v,isOnline:c,togglePlay:E,canSort:n}),(0,N.jsx)("div",{className:"contentSpacing",children:i.totalLength>0?(0,N.jsx)(fe,{contextUri:i.uri,usePlayContextItem:C}):(0,N.jsx)(u.u,{message:o.ag.get("collection.empty-page.episodes-subtitle"),title:o.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:o.ag.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,N.jsx)(l.G,{"aria-hidden":"true"})})})]})]})};const Pe=(0,s.memo)((function(){var e=(0,s.useContext)(h.H).getCapabilities(),t=(0,j.x)();return t?(0,N.jsx)(g.$,{uri:t.uri,defaultSortOption:p.oT.ADDED_AT,children:(0,N.jsx)(f.hz,{uri:t.uri,children:(0,N.jsx)(be,{metadata:t,canSort:e.canSort&&t.totalLength>0})})}):(0,N.jsx)(c.h,{hasError:!1,errorMessage:o.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map