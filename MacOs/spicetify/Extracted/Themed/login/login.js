(()=>{var e,t={9453:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}},8249:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{ENTER_LOGIN_MODE:()=>_,ENTER_SETTINGS_MODE:()=>k,ENTER_SIGNUP_MODE:()=>m,ENTER_SIGNUP_MODE_STEP_0:()=>y,ENTER_SIGNUP_MODE_STEP_1:()=>b,ENTER_WELCOME_MODE:()=>E,INTERACTION:()=>S,START_APP:()=>v,enterLoginMode:()=>F,enterSettingsMode:()=>x,enterSignupMode:()=>O,enterSignupModeStep0:()=>w,enterSignupModeStep1:()=>C,enterWelcomeMode:()=>P,interaction:()=>j,openSignupPage:()=>A,startApp:()=>D});var o={};n.r(o),n.d(o,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>ce,ACCOUNTS_METHODS:()=>le,LOADING:()=>ne,LOGIN_BEFORE:()=>$,LOGIN_CLEAR_ERRORS:()=>ee,LOGIN_FAIL:()=>te,LOGIN_SUCCESS:()=>Q,LOGIN_TYPE_ACCOUNTS:()=>ue,LOGIN_TYPE_AUTOLOGIN:()=>se,LOGIN_TYPE_EMAIL:()=>oe,LOGIN_TYPE_FACEBOOK:()=>ie,LOGIN_TYPE_FACEBOOK_POPUP:()=>ae,UTM_PARAMETERS:()=>re,abortLoginWithAccounts:()=>be,fetchUTMParameters:()=>Ee,loading:()=>he,login:()=>me,loginClearErrors:()=>Se,loginFailed:()=>ge,loginSuccess:()=>fe,loginWithAccounts:()=>ye,loginWithFacebookPopup:()=>_e,receivedUTMParameters:()=>ke});var i={};n.r(i),n.d(i,{CLEAR_ALL_ERRORS:()=>$e,COUNTRY_NOT_LAUNCHED:()=>Xe,FACEBOOK_SIGNUP_ATTEMPT:()=>Ve,FACEBOOK_SIGNUP_FAILURE:()=>Ke,FACEBOOK_SIGNUP_SUCCESS:()=>He,SIGNUP_ATTEMPT:()=>Be,SIGNUP_FAILURE:()=>Ge,SIGNUP_RESTRICTIONS_FAILURE:()=>Ue,SIGNUP_RESTRICTIONS_SUCCESS:()=>Le,SIGNUP_SUCCESS:()=>We,UPDATE_SIGNUP_DATA:()=>Je,VALIDATE_FIELD_ATTEMPT:()=>Ye,VALIDATE_FIELD_FAILURE:()=>qe,VALIDATE_FIELD_SUCCESS:()=>ze,clearAllErrors:()=>mt,countryNotLaunched:()=>vt,facebookSignup:()=>ct,facebookSignupFailure:()=>pt,facebookSignupSuccess:()=>lt,getSignupRestrictions:()=>Qe,signup:()=>nt,signupAttempt:()=>ot,signupFailure:()=>at,signupRestrictionsFailure:()=>tt,signupRestrictionsSuccess:()=>et,signupSuccess:()=>it,signupWithAccounts:()=>ut,updateSignupData:()=>ht,validateField:()=>rt,validateFieldAttempt:()=>dt,validateFieldFailure:()=>ft,validateFieldSuccess:()=>gt});var a={};n.r(a),n.d(a,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>Wt,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>Gt,SETTINGS_RESTART_CLIENT_FAILURE:()=>Yt,SETTINGS_RESTART_CLIENT_SUCCESS:()=>Kt,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>Ht,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>Vt,fetchProxySettings:()=>qt,restartClient:()=>Jt,updateProxySettings:()=>zt});var s=n(4942),u=n(5861),c=n(7757),l=n.n(c),p=(n(1539),n(8674),n(1703),n(6647),n(4916),n(4765),n(4603),n(8450),n(8386),n(9714),n(4723),n(3157),n(3935)),d=n(1448),f=n(6706),g=n(2976),h=n(685),v=(n(7941),n(2526),n(7327),n(5003),n(9554),n(4747),n(9337),n(3321),n(9070),n(5827),n(2222),"START_APP"),m="ENTER_SIGNUP_MODE",y="ENTER_SIGNUP_MODE_STEP_0",b="ENTER_SIGNUP_MODE_STEP_1",_="ENTER_LOGIN_MODE",E="ENTER_WELCOME_MODE",k="ENTER_SETTINGS_MODE",S="INTERACTION";function D(){return{type:v}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:m,actionHash:e}}function w(){return{type:y}}function C(){return{type:b}}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:_,actionHash:e}}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:E,errorMessage:e}}function x(){return{type:k}}function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){var r,o=n(),i={};switch(e?"website":"desktop-app"){case"desktop-app":t(O());break;case"website":i=o.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""};var a=Object.keys(i).reduce((function(e,t){return e[t]=encodeURIComponent(i[t]),e}),{});r="https://www.spotify.com/signup?utm_source=".concat(a.utm_source,"&utm_medium=").concat(a.utm_medium,"&utm_campaign=").concat(a.utm_campaign),a.referral&&(r+="&referral=".concat(a.referral,"&referrer=").concat(a.referral)),window.open(r)}}}function j(e,t,n,r,o){return{type:S,page:e,interactionType:t,intent:n,itemId:r,actionHash:o}}n(8862);const T=function(e){return n.g&&"function"==typeof n.g._getSpotifyModule?new Promise((function(t,r){n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:r})})):null};var I="https://www.spotify.com/redirect/account-page/",N="showSettings",R={id:"UnknownLoginErrorMessage"},Z={id:"DefaultErrorMessage",replace:[N]},M={id:"FbFailureOpenPopup",silent:!0},L={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[N]},400:R,401:R,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:R,405:R,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[I]},408:{id:"RegionMismatchMessage",replace:[I,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:R,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:R,415:R,416:R,417:{id:"FacebookCredentialsMisusedMessage"},418:R,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]},1001:{silent:!0},1002:M,1003:{id:"FbUserNotFoundSignUp",replace:["showSignup"]},1004:M,1005:M,1006:M},U={1:R,2:R,3:{id:"BadCredentialsMessage"},4:R,5:R,6:R,7:R,8:R,9:R},B={1:{silent:!0},2:R,3:R,4:{id:"SessionExpiredMessage"},5:Z};const G=window.localStorage;function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H="lastUsername",K="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",Y="utmParameters",q=G.getItem(Y),z=G.getItem(H),J={errorData:null,loginInProgress:!1,redirectTo:null,username:z!==K?z:"",utmParameters:q?JSON.parse(q):null};const X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt.LOADING:return V(V({},e),{},{loading:!0,throbberDelay:t.throbberDelay});case Qt.LOGIN_FAIL:return V(V({},e),{},{loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1});case Qt.LOGIN_BEFORE:return V(V({},e),{},{errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username});case Qt.LOGIN_SUCCESS:return V(V({},e),{},{loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username});case Qt.UTM_PARAMETERS:return V(V({},e),{},{utmParameters:t.utmParameters});case Qt.LOGIN_CLEAR_ERRORS:return V(V({},e),{},{errorData:null});default:return e}};var $="LOGIN_BEFORE",Q="LOGIN_SUCCESS",ee="LOGIN_CLEAR_ERRORS",te="LOGIN_FAIL",ne="LOADING",re="UTM_PARAMETERS",oe="login",ie="login-facebook",ae="login-facebook-popup",se="autologin",ue="login-accounts",ce="abort-login-accounts",le={facebook:"facebook",apple:"apple",google:"google"},pe=200;function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe;return{type:$,errorData:null,username:e||"",loginInProgress:t===oe,loginType:t}}function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oe,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return{type:Q,errorData:null,redirectTo:o,redirectDelay:t||0,username:e,loginType:n,afterSignup:r}}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe;return{type:te,errorData:e,loginType:t}}function he(e){return{type:ne,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}var ve=function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o,i,a,s,u,c,p,d,f,g,h,v=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>2&&void 0!==v[2]?v[2]:{},o=r.defaultErrorCode,i=r.redirectDelay,a=void 0===i?0:i,s=v.length>3&&void 0!==v[3]?v[3]:oe,u=v.length>4&&void 0!==v[4]&&v[4],c=v.length>5&&void 0!==v[5]?v[5]:null,p=!(v.length>6&&void 0!==v[6])||v[6],c&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=c),e.prev=6,e.t0=JSON,e.next=10,T(n);case 10:e.t1=e.sent,d=e.t0.parse.call(e.t0,e.t1),f=d.redirectTo||"xpui",g=null,n&&n.args&&n.args[0]&&(g=n.args[0].username),t(fe(p?g:K,a,s,u,f)),e.next=23;break;case 18:e.prev=18,e.t2=e.catch(6),h=e.t2,o?h={errorCode:o}:"string"==typeof e.t2&&(h=JSON.parse(e.t2)),h.errorCode&&L[h.errorCode]&&"FbFailureOpenPopup"===L[h.errorCode].id?t(_e(c)):t(ge(h,s));case 23:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}();function me(e){var t=e.username,n=e.password,r=e.rememberMe,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e){var a=o?se:oe;e(de(r?t:K,a)),ve(e,{name:oe,args:[{username:t,password:n,rememberMe:r}]},{redirectDelay:pe},a,o,i,r)}}function ye(e,t){return function(n){n(de(null,ue)),ve(n,{name:ue,args:[{method:e,enableSignup:!1}]},{redirectDelay:pe},ue,!1,t)}}function be(){return(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({name:ce,args:[]});case 2:case"end":return e.stop()}}),e)})))}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t(de(null,ie)),ve(t,{name:ae,args:[]},{redirectDelay:pe},ie,!1,e)}}function Ee(){return function(){var e=(0,u.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"get-signup-utm-parameters",args:[]},e.t0=t,e.t1=ke,e.t2=JSON,e.next=6,T(n);case 6:e.t3=e.sent,e.t4=e.t2.parse.call(e.t2,e.t3),e.t5=(0,e.t1)(e.t4),(0,e.t0)(e.t5);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function ke(e){return{type:re,utmParameters:e}}function Se(){return{type:ee}}var De=n(5987),Oe=n(2982),we=(n(2772),n(3710),n(6992),n(1532),n(8783),n(3948),n(2707),n(9720),n(8309),n(3123),n(9600),n(8495)),Ce=n.n(we),Fe=["errors"];function Pe(){var e="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY;return e||"4c7a36d5260abca4af282779720cf631"}function xe(){var e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return["Spotify-App-Version",e]}function Ae(){var e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"",t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return["App-Platform",t]}function je(e){var t,n,r=new Map(Object.entries(e).sort()),o=(t=r,n=Ce().create(),t.forEach((function(e){void 0!==e&&n.update(e.toString())})),n.hex());if(r.size>o.length)return r;var i=(0,Oe.Z)(r),a=(0,Oe.Z)(Array(r.size).keys()).sort((function(e,t){var n=o.charAt(e).localeCompare(o.charAt(t));return 0!==n?n:i[e][0].localeCompare(i[t][0])})),s=new Map;return a.forEach((function(e){s.set(i[e][0],i[e][1])})),s}function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.email,r=e.password,o=e.gender,i=e.birthDate,a=void 0===i?{}:i,s=e.sendEmail,u=e.shareData,c=e.agreeEula,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},p=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=Object.keys(l).reduce((function(e,t){return e[t]=encodeURIComponent(l[t]),e}),{}),f="https://login.app.spotify.com?utm_source=".concat(d.utm_source,"&utm_medium=").concat(d.utm_medium,"&utm_campaign=").concat(d.utm_campaign);d.referral&&(f+="&referral=".concat(d.referral,"&referrer=").concat(d.referral));var g={key:Pe(),displayname:t,email:n,password:r,password_repeat:r,gender:o,birth_year:a.year,birth_month:a.month,birth_day:a.day,iagree:c?1:0,creation_point:f,creation_flow:"desktop",platform:"desktop",referrer:d.referral};return"boolean"==typeof s&&(g["send-email"]=s),"boolean"==typeof u&&(g.thirdpartyemail=u),p&&Object.keys(g).forEach((function(e){void 0===g[e]&&delete g[e]})),je(g)}var Ie=function(e,t){var n=e.headers.get("content-type");e.headers.set("content-type",function(e,t){return[].concat((0,Oe.Z)(e.split(";")),[t]).join(";")}(n,t))},Ne=function(e){return function(){var t=(0,u.Z)(l().mark((function t(n,r,o){var i,a,s,u,c,p,d,f,g;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Te(n,r,o),a=new FormData,i.forEach((function(e,t){a.append(t,e)})),s=[xe(),Ae()].reduce((function(e,t){return e[t[0]]=t[1],e}),{}),u={method:"POST",body:a,headers:{"App-Platform":s["App-Platform"],"Spotify-App-Version":s["Spotify-App-Version"],"X-Client-Id":{}.SPOTIFY_CLIENT_ID}},c=new Request(e,u),Ie(c,"charset=utf-8"),t.next=9,fetch(c);case 9:return p=t.sent,t.next=12,p.json();case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0={};case 15:if(d=t.t0,f=d.errors,g=(0,De.Z)(d,Fe),!f){t.next=20;break}throw f;case 20:return t.abrupt("return",g);case 21:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},Re=Ne("https://spclient.wg.spotify.com/signup/public/v1/account/"),Ze=Ne("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true"),Me=function(){var e=(0,u.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1");case 2:return t=e.sent,e.next=5,t.json();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(!((n=e.t0).errors&&n.errors.length>0)){e.next=11;break}throw n.errors;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Le="SIGNUP_RESTRICTIONS_SUCCESS",Ue="SIGNUP_RESTRICTIONS_FAILURE",Be="SIGNUP_ATTEMPT",Ge="SIGNUP_FAILURE",We="SIGNUP_SUCCESS",Ve="FACEBOOK_SIGNUP_ATTEMPT",He="FACEBOOK_SIGNUP_SUCCESS",Ke="FACEBOOK_SIGNUP_FAILURE",Ye="VALIDATE_FIELD_ATTEMPT",qe="VALIDATE_FIELD_FAILURE",ze="VALIDATE_FIELD_SUCCESS",Je="UPDATE_SIGNUP_DATA",Xe="COUNTRY_NOT_LAUNCHED",$e="CLEAR_ALL_ERRORS";function Qe(){return function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),e.prev=1,!window.__spotify||!0!==window.__spotify.is_running_on_teamcity){e.next=6;break}e.t0={},e.next=9;break;case 6:return e.next=8,Me();case 8:e.t0=e.sent;case 9:o=e.t0,t(et(o)),e.next=17;break;case 13:e.prev=13,e.t1=e.catch(1),t(tt(e.t1)),r.app&&r.app.mode&&"welcome"!==r.app.mode&&(t(F()),t(A(!0)));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()}function et(e){return{type:Le,restrictions:e}}function tt(e){return{type:Ue,error:e}}function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i,a,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ot()),o=r().signup.formData,i=r().login.utmParameters,t.prev=3,t.next=6,Re(o,i);case 6:n(it()),a=o.email,s=o.password,n(me({username:a,password:s,rememberMe:!0},!0,e)),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),u={},Object.keys(t.t0).forEach((function(e){u["birthdate"===e?"birthDate":e]={message:t.t0[e]}})),n(at(u));case 16:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n){return t.apply(this,arguments)}}()}function rt(e){return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r().signup.formData[e],i=r().login.utmParameters,n(dt(e,o)),t.prev=3,t.next=6,Ze((0,s.Z)({},e,o),i,!0);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),t.t0[e]&&n(ft(e,{message:t.t0[e]}));case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,n){return t.apply(this,arguments)}}()}function ot(){return{type:Be}}function it(){return{type:We}}function at(e){return{type:Ge,errors:e}}var st=function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o,i,a,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=s.length>2&&void 0!==s[2]?s[2]:null)&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=r),e.prev=2,e.t0=JSON,e.next=6,T(n);case 6:e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),i=o.redirectTo||"xpui",t(lt()),t(fe(null,0,se,!0,i)),e.next=18;break;case 13:e.prev=13,e.t2=e.catch(2),a=e.t2,"string"==typeof e.t2&&(a=JSON.parse(e.t2)),t(pt(a));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){var r={name:ue,args:[{method:e,enableSignup:!0}]};n(ct()),st(n,r,t)}}function ct(){return{type:Ve}}function lt(){return{type:He}}function pt(e){return{type:Ke,errorData:e}}function dt(e,t){return{type:Ye,field:e,value:t}}function ft(e,t){return{type:qe,field:e,error:t}}function gt(e){return{type:ze,field:e}}function ht(e){return{type:Je,data:e}}function vt(){return{type:Xe}}function mt(){return{type:$e}}n(6699),n(2023);var yt,bt,_t,Et=n(1002),kt=n(5671),St=n(3144),Dt=(n(5306),n(1249),n(1058),n(7601),n(3843),n(9453)),Ot=n.n(Dt);function wt(e){return"string"!=typeof e}!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(yt||(yt={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(bt||(bt={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(_t||(_t={}));var Ct={},Ft=function(e,t){try{return(Ct[e]||(Ct[e]=new Intl.PluralRules(e))).select(t)}catch(e){return _t.OTHER}};function Pt(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}var xt=function(e){return"ar"===e?"ar-u-nu-latn":e};function At(e){return{seconds:Math.round(e/1e3),minutes:Math.round(e/1e3/60),hours:Math.round(e/1e3/60/60),days:Math.round(e/1e3/60/60/24)}}var jt=new(function(){function e(){(0,kt.Z)(this,e),(0,s.Z)(this,"_relativeTimeFormat",void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat),(0,s.Z)(this,"_dateTimeFormats",new Map),this._dictionary={},this._locale=yt.en}return(0,St.Z)(e,[{key:"getDateTimeFormat",value:function(e){var t=JSON.stringify(Object.keys(e).sort().map((function(t){return(0,s.Z)({},t,e[t])}))),n=this._dateTimeFormats.get(t);return void 0===n&&(n=new Intl.DateTimeFormat(xt(this._locale),e),this._dateTimeFormats.set(t,n)),n}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e,this._dateTimeFormats.clear()}},{key:"getLocale",value:function(){return this._locale}},{key:"getSmartlingLocale",value:function(){var e=this._locale;return Ot()[e]||e}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=(e in this._dictionary?this._dictionary[e]:e),n="",r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(wt(t)){var a=o[0],s=Ft(this._locale,parseInt(a,10)),u=t[s];void 0!==u?n=u:t.other&&(n=t.other)}else n=t;if(/%\d%/.test(n)){var c=["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"];if(!c.includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==o?void 0:o.length)>0)for(var l=0;l<o.length;l++){var p=o[l];if(null!=p)if("string"==typeof p)n=n.replace("{".concat(l,"}"),Pt(p)).replace("%".concat(l,"%"),Pt(p));else if("number"==typeof p){var d=this.formatNumber(p);n=n.replace("{".concat(l,"}"),d).replace("%".concat(l,"%"),d)}else if("object"===(0,Et.Z)(p))for(var f=0,g=Object.keys(p);f<g.length;f++){var h=g[f],v=p[h];n=n.replace("%".concat(h,"%"),Pt(v))}}return n}},{key:"getSeparator",value:function(){switch(this._locale){case yt.ar:return bt.AR;case yt.fa:return bt.FA;default:return bt.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(xt(this._locale),t)}},{key:"formatNumberCompact",value:function(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={year:"numeric",month:"long",day:"numeric"},r=t||n;return this.getDateTimeFormat(r).format(e)}},{key:"formatRelativeDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(Date.now()),r=(e=new Date(e)).getTime()-n.getTime(),o=Math.abs(r)<2592e6;if(o&&null!==this._relativeTimeFormat){var i=At(r),a=i.days,s=i.hours,u=i.minutes,c=i.seconds;return a||s||u?a||s?a?this._relativeTimeFormat.format(a,"days"):this._relativeTimeFormat.format(s,"hours"):this._relativeTimeFormat.format(u,"minutes"):this._relativeTimeFormat.format(c,"seconds")}return this.formatDate(e,t)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=yt.en,Ct={}}}]),e}()),Tt=2,It=3,Nt=4,Rt={"auto-detect":{label:function(){return jt.get("desktop.settings.proxy.autodetect")}},"no-proxy":{label:function(){return jt.get("desktop.settings.proxy.noproxy")}},http:{label:function(){return jt.get("desktop.settings.proxy.http")}},socks4:{label:function(){return jt.get("desktop.settings.proxy.socks4")}},socks5:{label:function(){return jt.get("desktop.settings.proxy.socks5")}}},Zt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],Mt="sp://proxy/v1/";function Lt(){return(Lt=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:Mt}),persistent:!1,onSuccess:function(n){var r=JSON.parse(n);200!==r.status&&t(new Error("Failed to fetch proxy settings (status code: ".concat(r.status,")")));var o=JSON.parse(r.body);e({mode:o["network.proxy.mode"],address:o["network.proxy.addr"],username:o["network.proxy.user"],password:o["network.proxy.pass"]})},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r={"network.proxy.mode":t.mode};[Tt,It,Nt].includes(t.mode)&&(r["network.proxy.addr"]=t.address,r["network.proxy.user"]=t.username),[Tt,Nt].includes(t.mode)&&(r["network.proxy.pass"]=t.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:Mt,body:JSON.stringify(r)}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,t){n(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gt="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",Wt="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",Vt="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",Ht="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",Kt="SETTINGS_RESTART_CLIENT_SUCCESS",Yt="SETTINGS_RESTART_CLIENT_FAILURE";function qt(){return function(e){(function(){return Lt.apply(this,arguments)})().then((function(t){e(function(e){return{type:Gt,data:e}}(t))}),(function(t){e(function(e){return{type:Wt,error:e}}(t))}))}}function zt(e){return function(t){(function(e){return Ut.apply(this,arguments)})(e).then((function(){t({type:Vt}),t(qt())}),(function(e){t(function(e){return{type:Ht,error:e}}(e))}))}}function Jt(){return function(e){(function(){return Bt.apply(this,arguments)})().then((function(){e({type:Kt})}),(function(t){e(function(e){return{type:Yt,error:e}}(t))}))}}function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Qt=$t($t($t($t({},r),o),i),a);n(1299),n(2419);var en=n(136),tn=n(2963),nn=n(1120),rn=(n(3161),n(9653),n(7294)),on=(n(2564),n(5893));function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var sn=function(e){(0,en.Z)(n,e);var t=an(n);function n(e){var r;return(0,kt.Z)(this,n),(r=t.call(this,e)).state={hidden:r.props.delay>0},r}return(0,St.Z)(n,[{key:"componentDidMount",value:function(){var e=this;!0===this.state.hidden&&(this.throbberTimeout=setTimeout((function(){e.setState({hidden:!1})}),this.props.delay))}},{key:"componentWillUnmount",value:function(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}},{key:"render",value:function(){return this.state.hidden?null:(0,on.jsx)("div",{"data-testid":"glue-throbber",className:"GlueThrobber ".concat(this.props.initial?"throbber-initial":"throbber"),children:(0,on.jsx)("div",{})})}}]),n}(rn.Component);sn.defaultProps={delay:0,initial:!0};var un=n(7326),cn=(n(4812),n(2808)),ln=n.n(cn);function pn(){return ln().create().toString()}var dn=n(1317),fn=n(4011);function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var hn=function(e){(0,en.Z)(n,e);var t=gn(n);function n(e){var r;return(0,kt.Z)(this,n),(r=t.call(this,e)).handleLoginClick=r.handleLoginClick.bind((0,un.Z)(r)),r.handleErrorClick=r.handleErrorClick.bind((0,un.Z)(r)),r}return(0,St.Z)(n,[{key:"handleLoginClick",value:function(){var e=pn();this.props.openLoginPage(e),this.props.onInteraction("login/welcome","click","open-page-login",null,e)}},{key:"handleErrorClick",value:function(e){e.target.getAttribute("data-action")&&("showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage())}},{key:"render",value:function(){var e=this.props.errorMessage;return(0,on.jsxs)("main",{className:"Welcome","data-testid":"welcome",children:[(0,on.jsxs)("h1",{className:"HeroText __welcome",children:[jt.get("desktop-auth.login.millions-of-songs"),(0,on.jsx)("br",{}),jt.get("desktop-auth.login.free-on-spotify")]}),(0,on.jsxs)("div",{className:"Welcome__signup-or-login",children:[e&&(0,on.jsxs)("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive",children:[(0,on.jsx)(dn.l,{className:"Welcome__error-message__icon"}),(0,on.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})]}),(0,on.jsx)(fn.D,{id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button",fullWidth:!0,children:jt.get("desktop.login.LoginButton")})]})]})}}]),n}(rn.PureComponent);const vn=(0,f.$j)((function(e){return{errorMessage:e.app.errorMessage}}),(function(e){return{openLoginPage:function(t){return e(Qt.enterLoginMode(t))},openSettingsPage:function(){return e(Qt.enterSettingsMode())},onInteraction:function(t,n,r,o,i){return e(Qt.interaction(t,n,r,o,i))}}}))(hn);var mn=n(885),yn=n(2667);n(9826);function bn(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;var r=L;switch(e){case"session":r=U;break;case"desktop_login_accounts":r=B}var o=r[t]||Z;if(o.silent)return!1;var i=o.replace||[],a="";switch(o.id){case"UnknownLoginErrorMessage":a=jt.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":a=jt.get("desktop.login.DefaultErrorMessage",i[0]);break;case"SessionTerminatedMessage":a=jt.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":a=jt.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":a=jt.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":a=jt.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":a=jt.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":a=jt.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":a=jt.get("desktop.login.ErrorProxyAuthRequired",i[0]);break;case"CriticalUpdate":a=jt.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":a=jt.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":a=jt.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":a=jt.get("desktop.login.MissingUserInfoMessage",i[0]);break;case"RegionMismatchMessage":a=jt.get("desktop.login.RegionMismatchMessage",i[0],i[1]);break;case"PremiumUsersOnlyMessage":a=jt.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":a=jt.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":a=jt.get("desktop.login.ClientUpdateFail",i[0]);break;case"FbUserNotFoundSignUp":a=jt.get("desktop.login.FbUserNotFoundSignUp",i[0])}return"".concat(a,"<br>").concat(jt.get("desktop.login.errorCode",n))}function _n(e){var t=e.validity,n=void 0===t?{}:t;return n.valid?null:["valueMissing","typeMismatch","tooShort"].find((function(e){return n[e]}))}const En="H5vfurs7KNEs9Io5DUA7",kn="qfBRU_bttJde7gy46oAB",Sn="ypTrzM1PtlrZp04qs6Eq",Dn="oHZmDpK0SrWDaXhPjUtC",On="lAHowB9HYfAUrg9UaSde";var wn=n(9798),Cn=ln().create().toString();var Fn="has-used-app",Pn=!window.localStorage.getItem(Fn);Pn&&window.localStorage.setItem(Fn,!0);const xn=function(){var e,t=G.getItem("utmParameters");try{e=t?JSON.parse(t).referral:""}catch(t){e=""}return e};var An,jn=function(){function e(t){(0,kt.Z)(this,e),this._eventSender=t}return(0,St.Z)(e,[{key:"logPageView",value:function(e){var t=e.page;this.logAction({page:t,action_type:"pageview",action_intent:""})}},{key:"logAction",value:function(e){var t=e.page,n=e.action_type,r=e.action_intent,o=e.item_id,i=e.action_hash;this._eventSender.send((0,wn.e)({action_type:n,action_intent:r,action_page:t,action_item_id:o,action_hash:i,device_is_new_install:Pn,device_locale:window.__spotify.locale,device_referrer:xn(),ab_flags:"",session_id:Cn}))}}]),e}();!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR"}(An||(An={}));var Tn=function(e){var t,n=e.eventSender,r=(0,rn.useState)(""),o=(0,mn.Z)(r,2),i=o[0],a=o[1],s=(0,rn.useState)(!1),c=(0,mn.Z)(s,2),p=c[0],d=c[1],g=(0,rn.useState)(!1),h=(0,mn.Z)(g,2),v=h[0],m=h[1],y=(t=(0,f.I0)(),function(){t(x())}),b=(0,rn.useRef)(0),_=(0,rn.useMemo)((function(){return new jn(n)}),[n]);(0,rn.useEffect)((function(){_.logPageView({page:"auth-on-web"})}),[_]);var E=function(){var e=(0,u.Z)(l().mark((function e(t){var n,r,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=++b.current,r=pn(),m(t),a(""),d(!0),_.logAction({page:"auth-on-web",action_type:"click",action_intent:t?"sign-up-with-browser":"log-in-with-browser",action_hash:r}),e.prev=6,e.next=9,T({name:ue,args:[{method:"login-accounts",enableSignup:t,actionHash:r}]});case 9:_.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-success-signup":"show-success-login"}),location.href="spotify:app:xpui",e.next=24;break;case 13:if(e.prev=13,e.t0=e.catch(6),o="string"==typeof e.t0?JSON.parse(e.t0):e.t0,n===b.current){e.next=19;break}return _.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:null==o?void 0:o.errorReference}),e.abrupt("return");case 19:d(!1),i=bn(o.errorCategory,o.errorCode,o.errorReference),"desktop_login_accounts"===o.errorCategory&&o.errorCode===An.OPERATION_TIMED_OUT&&(i=t?jt.get("desktop-auth.login.signup-time-out"):jt.get("desktop-auth.login.login-time-out")),a(i||""),_.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-error-signup":"show-error-login",item_id:null==o?void 0:o.errorReference});case 24:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,on.jsx)("main",{children:p?(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)(yn.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:En,children:v?jt.get("desktop-auth.login.go-to-browser-signup"):jt.get("desktop-auth.login.go-to-browser-login")}),(0,on.jsxs)("button",{className:Sn,onClick:function(){d(!1),_.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},children:[(0,on.jsx)(yn.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:jt.get("desktop-auth.login.not-seeing-browser")})," ",(0,on.jsx)(yn.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:jt.get("desktop-auth.login.try-again")})]})]}):(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)(yn.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:En,children:[jt.get("desktop-auth.login.millions-of-songs"),(0,on.jsx)("br",{}),jt.get("desktop-auth.login.free-on-spotify")]}),i&&(0,on.jsxs)("div",{className:Dn,role:"alert",onClick:function(e){e.currentTarget.getAttribute("data-action")&&("showSettings"===e.currentTarget.getAttribute("data-action")&&y())},"aria-live":"assertive",children:[(0,on.jsx)(dn.l,{className:On}),(0,on.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})]}),(0,on.jsx)(fn.D,{onClick:function(){E(!1)},fullWidth:!0,children:jt.get("desktop-auth.login.log-in-with-browser")}),(0,on.jsxs)("button",{className:kn,onClick:function(){E(!0)},children:[(0,on.jsx)(yn.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:jt.get("desktop-auth.login.new-to-spotify")})," ",(0,on.jsx)(yn.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:jt.get("desktop-auth.login.sign-up-with-browser")})]})]})})},In=(n(5212),n(5087)),Nn=n(2484),Rn=n(6025),Zn=n(4184),Mn=n.n(Zn);function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Un=function(){return(0,on.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,on.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"})})},Bn=function(e){(0,en.Z)(n,e);var t=Ln(n);function n(){return(0,kt.Z)(this,n),t.apply(this,arguments)}return(0,St.Z)(n,[{key:"render",value:function(){var e=this.props.errorMessage;return(0,on.jsxs)("div",{"aria-live":"polite",className:Mn()("FieldError",{"FieldError--hidden":!e}),children:[(0,on.jsx)(Un,{}),(0,on.jsx)("span",{children:e||""})]})}}]),n}(rn.PureComponent);function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Wn=0;var Vn=function(e){(0,en.Z)(n,e);var t=Gn(n);function n(){var e;(0,kt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).idNumber=++Wn,e.handleChange=e.handleChange.bind((0,un.Z)(e)),e}return(0,St.Z)(n,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeholderLabel,r=e.name,o=e.type,i=e.isRequired,a=e.taId,s=e.id,u=e.defaultValue,c=e.value,l=e.minLength,p=e.autoFocus,d=e.hasError,f=e.isDisabled,g=e.isHiddenForScreenReaders,h=e.useCustomStyle,v=e.className,m=e.inputClassName,y=e.inputRef,b=e.onBlur,_=e.onFocus,E=e.onInput,k=e.onKeyDown,S=e.onKeyUp,D=s||"GlueTextInput-".concat(this.idNumber);return(0,on.jsx)("label",{className:h?v:"GlueTextInput",htmlFor:D,"aria-label":t,"aria-hidden":!!g||void 0,children:(0,on.jsx)("input",{className:h?m:Mn()("GlueTextInput__input",{"GlueTextInput__input--has-error":d}),tabIndex:g?"-1":void 0,type:o,id:D,name:r,"data-ta-id":a,"aria-invalid":d,disabled:f,minLength:l,autoFocus:p,placeholder:n||t,value:u?void 0:c,defaultValue:u,onBlur:b,onFocus:_,onChange:this.handleChange,onInput:u?void 0:E,onKeyDown:k,onKeyUp:S,ref:y,required:i})})}}]),n}(rn.PureComponent);function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}Vn.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur:function(){},onFocus:function(){},onChange:function(){},onInput:function(){},onKeyDown:function(){}};var Kn=function(e){(0,en.Z)(n,e);var t=Hn(n);function n(e){var r;return(0,kt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,un.Z)(r),"handleTogglePasswordVisible",(function(){var e=!r.state.passwordVisible;r.setState({passwordVisible:e}),r.props.onTogglePasswordVisibility&&r.props.onTogglePasswordVisibility(e)})),r.state={isEditing:!1,passwordVisible:!1},r.handleBlur=r.handleBlur.bind((0,un.Z)(r)),r.handleInput=r.handleInput.bind((0,un.Z)(r)),r}return(0,St.Z)(n,[{key:"handleBlur",value:function(e){var t=e.target,n=e.relatedTarget;this.setState({isEditing:!1}),n&&(n.name||"submit"===n.type)&&this.validate(t)}},{key:"handleInput",value:function(){this.setState({isEditing:!0})}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;!t.noValidate&&r&&r(n,_n(e))}},{key:"renderPasswordEyeToggler",value:function(){var e=this.props.type,t=this.state.passwordVisible;return"password"!==e?null:(0,on.jsxs)(rn.Fragment,{children:[(0,on.jsx)("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon ".concat(t?"passwordVisible":"")}),(0,on.jsx)("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross ".concat(t?"passwordVisible":"")})]})}},{key:"render",value:function(){var e=this.props,t=e.error,n=void 0===t?{}:t,r=e.noValidate,o=e.label,i=e.name,a=e.type,s=e.value,u=e.isRequired,c=e.minLength,l=e.autoFocus,p=e.isDisabled,d=e.onChange,f=e.onKeyUp,g=e.onFocus,h=e.rightIcon,v=void 0===h?null:h,m=this.state,y=m.isEditing,b=m.passwordVisible,_=v,E=a;return"password"===a&&b&&(E="text"),(0,on.jsxs)("div",{className:Mn()("FormField",{"FormField--no-validate":r}),children:[(0,on.jsx)(Vn,{label:o,name:i,type:E,taId:"".concat(i,"-field"),value:s,isRequired:u,minLength:c,autoFocus:l,hasError:!!n.message&&!y,isDisabled:p,onChange:d,onFocus:g,onKeyUp:f,onBlur:this.handleBlur,onInput:this.handleInput}),_&&(0,on.jsx)(_,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!r&&!y&&n.message&&(0,on.jsx)(on.Fragment,{children:(0,on.jsx)(Bn,{errorMessage:n.message})})]})}}]),n}(rn.PureComponent);const Yn=(0,f.$j)((function(){return{}}),(function(){return{}}))(Kn);var qn=["type","name","label","classes","hasError"];function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var $n=function(e){(0,en.Z)(n,e);var t=Xn(n);function n(){var e;(0,kt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleBlur=e.handleBlur.bind((0,un.Z)(e)),e}return(0,St.Z)(n,[{key:"handleBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this.props,t=e.type,n=void 0===t?"text":t,r=e.name,o=e.label,i=e.classes,a=e.hasError,s=(0,De.Z)(e,qn),u="".concat(r,"-field");return(0,on.jsxs)("span",{className:i,children:[(0,on.jsx)("label",{className:"glue-hidden-visually",htmlFor:u,children:o}),(0,on.jsx)("input",Jn(Jn({},s),{},{onBlur:this.handleBlur,type:n,name:r,id:u,"data-ta-id":u,className:Mn()("form-control Input",{"Input--has-error":a}),"aria-invalid":!!a,placeholder:o,required:!0}))]})}}]),n}(rn.PureComponent),Qn=(new Date).getFullYear()-120,er=[31,28,31,30,31,30,31,31,30,31,30,31],tr=function(e,t,n){var r=new Date(n,t-1,e);return!(e<1||e>function(e,t){return 1===e&&t%4==0?29:er[e]}(t,n))&&(!(r.getFullYear()<Qn)&&(r.getDate()===e&&r.getMonth()===t-1&&r.getFullYear()===n))},nr=function(e,t,n){var r=null;return!function(e,t,n){return[e,t,n].reduce((function(e,t){return e&&!!t}),!0)}(e,t,n)?r="incomplete":tr(e,t,n)||(r="invalid"),r};function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var ar={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"},sr=function(e){(0,en.Z)(n,e);var t=ir(n);function n(e){var r;return(0,kt.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.monthStrings=[jt.get("desktop.login.January"),jt.get("desktop.login.February"),jt.get("desktop.login.March"),jt.get("desktop.login.April"),jt.get("desktop.login.May"),jt.get("desktop.login.June"),jt.get("desktop.login.July"),jt.get("desktop.login.August"),jt.get("desktop.login.September"),jt.get("desktop.login.October"),jt.get("desktop.login.November"),jt.get("desktop.login.December")],r.handleInput=r.handleInput.bind((0,un.Z)(r)),r.handleBlur=r.handleBlur.bind((0,un.Z)(r)),r.handleFocus=r.handleFocus.bind((0,un.Z)(r)),r}return(0,St.Z)(n,[{key:"handleInput",value:function(e){var t=e.target,n=t.name,r=t.value,o=t.validity,i=void 0===o?{}:o;this.setState({isEditing:!0});var a=parseInt(r,10);i.valueMissing||!isFinite(r)||isNaN(a)?this.props.onChange(or(or({},this.props.value),{},(0,s.Z)({},n,void 0))):this.props.onChange(or(or({},this.props.value),{},(0,s.Z)({},n,a)))}},{key:"handleBlur",value:function(e){var t=e.relatedTarget?e.relatedTarget.name:null,n=["day","month","year"].includes(t);this.setState({isEditing:n}),n||this.validate()}},{key:"handleFocus",value:function(e){this.setState({isEditing:!0});var t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}},{key:"validate",value:function(){var e=this.props.value,t=e.day,n=e.month,r=e.year,o=nr(t,n,r,this.props.minAge);this.props.onValidate("birthDate",o)}},{key:"renderYear",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,on.jsx)($n,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:jt.get("desktop.login.Year"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:Qn,hasError:t.includes("year"),onFocus:this.handleFocus})}},{key:"renderMonth",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,on.jsxs)("select",{name:"month",id:"month-field",className:Mn()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:n,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus,children:[(0,on.jsx)("option",{value:"",disabled:!0,hidden:!0,children:jt.get("desktop.login.Month")}),this.monthStrings.map((function(e,t){return(0,on.jsx)("option",{value:t+1,children:e},t)}))]})}},{key:"renderDay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,on.jsx)($n,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:jt.get("desktop.login.Day"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.dateEndianness,i=t.error,a=void 0===i?{}:i,s=t.autoFocus,u=this.props.value,c=u.day,l=u.month,p=u.year,d=this.state.isEditing,f=["day","month","year"].filter((function(t){return!(d||!a.message)&&("incomplete"===a.code?!e.props.value[t]:"tooOld"!==a.code||"year"===t)})),g="";return g="big"===ar[o]?(0,on.jsxs)("div",{className:"FormDate__inputs",children:[this.renderYear(p,f,s),this.renderMonth(l,f),this.renderDay(c,f)]}):"little"===ar[o]?(0,on.jsxs)("div",{className:"FormDate__inputs",children:[this.renderDay(c,f,s),this.renderMonth(l,f),this.renderYear(p,f)]}):(0,on.jsxs)("div",{className:"FormDate__inputs",children:[this.renderMonth(l,f,s),this.renderDay(c,f),this.renderYear(p,f)]}),(0,on.jsxs)("div",{className:"FormDate",children:[(0,on.jsx)("label",{className:"FormDate__label ".concat(n,"-label"),htmlFor:"month-field",children:r}),g,!d&&a.message&&(0,on.jsx)(on.Fragment,{children:(0,on.jsx)(Bn,{errorMessage:a.message})})]})}}]),n}(rn.PureComponent);sr.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const ur=(0,f.$j)((function(){return{}}),(function(){return{}}))(sr);var cr=["name","label","options","value","showTitle","error","onValidate","onOptionFocus"];function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var fr=function(e){(0,en.Z)(n,e);var t=dr(n);function n(e){var r;return(0,kt.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.handleBlur=r.handleBlur.bind((0,un.Z)(r)),r.handleFocus=r.handleFocus.bind((0,un.Z)(r)),r}return(0,St.Z)(n,[{key:"handleBlur",value:function(e){this.state={isEditing:!1},(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}},{key:"handleFocus",value:function(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;r&&r(n,_n(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.options,i=t.value,a=t.showTitle,s=t.error,u=void 0===s?{}:s,c=(t.onValidate,t.onOptionFocus,(0,De.Z)(t,cr)),l=this.state.isEditing,p="".concat(n,"-field"),d=Mn()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return(0,on.jsxs)("div",{className:d,children:[(0,on.jsx)("label",{className:a?"":"glue-hidden-visually",htmlFor:p,children:r}),o.map((function(t){var r="".concat(t.value,"-radio");return(0,on.jsxs)("span",{className:i===t.value?"checked":"",children:[(0,on.jsx)("input",pr(pr({},c),{},{name:n,type:"radio",id:r,className:"glue-hidden-visually",value:t.value,checked:i===t.value,onBlur:e.handleBlur,onFocus:e.handleFocus,required:!0,disabled:e.props.disabled})),(0,on.jsx)("label",{className:Mn()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!u.message}),htmlFor:r,children:t.label})]},t.value)})),!l&&u.message&&(0,on.jsx)(on.Fragment,{children:(0,on.jsx)(Bn,{errorMessage:u.message})})]})}}]),n}(rn.PureComponent);const gr=(0,f.$j)((function(){return{}}),(function(){return{}}))(fr);function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var vr=function(e){(0,en.Z)(n,e);var t=hr(n);function n(){var e;(0,kt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,un.Z)(e)),e}return(0,St.Z)(n,[{key:"handleChange",value:function(e){this.props.isDisabled||this.props.onChange(e.target.checked)}},{key:"render",value:function(){var e="".concat(this.props.name,"-field"),t=Mn()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return(0,on.jsxs)("div",{className:t,children:[(0,on.jsx)("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),(0,on.jsx)("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}})]})}}]),n}(rn.PureComponent);function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}vr.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange:function(){}};var yr=function(e){(0,en.Z)(n,e);var t=mr(n);function n(e){var r;return(0,kt.Z)(this,n),(r=t.call(this,e)).handleClick=r.handleClick.bind((0,un.Z)(r)),r}return(0,St.Z)(n,[{key:"handleClick",value:function(e){if(e.target.getAttribute("data-action")){var t=e.target.getAttribute("data-action");"showSettings"===t?this.props.openSettingsPage():"showSignup"===t&&this.props.openSignupPage()}}},{key:"render",value:function(){var e=this.props.errorData,t=e?bn(e.errorCategory,e.errorCode,e.errorReference):null;return t?(0,on.jsxs)("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message","data-testid":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick,children:[(0,on.jsx)(dn.l,{iconSize:24}),(0,on.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})]}):null}}]),n}(rn.Component);const br=(0,f.$j)((function(e){var t=e.app.mode;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(function(e){return{openSettingsPage:function(){return e(Qt.enterSettingsMode())},openSignupPage:function(){return e(Qt.openSignupPage())}}}))(yr);function _r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Er=function(e){(0,en.Z)(n,e);var t=_r(n);function n(e){var r;return(0,kt.Z)(this,n),(r=t.call(this,e)).state={tosAgreed:!1,privacyAgreed:!1},r.handleTosChange=r.handleTosChange.bind((0,un.Z)(r)),r.handlePrivacyChange=r.handlePrivacyChange.bind((0,un.Z)(r)),r.handleTosAndPrivacyChange=r.handleTosAndPrivacyChange.bind((0,un.Z)(r)),r.handleEulaChange=r.handleEulaChange.bind((0,un.Z)(r)),r.eulaId=n.getNextId(),r}return(0,St.Z)(n,[{key:"handleTosChange",value:function(e){var t=this;this.setState({tosAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handlePrivacyChange",value:function(e){var t=this;this.setState({privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleTosAndPrivacyChange",value:function(e){var t=this;this.setState({tosAgreed:e,privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleEulaChange",value:function(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}},{key:"render",value:function(){var e=null,t='<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">'.concat(jt.get("desktop.login.TermsAndConditions"),"</a>"),n='<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">'.concat(jt.get("desktop.login.PrivacyPolicy"),"</a>"),r=jt.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?(0,on.jsxs)("div",{children:[!this.props.hideTermsAndConditions&&(0,on.jsx)("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:jt.get("desktop.login.SignupAgree",r,t)}}),!this.props.hidePrivacyPolicy&&(0,on.jsx)("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:jt.get("desktop.login.PrivacyPolicyAgree",n)}})]}):this.props.restrictions.can_accept_licenses_in_one_step?(0,on.jsxs)("div",{className:"SignupForm__checkbox-container",children:[(0,on.jsx)(vr,{"data-ta-id":"agree-eula",name:"agree-eula-".concat(this.eulaId),label:this.props.restrictions.specific_licenses?jt.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,n):jt.get("desktop.login.SignupAgreeCheckbox",t,n),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&(0,on.jsx)("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:jt.get("desktop.login.PrivacyPolicyAgree",n)}})]}):(0,on.jsxs)("div",{children:[(0,on.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,on.jsx)(vr,{"data-ta-id":"agree-tos",name:"agree-tos-".concat(this.eulaId),label:jt.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})}),(0,on.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,on.jsx)(vr,{"data-ta-id":"agree-privacy",name:"agree-privacy-".concat(this.eulaId),label:jt.get("desktop.login.PrivacyPolicyAgreeCheckbox",n),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled})})]}),(0,on.jsxs)("div",{className:"EulaAgreement",children:[e,this.props.error&&(0,on.jsx)(on.Fragment,{children:(0,on.jsx)(Bn,{errorMessage:this.props.error.message})})]})}}],[{key:"getNextId",value:function(){var e=(n.instanceCount||0)+1;return n.instanceCount=e,e}}]),n}(rn.PureComponent);const kr=(0,f.$j)((function(){return{}}),(function(){return{}}))(Er);n(3650);function Sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Dr=function(e){(0,en.Z)(n,e);var t=Sr(n);function n(){var e;(0,kt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,s.Z)((0,un.Z)(e),"handleClick",(function(t){var n=e.props.method;t&&(t.preventDefault(),t.stopPropagation()),e.props.onClick(n)})),e}return(0,St.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.label,o=t.isDisabled,i=t.method,a=i.substr(0,1).toUpperCase()+i.substr(1),u=Mn()("button","SocialButton","".concat(a,"Button"),(e={},(0,s.Z)(e,"".concat(a,"Button--login"),"login"===n),(0,s.Z)(e,"".concat(a,"Button--signup"),"signup"===n),e));return(0,on.jsx)("button",{type:"button",className:u,onClick:this.handleClick,"data-ta-id":"".concat(i,"-").concat(n,"-button"),disabled:o,children:r})}}]),n}(rn.PureComponent);function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Fr=function(e){(0,en.Z)(n,e);var t=Cr(n);function n(e){var r;return(0,kt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,un.Z)(r),"handleAgreeEulaChange",(function(e){var t=e?"checked":"unchecked";r.props.onInteraction("signup","click","eula-change-".concat(t)),r.setState({eulaAgreed:e,error:e?{}:r.state.error})})),(0,s.Z)((0,un.Z)(r),"handleOnClick",(function(){var e,t=function(){return r.state.eulaAgreed||r.props.restrictions.pretick_eula||r.props.hideEula};t()?(e=r.props).onClick.apply(e,arguments):r.setState({error:{message:jt.get("desktop.login.agreeEula.notAccepted")}})})),r.state={eulaAgreed:r.props.restrictions.pretick_eula,error:{}},r}return(0,St.Z)(n,[{key:"render",value:function(){return(0,on.jsxs)("div",{className:"SignupFacebook",children:[(0,on.jsx)(Dr,{method:"facebook",isDisabled:this.props.isDisabled,onClick:this.handleOnClick,type:"signup",label:jt.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:(0,on.jsx)(kr,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange})]})}}]),n}(rn.PureComponent);(0,s.Z)(Fr,"defaultProps",{isDisabled:!1,hideEula:!1});const Pr=(0,f.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions}}),(function(e){return{onInteraction:function(t,n,r,o,i){return e(Qt.interaction(t,n,r,o,i))},onClick:function(t){var n=pn();e(Qt.signupWithAccounts(t,n)),e(Qt.interaction("signup","click","create-account-".concat(t),null,n))}}}),(function(e,t){return wr(wr(wr({},e),t),{},{onClick:function(e){t.onClick(e)}})}))(Fr);var xr=function(e){var t=e.title;return(0,on.jsx)("p",{className:"FormTitleSeparator","aria-hidden":"true",children:t})};xr.defaultProps={title:""};const Ar=xr;function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Tr=function(e){(0,en.Z)(n,e);var t=jr(n);function n(e){var r;return(0,kt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,un.Z)(r),"handleEmailValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validateEmail()})),(0,s.Z)((0,un.Z)(r),"handleEmailFocus",(function(){r.props.onInteraction("signup","click","input-email")})),(0,s.Z)((0,un.Z)(r),"handlePasswordValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validatePassword()})),(0,s.Z)((0,un.Z)(r),"handlePasswordFocus",(function(){r.props.onInteraction("signup","click","input-password")})),(0,s.Z)((0,un.Z)(r),"handleNameFocus",(function(){r.props.onInteraction("signup","click","input-name")})),(0,s.Z)((0,un.Z)(r),"handleGenderOptionFocus",(function(e){r.props.onInteraction("signup","click","input-gender-".concat(e))})),(0,s.Z)((0,un.Z)(r),"handleInputChange",(function(e){var t=e.target,n=t.name,o=t.value;r.props.updateData((0,s.Z)({},n,o)),r.setState({isEditing:!0})})),(0,s.Z)((0,un.Z)(r),"handleBirthDateChange",(function(e){r.props.updateData({birthDate:e})})),(0,s.Z)((0,un.Z)(r),"handleSendEmailChange",(function(e){r.props.updateData({sendEmail:e})})),(0,s.Z)((0,un.Z)(r),"handleShareDataChange",(function(e){r.props.updateData({shareData:e})})),(0,s.Z)((0,un.Z)(r),"handleAgreeEulaChange",(function(e){r.props.updateData({agreeEula:e})})),(0,s.Z)((0,un.Z)(r),"handleSubmit",(function(e){e&&e.preventDefault();var t=r.props.step,n=pn();r.props.onInteraction("signup","click",0===t?"continue":"create-account",null,n),r.setState({isEditing:!1});var o=!0,i={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!r.props.errors&&Object.keys(r.props.errors).filter((function(e){return-1!==i[t].indexOf(e)})).some((function(e){return r.props.errors[e]&&r.props.errors[e].message}))&&(o=!1);var a=function(e){return function(t){r.props.data[t]||(r.props.onValidate(t,{code:e}),o=!1)}};switch(t){case 0:["email","password","name"].forEach(a("valueMissing"));break;case 1:var s=r.props.data.birthDate,u=s.day,c=s.month,l=s.year;l||r.props.onInteraction("signup","view","show-error-empty-year",null,n),c||r.props.onInteraction("signup","view","show-error-empty-month",null,n),u||r.props.onInteraction("signup","view","show-error-empty-date",null,n);var p=nr(u,c,l,r.props.restrictions.minimum_age);p&&(r.props.onValidate("birthDate",{code:p}),o=!1),a("valueMissing")("gender"),a("notAccepted")("agreeEula")}if(o)switch(t){case 0:r.setStep(t+1);break;case 1:r.props.signup(n)}})),(0,s.Z)((0,un.Z)(r),"handleBack",(function(){var e=r.props.step;r.props.onInteraction("signup","click","back-step-".concat(e+1)),r.props.clearAllErrors(),e<=0?r.props.enterWelcomeMode():r.setStep(e-1)})),(0,s.Z)((0,un.Z)(r),"handleLogin",(function(){var e=pn();r.props.onInteraction("signup","click","open-page-login",null,e),r.props.enterLoginMode(e)})),(0,s.Z)((0,un.Z)(r),"setStep",(function(e){switch(e){case 0:r.props.enterSignupModeStep0();break;case 1:r.props.enterSignupModeStep1()}})),r.state={isEditing:!0},r}return(0,St.Z)(n,[{key:"renderErrorMsg",value:function(){var e=this,t=Object.keys(this.props.errors).filter((function(t){return e.props.errors[t]&&e.props.errors[t].message}));return(0,on.jsx)("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive",children:t.length>0?(0,on.jsxs)("div",{children:[(0,on.jsx)("p",{children:jt.get("desktop.login.email.errorMessageA11y",t.length)}),(0,on.jsx)("ul",{children:t.map((function(t){return(0,on.jsx)("li",{children:e.props.errors[t].message},t)}))})]}):null})}},{key:"renderStep0",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.isDisabled,i=t.onValidate;return(0,on.jsxs)("div",{children:[(0,on.jsx)(Yn,{name:"email",type:"email",label:jt.get("desktop.login.SignupEmail"),value:n.email,onChange:this.handleInputChange,isDisabled:o,error:r.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:In.B}),(0,on.jsx)(Yn,{name:"password",type:"password",label:jt.get("desktop.login.CreateAPassword"),value:n.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:o,error:r.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:function(t){e.props.onInteraction("signup","click",t?"toggle-password-visibility-show":"toggle-password-visibility-hide")}}),(0,on.jsx)(Yn,{name:"name",label:jt.get("desktop.login.SignupName"),value:n.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:o,error:r.name,onValidate:i,rightIcon:Nn.W,onFocus:this.handleNameFocus})]})}},{key:"renderStep1",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.restrictions,i=t.isDisabled,a=t.onValidate,s=null;o.requires_marketing_opt_in_text?s=(0,on.jsx)("div",{className:"SignupForm__send-email-implicit",children:jt.get("desktop.login.SendEmailImplicitLabel")}):o.requires_marketing_opt_in&&(s=(0,on.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,on.jsx)(vr,{name:"send-email",label:jt.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:n.sendEmail,isDisabled:i})}));var u=[{label:jt.get("desktop.login.Female"),value:"female"},{label:jt.get("desktop.login.Male"),value:"male"}];return o.use_all_genders&&u.push({label:jt.get("desktop.login.NonBinary"),value:"neutral"}),(0,on.jsxs)("div",{children:[(0,on.jsx)(ur,{name:"birth-date",label:jt.get("desktop.login.WhatsYourSignupBirthDate"),value:n.birthDate,onChange:this.handleBirthDateChange,disabled:i,error:r.birthDate,onValidate:a,dateEndianness:o.date_endianness,minAge:o.minimum_age,autoFocus:!0,onFocus:function(){e.props.onInteraction("signup","click","input-birth-date")}}),(0,on.jsx)(gr,{showTitle:!0,name:"gender",label:jt.get("desktop.login.WhatsYourSignupGender"),options:u,value:n.gender,onChange:this.handleInputChange,disabled:i,error:r.gender,onValidate:a,onOptionFocus:this.handleGenderOptionFocus}),s,(0,on.jsx)(kr,{restrictions:o,error:r.agreeEula,disabled:i,onChange:this.handleAgreeEulaChange})]})}},{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.step;return(0,on.jsxs)("form",{onSubmit:this.handleSubmit,className:"SignupForm",children:[this.renderErrorMsg(),(0,on.jsx)(br,{}),0===n?this.renderStep0():"",1===n?this.renderStep1():"",(0,on.jsx)(fn.D,{type:"submit",disabled:t,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit",fullWidth:!0,children:0===n?jt.get("desktop.login.Continue"):jt.get("desktop.login.SignupButton")}),0===n&&(0,on.jsxs)(rn.Fragment,{children:[(0,on.jsx)(Ar,{title:jt.get("desktop.login.SignupOr")}),(0,on.jsx)(Pr,{})]}),(0,on.jsx)(Rn.o,{onClick:this.handleBack,children:jt.get("desktop.login.Back")}),0===n&&(0,on.jsx)("h3",{className:"FooterFormText",children:(0,on.jsx)("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:jt.get("desktop.login.AlreadyOnSpotifyLogin")}})})]})}}]),n}(rn.PureComponent);(0,s.Z)(Tr,"defaultProps",{errors:{},data:{},step:0});const Ir=(0,f.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData}}),(function(e){return{signup:function(t){return e(Qt.signup(t))},enterLoginMode:function(){return e(Qt.enterLoginMode())},enterSignupModeStep0:function(){return e(Qt.enterSignupModeStep0())},enterSignupModeStep1:function(){return e(Qt.enterSignupModeStep1())},updateData:function(t){return e(Qt.updateSignupData(t))},validateEmail:function(){return e(Qt.validateField("email"))},validatePassword:function(){return e(Qt.validateField("password"))},enterWelcomeMode:function(){return e(Qt.enterWelcomeMode())},clearAllErrors:function(){return e(Qt.clearAllErrors())},onValidate:function(t,n){if(n){var r=n.code||n,o={birthDate:{incomplete:jt.get("desktop.login.birthDate.incomplete"),invalid:jt.get("desktop.login.birthDate.invalid")},password:{valueMissing:jt.get("desktop.login.password.valueMissing"),tooShort:jt.get("desktop.login.password.tooShort")},email:{valueMissing:jt.get("desktop.login.email.valueMissing"),typeMismatch:jt.get("desktop.login.email.typeMismatch")},name:{valueMissing:jt.get("desktop.login.name.valueMissing")},gender:{valueMissing:jt.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:jt.get("desktop.login.agreeEula.notAccepted")}};e(Qt.validateFieldFailure(t,{code:r,message:o[t]&&o[t][r]||""}))}else e(Qt.validateFieldSuccess(t))},onInteraction:function(t,n,r,o,i){return e(Qt.interaction(t,n,r,o,i))}}}))(Tr);function Nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Rr=function(e){(0,en.Z)(n,e);var t=Nr(n);function n(){return(0,kt.Z)(this,n),t.apply(this,arguments)}return(0,St.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.step;if(!e.restrictions)return(0,on.jsx)(sn,{delay:2e3});var n=0===t?jt.get("desktop.login.SignupHeroText"):jt.get("desktop.login.SignupAlmostDone");return(0,on.jsxs)("main",{className:"Signup","data-testid":"signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form",children:[(0,on.jsx)("h1",{className:"HeroText",id:"signup-form-title",children:n}),(0,on.jsx)(Ir,{step:t})]})}}]),n}(rn.PureComponent);const Zr=(0,f.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions}}))(Rr);n(3210);function Mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Lr=function(e){(0,en.Z)(n,e);var t=Mr(n);function n(){var e;(0,kt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,un.Z)(e)),e}return(0,St.Z)(n,[{key:"handleChange",value:function(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isDisabled,r=e.labelId,o=e.taId;return(0,on.jsxs)("div",{className:Mn()("GlueToggle",{"GlueToggle--is-active":t,"GlueToggle--is-disabled":n}),children:[(0,on.jsx)("input",{type:"checkbox",name:r,id:r,className:"glue-hidden-visually",onChange:this.handleChange,checked:t,disabled:n,"data-ta-id":o}),(0,on.jsx)("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true",children:(0,on.jsx)("div",{className:"GlueToggle__toggle-inner"})})]})}}]),n}(rn.PureComponent);function Ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}Lr.defaultProps={isActive:!1,isDisabled:!1,onChange:function(){}};var Br=function(e){(0,en.Z)(n,e);var t=Ur(n);function n(){return(0,kt.Z)(this,n),t.apply(this,arguments)}return(0,St.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,r=e.checked,o=e.disabled,i=e.onChange,a="".concat(t,"-field");return(0,on.jsxs)("div",{className:"FormToggle",children:[(0,on.jsx)("label",{htmlFor:a,"data-ta-id":"remember-me-label",children:n}),(0,on.jsx)(Lr,{labelId:a,isActive:r,onChange:i,taId:"remember-me-slider",isDisabled:o})]})}}]),n}(rn.PureComponent);function Gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Wr=function(e){(0,en.Z)(n,e);var t=Gr(n);function n(e){var r;return(0,kt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,un.Z)(r),"handleForgotPasswordLinkClick",(function(){r.props.onInteraction("login","click","reset-password")})),r.state={username:r.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((function(e){r[e]=r[e].bind((0,un.Z)(r))})),r}return(0,St.Z)(n,[{key:"handleUsernameChange",value:function(e){var t=e.target;this.setState({username:t.value})}},{key:"handleUsernameFocus",value:function(){this.props.onInteraction("login","click","input-email")}},{key:"handlePasswordChange",value:function(e){var t=e.target;this.setState({password:t.value})}},{key:"handlePasswordFocus",value:function(){this.props.onInteraction("login","click","input-password")}},{key:"handleRememberMeChange",value:function(){this.setState({rememberMe:!this.state.rememberMe})}},{key:"handleSubmit",value:function(e){e&&e.preventDefault();var t=this.state.username.trim(),n=this.state,r=n.password,o=n.rememberMe,i=pn();this.props.onInteraction("login","click","login-email",null,i),t&&r?this.props.login({username:t,password:r,rememberMe:o},!1,i):t?r||this.props.onInteraction("login","view","show-error-empty-password",null,i):this.props.onInteraction("login","view","show-error-empty-email",null,i)}},{key:"render",value:function(){var e=this.props.isDisabled;return(0,on.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,on.jsx)("h3",{className:"glue-hidden-visually",children:jt.get("desktop.login.LoginWithEmailTitle")}),(0,on.jsx)(br,{}),(0,on.jsx)(Yn,{name:"username",label:jt.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:In.B}),(0,on.jsx)(Yn,{name:"password",type:"password",label:jt.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),(0,on.jsx)("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick,children:jt.get("desktop.login.forgotPassLink")}),(0,on.jsx)(Br,{name:"remember-me",label:jt.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),(0,on.jsx)("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button",children:jt.get("desktop.login.LoginButton")})]})}}]),n}(rn.PureComponent);const Vr=(0,f.$j)((function(e){return{isDisabled:!!e.login.loginInProgress,username:e.login.username}}),(function(e){return{login:function(t,n,r){return e(Qt.login(t,n,r))},onInteraction:function(t,n,r,o,i){return e(Qt.interaction(t,n,r,o,i))}}}))(Wr);function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var qr=function(e){(0,en.Z)(n,e);var t=Yr(n);function n(){return(0,kt.Z)(this,n),t.apply(this,arguments)}return(0,St.Z)(n,[{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"handleSignup",value:function(){var e=pn();this.props.enterSignupMode(e),this.props.onInteraction("login","click","open-page-signup",null,e)}},{key:"getSignupLink",value:function(){var e=this;return(0,on.jsx)("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignup()},"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:jt.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"render",value:function(){var e=this.props.isDisabled;return(0,on.jsxs)("main",{className:"Login","data-testid":"login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form",children:[(0,on.jsx)("h1",{className:"HeroText",id:"login-form-title",children:jt.get("desktop.login.LoginHeroText")}),(0,on.jsx)(Vr,{}),(0,on.jsx)(Ar,{title:jt.get("desktop.login.SignupOr")}),(0,on.jsx)(Dr,{method:"facebook",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:jt.get("desktop.login.ContinueWithFacebook")}),(0,on.jsx)(Dr,{method:"google",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:jt.get("desktop.login.ContinueWithGoogle")}),(0,on.jsx)(Dr,{method:"apple",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:jt.get("desktop.login.ContinueWithApple")}),(0,on.jsx)("h3",{className:"FooterFormText",children:this.getSignupLink()})]})}}]),n}(rn.PureComponent);const zr=(0,f.$j)((function(e){return{isDisabled:!!e.login.loginInProgress}}),(function(e){return{enterSignupMode:function(t){return e(Qt.enterSignupMode(t))},onInteraction:function(t,n,r,o,i){return e(Qt.interaction(t,n,r,o,i))},onSocialButtonClick:function(t){var n=pn();e(Qt.loginWithAccounts(t,n)),e(Qt.interaction("login","click","login-".concat(t),null,n))},clearErrors:function(){return e(Qt.loginClearErrors())}}}),(function(e,t){return Kr(Kr(Kr({},e),t),{},{onSocialButtonClick:function(e){t.onSocialButtonClick(e)}})}))(qr);function Jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var Xr=function(e){(0,en.Z)(n,e);var t=Jr(n);function n(){return(0,kt.Z)(this,n),t.apply(this,arguments)}return(0,St.Z)(n,[{key:"render",value:function(){var e="signup"===this.props.operationUsed?jt.get("desktop-auth.login.redirecting-to-browser-signup"):jt.get("desktop-auth.login.redirecting-to-browser-login");return(0,on.jsx)("main",{children:(0,on.jsx)("h1",{className:"HeroText __redirect",children:e})})}}]),n}(rn.PureComponent);const $r=(0,f.$j)((function(e){return{operationUsed:e.experimentWebAuthReducer.operationUsed}}))(Xr);var Qr=n(1206),eo=n.n(Qr);const to="zrvvPyoxE6wQNqnu0yWA",no="jmu6DFPvhxRl0wSfmv2O";var ro,oo=function(e){var t=e.value,n=e.id,r=e.children,o=e.disabled,i=e.onSelect,a=e.className,u=e.dir;return(0,on.jsx)("span",{className:a,children:(0,on.jsx)("select",{className:Mn()(to,(0,s.Z)({},no,"Safari"===eo().parse(window.navigator.userAgent).browser.name)),value:null==t?void 0:t.toString(),id:n,disabled:o,onBlur:function(){},onChange:function(e){i(e.target.value)},dir:u,children:r})})},io=((0,n(4671).Z)((function(e){return{lastFilterState:"",lastFilteredUri:"",setLastState:function(t,n){e({lastFilterState:t,lastFilteredUri:n})}}})),(0,rn.createContext)({setFilter:function(){throw new Error("setFilter must be used within a FilterProvider")},filter:""}));n(3178);!function(e){e.UPDATE="update"}(ro||(ro={}));n(1817),n(2165),n(9753),n(7042),n(1038),n(4553);function ao(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return so(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uo=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),co=/[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,lo=/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/,po=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/;function fo(e){return null!==e&&co.test(e)}function go(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||fo(e))}function ho(e){return null!==e&&lo.test(e)}function vo(e){return null!==e&&po.test(e)}var mo=function(){function e(t,n,r){if((0,kt.Z)(this,e),n<0||r<0||n+r>t.length)throw new RangeError;this.data=t,this.offset=n,this.length=r,this.position=0}return(0,St.Z)(e,[{key:"toString",value:function(){return this.data.slice(this.offset,this.offset+this.length).join("")}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t<0||n>this.length)throw new RangeError;var r=this.offset+t,o=n-t;return new e(this.data,r,o)}},{key:"nextCodePoint",value:function(){return this.position===this.length?null:this.data[this.offset+this.position++]}}],[{key:"from",value:function(t){var n=Array.from(t.normalize("NFC"));return new e(n,0,n.length)}}]),e}();function yo(e){var t;do{t=e.nextCodePoint()}while(null!==t&&fo(t)||ho(t));return t}function bo(e,t){var n=yo(e),r=yo(t);if(null===r)return{offset:0,length:0};for(var o=e.offset+e.position-1,i=e.offset+e.position;;){if(null===n&&null===r)return{offset:o,length:i-o};if(null===r)return{offset:o,length:i-o};if(null===n)return null;if(0!==uo.compare(n,r))return null;i=e.offset+e.position,n=yo(e),r=yo(t)}}function _o(e,t){var n,r,o;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&fo(n));if(null!=t&&t.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){var i=n;r=e.position;do{o=e.position,n=e.nextCodePoint()}while(null!==n&&n!==i);return null===n&&r===o?null:e.slice(r,o)}do{if(o=e.position,null!=t&&t.segmentCJKUnifieIdeographs&&vo(n))break;n=e.nextCodePoint()}while(null!==n&&!go(n));return null===n&&r===o?null:e.slice(r,o)}function Eo(e){return _o(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function ko(e){return _o(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function So(e,t){for(var n=[],r=ko(e);null!==r;r=ko(e)){var o=bo(r,t.slice());null===o?null===(o=bo(e.slice(r.offset),t.slice()))||n.push(o):n.push(o)}return n}function Do(e,t){return e.offset===t.offset&&e.length===t.length}var Oo=function(e,t){return"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e){for(var t=mo.from(e),n=[],r=Eo(t);null!==r;r=Eo(t)){for(var o=[],i=0;i<(arguments.length<=1?0:arguments.length-1);++i){var a,s=i+1<1||arguments.length<=i+1?void 0:arguments[i+1],u=ao(So(mo.from(s),r));try{for(u.s();!(a=u.n()).done;){var c=a.value;o.push({text:s,range:c})}}catch(e){u.e(e)}finally{u.f()}}if(0===o.length)return null;n.push.apply(n,(0,Oe.Z)(o.filter((function(e,t,n){return e.range.length>0&&n.findIndex((function(t){return Do(e.range,t.range)}))===t}))))}return n.length>0?n:null}(e,t):"boolean"!=typeof e||e},wo=(n(189),(0,rn.createContext)(void 0)),Co=function(e){var t=e.children,n=(0,rn.useState)(!1),r=(0,mn.Z)(n,2),o=r[0],i=r[1],a=(0,rn.useState)(new Set),s=(0,mn.Z)(a,2),u=s[0],c=s[1],l=(0,rn.useCallback)((function(e,t){c((function(n){if(n.has(e)===t)return n;var r=new Set(n);return t?r.add(e):r.delete(e),r}))}),[]),p=u.size>0;return(0,on.jsx)(wo.Provider,{value:{sectionMatch:o,setSectionMatch:i,sectionContainsMatch:p,setSectionFilterMatchQueryValue:l},children:t})};const Fo="c6TyNYOUJRIsjYZJZofy";function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ao(e){var t=e.children,n=e.filterMatchQuery,r=(0,rn.useContext)(io).filter,o=function(){var e=(0,rn.useContext)(wo);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e}(),i=o.setSectionMatch,a=o.sectionContainsMatch,s=Oo(r,n);return(0,rn.useEffect)((function(){i(s)}),[s,i]),s||a?(0,on.jsx)("div",{className:Fo,children:t}):null}function jo(e){return(0,on.jsx)(Co,{children:(0,on.jsx)(Ao,xo({},e))})}n(6541);var To=n(7763),Io=n.n(To);const No="M0E2Al6URHV3iyoDbvi_";var Ro=["searchWords","textToHighlight"];function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mo(e){var t=e.searchWords,n=e.textToHighlight,r=(0,De.Z)(e,Ro);return 0===t.length||t.every((function(e){return!e}))?(0,on.jsx)(on.Fragment,{children:n}):(0,on.jsx)(Io(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({highlightClassName:No,searchWords:t,textToHighlight:n},r))}function Lo(e){var t=e.children,n=(0,rn.useContext)(io).filter;return(0,on.jsx)(yn.D,{as:"h2",variant:"cello",semanticColor:"textBase",children:(0,on.jsx)(Mo,{searchWords:[n],textToHighlight:t})})}var Uo=n(4257);const Bo="gvcgOXnAiNKEe_z92_lw";function Go(e){var t=e.onClick;return(0,on.jsx)(Uo.P,{className:Bo,onClick:t,children:jt.get("settings.restartApp")})}var Wo=n(8724);const Vo="mpdBa62OP4Fr5wvCsa89",Ho="acVhMt5pELcXQyLaaPuV",Ko="AavUTirpKSAHapguSAy0",Yo="SkbGMKYv49KtJNB5XxdX",qo="qfjicQPaTTPrLWJWRxMQ";var zo=function(e){var t=e.id,n=e.type,r=e.placeHolder,o=e.inputRef,i=e.handleOnChange;return(0,on.jsx)("input",{type:n||"text",id:t,"data-testid":t,className:Yo,placeholder:r,ref:o,onChange:i})},Jo=function(e){var t=e.children,n=e.label;return(0,on.jsx)(Wo.c,{label:n,className:qo,children:t})},Xo=function(e,t,n){var r="".concat(e,":").concat(t);switch(n){case Tt:r+="@http";break;case It:r+="@socks4";break;case Nt:r+="@socks5"}return r},$o=function(e){var t=e.addr,n=e.mode,r=e.pass,o=e.user,i=e.setValue,a=e.restartContainer,s=e.fullWidth,u=(0,rn.useRef)(null),c=(0,rn.useRef)(null),l=(0,rn.useRef)(null),p=(0,rn.useRef)(null),d=(0,rn.useState)(""),f=(0,mn.Z)(d,2),g=f[0],h=f[1],v=(0,rn.useState)(""),m=(0,mn.Z)(v,2),y=m[0],b=m[1],_=(0,rn.useState)(!1),E=(0,mn.Z)(_,2),k=E[0],S=E[1];(0,rn.useEffect)((function(){var e=(null==t?void 0:t.split(/[:@]+/))||["",""],n=(0,mn.Z)(e,2),r=n[0],o=n[1];h(r),b(o),u.current&&(u.current.value=r),c.current&&(c.current.value=o)}),[t]),(0,rn.useEffect)((function(){p.current&&r&&(p.current.value=r.toString())}),[r]),(0,rn.useEffect)((function(){l.current&&o&&(l.current.value=o.toString())}),[o]);var D=(0,rn.useCallback)((function(e){var t=e.target,r=Xo(t.value,y,n||0);h(t.value),i("network.proxy.addr",r),S(!0)}),[n,y,i]),O=(0,rn.useCallback)((function(e){var t=e.target,r=Xo(g,t.value,n||0);b(t.value),i("network.proxy.addr",r),S(!0)}),[n,g,i]),w=(0,rn.useCallback)((function(e){var t=e.target;i("network.proxy.user",t.value),S(!0)}),[i]),C=(0,rn.useCallback)((function(e){var t=e.target;i("network.proxy.pass",t.value),S(!0)}),[i]),F=0!==n&&1!==n,P=n!==It;return(0,on.jsxs)(jo,{filterMatchQuery:jt.get("desktop.settings.proxy.title"),children:[(0,on.jsx)(Lo,{children:jt.get("desktop.settings.proxy.title")}),(0,on.jsxs)("div",{className:Mn()(Ho,s?Ko:null),children:[(0,on.jsx)(Jo,{label:jt.get("desktop.settings.proxy.type"),children:(0,on.jsx)(oo,{id:"network.proxy.mode",value:n,onSelect:function(e){var t=parseInt(e,10);i("network.proxy.mode",t),S(!0)},children:Zt.map((function(e){var t=e.enumKey,n=e.enumValue;return(0,on.jsx)("option",{value:n,"data-testid":t,children:Rt[t]?Rt[t].label():""},t)}))})}),F?(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)("div",{className:Vo,children:[(0,on.jsx)(Jo,{label:jt.get("desktop.settings.proxy.host"),children:(0,on.jsx)(zo,{id:"network.proxy.host",handleOnChange:D,placeHolder:jt.get("desktop.settings.proxy.host"),inputRef:u})}),(0,on.jsx)(Jo,{label:jt.get("desktop.settings.proxy.port"),children:(0,on.jsx)(zo,{id:"network.proxy.port",type:"number",handleOnChange:O,placeHolder:jt.get("desktop.settings.proxy.port"),inputRef:c})})]}),(0,on.jsxs)("div",{className:P?Vo:void 0,children:[(0,on.jsx)(Jo,{label:jt.get("desktop.settings.proxy.user"),children:(0,on.jsx)(zo,{id:"network.proxy.user",handleOnChange:w,placeHolder:jt.get("desktop.settings.proxy.user"),inputRef:l})}),P?(0,on.jsx)(Jo,{label:jt.get("desktop.settings.proxy.pass"),children:(0,on.jsx)(zo,{id:"network.proxy.pass",handleOnChange:C,placeHolder:jt.get("desktop.settings.proxy.pass"),type:"password",inputRef:p})}):null]})]}):null,k&&(0,on.jsx)("div",{children:(0,on.jsx)(Go,{onClick:a})})]})]})};function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ei=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const ti=(0,f.$j)((function(e){return{settings:{proxy:e.settings.proxy}}}),(function(e){return{fetchProxySettings:function(){e(Qt.fetchProxySettings())},updateProxySettings:function(t){e(Qt.updateProxySettings(t))},restartClient:function(){e(Qt.restartClient())}}}))((function(e){var t=e.settings,n=void 0===t?{proxy:{mode:0,address:"",username:"",password:""}}:t,r=e.fetchProxySettings,o=void 0===r?function(){}:r,i=e.updateProxySettings,a=void 0===i?function(){}:i,u=e.restartClient,c=void 0===u?function(){}:u;(0,rn.useEffect)((function(){o()}),[o]);var l=(0,rn.useCallback)((function(e,t){if(function(e){return!!ei.includes(e)}(e)){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.proxy);switch(e){case"network.proxy.mode":r.mode=t;break;case"network.proxy.addr":r.address=t;break;case"network.proxy.user":r.username=t;break;case"network.proxy.pass":r.password=t}a(r)}return Promise.resolve()}),[n,a]);return(0,on.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,on.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:jt.get("desktop.login.PreferencesLink")}),(0,on.jsx)($o,{mode:n.proxy.mode,addr:n.proxy.address,user:n.proxy.username,pass:n.proxy.password,setValue:l,restartContainer:c,fullWidth:!0})]})}));function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var ri=function(e){(0,en.Z)(n,e);var t=ni(n);function n(e){var r;return(0,kt.Z)(this,n),(r=t.call(this,e)).handleSettingsClick=r.goToSettingsPage.bind((0,un.Z)(r)),r.handleBackToLoginClick=r.handleBackToLoginClick.bind((0,un.Z)(r)),r}return(0,St.Z)(n,[{key:"handleSignupClick",value:function(){var e=this.props,t=e.openSignupPage,n=e.onInteraction,r=pn();t(r),n("login/welcome","click","open-page-signup",null,r)}},{key:"handleBackToLoginClick",value:function(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}},{key:"goToSettingsPage",value:function(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}},{key:"renderPreferencesLink",value:function(){return(0,on.jsx)("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings",children:jt.get("desktop.login.PreferencesLink")})}},{key:"renderBackToLoginLink",value:function(){return(0,on.jsx)("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login",children:jt.get("desktop.login.Back")})}},{key:"renderTryAgain",value:function(){var e=this;return(0,on.jsxs)(on.Fragment,{children:[(0,on.jsx)("span",{children:jt.get("desktop-auth.login.not-seeing-browser")})," ",(0,on.jsx)("a",{href:"#",onClick:function(){return e.props.tryAgainHandler()},children:jt.get("desktop-auth.login.try-again")})]})}},{key:"renderSignupLink",value:function(){var e=this;return(0,on.jsx)("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignupClick()},"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:jt.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"renderRussiaLegalFormLink",value:function(){return(0,on.jsx)("div",{children:(0,on.jsx)("a",{className:"Footer__link",href:"https://support.spotify.com/ru-ru/contact-spotify-legal-form/",target:"_blank",rel:"noopener",children:"Форма для Ваших обращений"})})}},{key:"renderMode",value:function(e,t){return"login"===e||"welcome"===e&&t?this.renderPreferencesLink():"settings"===e?this.renderBackToLoginLink():"open-browser"===e?this.renderTryAgain():"welcome"===e?this.renderSignupLink():null}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.country,r=e.isAuthOnWebEnabled;return(0,on.jsxs)("footer",{className:"Footer",role:"contentinfo",children:[this.renderMode(t,r),"RU"===n&&this.renderRussiaLegalFormLink()]})}}]),n}(rn.PureComponent);const oi=(0,f.$j)((function(e){var t;return{country:null===(t=e.signup.restrictions)||void 0===t?void 0:t.country}}),(function(e){return{tryAgainHandler:function(){e(Qt.abortLoginWithAccounts()),e(Qt.enterWelcomeMode())},openLoginPage:function(){e(Qt.enterLoginMode())},openSignupPage:function(t){return e(Qt.enterSignupMode(t))},openSettingsPage:function(){return e(Qt.enterSettingsMode())},onInteraction:function(t,n,r,o,i){return e(Qt.interaction(t,n,r,o,i))}}}))(ri);function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var ai,si=function(e){(0,en.Z)(n,e);var t=ii(n);function n(){return(0,kt.Z)(this,n),t.apply(this,arguments)}return(0,St.Z)(n,[{key:"render",value:function(){return(0,on.jsxs)("header",{className:"Header",children:[(0,on.jsx)("h1",{className:"glue-hidden-visually",children:"Spotify"}),(0,on.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]})}}]),n}(rn.PureComponent),ui=n(7723),ci=n(5989),li=n(7577),pi=n(3578),di=(0,pi.JP)({name:"enableAuthOnWeb",description:"Property to enable experiment to use web authentication for Desktop application.",default:!1});!function(e){e.LEGACY="es-current-im",e.NEXT_IM="es-persistence-im",e.NEXT="es-persistence-default"}(ai||(ai={}));(0,pi.VL)({name:"eventSenderSendingStrategy",description:"Event Sender sending strategy for testing persistent storage of events",values:ai,default:ai.LEGACY});function fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,nn.Z)(e);if(t){var o=(0,nn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,tn.Z)(this,n)}}var gi=function(e){(0,en.Z)(n,e);var t=fi(n);function n(){return(0,kt.Z)(this,n),t.apply(this,arguments)}return(0,St.Z)(n,[{key:"renderFakeWebPlayer",value:function(){return(0,on.jsxs)("div",{className:"fakeWebPlayer",children:[(0,on.jsx)("aside",{}),(0,on.jsxs)("footer",{children:[(0,on.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,on.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,on.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,on.jsx)("main",{children:(0,on.jsx)("div",{className:"fakeWebPlayer__content"})})]})}},{key:"renderMode",value:function(e,t,n,r){return"settings"===e?(0,on.jsx)(ti,{}):n?(0,on.jsx)(Tn,{eventSender:r}):"welcome"===e?(0,on.jsx)(vn,{}):"signup"===e?(0,on.jsx)(Zr,{step:t}):"login"===e?(0,on.jsx)(zr,{}):"open-browser"===e?(0,on.jsx)($r,{}):null}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.mode,r=e.loggedIn,o=e.previousMode,i=e.throbberDelay,a=e.signupStep,s=e.previousSignupStep,u=e.isAuthOnWebEnabled,c=e.eventSender;if(t||!n)return(0,on.jsx)(sn,{delay:i});if(r)return null;var l=o?"__".concat(n," __").concat(o,"-to-").concat(n):"";return"signup"===n&&Number.isInteger(s)&&(l+=" __signup_step_".concat(s,"_to_").concat(a)),(0,on.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":n,children:[this.renderFakeWebPlayer(),(0,on.jsx)("div",{className:"App__content ".concat(l),children:(0,on.jsx)(ci.Z,{mode:"in-out",children:(0,on.jsx)(ui.Z,{timeout:{appear:0,enter:0,exit:650},children:(0,on.jsxs)("div",{className:"App__modal ".concat(l),children:[(0,on.jsx)(si,{}),this.renderMode(n,a,u,c),(0,on.jsx)(oi,{mode:n,isAuthOnWebEnabled:u})]})},l)})})]},"main1")}}]),n}(rn.Component);(0,s.Z)(gi,"defaultProps",{throbberDelay:0,transitionLeaveTimeout:0});var hi=(0,li.yS)({isAuthOnWebEnabled:di});const vi=(0,f.$j)((function(e){return{mode:e.app.mode,previousMode:e.app.previousMode,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay}}))(hi(gi));var mi=n(7779),yi=n(3894);const bi=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case Qt.START_APP:e.dispatch(Qt.fetchUTMParameters()),e.dispatch(Qt.getSignupRestrictions()),!G.getItem("lastUsername")?e.dispatch(Qt.enterWelcomeMode()):e.dispatch(Qt.enterLoginMode());break;case Qt.LOGIN_FAIL:var o=e.getState();if(n.loginType===Qt.LOGIN_TYPE_AUTOLOGIN){var i=o.app.mode;"welcome"===i?e.dispatch(Qt.enterWelcomeMode()):"login"===i?e.dispatch(Qt.enterLoginMode()):"signup"===i&&e.dispatch(Qt.enterSignupMode())}else{if("open-browser"===o.app.mode){var a=n.errorData,s=bn(a.errorCategory,a.errorCode,a.errorReference);"desktop_login_accounts"===a.errorCategory&&4===a.errorCode&&(s="signup"===o.experimentWebAuthReducer.operationUsed?jt.get("desktop-auth.login.signup-time-out"):jt.get("desktop-auth.login.login-time-out")),s?e.dispatch(Qt.enterWelcomeMode(s)):e.dispatch(Qt.enterWelcomeMode())}}break;case Qt.ENTER_SIGNUP_MODE:var u=e.getState().signup.restrictions;u?!1===u.is_country_launched&&e.dispatch(Qt.countryNotLaunched()):e.dispatch(Qt.getSignupRestrictions());break;case Qt.SIGNUP_RESTRICTIONS_SUCCESS:!1===n.restrictions.is_country_launched&&e.dispatch(Qt.countryNotLaunched());break;case Qt.SIGNUP_FAILURE:(n.errors.email||n.errors.password||n.errors.displayname)&&e.dispatch(Qt.enterSignupModeStep0());break;case Qt.COUNTRY_NOT_LAUNCHED:e.dispatch(Qt.openSignupPage(!0))}return r}}};function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Ei=function(e){var t=new jn(e);return function(){return function(e){return function(n){var r=e(n);switch(n.type){case Qt.ENTER_LOGIN_MODE:t.logPageView({page:"login"});break;case Qt.LOGIN_SUCCESS:n.loginType===Qt.LOGIN_TYPE_EMAIL?t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-email"}):n.loginType===Qt.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-facebook"});break;case Qt.LOGIN_FAIL:n.loginType===Qt.LOGIN_TYPE_EMAIL?n.errorData&&3===n.errorData.errorCode&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-invalid-credential"}):n.loginType===Qt.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-login-facebook"});break;case Qt.ENTER_SIGNUP_MODE:t.logPageView({page:"signup"});break;case Qt.ENTER_SIGNUP_MODE_STEP_0:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case Qt.ENTER_SIGNUP_MODE_STEP_1:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case Qt.SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case Qt.SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:n.errors&&Object.keys(n.errors).join("|")});break;case Qt.FACEBOOK_SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case Qt.FACEBOOK_SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:n.errorData&&"".concat(n.errorData.errorCode," - ").concat(n.errorData.errorDescription)});break;case Qt.ENTER_WELCOME_MODE:t.logPageView({page:"login/welcome"});break;case Qt.ENTER_SETTINGS_MODE:t.logPageView({page:"login/settings"});break;case Qt.INTERACTION:t.logAction({page:n.page,action_type:n.interactionType,action_intent:n.intent,item_id:n.itemId,action_hash:n.actionHash});break;case Qt.VALIDATE_FIELD_FAILURE:if(n.error){var o=n.field,i=n.error.code,a=null,u=null;"valueMissing"===i?a="show-error-empty-".concat(o):["incomplete","invalid","typeMismatch","tooShort"].includes(i)?a="show-error-format-".concat(o):(a="show-error-".concat(o),u=n.error.message||""),null!==a&&t.logAction(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({page:"signup",action_type:"view",action_intent:a},u?{item_id:u}:{}))}}return r}}}},ki=function(e){window.location.href=e},Si=function(){return function(e){return function(t){var n,r=e(t);return t.redirectTo?("xpui"!==t.redirectTo||(n="spotify:app:xpui",t.redirectDelay?setTimeout((function(){ki(n)}),t.redirectDelay):ki(n)),r):r}}};function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wi={errorMessage:null};const Ci=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Qt.ENTER_SIGNUP_MODE:return Oi(Oi({},t),{},{previousMode:t.mode,mode:"signup"});case Qt.ENTER_LOGIN_MODE:case Qt.COUNTRY_NOT_LAUNCHED:return Oi(Oi({},t),{},{previousMode:t.mode,mode:"login"});case Qt.ENTER_WELCOME_MODE:return Oi(Oi({},t),{},{previousMode:t.mode,mode:"welcome",errorMessage:null!==(e=n.errorMessage)&&void 0!==e?e:null});case Qt.ENTER_SETTINGS_MODE:return Oi(Oi({},t),{},{previousMode:t.mode,mode:"settings"});default:return t}};function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xi(e){return e.type===Qt.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}var Ai={proxy:{mode:0,address:"",username:"",password:""}};const ji=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai,t=arguments.length>1?arguments[1]:void 0;return xi(t)?Pi(Pi({},e),{},{proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}):e};function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ni={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const Ri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ni,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt.ENTER_SIGNUP_MODE_STEP_0:return Ii(Ii({},e),{},{previousStep:e.step,step:0});case Qt.ENTER_SIGNUP_MODE_STEP_1:return Ii(Ii({},e),{},{previousStep:e.step,step:1});case Qt.SIGNUP_RESTRICTIONS_SUCCESS:return Ii(Ii({},e),{},{formData:Ii(Ii({},e.formData),{},{sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula}),restrictions:t.restrictions});case Qt.SIGNUP_RESTRICTIONS_FAILURE:return Ii(Ii({},e),{},{errorData:t.error});case Qt.SIGNUP_ATTEMPT:return Ii(Ii({},e),{},{isAttempting:!0,errorData:null});case Qt.SIGNUP_SUCCESS:return Ii(Ii({},e),{},{isAttempting:!0,isSuccessful:!0,errorData:null});case Qt.SIGNUP_FAILURE:return Ii(Ii({},e),{},{isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null});case Qt.FACEBOOK_SIGNUP_ATTEMPT:return Ii(Ii({},e),{},{errorData:null,errors:{}});case Qt.FACEBOOK_SIGNUP_FAILURE:return Ii(Ii({},e),{},{errorData:t.errorData});case Qt.VALIDATE_FIELD_ATTEMPT:return Ii(Ii({},e),{},{errors:Ii(Ii({},e.errors),{},(0,s.Z)({},t.field,void 0))});case Qt.VALIDATE_FIELD_FAILURE:return Ii(Ii({},e),{},{errors:Ii(Ii({},e.errors),{},(0,s.Z)({},t.field,t.error)),validated:Ii(Ii({},e.validated),{},(0,s.Z)({},t.field,!1))});case Qt.VALIDATE_FIELD_SUCCESS:return Ii(Ii({},e),{},{errors:Ii(Ii({},e.errors),{},(0,s.Z)({},t.field,void 0)),validated:Ii(Ii({},e.validated),{},(0,s.Z)({},t.field,!0))});case Qt.UPDATE_SIGNUP_DATA:for(var n={},r=0,o=Object.keys(t.data);r<o.length;r++){var i=o[r];n[i]=void 0}return Ii(Ii({},e),{},{errors:Ii(Ii({},e.errors),n),formData:Ii(Ii({},e.formData),t.data)});case Qt.CLEAR_ALL_ERRORS:return Ii(Ii({},e),{},{errors:{}});default:return e}};function Zi(e){var t=(0,mi.MT)((0,mi.UY)({app:Ci,login:X,settings:ji,signup:Ri}),void 0,(0,mi.md)(yi.Z,bi,Ei(e),Si));return t.subscribe((function(){var e=t.getState();e.login.username&&localStorage.setItem(H,e.login.username),e.login.utmParameters&&localStorage.setItem(Y,JSON.stringify(e.login.utmParameters))})),t}var Mi=n(2585),Li=n(3978);function Ui(e){e}function Bi(){var e=(0,Li.qy)({providers:{endpoints:(0,Li.uG)(),token:function(){return null}}});return e.connect(),e}var Gi=n(8165),Wi=n(8984),Vi=function(e,t,n){var r=e.event_sender_context_information,o=[(0,Wi.UR)({version:r.client_version_string}),(0,Wi.jx)(n),(0,Wi.IE)(r.installation_id),(0,Wi.Hv)({name:r.platform_type,version:r.os_version}),(0,Wi.yD)({manufacturer:r.device_manufacturer||"",model:r.device_model||""})];return(0,Gi.mi)({transport:t,suppressPersist:false,context:o})},Hi=["children"];function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yi=function(e){var t=e.children,n=(0,De.Z)(e,Hi);return"undefined"==typeof window?(0,on.jsx)(on.Fragment,{children:t}):(0,on.jsx)(rn.Suspense,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({children:t},n))},qi=n(4492);function zi(){return(zi=(0,u.Z)(l().mark((function e(){var t,n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=[window.__spotify.locale,yt.en];case 1:if(!(t<n.length)){e.next=18;break}return r=n[t],e.prev=3,e.next=6,fetch("i18n/".concat(r,".json")).then((function(e){return e.json()}));case 6:return o=e.sent,jt.setLocale(r),jt.setDictionary(o),e.abrupt("return");case 12:e.prev=12,e.t0=e.catch(3);case 15:t++,e.next=1;break;case 18:throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.");case 19:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}function Ji(){return(Ji=(0,u.Z)(l().mark((function e(){var t,n,r,o,i,a,u,c,v,m,y;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ui(n=Bi()),r=Vi(window.__spotify,n,"65b708073fc0480ea92a077233ca87bd"),o=Zi(r),h.attach(),h.update(),g.attach(),i=document.location.search,a=new RegExp("\\?param=error-code\\".concat(encodeURIComponent("="),"([0-9]+)"),"i"),window.addEventListener("message",(function(e){"critical-update-error"===e.data&&o.dispatch(Qt.loginFailed({errorCode:e.data}))})),u=i.match(a),i&&u&&(c=+u[1],o.dispatch(Qt.loginFailed({errorCode:c}))),v="linux",window.navigator.platform.startsWith("Mac")&&(v="mac"),window.navigator.platform.startsWith("Win")&&(v="windows"),document.body.classList.add("body-container--".concat(v)),p.render((0,on.jsx)(d.zj,{children:(0,on.jsx)(f.zt,{store:o,children:(0,on.jsx)(li.nD,{resolver:qi.L,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:n,eventSender:r},children:(0,on.jsx)(Yi,{fallback:null,children:(0,on.jsx)(vi,{eventSender:r})})})})}),document.getElementById("main")),o.dispatch(Qt.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),t={},(0,s.Z)(t,Mi.PLATFORM_UNKNOWN,"body-container--unknown-os"),(0,s.Z)(t,Mi.PLATFORM_MAC,"body-container--mac"),(0,s.Z)(t,Mi.PLATFORM_WINDOWS,"body-container--windows"),m=t,y=(0,Mi.getPlatform)(),document.body.classList.add(m[y]);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return zi.apply(this,arguments)})().then((function(){return Ji.apply(this,arguments)}))},2585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM_MAC:()=>o,PLATFORM_UNKNOWN:()=>r,PLATFORM_WINDOWS:()=>i,getPlatform:()=>u,isMac:()=>a,isWindows:()=>s});n(2526),n(1817),n(1539),n(3157);var r=Symbol("PLATFORM_UNKNOWN"),o=Symbol("PLATFORM_MAC"),i=Symbol("PLATFORM_WINDOWS");function a(){return window.navigator.platform.startsWith("Mac")}function s(){return window.navigator.platform.startsWith("Win")}function u(){return a()?o:s()?i:r}},2976:(e,t)=>{var n=!1;t.update=function(){},t.attach=function(){if(!n){n=!0;var e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)}},t.detach=function(){n&&(n=!1,document.documentElement.removeAttribute("lang"))}},685:(e,t,n)=>{var r,o=n(319),i=n(9713);n(9554),n(1539),n(4747),n(6699),n(8702),n(2222),n(2564),n(8309);var a=n(2585),s=a.getPlatform,u=a.PLATFORM_UNKNOWN,c=a.PLATFORM_MAC,l=a.PLATFORM_WINDOWS,p=!1,d="always-visible",f=0,g=(i(r={},u,"linux"),i(r,c,"mac"),i(r,l,"windows"),r),h=g[u];function v(){var e=o(document.querySelectorAll("*")),t=[],n=["scroll","auto","overlay"];e.forEach((function(e){var r=window.getComputedStyle(e),o=r.overflowX,i=r.overflowY;n.includes(o)&&t.push({node:e,property:"overflow-x"}),n.includes(i)&&t.push({node:e,property:"overflow-y"})}));var r=document.createElement("style");r.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();var i="data-scrollbar-fix-".concat(++f,"-id"),a=0;t.forEach((function(e){var t=e.node,n=e.property;if(t!==document.body){var o=++a;t.setAttribute(i,o),r.innerHTML+="\n    [".concat(i,'="').concat(o,'"] { ').concat(n,": hidden !important; }")}})),document.head.appendChild(r),setTimeout((function(){document.head.removeChild(r),t.forEach((function(e){e.node.removeAttribute(i)}))}),0)}t.performScrollBarFix=v,t.update=function(){},t.attach=function(){if(!p){p=!0;var e=window.__spotify&&window.__spotify.scroller_style;d="overlay"===e?"overlay":"always-visible";var t=s();h=g[t],"always-visible"===d||"mac"!==h?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add("scrollbar-style-visible-".concat(h))):(document.body.classList.remove("scrollbar-style-visible-".concat(h)),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(function(e){"set_active"===e.data.name&&e.data.active&&v()}))}},t.detach=function(){p&&(p=!1,f=0)}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.m=t,r.amdO={},e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],s=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={535:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,u]=n,c=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[569],(()=>r(8249)));o=r.O(o)})();
//# sourceMappingURL=login.js.map