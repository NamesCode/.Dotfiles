(()=>{var e,t={9453:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA"}},8249:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{ENTER_LOGIN_MODE:()=>_,ENTER_SETTINGS_MODE:()=>S,ENTER_SIGNUP_MODE:()=>y,ENTER_SIGNUP_MODE_STEP_0:()=>E,ENTER_SIGNUP_MODE_STEP_1:()=>b,ENTER_WELCOME_MODE:()=>k,INTERACTION:()=>D,START_APP:()=>v,enterLoginMode:()=>A,enterSettingsMode:()=>T,enterSignupMode:()=>C,enterSignupModeStep0:()=>O,enterSignupModeStep1:()=>F,enterWelcomeMode:()=>P,interaction:()=>N,openSignupPage:()=>I,startApp:()=>w});var o={};n.r(o),n.d(o,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>ce,ACCOUNTS_METHODS:()=>pe,LOADING:()=>re,LOGIN_BEFORE:()=>Q,LOGIN_CLEAR_ERRORS:()=>te,LOGIN_FAIL:()=>ne,LOGIN_SUCCESS:()=>ee,LOGIN_TYPE_ACCOUNTS:()=>le,LOGIN_TYPE_AUTOLOGIN:()=>ue,LOGIN_TYPE_EMAIL:()=>ae,LOGIN_TYPE_FACEBOOK:()=>ie,LOGIN_TYPE_FACEBOOK_POPUP:()=>se,UTM_PARAMETERS:()=>oe,abortLoginWithAccounts:()=>be,fetchUTMParameters:()=>ke,loading:()=>me,login:()=>ye,loginClearErrors:()=>De,loginFailed:()=>he,loginSuccess:()=>ge,loginWithAccounts:()=>Ee,loginWithFacebookPopup:()=>_e,receivedUTMParameters:()=>Se});var a={};n.r(a),n.d(a,{CLEAR_ALL_ERRORS:()=>Qe,COUNTRY_NOT_LAUNCHED:()=>Xe,FACEBOOK_SIGNUP_ATTEMPT:()=>He,FACEBOOK_SIGNUP_FAILURE:()=>Ye,FACEBOOK_SIGNUP_SUCCESS:()=>Ke,SIGNUP_ATTEMPT:()=>Ge,SIGNUP_FAILURE:()=>We,SIGNUP_RESTRICTIONS_FAILURE:()=>je,SIGNUP_RESTRICTIONS_SUCCESS:()=>Be,SIGNUP_SUCCESS:()=>Ve,UPDATE_SIGNUP_DATA:()=>$e,VALIDATE_FIELD_ATTEMPT:()=>qe,VALIDATE_FIELD_FAILURE:()=>ze,VALIDATE_FIELD_SUCCESS:()=>Je,clearAllErrors:()=>yt,countryNotLaunched:()=>vt,facebookSignup:()=>ct,facebookSignupFailure:()=>dt,facebookSignupSuccess:()=>pt,getSignupRestrictions:()=>et,signup:()=>rt,signupAttempt:()=>at,signupFailure:()=>st,signupRestrictionsFailure:()=>nt,signupRestrictionsSuccess:()=>tt,signupSuccess:()=>it,signupWithAccounts:()=>lt,updateSignupData:()=>mt,validateField:()=>ot,validateFieldAttempt:()=>ft,validateFieldFailure:()=>gt,validateFieldSuccess:()=>ht});var i={};n.r(i),n.d(i,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>Vt,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>Wt,SETTINGS_RESTART_CLIENT_FAILURE:()=>qt,SETTINGS_RESTART_CLIENT_SUCCESS:()=>Yt,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>Kt,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>Ht,fetchProxySettings:()=>zt,restartClient:()=>$t,updateProxySettings:()=>Jt});var s=n(4942),u=n(5861),l=n(7757),c=n.n(l),p=(n(1539),n(8674),n(1703),n(6647),n(4916),n(4765),n(4603),n(8450),n(8386),n(9714),n(4723),n(3157),n(7294)),d=n(3935),f=n(1448),g=n(6706),h=n(2976),m=n(685),v=(n(7941),n(2526),n(7327),n(5003),n(9554),n(4747),n(9337),n(3321),n(9070),n(5827),n(2222),"START_APP"),y="ENTER_SIGNUP_MODE",E="ENTER_SIGNUP_MODE_STEP_0",b="ENTER_SIGNUP_MODE_STEP_1",_="ENTER_LOGIN_MODE",k="ENTER_WELCOME_MODE",S="ENTER_SETTINGS_MODE",D="INTERACTION";function w(){return{type:v}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:y,actionHash:e}}function O(){return{type:E}}function F(){return{type:b}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:_,actionHash:e}}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:k,errorMessage:e}}function T(){return{type:S}}function I(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){var r,o=n(),a={};switch(e?"website":"desktop-app"){case"desktop-app":t(C());break;case"website":a=o.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""};var i=Object.keys(a).reduce((function(e,t){return e[t]=encodeURIComponent(a[t]),e}),{});r="https://www.spotify.com/signup?utm_source=".concat(i.utm_source,"&utm_medium=").concat(i.utm_medium,"&utm_campaign=").concat(i.utm_campaign),i.referral&&(r+="&referral=".concat(i.referral,"&referrer=").concat(i.referral)),window.open(r)}}}function N(e,t,n,r,o){return{type:D,page:e,interactionType:t,intent:n,itemId:r,actionHash:o}}n(8862);const R=function(e){return n.g&&"function"==typeof n.g._getSpotifyModule?new Promise((function(t,r){n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:r})})):null};var Z="https://www.spotify.com/redirect/account-page/",M="showSettings",L={id:"UnknownLoginErrorMessage"},x={id:"DefaultErrorMessage",replace:[M]},U={id:"FbFailureOpenPopup",silent:!0},B={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[M]},400:L,401:L,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:L,405:L,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[Z]},408:{id:"RegionMismatchMessage",replace:[Z,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:L,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:L,415:L,416:L,417:{id:"FacebookCredentialsMisusedMessage"},418:L,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]},1001:{silent:!0},1002:U,1003:{id:"FbUserNotFoundSignUp",replace:["showSignup"]},1004:U,1005:U,1006:U},j={1:L,2:L,3:{id:"BadCredentialsMessage"},4:L,5:L,6:L,7:L,8:L,9:L},G={1:{silent:!0},2:L,3:L,4:{id:"SessionExpiredMessage"},5:x};const W=window.localStorage;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K="lastUsername",Y="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",q="utmParameters",z=W.getItem(q),J=W.getItem(K),$={errorData:null,loginInProgress:!1,redirectTo:null,username:J!==Y?J:"",utmParameters:z?JSON.parse(z):null};const X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case en.LOADING:return H(H({},e),{},{loading:!0,throbberDelay:t.throbberDelay});case en.LOGIN_FAIL:return H(H({},e),{},{loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1});case en.LOGIN_BEFORE:return H(H({},e),{},{errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username});case en.LOGIN_SUCCESS:return H(H({},e),{},{loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username});case en.UTM_PARAMETERS:return H(H({},e),{},{utmParameters:t.utmParameters});case en.LOGIN_CLEAR_ERRORS:return H(H({},e),{},{errorData:null});default:return e}};var Q="LOGIN_BEFORE",ee="LOGIN_SUCCESS",te="LOGIN_CLEAR_ERRORS",ne="LOGIN_FAIL",re="LOADING",oe="UTM_PARAMETERS",ae="login",ie="login-facebook",se="login-facebook-popup",ue="autologin",le="login-accounts",ce="abort-login-accounts",pe={facebook:"facebook",apple:"apple",google:"google"},de=200;function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;return{type:Q,errorData:null,username:e||"",loginInProgress:t===ae,loginType:t}}function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return{type:ee,errorData:null,redirectTo:o,redirectDelay:t||0,username:e,loginType:n,afterSignup:r}}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;return{type:ne,errorData:e,loginType:t}}function me(e){return{type:re,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}var ve=function(){var e=(0,u.Z)(c().mark((function e(t,n){var r,o,a,i,s,u,l,p,d,f,g,h,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>2&&void 0!==m[2]?m[2]:{},o=r.defaultErrorCode,a=r.redirectDelay,i=void 0===a?0:a,s=m.length>3&&void 0!==m[3]?m[3]:ae,u=m.length>4&&void 0!==m[4]&&m[4],l=m.length>5&&void 0!==m[5]?m[5]:null,p=!(m.length>6&&void 0!==m[6])||m[6],l&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=l),e.prev=6,e.t0=JSON,e.next=10,R(n);case 10:e.t1=e.sent,d=e.t0.parse.call(e.t0,e.t1),f=d.redirectTo||"xpui",g=null,n&&n.args&&n.args[0]&&(g=n.args[0].username),t(ge(p?g:Y,i,s,u,f)),e.next=23;break;case 18:e.prev=18,e.t2=e.catch(6),h=e.t2,o?h={errorCode:o}:"string"==typeof e.t2&&(h=JSON.parse(e.t2)),h.errorCode&&B[h.errorCode]&&"FbFailureOpenPopup"===B[h.errorCode].id?t(_e(l)):t(he(h,s));case 23:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}();function ye(e){var t=e.username,n=e.password,r=e.rememberMe,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e){var i=o?ue:ae;e(fe(r?t:Y,i)),ve(e,{name:ae,args:[{username:t,password:n,rememberMe:r}]},{redirectDelay:de},i,o,a,r)}}function Ee(e,t){return function(n){n(fe(null,le)),ve(n,{name:le,args:[{method:e,enableSignup:!1}]},{redirectDelay:de},le,!1,t)}}function be(){return(0,u.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({name:ce,args:[]});case 2:case"end":return e.stop()}}),e)})))}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t(fe(null,ie)),ve(t,{name:se,args:[]},{redirectDelay:de},ie,!1,e)}}function ke(){return function(){var e=(0,u.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"get-signup-utm-parameters",args:[]},e.t0=t,e.t1=Se,e.t2=JSON,e.next=6,R(n);case 6:e.t3=e.sent,e.t4=e.t2.parse.call(e.t2,e.t3),e.t5=(0,e.t1)(e.t4),(0,e.t0)(e.t5);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Se(e){return{type:oe,utmParameters:e}}function De(){return{type:te}}var we=n(5987),Ce=n(2982),Oe=(n(2772),n(3710),n(6992),n(1532),n(8783),n(3948),n(2707),n(9720),n(8309),n(3123),n(9600),n(8495)),Fe=n.n(Oe),Ae=["errors"];function Pe(){var e="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY;return e||"4c7a36d5260abca4af282779720cf631"}function Te(){var e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return["Spotify-App-Version",e]}function Ie(){var e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"",t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return["App-Platform",t]}function Ne(e){var t,n,r=new Map(Object.entries(e).sort()),o=(t=r,n=Fe().create(),t.forEach((function(e){void 0!==e&&n.update(e.toString())})),n.hex());if(r.size>o.length)return r;var a=(0,Ce.Z)(r),i=(0,Ce.Z)(Array(r.size).keys()).sort((function(e,t){var n=o.charAt(e).localeCompare(o.charAt(t));return 0!==n?n:a[e][0].localeCompare(a[t][0])})),s=new Map;return i.forEach((function(e){s.set(a[e][0],a[e][1])})),s}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.email,r=e.password,o=e.gender,a=e.birthDate,i=void 0===a?{}:a,s=e.sendEmail,u=e.shareData,l=e.agreeEula,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},p=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=Object.keys(c).reduce((function(e,t){return e[t]=encodeURIComponent(c[t]),e}),{}),f="https://login.app.spotify.com?utm_source=".concat(d.utm_source,"&utm_medium=").concat(d.utm_medium,"&utm_campaign=").concat(d.utm_campaign);d.referral&&(f+="&referral=".concat(d.referral,"&referrer=").concat(d.referral));var g={key:Pe(),displayname:t,email:n,password:r,password_repeat:r,gender:o,birth_year:i.year,birth_month:i.month,birth_day:i.day,iagree:l?1:0,creation_point:f,creation_flow:"desktop",platform:"desktop",referrer:d.referral};return"boolean"==typeof s&&(g["send-email"]=s),"boolean"==typeof u&&(g.thirdpartyemail=u),p&&Object.keys(g).forEach((function(e){void 0===g[e]&&delete g[e]})),Ne(g)}var Ze=function(e,t){var n=e.headers.get("content-type");e.headers.set("content-type",function(e,t){return[].concat((0,Ce.Z)(e.split(";")),[t]).join(";")}(n,t))},Me=function(e){return function(){var t=(0,u.Z)(c().mark((function t(n,r,o){var a,i,s,u,l,p,d,f,g;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Re(n,r,o),i=new FormData,a.forEach((function(e,t){i.append(t,e)})),s=[Te(),Ie()].reduce((function(e,t){return e[t[0]]=t[1],e}),{}),u={method:"POST",body:i,headers:{"App-Platform":s["App-Platform"],"Spotify-App-Version":s["Spotify-App-Version"],"X-Client-Id":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.SPOTIFY_CLIENT_ID}},l=new Request(e,u),Ze(l,"charset=utf-8"),t.next=9,fetch(l);case 9:return p=t.sent,t.next=12,p.json();case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0={};case 15:if(d=t.t0,f=d.errors,g=(0,we.Z)(d,Ae),!f){t.next=20;break}throw f;case 20:return t.abrupt("return",g);case 21:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},Le=Me("https://spclient.wg.spotify.com/signup/public/v1/account/"),xe=Me("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true"),Ue=function(){var e=(0,u.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1");case 2:return t=e.sent,e.next=5,t.json();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(!((n=e.t0).errors&&n.errors.length>0)){e.next=11;break}throw n.errors;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Be="SIGNUP_RESTRICTIONS_SUCCESS",je="SIGNUP_RESTRICTIONS_FAILURE",Ge="SIGNUP_ATTEMPT",We="SIGNUP_FAILURE",Ve="SIGNUP_SUCCESS",He="FACEBOOK_SIGNUP_ATTEMPT",Ke="FACEBOOK_SIGNUP_SUCCESS",Ye="FACEBOOK_SIGNUP_FAILURE",qe="VALIDATE_FIELD_ATTEMPT",ze="VALIDATE_FIELD_FAILURE",Je="VALIDATE_FIELD_SUCCESS",$e="UPDATE_SIGNUP_DATA",Xe="COUNTRY_NOT_LAUNCHED",Qe="CLEAR_ALL_ERRORS";function et(){return function(){var e=(0,u.Z)(c().mark((function e(t,n){var r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),e.prev=1,!window.__spotify||!0!==window.__spotify.is_running_on_teamcity){e.next=6;break}e.t0={},e.next=9;break;case 6:return e.next=8,Ue();case 8:e.t0=e.sent;case 9:o=e.t0,t(tt(o)),e.next=17;break;case 13:e.prev=13,e.t1=e.catch(1),t(nt(e.t1)),r.app&&r.app.mode&&"welcome"!==r.app.mode&&(t(A()),t(I(!0)));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()}function tt(e){return{type:Be,restrictions:e}}function nt(e){return{type:je,error:e}}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=(0,u.Z)(c().mark((function t(n,r){var o,a,i,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(at()),o=r().signup.formData,a=r().login.utmParameters,t.prev=3,t.next=6,Le(o,a);case 6:n(it()),i=o.email,s=o.password,n(ye({username:i,password:s,rememberMe:!0},!0,e)),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),u={},Object.keys(t.t0).forEach((function(e){u["birthdate"===e?"birthDate":e]={message:t.t0[e]}})),n(st(u));case 16:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n){return t.apply(this,arguments)}}()}function ot(e){return function(){var t=(0,u.Z)(c().mark((function t(n,r){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r().signup.formData[e],a=r().login.utmParameters,n(ft(e,o)),t.prev=3,t.next=6,xe((0,s.Z)({},e,o),a,!0);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),t.t0[e]&&n(gt(e,{message:t.t0[e]}));case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,n){return t.apply(this,arguments)}}()}function at(){return{type:Ge}}function it(){return{type:Ve}}function st(e){return{type:We,errors:e}}var ut=function(){var e=(0,u.Z)(c().mark((function e(t,n){var r,o,a,i,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=s.length>2&&void 0!==s[2]?s[2]:null)&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=r),e.prev=2,e.t0=JSON,e.next=6,R(n);case 6:e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),a=o.redirectTo||"xpui",t(pt()),t(ge(null,0,ue,!0,a)),e.next=18;break;case 13:e.prev=13,e.t2=e.catch(2),i=e.t2,"string"==typeof e.t2&&(i=JSON.parse(e.t2)),t(dt(i));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){var r={name:le,args:[{method:e,enableSignup:!0}]};n(ct()),ut(n,r,t)}}function ct(){return{type:He}}function pt(){return{type:Ke}}function dt(e){return{type:Ye,errorData:e}}function ft(e,t){return{type:qe,field:e,value:t}}function gt(e,t){return{type:ze,field:e,error:t}}function ht(e){return{type:Je,field:e}}function mt(e){return{type:$e,data:e}}function vt(){return{type:Xe}}function yt(){return{type:Qe}}n(6699),n(2023);var Et,bt,_t,kt=n(1002),St=n(5671),Dt=n(3144),wt=(n(5306),n(1249),n(1058),n(7601),n(3843),n(9453)),Ct=n.n(wt);function Ot(e){return"string"!=typeof e}!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(Et||(Et={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(bt||(bt={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(_t||(_t={}));var Ft={},At=function(e,t){try{return(Ft[e]||(Ft[e]=new Intl.PluralRules(e))).select(t)}catch(e){return _t.OTHER}};function Pt(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}var Tt=function(e){return"ar"===e?"ar-u-nu-latn":e};function It(e){return{seconds:Math.round(e/1e3),minutes:Math.round(e/1e3/60),hours:Math.round(e/1e3/60/60),days:Math.round(e/1e3/60/60/24)}}var Nt=new(function(){function e(){(0,St.Z)(this,e),(0,s.Z)(this,"_relativeTimeFormat",void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat),(0,s.Z)(this,"_dateTimeFormats",new Map),this._dictionary={},this._locale=Et.en}return(0,Dt.Z)(e,[{key:"getDateTimeFormat",value:function(e){var t=JSON.stringify(Object.keys(e).sort().map((function(t){return(0,s.Z)({},t,e[t])}))),n=this._dateTimeFormats.get(t);return void 0===n&&(n=new Intl.DateTimeFormat(Tt(this._locale),e),this._dateTimeFormats.set(t,n)),n}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e,this._dateTimeFormats.clear()}},{key:"getLocale",value:function(){return this._locale}},{key:"getSmartlingLocale",value:function(){var e=this._locale;return Ct()[e]||e}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=(e in this._dictionary?this._dictionary[e]:e),n="",r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(Ot(t)){var i=o[0],s=At(this._locale,parseInt(i,10)),u=t[s];void 0!==u?n=u:t.other&&(n=t.other)}else n=t;if(/%\d%/.test(n)){var l=["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"];if(!l.includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==o?void 0:o.length)>0)for(var c=0;c<o.length;c++){var p=o[c];if(null!=p)if("string"==typeof p)n=n.replace("{".concat(c,"}"),Pt(p)).replace("%".concat(c,"%"),Pt(p));else if("number"==typeof p){var d=this.formatNumber(p);n=n.replace("{".concat(c,"}"),d).replace("%".concat(c,"%"),d)}else if("object"===(0,kt.Z)(p))for(var f=0,g=Object.keys(p);f<g.length;f++){var h=g[f],m=p[h];n=n.replace("%".concat(h,"%"),Pt(m))}}return n}},{key:"getSeparator",value:function(){switch(this._locale){case Et.ar:return bt.AR;case Et.fa:return bt.FA;default:return bt.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(Tt(this._locale),t)}},{key:"formatNumberCompact",value:function(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={year:"numeric",month:"long",day:"numeric"},r=t||n;return this.getDateTimeFormat(r).format(e)}},{key:"formatRelativeDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(Date.now()),r=(e=new Date(e)).getTime()-n.getTime(),o=Math.abs(r)<2592e6;if(o&&null!==this._relativeTimeFormat){var a=It(r),i=a.days,s=a.hours,u=a.minutes,l=a.seconds;return i||s||u?i||s?i?this._relativeTimeFormat.format(i,"days"):this._relativeTimeFormat.format(s,"hours"):this._relativeTimeFormat.format(u,"minutes"):this._relativeTimeFormat.format(l,"seconds")}return this.formatDate(e,t)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=Et.en,Ft={}}}]),e}()),Rt=2,Zt=3,Mt=4,Lt={"auto-detect":{label:function(){return Nt.get("desktop.settings.proxy.autodetect")}},"no-proxy":{label:function(){return Nt.get("desktop.settings.proxy.noproxy")}},http:{label:function(){return Nt.get("desktop.settings.proxy.http")}},socks4:{label:function(){return Nt.get("desktop.settings.proxy.socks4")}},socks5:{label:function(){return Nt.get("desktop.settings.proxy.socks5")}}},xt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],Ut="sp://proxy/v1/";function Bt(){return(Bt=(0,u.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:Ut}),persistent:!1,onSuccess:function(n){var r=JSON.parse(n);200!==r.status&&t(new Error("Failed to fetch proxy settings (status code: ".concat(r.status,")")));var o=JSON.parse(r.body);e({mode:o["network.proxy.mode"],address:o["network.proxy.addr"],username:o["network.proxy.user"],password:o["network.proxy.pass"]})},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(){return(jt=(0,u.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r={"network.proxy.mode":t.mode};[Rt,Zt,Mt].includes(t.mode)&&(r["network.proxy.addr"]=t.address,r["network.proxy.user"]=t.username),[Rt,Mt].includes(t.mode)&&(r["network.proxy.pass"]=t.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:Ut,body:JSON.stringify(r)}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,t){n(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(){return(Gt=(0,u.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wt="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",Vt="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",Ht="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",Kt="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",Yt="SETTINGS_RESTART_CLIENT_SUCCESS",qt="SETTINGS_RESTART_CLIENT_FAILURE";function zt(){return function(e){(function(){return Bt.apply(this,arguments)})().then((function(t){e(function(e){return{type:Wt,data:e}}(t))}),(function(t){e(function(e){return{type:Vt,error:e}}(t))}))}}function Jt(e){return function(t){(function(e){return jt.apply(this,arguments)})(e).then((function(){t({type:Ht}),t(zt())}),(function(e){t(function(e){return{type:Kt,error:e}}(e))}))}}function $t(){return function(e){(function(){return Gt.apply(this,arguments)})().then((function(){e({type:Yt})}),(function(t){e(function(e){return{type:qt,error:e}}(t))}))}}function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const en=Qt(Qt(Qt(Qt({},r),o),a),i);n(1299),n(2419);var tn=n(136),nn=n(2963),rn=n(1120);n(3161),n(9653),n(2564);function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var an=function(e){(0,tn.Z)(n,e);var t=on(n);function n(e){var r;return(0,St.Z)(this,n),(r=t.call(this,e)).state={hidden:r.props.delay>0},r}return(0,Dt.Z)(n,[{key:"componentDidMount",value:function(){var e=this;!0===this.state.hidden&&(this.throbberTimeout=setTimeout((function(){e.setState({hidden:!1})}),this.props.delay))}},{key:"componentWillUnmount",value:function(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}},{key:"render",value:function(){return this.state.hidden?null:p.createElement("div",{"data-testid":"glue-throbber",className:"GlueThrobber ".concat(this.props.initial?"throbber-initial":"throbber")},p.createElement("div",null))}}]),n}(p.Component);an.defaultProps={delay:0,initial:!0};var sn=n(7326),un=(n(4812),n(2808)),ln=n.n(un);function cn(){return ln().create().toString()}var pn=n(1317),dn=n(4011);function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var gn=function(e){(0,tn.Z)(n,e);var t=fn(n);function n(e){var r;return(0,St.Z)(this,n),(r=t.call(this,e)).handleLoginClick=r.handleLoginClick.bind((0,sn.Z)(r)),r.handleErrorClick=r.handleErrorClick.bind((0,sn.Z)(r)),r}return(0,Dt.Z)(n,[{key:"handleLoginClick",value:function(){var e=cn();this.props.openLoginPage(e),this.props.onInteraction("login/welcome","click","open-page-login",null,e)}},{key:"handleErrorClick",value:function(e){e.target.getAttribute("data-action")&&("showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage())}},{key:"render",value:function(){var e=this.props.errorMessage;return p.createElement("main",{className:"Welcome","data-testid":"welcome"},p.createElement("h1",{className:"HeroText __welcome"},Nt.get("desktop-auth.login.millions-of-songs"),p.createElement("br",null),Nt.get("desktop-auth.login.free-on-spotify")),p.createElement("div",{className:"Welcome__signup-or-login"},e&&p.createElement("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive"},p.createElement(pn.l,{className:"Welcome__error-message__icon"}),p.createElement("span",{dangerouslySetInnerHTML:{__html:e}})),p.createElement(dn.D,{id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button",fullWidth:!0},Nt.get("desktop.login.LoginButton"))))}}]),n}(p.PureComponent);const hn=(0,g.$j)((function(e){return{errorMessage:e.app.errorMessage}}),(function(e){return{openLoginPage:function(t){return e(en.enterLoginMode(t))},openSettingsPage:function(){return e(en.enterSettingsMode())},onInteraction:function(t,n,r,o,a){return e(en.interaction(t,n,r,o,a))}}}))(gn);var mn=n(885),vn=n(2667);n(9826);function yn(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;var r=B;switch(e){case"session":r=j;break;case"desktop_login_accounts":r=G}var o=r[t]||x;if(o.silent)return!1;var a=o.replace||[],i="";switch(o.id){case"UnknownLoginErrorMessage":i=Nt.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":i=Nt.get("desktop.login.DefaultErrorMessage",a[0]);break;case"SessionTerminatedMessage":i=Nt.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":i=Nt.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":i=Nt.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":i=Nt.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":i=Nt.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":i=Nt.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":i=Nt.get("desktop.login.ErrorProxyAuthRequired",a[0]);break;case"CriticalUpdate":i=Nt.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":i=Nt.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":i=Nt.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":i=Nt.get("desktop.login.MissingUserInfoMessage",a[0]);break;case"RegionMismatchMessage":i=Nt.get("desktop.login.RegionMismatchMessage",a[0],a[1]);break;case"PremiumUsersOnlyMessage":i=Nt.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":i=Nt.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":i=Nt.get("desktop.login.ClientUpdateFail",a[0]);break;case"FbUserNotFoundSignUp":i=Nt.get("desktop.login.FbUserNotFoundSignUp",a[0])}return"".concat(i,"<br>").concat(Nt.get("desktop.login.errorCode",n))}function En(e){var t=e.validity,n=void 0===t?{}:t;return n.valid?null:["valueMissing","typeMismatch","tooShort"].find((function(e){return n[e]}))}const bn="H5vfurs7KNEs9Io5DUA7",_n="qfBRU_bttJde7gy46oAB",kn="ypTrzM1PtlrZp04qs6Eq",Sn="oHZmDpK0SrWDaXhPjUtC",Dn="lAHowB9HYfAUrg9UaSde";var wn=n(9798),Cn=ln().create().toString();var On="has-used-app",Fn=!window.localStorage.getItem(On);Fn&&window.localStorage.setItem(On,!0);const An=function(){var e,t=W.getItem("utmParameters");try{e=t?JSON.parse(t).referral:""}catch(t){e=""}return e};var Pn,Tn=function(){function e(t){(0,St.Z)(this,e),this._eventSender=t}return(0,Dt.Z)(e,[{key:"logPageView",value:function(e){var t=e.page;this.logAction({page:t,action_type:"pageview",action_intent:""})}},{key:"logAction",value:function(e){var t=e.page,n=e.action_type,r=e.action_intent,o=e.item_id,a=e.action_hash;this._eventSender.send((0,wn.e)({action_type:n,action_intent:r,action_page:t,action_item_id:o,action_hash:a,device_is_new_install:Fn,device_locale:window.__spotify.locale,device_referrer:An(),ab_flags:"",session_id:Cn}))}}]),e}();!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR"}(Pn||(Pn={}));var In=function(e){var t,n=e.eventSender,r=(0,p.useState)(""),o=(0,mn.Z)(r,2),a=o[0],i=o[1],s=(0,p.useState)(!1),l=(0,mn.Z)(s,2),d=l[0],f=l[1],h=(0,p.useState)(!1),m=(0,mn.Z)(h,2),v=m[0],y=m[1],E=(t=(0,g.I0)(),function(){t(T())}),b=(0,p.useRef)(0),_=(0,p.useMemo)((function(){return new Tn(n)}),[n]);(0,p.useEffect)((function(){_.logPageView({page:"auth-on-web"})}),[_]);var k=function(){var e=(0,u.Z)(c().mark((function e(t){var n,r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=++b.current,r=cn(),y(t),i(""),f(!0),_.logAction({page:"auth-on-web",action_type:"click",action_intent:t?"sign-up-with-browser":"log-in-with-browser",action_hash:r}),e.prev=6,e.next=9,R({name:le,args:[{method:"login-accounts",enableSignup:t,actionHash:r}]});case 9:_.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-success-signup":"show-success-login"}),location.href="spotify:app:xpui",e.next=24;break;case 13:if(e.prev=13,e.t0=e.catch(6),o="string"==typeof e.t0?JSON.parse(e.t0):e.t0,n===b.current){e.next=19;break}return _.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:null==o?void 0:o.errorReference}),e.abrupt("return");case 19:f(!1),a=yn(o.errorCategory,o.errorCode,o.errorReference),"desktop_login_accounts"===o.errorCategory&&o.errorCode===Pn.OPERATION_TIMED_OUT&&(a=t?Nt.get("desktop-auth.login.signup-time-out"):Nt.get("desktop-auth.login.login-time-out")),i(a||""),_.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-error-signup":"show-error-login",item_id:null==o?void 0:o.errorReference});case 24:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return p.createElement("main",null,d?p.createElement(p.Fragment,null,p.createElement(vn.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:bn},v?Nt.get("desktop-auth.login.go-to-browser-signup"):Nt.get("desktop-auth.login.go-to-browser-login")),p.createElement("button",{className:kn,onClick:function(){f(!1),_.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})}},p.createElement(vn.D,{as:"span",variant:"ballad",semanticColor:"textSubdued"},Nt.get("desktop-auth.login.not-seeing-browser"))," ",p.createElement(vn.D,{as:"span",variant:"balladBold",semanticColor:"textBase"},Nt.get("desktop-auth.login.try-again")))):p.createElement(p.Fragment,null,p.createElement(vn.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:bn},Nt.get("desktop-auth.login.millions-of-songs"),p.createElement("br",null),Nt.get("desktop-auth.login.free-on-spotify")),a&&p.createElement("div",{className:Sn,role:"alert",onClick:function(e){e.currentTarget.getAttribute("data-action")&&("showSettings"===e.currentTarget.getAttribute("data-action")&&E())},"aria-live":"assertive"},p.createElement(pn.l,{className:Dn}),p.createElement("span",{dangerouslySetInnerHTML:{__html:a}})),p.createElement(dn.D,{onClick:function(){k(!1)},fullWidth:!0},Nt.get("desktop-auth.login.log-in-with-browser")),p.createElement("button",{className:_n,onClick:function(){k(!0)}},p.createElement(vn.D,{as:"span",variant:"ballad",semanticColor:"textSubdued"},Nt.get("desktop-auth.login.new-to-spotify"))," ",p.createElement(vn.D,{as:"span",variant:"balladBold",semanticColor:"textBase"},Nt.get("desktop-auth.login.sign-up-with-browser")))))},Nn=(n(5212),n(5087)),Rn=n(2484),Zn=n(6025),Mn=n(4184),Ln=n.n(Mn);function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Un=function(){return p.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"}))},Bn=function(e){(0,tn.Z)(n,e);var t=xn(n);function n(){return(0,St.Z)(this,n),t.apply(this,arguments)}return(0,Dt.Z)(n,[{key:"render",value:function(){var e=this.props.errorMessage;return p.createElement("div",{"aria-live":"polite",className:Ln()("FieldError",{"FieldError--hidden":!e})},p.createElement(Un,null),p.createElement("span",null,e||""))}}]),n}(p.PureComponent);function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Gn=0;var Wn=function(e){(0,tn.Z)(n,e);var t=jn(n);function n(){var e;(0,St.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).idNumber=++Gn,e.handleChange=e.handleChange.bind((0,sn.Z)(e)),e}return(0,Dt.Z)(n,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeholderLabel,r=e.name,o=e.type,a=e.isRequired,i=e.taId,s=e.id,u=e.defaultValue,l=e.value,c=e.minLength,d=e.autoFocus,f=e.hasError,g=e.isDisabled,h=e.isHiddenForScreenReaders,m=e.useCustomStyle,v=e.className,y=e.inputClassName,E=e.inputRef,b=e.onBlur,_=e.onFocus,k=e.onInput,S=e.onKeyDown,D=e.onKeyUp,w=s||"GlueTextInput-".concat(this.idNumber);return p.createElement("label",{className:m?v:"GlueTextInput",htmlFor:w,"aria-label":t,"aria-hidden":!!h||void 0},p.createElement("input",{className:m?y:Ln()("GlueTextInput__input",{"GlueTextInput__input--has-error":f}),tabIndex:h?"-1":void 0,type:o,id:w,name:r,"data-ta-id":i,"aria-invalid":f,disabled:g,minLength:c,autoFocus:d,placeholder:n||t,value:u?void 0:l,defaultValue:u,onBlur:b,onFocus:_,onChange:this.handleChange,onInput:u?void 0:k,onKeyDown:S,onKeyUp:D,ref:E,required:a}))}}]),n}(p.PureComponent);function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}Wn.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur:function(){},onFocus:function(){},onChange:function(){},onInput:function(){},onKeyDown:function(){}};var Hn=function(e){(0,tn.Z)(n,e);var t=Vn(n);function n(e){var r;return(0,St.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,sn.Z)(r),"handleTogglePasswordVisible",(function(){var e=!r.state.passwordVisible;r.setState({passwordVisible:e}),r.props.onTogglePasswordVisibility&&r.props.onTogglePasswordVisibility(e)})),r.state={isEditing:!1,passwordVisible:!1},r.handleBlur=r.handleBlur.bind((0,sn.Z)(r)),r.handleInput=r.handleInput.bind((0,sn.Z)(r)),r}return(0,Dt.Z)(n,[{key:"handleBlur",value:function(e){var t=e.target,n=e.relatedTarget;this.setState({isEditing:!1}),n&&(n.name||"submit"===n.type)&&this.validate(t)}},{key:"handleInput",value:function(){this.setState({isEditing:!0})}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;!t.noValidate&&r&&r(n,En(e))}},{key:"renderPasswordEyeToggler",value:function(){var e=this.props.type,t=this.state.passwordVisible;return"password"!==e?null:p.createElement(p.Fragment,null,p.createElement("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon ".concat(t?"passwordVisible":"")}),p.createElement("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross ".concat(t?"passwordVisible":"")}))}},{key:"render",value:function(){var e=this.props,t=e.error,n=void 0===t?{}:t,r=e.noValidate,o=e.label,a=e.name,i=e.type,s=e.value,u=e.isRequired,l=e.minLength,c=e.autoFocus,d=e.isDisabled,f=e.onChange,g=e.onKeyUp,h=e.onFocus,m=e.rightIcon,v=void 0===m?null:m,y=this.state,E=y.isEditing,b=y.passwordVisible,_=v,k=i;return"password"===i&&b&&(k="text"),p.createElement("div",{className:Ln()("FormField",{"FormField--no-validate":r})},p.createElement(Wn,{label:o,name:a,type:k,taId:"".concat(a,"-field"),value:s,isRequired:u,minLength:l,autoFocus:c,hasError:!!n.message&&!E,isDisabled:d,onChange:f,onFocus:h,onKeyUp:g,onBlur:this.handleBlur,onInput:this.handleInput}),_&&p.createElement(_,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!r&&!E&&n.message&&p.createElement(p.Fragment,null,p.createElement(Bn,{errorMessage:n.message})))}}]),n}(p.PureComponent);const Kn=(0,g.$j)((function(){return{}}),(function(){return{}}))(Hn);var Yn=n(7462),qn=["type","name","label","classes","hasError"];function zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Jn=function(e){(0,tn.Z)(n,e);var t=zn(n);function n(){var e;(0,St.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleBlur=e.handleBlur.bind((0,sn.Z)(e)),e}return(0,Dt.Z)(n,[{key:"handleBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this.props,t=e.type,n=void 0===t?"text":t,r=e.name,o=e.label,a=e.classes,i=e.hasError,s=(0,we.Z)(e,qn),u="".concat(r,"-field");return p.createElement("span",{className:a},p.createElement("label",{className:"glue-hidden-visually",htmlFor:u},o),p.createElement("input",(0,Yn.Z)({},s,{onBlur:this.handleBlur,type:n,name:r,id:u,"data-ta-id":u,className:Ln()("form-control Input",{"Input--has-error":i}),"aria-invalid":!!i,placeholder:o,required:!0})))}}]),n}(p.PureComponent),$n=(new Date).getFullYear()-120,Xn=[31,28,31,30,31,30,31,31,30,31,30,31],Qn=function(e,t,n){var r=new Date(n,t-1,e);return!(e<1||e>function(e,t){return 1===e&&t%4==0?29:Xn[e]}(t,n))&&(!(r.getFullYear()<$n)&&(r.getDate()===e&&r.getMonth()===t-1&&r.getFullYear()===n))},er=function(e,t,n){var r=null;return!function(e,t,n){return[e,t,n].reduce((function(e,t){return e&&!!t}),!0)}(e,t,n)?r="incomplete":Qn(e,t,n)||(r="invalid"),r};function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var or={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"},ar=function(e){(0,tn.Z)(n,e);var t=rr(n);function n(e){var r;return(0,St.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.monthStrings=[Nt.get("desktop.login.January"),Nt.get("desktop.login.February"),Nt.get("desktop.login.March"),Nt.get("desktop.login.April"),Nt.get("desktop.login.May"),Nt.get("desktop.login.June"),Nt.get("desktop.login.July"),Nt.get("desktop.login.August"),Nt.get("desktop.login.September"),Nt.get("desktop.login.October"),Nt.get("desktop.login.November"),Nt.get("desktop.login.December")],r.handleInput=r.handleInput.bind((0,sn.Z)(r)),r.handleBlur=r.handleBlur.bind((0,sn.Z)(r)),r.handleFocus=r.handleFocus.bind((0,sn.Z)(r)),r}return(0,Dt.Z)(n,[{key:"handleInput",value:function(e){var t=e.target,n=t.name,r=t.value,o=t.validity,a=void 0===o?{}:o;this.setState({isEditing:!0});var i=parseInt(r,10);a.valueMissing||!isFinite(r)||isNaN(i)?this.props.onChange(nr(nr({},this.props.value),{},(0,s.Z)({},n,void 0))):this.props.onChange(nr(nr({},this.props.value),{},(0,s.Z)({},n,i)))}},{key:"handleBlur",value:function(e){var t=e.relatedTarget?e.relatedTarget.name:null,n=["day","month","year"].includes(t);this.setState({isEditing:n}),n||this.validate()}},{key:"handleFocus",value:function(e){this.setState({isEditing:!0});var t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}},{key:"validate",value:function(){var e=this.props.value,t=e.day,n=e.month,r=e.year,o=er(t,n,r,this.props.minAge);this.props.onValidate("birthDate",o)}},{key:"renderYear",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return p.createElement(Jn,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:Nt.get("desktop.login.Year"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:$n,hasError:t.includes("year"),onFocus:this.handleFocus})}},{key:"renderMonth",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return p.createElement("select",{name:"month",id:"month-field",className:Ln()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:n,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus},p.createElement("option",{value:"",disabled:!0,hidden:!0},Nt.get("desktop.login.Month")),this.monthStrings.map((function(e,t){return p.createElement("option",{value:t+1,key:t},e)})))}},{key:"renderDay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return p.createElement(Jn,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:Nt.get("desktop.login.Day"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.dateEndianness,a=t.error,i=void 0===a?{}:a,s=t.autoFocus,u=this.props.value,l=u.day,c=u.month,d=u.year,f=this.state.isEditing,g=["day","month","year"].filter((function(t){return!(f||!i.message)&&("incomplete"===i.code?!e.props.value[t]:"tooOld"!==i.code||"year"===t)})),h="";return h="big"===or[o]?p.createElement("div",{className:"FormDate__inputs"},this.renderYear(d,g,s),this.renderMonth(c,g),this.renderDay(l,g)):"little"===or[o]?p.createElement("div",{className:"FormDate__inputs"},this.renderDay(l,g,s),this.renderMonth(c,g),this.renderYear(d,g)):p.createElement("div",{className:"FormDate__inputs"},this.renderMonth(c,g,s),this.renderDay(l,g),this.renderYear(d,g)),p.createElement("div",{className:"FormDate"},p.createElement("label",{className:"FormDate__label ".concat(n,"-label"),htmlFor:"month-field"},r),h,!f&&i.message&&p.createElement(p.Fragment,null,p.createElement(Bn,{errorMessage:i.message})))}}]),n}(p.PureComponent);ar.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const ir=(0,g.$j)((function(){return{}}),(function(){return{}}))(ar);var sr=["name","label","options","value","showTitle","error","onValidate","onOptionFocus"];function ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var lr=function(e){(0,tn.Z)(n,e);var t=ur(n);function n(e){var r;return(0,St.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.handleBlur=r.handleBlur.bind((0,sn.Z)(r)),r.handleFocus=r.handleFocus.bind((0,sn.Z)(r)),r}return(0,Dt.Z)(n,[{key:"handleBlur",value:function(e){this.state={isEditing:!1},(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}},{key:"handleFocus",value:function(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;r&&r(n,En(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.options,a=t.value,i=t.showTitle,s=t.error,u=void 0===s?{}:s,l=(t.onValidate,t.onOptionFocus,(0,we.Z)(t,sr)),c=this.state.isEditing,d="".concat(n,"-field"),f=Ln()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return p.createElement("div",{className:f},p.createElement("label",{className:i?"":"glue-hidden-visually",htmlFor:d},r),o.map((function(t){var r="".concat(t.value,"-radio");return p.createElement("span",{className:a===t.value?"checked":"",key:t.value},p.createElement("input",(0,Yn.Z)({},l,{name:n,type:"radio",id:r,className:"glue-hidden-visually",value:t.value,checked:a===t.value,onBlur:e.handleBlur,onFocus:e.handleFocus,required:!0,disabled:e.props.disabled})),p.createElement("label",{className:Ln()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!u.message}),htmlFor:r},t.label))})),!c&&u.message&&p.createElement(p.Fragment,null,p.createElement(Bn,{errorMessage:u.message})))}}]),n}(p.PureComponent);const cr=(0,g.$j)((function(){return{}}),(function(){return{}}))(lr);function pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var dr=function(e){(0,tn.Z)(n,e);var t=pr(n);function n(){var e;(0,St.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,sn.Z)(e)),e}return(0,Dt.Z)(n,[{key:"handleChange",value:function(e){this.props.isDisabled||this.props.onChange(e.target.checked)}},{key:"render",value:function(){var e="".concat(this.props.name,"-field"),t=Ln()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return p.createElement("div",{className:t},p.createElement("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),p.createElement("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}}))}}]),n}(p.PureComponent);function fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}dr.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange:function(){}};var gr=function(e){(0,tn.Z)(n,e);var t=fr(n);function n(e){var r;return(0,St.Z)(this,n),(r=t.call(this,e)).handleClick=r.handleClick.bind((0,sn.Z)(r)),r}return(0,Dt.Z)(n,[{key:"handleClick",value:function(e){if(e.target.getAttribute("data-action")){var t=e.target.getAttribute("data-action");"showSettings"===t?this.props.openSettingsPage():"showSignup"===t&&this.props.openSignupPage()}}},{key:"render",value:function(){var e=this.props.errorData,t=e?yn(e.errorCategory,e.errorCode,e.errorReference):null;return t?p.createElement("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message","data-testid":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick},p.createElement(pn.l,{iconSize:24}),p.createElement("span",{dangerouslySetInnerHTML:{__html:t}})):null}}]),n}(p.Component);const hr=(0,g.$j)((function(e){var t=e.app.mode;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(function(e){return{openSettingsPage:function(){return e(en.enterSettingsMode())},openSignupPage:function(){return e(en.openSignupPage())}}}))(gr);function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var vr=function(e){(0,tn.Z)(n,e);var t=mr(n);function n(e){var r;return(0,St.Z)(this,n),(r=t.call(this,e)).state={tosAgreed:!1,privacyAgreed:!1},r.handleTosChange=r.handleTosChange.bind((0,sn.Z)(r)),r.handlePrivacyChange=r.handlePrivacyChange.bind((0,sn.Z)(r)),r.handleTosAndPrivacyChange=r.handleTosAndPrivacyChange.bind((0,sn.Z)(r)),r.handleEulaChange=r.handleEulaChange.bind((0,sn.Z)(r)),r.eulaId=n.getNextId(),r}return(0,Dt.Z)(n,[{key:"handleTosChange",value:function(e){var t=this;this.setState({tosAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handlePrivacyChange",value:function(e){var t=this;this.setState({privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleTosAndPrivacyChange",value:function(e){var t=this;this.setState({tosAgreed:e,privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleEulaChange",value:function(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}},{key:"render",value:function(){var e=null,t='<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">'.concat(Nt.get("desktop.login.TermsAndConditions"),"</a>"),n='<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">'.concat(Nt.get("desktop.login.PrivacyPolicy"),"</a>"),r=Nt.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?p.createElement("div",null,!this.props.hideTermsAndConditions&&p.createElement("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:Nt.get("desktop.login.SignupAgree",r,t)}}),!this.props.hidePrivacyPolicy&&p.createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:Nt.get("desktop.login.PrivacyPolicyAgree",n)}})):this.props.restrictions.can_accept_licenses_in_one_step?p.createElement("div",{className:"SignupForm__checkbox-container"},p.createElement(dr,{"data-ta-id":"agree-eula",name:"agree-eula-".concat(this.eulaId),label:this.props.restrictions.specific_licenses?Nt.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,n):Nt.get("desktop.login.SignupAgreeCheckbox",t,n),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&p.createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:Nt.get("desktop.login.PrivacyPolicyAgree",n)}})):p.createElement("div",null,p.createElement("div",{className:"SignupForm__checkbox-container"},p.createElement(dr,{"data-ta-id":"agree-tos",name:"agree-tos-".concat(this.eulaId),label:Nt.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})),p.createElement("div",{className:"SignupForm__checkbox-container"},p.createElement(dr,{"data-ta-id":"agree-privacy",name:"agree-privacy-".concat(this.eulaId),label:Nt.get("desktop.login.PrivacyPolicyAgreeCheckbox",n),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled}))),p.createElement("div",{className:"EulaAgreement"},e,this.props.error&&p.createElement(p.Fragment,null,p.createElement(Bn,{errorMessage:this.props.error.message})))}}],[{key:"getNextId",value:function(){var e=(n.instanceCount||0)+1;return n.instanceCount=e,e}}]),n}(p.PureComponent);const yr=(0,g.$j)((function(){return{}}),(function(){return{}}))(vr);n(3650);function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var br=function(e){(0,tn.Z)(n,e);var t=Er(n);function n(){var e;(0,St.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,s.Z)((0,sn.Z)(e),"handleClick",(function(t){var n=e.props.method;t&&(t.preventDefault(),t.stopPropagation()),e.props.onClick(n)})),e}return(0,Dt.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.label,o=t.isDisabled,a=t.method,i=a.substr(0,1).toUpperCase()+a.substr(1),u=Ln()("button","SocialButton","".concat(i,"Button"),(e={},(0,s.Z)(e,"".concat(i,"Button--login"),"login"===n),(0,s.Z)(e,"".concat(i,"Button--signup"),"signup"===n),e));return p.createElement("button",{type:"button",className:u,onClick:this.handleClick,"data-ta-id":"".concat(a,"-").concat(n,"-button"),disabled:o},r)}}]),n}(p.PureComponent);function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Dr=function(e){(0,tn.Z)(n,e);var t=Sr(n);function n(e){var r;return(0,St.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,sn.Z)(r),"handleAgreeEulaChange",(function(e){var t=e?"checked":"unchecked";r.props.onInteraction("signup","click","eula-change-".concat(t)),r.setState({eulaAgreed:e,error:e?{}:r.state.error})})),(0,s.Z)((0,sn.Z)(r),"handleOnClick",(function(){var e,t=function(){return r.state.eulaAgreed||r.props.restrictions.pretick_eula||r.props.hideEula};t()?(e=r.props).onClick.apply(e,arguments):r.setState({error:{message:Nt.get("desktop.login.agreeEula.notAccepted")}})})),r.state={eulaAgreed:r.props.restrictions.pretick_eula,error:{}},r}return(0,Dt.Z)(n,[{key:"render",value:function(){return p.createElement("div",{className:"SignupFacebook"},p.createElement(br,{method:"facebook",isDisabled:this.props.isDisabled,onClick:this.handleOnClick,type:"signup",label:Nt.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:p.createElement(yr,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange}))}}]),n}(p.PureComponent);(0,s.Z)(Dr,"defaultProps",{isDisabled:!1,hideEula:!1});const wr=(0,g.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions}}),(function(e){return{onInteraction:function(t,n,r,o,a){return e(en.interaction(t,n,r,o,a))},onClick:function(t){var n=cn();e(en.signupWithAccounts(t,n)),e(en.interaction("signup","click","create-account-".concat(t),null,n))}}}),(function(e,t){return kr(kr(kr({},e),t),{},{onClick:function(e){t.onClick(e)}})}))(Dr);var Cr=function(e){var t=e.title;return p.createElement("p",{className:"FormTitleSeparator","aria-hidden":"true"},t)};Cr.defaultProps={title:""};const Or=Cr;function Fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Ar=function(e){(0,tn.Z)(n,e);var t=Fr(n);function n(e){var r;return(0,St.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,sn.Z)(r),"handleEmailValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validateEmail()})),(0,s.Z)((0,sn.Z)(r),"handleEmailFocus",(function(){r.props.onInteraction("signup","click","input-email")})),(0,s.Z)((0,sn.Z)(r),"handlePasswordValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validatePassword()})),(0,s.Z)((0,sn.Z)(r),"handlePasswordFocus",(function(){r.props.onInteraction("signup","click","input-password")})),(0,s.Z)((0,sn.Z)(r),"handleNameFocus",(function(){r.props.onInteraction("signup","click","input-name")})),(0,s.Z)((0,sn.Z)(r),"handleGenderOptionFocus",(function(e){r.props.onInteraction("signup","click","input-gender-".concat(e))})),(0,s.Z)((0,sn.Z)(r),"handleInputChange",(function(e){var t=e.target,n=t.name,o=t.value;r.props.updateData((0,s.Z)({},n,o)),r.setState({isEditing:!0})})),(0,s.Z)((0,sn.Z)(r),"handleBirthDateChange",(function(e){r.props.updateData({birthDate:e})})),(0,s.Z)((0,sn.Z)(r),"handleSendEmailChange",(function(e){r.props.updateData({sendEmail:e})})),(0,s.Z)((0,sn.Z)(r),"handleShareDataChange",(function(e){r.props.updateData({shareData:e})})),(0,s.Z)((0,sn.Z)(r),"handleAgreeEulaChange",(function(e){r.props.updateData({agreeEula:e})})),(0,s.Z)((0,sn.Z)(r),"handleSubmit",(function(e){e&&e.preventDefault();var t=r.props.step,n=cn();r.props.onInteraction("signup","click",0===t?"continue":"create-account",null,n),r.setState({isEditing:!1});var o=!0,a={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!r.props.errors&&Object.keys(r.props.errors).filter((function(e){return-1!==a[t].indexOf(e)})).some((function(e){return r.props.errors[e]&&r.props.errors[e].message}))&&(o=!1);var i=function(e){return function(t){r.props.data[t]||(r.props.onValidate(t,{code:e}),o=!1)}};switch(t){case 0:["email","password","name"].forEach(i("valueMissing"));break;case 1:var s=r.props.data.birthDate,u=s.day,l=s.month,c=s.year;c||r.props.onInteraction("signup","view","show-error-empty-year",null,n),l||r.props.onInteraction("signup","view","show-error-empty-month",null,n),u||r.props.onInteraction("signup","view","show-error-empty-date",null,n);var p=er(u,l,c,r.props.restrictions.minimum_age);p&&(r.props.onValidate("birthDate",{code:p}),o=!1),i("valueMissing")("gender"),i("notAccepted")("agreeEula")}if(o)switch(t){case 0:r.setStep(t+1);break;case 1:r.props.signup(n)}})),(0,s.Z)((0,sn.Z)(r),"handleBack",(function(){var e=r.props.step;r.props.onInteraction("signup","click","back-step-".concat(e+1)),r.props.clearAllErrors(),e<=0?r.props.enterWelcomeMode():r.setStep(e-1)})),(0,s.Z)((0,sn.Z)(r),"handleLogin",(function(){var e=cn();r.props.onInteraction("signup","click","open-page-login",null,e),r.props.enterLoginMode(e)})),(0,s.Z)((0,sn.Z)(r),"setStep",(function(e){switch(e){case 0:r.props.enterSignupModeStep0();break;case 1:r.props.enterSignupModeStep1()}})),r.state={isEditing:!0},r}return(0,Dt.Z)(n,[{key:"renderErrorMsg",value:function(){var e=this,t=Object.keys(this.props.errors).filter((function(t){return e.props.errors[t]&&e.props.errors[t].message}));return p.createElement("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive"},t.length>0?p.createElement("div",null,p.createElement("p",null,Nt.get("desktop.login.email.errorMessageA11y",t.length)),p.createElement("ul",null,t.map((function(t){return p.createElement("li",{key:t},e.props.errors[t].message)})))):null)}},{key:"renderStep0",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.isDisabled,a=t.onValidate;return p.createElement("div",null,p.createElement(Kn,{name:"email",type:"email",label:Nt.get("desktop.login.SignupEmail"),value:n.email,onChange:this.handleInputChange,isDisabled:o,error:r.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:Nn.B}),p.createElement(Kn,{name:"password",type:"password",label:Nt.get("desktop.login.CreateAPassword"),value:n.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:o,error:r.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:function(t){e.props.onInteraction("signup","click",t?"toggle-password-visibility-show":"toggle-password-visibility-hide")}}),p.createElement(Kn,{name:"name",label:Nt.get("desktop.login.SignupName"),value:n.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:o,error:r.name,onValidate:a,rightIcon:Rn.W,onFocus:this.handleNameFocus}))}},{key:"renderStep1",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.restrictions,a=t.isDisabled,i=t.onValidate,s=null;o.requires_marketing_opt_in_text?s=p.createElement("div",{className:"SignupForm__send-email-implicit"},Nt.get("desktop.login.SendEmailImplicitLabel")):o.requires_marketing_opt_in&&(s=p.createElement("div",{className:"SignupForm__checkbox-container"},p.createElement(dr,{name:"send-email",label:Nt.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:n.sendEmail,isDisabled:a})));var u=[{label:Nt.get("desktop.login.Female"),value:"female"},{label:Nt.get("desktop.login.Male"),value:"male"}];return o.use_all_genders&&u.push({label:Nt.get("desktop.login.NonBinary"),value:"neutral"}),p.createElement("div",null,p.createElement(ir,{name:"birth-date",label:Nt.get("desktop.login.WhatsYourSignupBirthDate"),value:n.birthDate,onChange:this.handleBirthDateChange,disabled:a,error:r.birthDate,onValidate:i,dateEndianness:o.date_endianness,minAge:o.minimum_age,autoFocus:!0,onFocus:function(){e.props.onInteraction("signup","click","input-birth-date")}}),p.createElement(cr,{showTitle:!0,name:"gender",label:Nt.get("desktop.login.WhatsYourSignupGender"),options:u,value:n.gender,onChange:this.handleInputChange,disabled:a,error:r.gender,onValidate:i,onOptionFocus:this.handleGenderOptionFocus}),s,p.createElement(yr,{restrictions:o,error:r.agreeEula,disabled:a,onChange:this.handleAgreeEulaChange}))}},{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.step;return p.createElement("form",{onSubmit:this.handleSubmit,className:"SignupForm"},this.renderErrorMsg(),p.createElement(hr,null),0===n?this.renderStep0():"",1===n?this.renderStep1():"",p.createElement(dn.D,{type:"submit",disabled:t,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit",fullWidth:!0},0===n?Nt.get("desktop.login.Continue"):Nt.get("desktop.login.SignupButton")),0===n&&p.createElement(p.Fragment,null,p.createElement(Or,{title:Nt.get("desktop.login.SignupOr")}),p.createElement(wr,null)),p.createElement(Zn.o,{onClick:this.handleBack},Nt.get("desktop.login.Back")),0===n&&p.createElement("h3",{className:"FooterFormText"},p.createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:Nt.get("desktop.login.AlreadyOnSpotifyLogin")}})))}}]),n}(p.PureComponent);(0,s.Z)(Ar,"defaultProps",{errors:{},data:{},step:0});const Pr=(0,g.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData}}),(function(e){return{signup:function(t){return e(en.signup(t))},enterLoginMode:function(){return e(en.enterLoginMode())},enterSignupModeStep0:function(){return e(en.enterSignupModeStep0())},enterSignupModeStep1:function(){return e(en.enterSignupModeStep1())},updateData:function(t){return e(en.updateSignupData(t))},validateEmail:function(){return e(en.validateField("email"))},validatePassword:function(){return e(en.validateField("password"))},enterWelcomeMode:function(){return e(en.enterWelcomeMode())},clearAllErrors:function(){return e(en.clearAllErrors())},onValidate:function(t,n){if(n){var r=n.code||n,o={birthDate:{incomplete:Nt.get("desktop.login.birthDate.incomplete"),invalid:Nt.get("desktop.login.birthDate.invalid")},password:{valueMissing:Nt.get("desktop.login.password.valueMissing"),tooShort:Nt.get("desktop.login.password.tooShort")},email:{valueMissing:Nt.get("desktop.login.email.valueMissing"),typeMismatch:Nt.get("desktop.login.email.typeMismatch")},name:{valueMissing:Nt.get("desktop.login.name.valueMissing")},gender:{valueMissing:Nt.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:Nt.get("desktop.login.agreeEula.notAccepted")}};e(en.validateFieldFailure(t,{code:r,message:o[t]&&o[t][r]||""}))}else e(en.validateFieldSuccess(t))},onInteraction:function(t,n,r,o,a){return e(en.interaction(t,n,r,o,a))}}}))(Ar);function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Ir=function(e){(0,tn.Z)(n,e);var t=Tr(n);function n(){return(0,St.Z)(this,n),t.apply(this,arguments)}return(0,Dt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.step;if(!e.restrictions)return p.createElement(an,{delay:2e3});var n=0===t?Nt.get("desktop.login.SignupHeroText"):Nt.get("desktop.login.SignupAlmostDone");return p.createElement("main",{className:"Signup","data-testid":"signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form"},p.createElement("h1",{className:"HeroText",id:"signup-form-title"},n),p.createElement(Pr,{step:t}))}}]),n}(p.PureComponent);const Nr=(0,g.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions}}))(Ir);n(3210);function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Zr=function(e){(0,tn.Z)(n,e);var t=Rr(n);function n(){var e;(0,St.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,sn.Z)(e)),e}return(0,Dt.Z)(n,[{key:"handleChange",value:function(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isDisabled,r=e.labelId,o=e.taId;return p.createElement("div",{className:Ln()("GlueToggle",{"GlueToggle--is-active":t,"GlueToggle--is-disabled":n})},p.createElement("input",{type:"checkbox",name:r,id:r,className:"glue-hidden-visually",onChange:this.handleChange,checked:t,disabled:n,"data-ta-id":o}),p.createElement("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true"},p.createElement("div",{className:"GlueToggle__toggle-inner"})))}}]),n}(p.PureComponent);function Mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}Zr.defaultProps={isActive:!1,isDisabled:!1,onChange:function(){}};var Lr=function(e){(0,tn.Z)(n,e);var t=Mr(n);function n(){return(0,St.Z)(this,n),t.apply(this,arguments)}return(0,Dt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,r=e.checked,o=e.disabled,a=e.onChange,i="".concat(t,"-field");return p.createElement("div",{className:"FormToggle"},p.createElement("label",{htmlFor:i,"data-ta-id":"remember-me-label"},n),p.createElement(Zr,{labelId:i,isActive:r,onChange:a,taId:"remember-me-slider",isDisabled:o}))}}]),n}(p.PureComponent);function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Ur=function(e){(0,tn.Z)(n,e);var t=xr(n);function n(e){var r;return(0,St.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,sn.Z)(r),"handleForgotPasswordLinkClick",(function(){r.props.onInteraction("login","click","reset-password")})),r.state={username:r.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((function(e){r[e]=r[e].bind((0,sn.Z)(r))})),r}return(0,Dt.Z)(n,[{key:"handleUsernameChange",value:function(e){var t=e.target;this.setState({username:t.value})}},{key:"handleUsernameFocus",value:function(){this.props.onInteraction("login","click","input-email")}},{key:"handlePasswordChange",value:function(e){var t=e.target;this.setState({password:t.value})}},{key:"handlePasswordFocus",value:function(){this.props.onInteraction("login","click","input-password")}},{key:"handleRememberMeChange",value:function(){this.setState({rememberMe:!this.state.rememberMe})}},{key:"handleSubmit",value:function(e){e&&e.preventDefault();var t=this.state.username.trim(),n=this.state,r=n.password,o=n.rememberMe,a=cn();this.props.onInteraction("login","click","login-email",null,a),t&&r?this.props.login({username:t,password:r,rememberMe:o},!1,a):t?r||this.props.onInteraction("login","view","show-error-empty-password",null,a):this.props.onInteraction("login","view","show-error-empty-email",null,a)}},{key:"render",value:function(){var e=this.props.isDisabled;return p.createElement("form",{onSubmit:this.handleSubmit},p.createElement("h3",{className:"glue-hidden-visually"},Nt.get("desktop.login.LoginWithEmailTitle")),p.createElement(hr,null),p.createElement(Kn,{name:"username",label:Nt.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:Nn.B}),p.createElement(Kn,{name:"password",type:"password",label:Nt.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),p.createElement("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick},Nt.get("desktop.login.forgotPassLink")),p.createElement(Lr,{name:"remember-me",label:Nt.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),p.createElement("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button"},Nt.get("desktop.login.LoginButton")))}}]),n}(p.PureComponent);const Br=(0,g.$j)((function(e){return{isDisabled:!!e.login.loginInProgress,username:e.login.username}}),(function(e){return{login:function(t,n,r){return e(en.login(t,n,r))},onInteraction:function(t,n,r,o,a){return e(en.interaction(t,n,r,o,a))}}}))(Ur);function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Vr=function(e){(0,tn.Z)(n,e);var t=Wr(n);function n(){return(0,St.Z)(this,n),t.apply(this,arguments)}return(0,Dt.Z)(n,[{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"handleSignup",value:function(){var e=cn();this.props.enterSignupMode(e),this.props.onInteraction("login","click","open-page-signup",null,e)}},{key:"getSignupLink",value:function(){var e=this;return p.createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignup()},"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:Nt.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"render",value:function(){var e=this.props.isDisabled;return p.createElement("main",{className:"Login","data-testid":"login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form"},p.createElement("h1",{className:"HeroText",id:"login-form-title"},Nt.get("desktop.login.LoginHeroText")),p.createElement(Br,null),p.createElement(Or,{title:Nt.get("desktop.login.SignupOr")}),p.createElement(br,{method:"facebook",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:Nt.get("desktop.login.ContinueWithFacebook")}),p.createElement(br,{method:"google",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:Nt.get("desktop.login.ContinueWithGoogle")}),p.createElement(br,{method:"apple",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:Nt.get("desktop.login.ContinueWithApple")}),p.createElement("h3",{className:"FooterFormText"},this.getSignupLink()))}}]),n}(p.PureComponent);const Hr=(0,g.$j)((function(e){return{isDisabled:!!e.login.loginInProgress}}),(function(e){return{enterSignupMode:function(t){return e(en.enterSignupMode(t))},onInteraction:function(t,n,r,o,a){return e(en.interaction(t,n,r,o,a))},onSocialButtonClick:function(t){var n=cn();e(en.loginWithAccounts(t,n)),e(en.interaction("login","click","login-".concat(t),null,n))},clearErrors:function(){return e(en.loginClearErrors())}}}),(function(e,t){return Gr(Gr(Gr({},e),t),{},{onSocialButtonClick:function(e){t.onSocialButtonClick(e)}})}))(Vr);function Kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Yr=function(e){(0,tn.Z)(n,e);var t=Kr(n);function n(){return(0,St.Z)(this,n),t.apply(this,arguments)}return(0,Dt.Z)(n,[{key:"render",value:function(){var e="signup"===this.props.operationUsed?Nt.get("desktop-auth.login.redirecting-to-browser-signup"):Nt.get("desktop-auth.login.redirecting-to-browser-login");return p.createElement("main",null,p.createElement("h1",{className:"HeroText __redirect"},e))}}]),n}(p.PureComponent);const qr=(0,g.$j)((function(e){return{operationUsed:e.experimentWebAuthReducer.operationUsed}}))(Yr);var zr=n(1206),Jr=n.n(zr);const $r="zrvvPyoxE6wQNqnu0yWA",Xr="jmu6DFPvhxRl0wSfmv2O";var Qr,eo=function(e){var t=e.value,n=e.id,r=e.children,o=e.disabled,a=e.onSelect,i=e.className,u=e.dir;return p.createElement("span",{className:i},p.createElement("select",{className:Ln()($r,(0,s.Z)({},Xr,"Safari"===Jr().parse(window.navigator.userAgent).browser.name)),value:null==t?void 0:t.toString(),id:n,disabled:o,onBlur:function(){},onChange:function(e){a(e.target.value)},dir:u},r))},to=((0,n(4671).Z)((function(e){return{lastFilterState:"",lastFilteredUri:"",setLastState:function(t,n){e({lastFilterState:t,lastFilteredUri:n})}}})),(0,p.createContext)({setFilter:function(){throw new Error("setFilter must be used within a FilterProvider")},filter:""}));n(3178);!function(e){e.UPDATE="update"}(Qr||(Qr={}));n(1817),n(2165),n(9753),n(7042),n(1038),n(4553);function no(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ro(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oo=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),ao=/[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,io=/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/,so=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/;function uo(e){return null!==e&&ao.test(e)}function lo(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||uo(e))}function co(e){return null!==e&&io.test(e)}function po(e){return null!==e&&so.test(e)}var fo=function(){function e(t,n,r){if((0,St.Z)(this,e),n<0||r<0||n+r>t.length)throw new RangeError;this.data=t,this.offset=n,this.length=r,this.position=0}return(0,Dt.Z)(e,[{key:"toString",value:function(){return this.data.slice(this.offset,this.offset+this.length).join("")}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t<0||n>this.length)throw new RangeError;var r=this.offset+t,o=n-t;return new e(this.data,r,o)}},{key:"nextCodePoint",value:function(){return this.position===this.length?null:this.data[this.offset+this.position++]}}],[{key:"from",value:function(t){var n=Array.from(t.normalize("NFC"));return new e(n,0,n.length)}}]),e}();function go(e){var t;do{t=e.nextCodePoint()}while(null!==t&&uo(t)||co(t));return t}function ho(e,t){var n=go(e),r=go(t);if(null===r)return{offset:0,length:0};for(var o=e.offset+e.position-1,a=e.offset+e.position;;){if(null===n&&null===r)return{offset:o,length:a-o};if(null===r)return{offset:o,length:a-o};if(null===n)return null;if(0!==oo.compare(n,r))return null;a=e.offset+e.position,n=go(e),r=go(t)}}function mo(e,t){var n,r,o;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&uo(n));if(null!=t&&t.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){var a=n;r=e.position;do{o=e.position,n=e.nextCodePoint()}while(null!==n&&n!==a);return null===n&&r===o?null:e.slice(r,o)}do{if(o=e.position,null!=t&&t.segmentCJKUnifieIdeographs&&po(n))break;n=e.nextCodePoint()}while(null!==n&&!lo(n));return null===n&&r===o?null:e.slice(r,o)}function vo(e){return mo(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function yo(e){return mo(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Eo(e,t){for(var n=[],r=yo(e);null!==r;r=yo(e)){var o=ho(r,t.slice());null===o?null===(o=ho(e.slice(r.offset),t.slice()))||n.push(o):n.push(o)}return n}function bo(e,t){return e.offset===t.offset&&e.length===t.length}var _o=function(e,t){return"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e){for(var t=fo.from(e),n=[],r=vo(t);null!==r;r=vo(t)){for(var o=[],a=0;a<(arguments.length<=1?0:arguments.length-1);++a){var i,s=a+1<1||arguments.length<=a+1?void 0:arguments[a+1],u=no(Eo(fo.from(s),r));try{for(u.s();!(i=u.n()).done;){var l=i.value;o.push({text:s,range:l})}}catch(e){u.e(e)}finally{u.f()}}if(0===o.length)return null;n.push.apply(n,(0,Ce.Z)(o.filter((function(e,t,n){return e.range.length>0&&n.findIndex((function(t){return bo(e.range,t.range)}))===t}))))}return n.length>0?n:null}(e,t):"boolean"!=typeof e||e},ko=(0,p.createContext)(void 0),So=function(e){var t=e.children,n=(0,p.useState)(!1),r=(0,mn.Z)(n,2),o=r[0],a=r[1],i=(0,p.useState)(!1),s=(0,mn.Z)(i,2),u=s[0],l=s[1];return p.createElement(ko.Provider,{value:{sectionMatch:o,setSectionMatch:a,sectionContainsMatch:u,setSectionContainsMatch:l}},t)};const Do="c6TyNYOUJRIsjYZJZofy";function wo(e){var t=e.children,n=e.filterMatchQuery,r=(0,p.useContext)(to).filter,o=function(){var e=(0,p.useContext)(ko);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e}(),a=o.setSectionMatch,i=o.sectionContainsMatch,s=_o(r,n);return(0,p.useEffect)((function(){a(s)}),[s,a]),s||i?p.createElement("div",{className:Do},t):null}function Co(e){return p.createElement(So,null,p.createElement(wo,e))}n(6541);var Oo=n(7763),Fo=n.n(Oo);const Ao="M0E2Al6URHV3iyoDbvi_";var Po=["searchWords","textToHighlight"];function To(e){var t=e.searchWords,n=e.textToHighlight,r=(0,we.Z)(e,Po);return 0===t.length||t.every((function(e){return!e}))?p.createElement(p.Fragment,null,n):p.createElement(Fo(),(0,Yn.Z)({highlightClassName:Ao,searchWords:t,textToHighlight:n},r))}function Io(e){var t=e.children,n=(0,p.useContext)(to).filter;return p.createElement(vn.D,{as:"h2",variant:"cello",semanticColor:"textBase"},p.createElement(To,{searchWords:[n],textToHighlight:t}))}var No=n(4257);const Ro="gvcgOXnAiNKEe_z92_lw";function Zo(e){var t=e.onClick;return p.createElement(No.P,{className:Ro,onClick:t},Nt.get("settings.restartApp"))}var Mo=n(8724);const Lo="mpdBa62OP4Fr5wvCsa89",xo="acVhMt5pELcXQyLaaPuV",Uo="AavUTirpKSAHapguSAy0",Bo="SkbGMKYv49KtJNB5XxdX",jo="qfjicQPaTTPrLWJWRxMQ";var Go=function(e){var t=e.id,n=e.type,r=e.placeHolder,o=e.inputRef,a=e.handleOnChange;return p.createElement("input",{type:n||"text",id:t,"data-testid":t,className:Bo,placeholder:r,ref:o,onChange:a})},Wo=function(e){var t=e.children,n=e.label;return p.createElement(Mo.c,{label:n,className:jo},t)},Vo=function(e,t,n){var r="".concat(e,":").concat(t);switch(n){case Rt:r+="@http";break;case Zt:r+="@socks4";break;case Mt:r+="@socks5"}return r},Ho=function(e){var t=e.addr,n=e.mode,r=e.pass,o=e.user,a=e.setValue,i=e.restartContainer,s=e.fullWidth,u=(0,p.useRef)(null),l=(0,p.useRef)(null),c=(0,p.useRef)(null),d=(0,p.useRef)(null),f=(0,p.useState)(""),g=(0,mn.Z)(f,2),h=g[0],m=g[1],v=(0,p.useState)(""),y=(0,mn.Z)(v,2),E=y[0],b=y[1],_=(0,p.useState)(!1),k=(0,mn.Z)(_,2),S=k[0],D=k[1];(0,p.useEffect)((function(){var e=(null==t?void 0:t.split(/[:@]+/))||["",""],n=(0,mn.Z)(e,2),r=n[0],o=n[1];m(r),b(o),u.current&&(u.current.value=r),l.current&&(l.current.value=o)}),[t]),(0,p.useEffect)((function(){d.current&&r&&(d.current.value=r.toString())}),[r]),(0,p.useEffect)((function(){c.current&&o&&(c.current.value=o.toString())}),[o]);var w=(0,p.useCallback)((function(e){var t=e.target,r=Vo(t.value,E,n||0);m(t.value),a("network.proxy.addr",r),D(!0)}),[n,E,a]),C=(0,p.useCallback)((function(e){var t=e.target,r=Vo(h,t.value,n||0);b(t.value),a("network.proxy.addr",r),D(!0)}),[n,h,a]),O=(0,p.useCallback)((function(e){var t=e.target;a("network.proxy.user",t.value),D(!0)}),[a]),F=(0,p.useCallback)((function(e){var t=e.target;a("network.proxy.pass",t.value),D(!0)}),[a]),A=0!==n&&1!==n,P=n!==Zt;return p.createElement(Co,{filterMatchQuery:Nt.get("desktop.settings.proxy.title")},p.createElement(Io,null,Nt.get("desktop.settings.proxy.title")),p.createElement("div",{className:Ln()(xo,s?Uo:null)},p.createElement(Wo,{label:Nt.get("desktop.settings.proxy.type")},p.createElement(eo,{id:"network.proxy.mode",value:n,onSelect:function(e){var t=parseInt(e,10);a("network.proxy.mode",t),D(!0)}},xt.map((function(e){var t=e.enumKey,n=e.enumValue;return p.createElement("option",{key:t,value:n,"data-testid":t},Lt[t]?Lt[t].label():"")})))),A?p.createElement(p.Fragment,null,p.createElement("div",{className:Lo},p.createElement(Wo,{label:Nt.get("desktop.settings.proxy.host")},p.createElement(Go,{id:"network.proxy.host",handleOnChange:w,placeHolder:Nt.get("desktop.settings.proxy.host"),inputRef:u})),p.createElement(Wo,{label:Nt.get("desktop.settings.proxy.port")},p.createElement(Go,{id:"network.proxy.port",type:"number",handleOnChange:C,placeHolder:Nt.get("desktop.settings.proxy.port"),inputRef:l}))),p.createElement("div",{className:P?Lo:void 0},p.createElement(Wo,{label:Nt.get("desktop.settings.proxy.user")},p.createElement(Go,{id:"network.proxy.user",handleOnChange:O,placeHolder:Nt.get("desktop.settings.proxy.user"),inputRef:c})),P?p.createElement(Wo,{label:Nt.get("desktop.settings.proxy.pass")},p.createElement(Go,{id:"network.proxy.pass",handleOnChange:F,placeHolder:Nt.get("desktop.settings.proxy.pass"),type:"password",inputRef:d})):null)):null,S&&p.createElement("div",null,p.createElement(Zo,{onClick:i}))))};function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yo=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const qo=(0,g.$j)((function(e){return{settings:{proxy:e.settings.proxy}}}),(function(e){return{fetchProxySettings:function(){e(en.fetchProxySettings())},updateProxySettings:function(t){e(en.updateProxySettings(t))},restartClient:function(){e(en.restartClient())}}}))((function(e){var t=e.settings,n=void 0===t?{proxy:{mode:0,address:"",username:"",password:""}}:t,r=e.fetchProxySettings,o=void 0===r?function(){}:r,a=e.updateProxySettings,i=void 0===a?function(){}:a,u=e.restartClient,l=void 0===u?function(){}:u;(0,p.useEffect)((function(){o()}),[o]);var c=(0,p.useCallback)((function(e,t){if(function(e){return!!Yo.includes(e)}(e)){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.proxy);switch(e){case"network.proxy.mode":r.mode=t;break;case"network.proxy.addr":r.address=t;break;case"network.proxy.user":r.username=t;break;case"network.proxy.pass":r.password=t}i(r)}return Promise.resolve()}),[n,i]);return p.createElement("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings"},p.createElement("h1",{className:"HeroText",id:"settings-form-title"},Nt.get("desktop.login.PreferencesLink")),p.createElement(Ho,{mode:n.proxy.mode,addr:n.proxy.address,user:n.proxy.username,pass:n.proxy.password,setValue:c,restartContainer:l,fullWidth:!0}))}));function zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Jo=function(e){(0,tn.Z)(n,e);var t=zo(n);function n(e){var r;return(0,St.Z)(this,n),(r=t.call(this,e)).handleSettingsClick=r.goToSettingsPage.bind((0,sn.Z)(r)),r.handleBackToLoginClick=r.handleBackToLoginClick.bind((0,sn.Z)(r)),r}return(0,Dt.Z)(n,[{key:"handleSignupClick",value:function(){var e=this.props,t=e.openSignupPage,n=e.onInteraction,r=cn();t(r),n("login/welcome","click","open-page-signup",null,r)}},{key:"handleBackToLoginClick",value:function(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}},{key:"goToSettingsPage",value:function(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}},{key:"renderPreferencesLink",value:function(){return p.createElement("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings"},Nt.get("desktop.login.PreferencesLink"))}},{key:"renderBackToLoginLink",value:function(){return p.createElement("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login"},Nt.get("desktop.login.Back"))}},{key:"renderTryAgain",value:function(){var e=this;return p.createElement(p.Fragment,null,p.createElement("span",null,Nt.get("desktop-auth.login.not-seeing-browser"))," ",p.createElement("a",{href:"#",onClick:function(){return e.props.tryAgainHandler()}},Nt.get("desktop-auth.login.try-again")))}},{key:"renderSignupLink",value:function(){var e=this;return p.createElement("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignupClick()},"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:Nt.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"renderRussiaLegalFormLink",value:function(){return p.createElement("div",null,p.createElement("a",{className:"Footer__link",href:"https://support.spotify.com/ru-ru/contact-spotify-legal-form/",target:"_blank",rel:"noopener"},"Форма для Ваших обращений"))}},{key:"renderMode",value:function(e,t){return"login"===e||"welcome"===e&&t?this.renderPreferencesLink():"settings"===e?this.renderBackToLoginLink():"open-browser"===e?this.renderTryAgain():"welcome"===e?this.renderSignupLink():null}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.country,r=e.isAuthOnWebEnabled;return p.createElement("footer",{className:"Footer",role:"contentinfo"},this.renderMode(t,r),"RU"===n&&this.renderRussiaLegalFormLink())}}]),n}(p.PureComponent);const $o=(0,g.$j)((function(e){var t;return{country:null===(t=e.signup.restrictions)||void 0===t?void 0:t.country}}),(function(e){return{tryAgainHandler:function(){e(en.abortLoginWithAccounts()),e(en.enterWelcomeMode())},openLoginPage:function(){e(en.enterLoginMode())},openSignupPage:function(t){return e(en.enterSignupMode(t))},openSettingsPage:function(){return e(en.enterSettingsMode())},onInteraction:function(t,n,r,o,a){return e(en.interaction(t,n,r,o,a))}}}))(Jo);function Xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var Qo=function(e){(0,tn.Z)(n,e);var t=Xo(n);function n(){return(0,St.Z)(this,n),t.apply(this,arguments)}return(0,Dt.Z)(n,[{key:"render",value:function(){return p.createElement("header",{className:"Header"},p.createElement("h1",{className:"glue-hidden-visually"},"Spotify"),p.createElement("img",{className:"Header__logo",src:"images/logo.svg",alt:""}))}}]),n}(p.PureComponent),ea=n(7723),ta=n(5989),na=n(7577),ra=(0,n(3578).JP)({name:"enableAuthOnWeb",description:"Property to enable experiment to use web authentication for Desktop application.",default:!1});function oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,rn.Z)(e);if(t){var o=(0,rn.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,nn.Z)(this,n)}}var aa=function(e){(0,tn.Z)(n,e);var t=oa(n);function n(){return(0,St.Z)(this,n),t.apply(this,arguments)}return(0,Dt.Z)(n,[{key:"renderFakeWebPlayer",value:function(){return p.createElement("div",{className:"fakeWebPlayer"},p.createElement("aside",null),p.createElement("footer",null,p.createElement("div",{className:"fakeWebPlayer__footer-left"}),p.createElement("div",{className:"fakeWebPlayer__footer-center"}),p.createElement("div",{className:"fakeWebPlayer__footer-right"})),p.createElement("main",null,p.createElement("div",{className:"fakeWebPlayer__content"})))}},{key:"renderMode",value:function(e,t,n,r){return"settings"===e?p.createElement(qo,null):n?p.createElement(In,{eventSender:r}):"welcome"===e?p.createElement(hn,null):"signup"===e?p.createElement(Nr,{step:t}):"login"===e?p.createElement(Hr,null):"open-browser"===e?p.createElement(qr,null):null}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.mode,r=e.loggedIn,o=e.previousMode,a=e.throbberDelay,i=e.signupStep,s=e.previousSignupStep,u=e.isAuthOnWebEnabled,l=e.eventSender;if(t||!n)return p.createElement(an,{delay:a});if(r)return null;var c=o?"__".concat(n," __").concat(o,"-to-").concat(n):"";return"signup"===n&&Number.isInteger(s)&&(c+=" __signup_step_".concat(s,"_to_").concat(i)),p.createElement("main",{className:"App",key:"main1","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":n},this.renderFakeWebPlayer(),p.createElement("div",{className:"App__content ".concat(c)},p.createElement(ta.Z,{mode:"in-out"},p.createElement(ea.Z,{timeout:{appear:0,enter:0,exit:650},key:c},p.createElement("div",{className:"App__modal ".concat(c)},p.createElement(Qo,null),this.renderMode(n,i,u,l),p.createElement($o,{mode:n,isAuthOnWebEnabled:u}))))))}}]),n}(p.Component);(0,s.Z)(aa,"defaultProps",{throbberDelay:0,transitionLeaveTimeout:0});var ia=(0,na.yS)({isAuthOnWebEnabled:ra});const sa=(0,g.$j)((function(e){return{mode:e.app.mode,previousMode:e.app.previousMode,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay}}))(ia(aa));var ua=n(7779),la=n(3894);const ca=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case en.START_APP:e.dispatch(en.fetchUTMParameters()),e.dispatch(en.getSignupRestrictions()),!W.getItem("lastUsername")?e.dispatch(en.enterWelcomeMode()):e.dispatch(en.enterLoginMode());break;case en.LOGIN_FAIL:var o=e.getState();if(n.loginType===en.LOGIN_TYPE_AUTOLOGIN){var a=o.app.mode;"welcome"===a?e.dispatch(en.enterWelcomeMode()):"login"===a?e.dispatch(en.enterLoginMode()):"signup"===a&&e.dispatch(en.enterSignupMode())}else{if("open-browser"===o.app.mode){var i=n.errorData,s=yn(i.errorCategory,i.errorCode,i.errorReference);"desktop_login_accounts"===i.errorCategory&&4===i.errorCode&&(s="signup"===o.experimentWebAuthReducer.operationUsed?Nt.get("desktop-auth.login.signup-time-out"):Nt.get("desktop-auth.login.login-time-out")),s?e.dispatch(en.enterWelcomeMode(s)):e.dispatch(en.enterWelcomeMode())}}break;case en.ENTER_SIGNUP_MODE:var u=e.getState().signup.restrictions;u?!1===u.is_country_launched&&e.dispatch(en.countryNotLaunched()):e.dispatch(en.getSignupRestrictions());break;case en.SIGNUP_RESTRICTIONS_SUCCESS:!1===n.restrictions.is_country_launched&&e.dispatch(en.countryNotLaunched());break;case en.SIGNUP_FAILURE:(n.errors.email||n.errors.password||n.errors.displayname)&&e.dispatch(en.enterSignupModeStep0());break;case en.COUNTRY_NOT_LAUNCHED:e.dispatch(en.openSignupPage(!0))}return r}}};function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const da=function(e){var t=new Tn(e);return function(){return function(e){return function(n){var r=e(n);switch(n.type){case en.ENTER_LOGIN_MODE:t.logPageView({page:"login"});break;case en.LOGIN_SUCCESS:n.loginType===en.LOGIN_TYPE_EMAIL?t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-email"}):n.loginType===en.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-facebook"});break;case en.LOGIN_FAIL:n.loginType===en.LOGIN_TYPE_EMAIL?n.errorData&&3===n.errorData.errorCode&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-invalid-credential"}):n.loginType===en.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-login-facebook"});break;case en.ENTER_SIGNUP_MODE:t.logPageView({page:"signup"});break;case en.ENTER_SIGNUP_MODE_STEP_0:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case en.ENTER_SIGNUP_MODE_STEP_1:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case en.SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case en.SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:n.errors&&Object.keys(n.errors).join("|")});break;case en.FACEBOOK_SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case en.FACEBOOK_SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:n.errorData&&"".concat(n.errorData.errorCode," - ").concat(n.errorData.errorDescription)});break;case en.ENTER_WELCOME_MODE:t.logPageView({page:"login/welcome"});break;case en.ENTER_SETTINGS_MODE:t.logPageView({page:"login/settings"});break;case en.INTERACTION:t.logAction({page:n.page,action_type:n.interactionType,action_intent:n.intent,item_id:n.itemId,action_hash:n.actionHash});break;case en.VALIDATE_FIELD_FAILURE:if(n.error){var o=n.field,a=n.error.code,i=null,u=null;"valueMissing"===a?i="show-error-empty-".concat(o):["incomplete","invalid","typeMismatch","tooShort"].includes(a)?i="show-error-format-".concat(o):(i="show-error-".concat(o),u=n.error.message||""),null!==i&&t.logAction(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({page:"signup",action_type:"view",action_intent:i},u?{item_id:u}:{}))}}return r}}}},fa=function(e){window.location.href=e},ga=function(){return function(e){return function(t){var n,r=e(t);return t.redirectTo?("xpui"!==t.redirectTo||(n="spotify:app:xpui",t.redirectDelay?setTimeout((function(){fa(n)}),t.redirectDelay):fa(n)),r):r}}};function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var va={errorMessage:null};const ya=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case en.ENTER_SIGNUP_MODE:return ma(ma({},t),{},{previousMode:t.mode,mode:"signup"});case en.ENTER_LOGIN_MODE:case en.COUNTRY_NOT_LAUNCHED:return ma(ma({},t),{},{previousMode:t.mode,mode:"login"});case en.ENTER_WELCOME_MODE:return ma(ma({},t),{},{previousMode:t.mode,mode:"welcome",errorMessage:null!==(e=n.errorMessage)&&void 0!==e?e:null});case en.ENTER_SETTINGS_MODE:return ma(ma({},t),{},{previousMode:t.mode,mode:"settings"});default:return t}};function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _a(e){return e.type===en.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}var ka={proxy:{mode:0,address:"",username:"",password:""}};const Sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka,t=arguments.length>1?arguments[1]:void 0;return _a(t)?ba(ba({},e),{},{proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}):e};function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ca={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case en.ENTER_SIGNUP_MODE_STEP_0:return wa(wa({},e),{},{previousStep:e.step,step:0});case en.ENTER_SIGNUP_MODE_STEP_1:return wa(wa({},e),{},{previousStep:e.step,step:1});case en.SIGNUP_RESTRICTIONS_SUCCESS:return wa(wa({},e),{},{formData:wa(wa({},e.formData),{},{sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula}),restrictions:t.restrictions});case en.SIGNUP_RESTRICTIONS_FAILURE:return wa(wa({},e),{},{errorData:t.error});case en.SIGNUP_ATTEMPT:return wa(wa({},e),{},{isAttempting:!0,errorData:null});case en.SIGNUP_SUCCESS:return wa(wa({},e),{},{isAttempting:!0,isSuccessful:!0,errorData:null});case en.SIGNUP_FAILURE:return wa(wa({},e),{},{isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null});case en.FACEBOOK_SIGNUP_ATTEMPT:return wa(wa({},e),{},{errorData:null,errors:{}});case en.FACEBOOK_SIGNUP_FAILURE:return wa(wa({},e),{},{errorData:t.errorData});case en.VALIDATE_FIELD_ATTEMPT:return wa(wa({},e),{},{errors:wa(wa({},e.errors),{},(0,s.Z)({},t.field,void 0))});case en.VALIDATE_FIELD_FAILURE:return wa(wa({},e),{},{errors:wa(wa({},e.errors),{},(0,s.Z)({},t.field,t.error)),validated:wa(wa({},e.validated),{},(0,s.Z)({},t.field,!1))});case en.VALIDATE_FIELD_SUCCESS:return wa(wa({},e),{},{errors:wa(wa({},e.errors),{},(0,s.Z)({},t.field,void 0)),validated:wa(wa({},e.validated),{},(0,s.Z)({},t.field,!0))});case en.UPDATE_SIGNUP_DATA:for(var n={},r=0,o=Object.keys(t.data);r<o.length;r++){var a=o[r];n[a]=void 0}return wa(wa({},e),{},{errors:wa(wa({},e.errors),n),formData:wa(wa({},e.formData),t.data)});case en.CLEAR_ALL_ERRORS:return wa(wa({},e),{},{errors:{}});default:return e}};function Fa(e){var t=(0,ua.MT)((0,ua.UY)({app:ya,login:X,settings:Sa,signup:Oa}),void 0,(0,ua.md)(la.Z,ca,da(e),ga));return t.subscribe((function(){var e=t.getState();e.login.username&&localStorage.setItem(K,e.login.username),e.login.utmParameters&&localStorage.setItem(q,JSON.stringify(e.login.utmParameters))})),t}var Aa=n(2585),Pa=n(5959);function Ta(e){e}function Ia(){var e=(0,Pa.qy)({providers:{endpoints:(0,Pa.uG)(),token:function(){return null}}});return e.connect(),e}var Na=n(1076),Ra=n(8984),Za=function(e,t,n){var r=e.event_sender_context_information,o=[(0,Ra.UR)({version:r.client_version_string}),(0,Ra.jx)(n),(0,Ra.IE)(r.installation_id),(0,Ra.Hv)({name:r.platform_type,version:r.os_version}),(0,Ra.yD)({manufacturer:r.device_manufacturer||"",model:r.device_model||""})];return(0,Na.mi)({transport:t,suppressPersist:false,context:o})},Ma=["children"],La=function(e){var t=e.children,n=(0,we.Z)(e,Ma);return"undefined"==typeof window?p.createElement(p.Fragment,null,t):p.createElement(p.Suspense,(0,Yn.Z)({children:t},n))},xa=n(4492);function Ua(){return(Ua=(0,u.Z)(c().mark((function e(){var t,n,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=[window.__spotify.locale,Et.en];case 1:if(!(t<n.length)){e.next=18;break}return r=n[t],e.prev=3,e.next=6,fetch("i18n/".concat(r,".json")).then((function(e){return e.json()}));case 6:return o=e.sent,Nt.setLocale(r),Nt.setDictionary(o),e.abrupt("return");case 12:e.prev=12,e.t0=e.catch(3);case 15:t++,e.next=1;break;case 18:throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.");case 19:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}function Ba(){return(Ba=(0,u.Z)(c().mark((function e(){var t,n,r,o,a,i,u,l,v,y,E;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ta(n=Ia()),r=Za(window.__spotify,n,"65b708073fc0480ea92a077233ca87bd"),o=Fa(r),m.attach(),m.update(),h.attach(),a=document.location.search,i=new RegExp("\\?param=error-code\\".concat(encodeURIComponent("="),"([0-9]+)"),"i"),window.addEventListener("message",(function(e){"critical-update-error"===e.data&&o.dispatch(en.loginFailed({errorCode:e.data}))})),u=a.match(i),a&&u&&(l=+u[1],o.dispatch(en.loginFailed({errorCode:l}))),v="linux",window.navigator.platform.startsWith("Mac")&&(v="mac"),window.navigator.platform.startsWith("Win")&&(v="windows"),document.body.classList.add("body-container--".concat(v)),d.render(p.createElement(f.zj,null,p.createElement(g.zt,{store:o},p.createElement(na.nD,{resolver:xa.L,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:n,eventSender:r}},p.createElement(La,{fallback:null},p.createElement(sa,{eventSender:r}))))),document.getElementById("main")),o.dispatch(en.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),t={},(0,s.Z)(t,Aa.PLATFORM_UNKNOWN,"body-container--unknown-os"),(0,s.Z)(t,Aa.PLATFORM_MAC,"body-container--mac"),(0,s.Z)(t,Aa.PLATFORM_WINDOWS,"body-container--windows"),y=t,E=(0,Aa.getPlatform)(),document.body.classList.add(y[E]);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return Ua.apply(this,arguments)})().then((function(){return Ba.apply(this,arguments)}))},2585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM_MAC:()=>o,PLATFORM_UNKNOWN:()=>r,PLATFORM_WINDOWS:()=>a,getPlatform:()=>u,isMac:()=>i,isWindows:()=>s});n(2526),n(1817),n(1539),n(3157);var r=Symbol("PLATFORM_UNKNOWN"),o=Symbol("PLATFORM_MAC"),a=Symbol("PLATFORM_WINDOWS");function i(){return window.navigator.platform.startsWith("Mac")}function s(){return window.navigator.platform.startsWith("Win")}function u(){return i()?o:s()?a:r}},2976:(e,t)=>{var n=!1;t.update=function(){},t.attach=function(){if(!n){n=!0;var e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)}},t.detach=function(){n&&(n=!1,document.documentElement.removeAttribute("lang"))}},685:(e,t,n)=>{var r,o=n(319),a=n(9713);n(9554),n(1539),n(4747),n(6699),n(8702),n(2222),n(2564),n(8309);var i=n(2585),s=i.getPlatform,u=i.PLATFORM_UNKNOWN,l=i.PLATFORM_MAC,c=i.PLATFORM_WINDOWS,p=!1,d="always-visible",f=0,g=(a(r={},u,"linux"),a(r,l,"mac"),a(r,c,"windows"),r),h=g[u];function m(){var e=o(document.querySelectorAll("*")),t=[],n=["scroll","auto","overlay"];e.forEach((function(e){var r=window.getComputedStyle(e),o=r.overflowX,a=r.overflowY;n.includes(o)&&t.push({node:e,property:"overflow-x"}),n.includes(a)&&t.push({node:e,property:"overflow-y"})}));var r=document.createElement("style");r.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();var a="data-scrollbar-fix-".concat(++f,"-id"),i=0;t.forEach((function(e){var t=e.node,n=e.property;if(t!==document.body){var o=++i;t.setAttribute(a,o),r.innerHTML+="\n    [".concat(a,'="').concat(o,'"] { ').concat(n,": hidden !important; }")}})),document.head.appendChild(r),setTimeout((function(){document.head.removeChild(r),t.forEach((function(e){e.node.removeAttribute(a)}))}),0)}t.performScrollBarFix=m,t.update=function(){},t.attach=function(){if(!p){p=!0;var e=window.__spotify&&window.__spotify.scroller_style;d="overlay"===e?"overlay":"always-visible";var t=s();h=g[t],"always-visible"===d||"mac"!==h?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add("scrollbar-style-visible-".concat(h))):(document.body.classList.remove("scrollbar-style-visible-".concat(h)),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(function(e){"set_active"===e.data.name&&e.data.active&&m()}))}},t.detach=function(){p&&(p=!1,f=0)}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}r.m=t,r.amdO={},e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,o,a]=e[c],s=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,a<i&&(i=a));if(s){e.splice(c--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={535:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,s,u]=n,l=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var c=u(r)}for(t&&t(n);l<i.length;l++)a=i[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[569],(()=>r(8249)));o=r.O(o)})();
//# sourceMappingURL=login.js.map