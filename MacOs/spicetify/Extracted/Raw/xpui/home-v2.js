"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7704],{81791:(e,t,n)=>{n.r(t),n.d(t,{SKELETON_CARDS_COUNT:()=>At,SKELETON_SHELVES_COUNT:()=>Ut,SKELETON_SHORTCUTS_COUNT:()=>It,default:()=>Mt});var r=n(93433),a=(n(21249),n(66992),n(41539),n(33948),n(67294)),l=n(94184),c=n.n(l),i=n(73526),o=n(96206),u=n(70369),s=n(29439),m=(n(47042),n(22247)),d=n(71002),f=(n(68309),n(57327),n(92222),n(50114)),v=n(69559),E=n(27937),g=n(42781),p=n(4236),h=n(13218),y=n(70296),C=n(87462),S=(n(83710),n(69518)),b=n.n(S),N=n(24524),k=n(86250),T=n(39278),P=n(61251),O=n(18261),L=n(4232),_=n(80507),w=n(25988),x=n(35410),Z=n(86514),B=n(97081),I=n(20006),U=n(26482),A=n(19986),D=n(52759),R=n(69691);const M="view-homeShortcutsGrid-shortcuts",j="view-homeShortcutsGrid-grid",F="view-homeShortcutsGrid-shortcutLink",H="view-homeShortcutsGrid-shortcut",z="view-homeShortcutsGrid-draggable",G="view-homeShortcutsGrid-imageContainer",W="view-homeShortcutsGrid-imageWrapper",q="view-homeShortcutsGrid-image",K="view-homeShortcutsGrid-main",V="view-homeShortcutsGrid-nameWrapper",J="view-homeShortcutsGrid-name",Y="EzRmGRncgnv1zFgF4dqE",X="bPmmKmSPLKMhtJSaUJRX",Q="vpQWUBWS_lXRLZMRJT7w",$="GSv7K805J9Jw7LB9tn2A",ee="view-homeShortcutsGrid-PlayButtonContainer",te="s9c9x_mJq197U2hBzGtV";var ne=a.memo((function(e){var t,n,r,l=e.item,c=(0,A._)(l.uri),i=null!==(t=l.duration_ms)&&void 0!==t?t:0,o=(0,R.$o)(l.uri),u=o.isPlaying,m=o.isActive,d=(0,D.z)(1e4,(function(e){var t;return(null===(t=e.item)||void 0===t?void 0:t.uri)===l.uri})),f=(0,s.Z)(d,1)[0],v=null!==(n=null===(r=l.resume_point)||void 0===r?void 0:r.resume_position_ms)&&void 0!==n?n:0,E=u||m?f:v,g=Math.round(100/(i/E)),p=c===U.Om.YES,h=i&&E>0;return p||h?a.createElement("div",{className:Q},p?a.createElement(B.E,{iconSize:16,semanticColor:"textSubdued"}):null,h?a.createElement(I.k,{className:$,value:g,semanticColor:"essentialBase"}):null):null})),re=n(4942),ae=n(51615),le=n(32667),ce=n(43864),ie=n(82627),oe=n(91355),ue=n(84242),se=n(15852),me=n(57784),de=n(56802),fe=n(67892),ve=n(89104),Ee=n(49961),ge=a.memo((function(e){var t=e.images,n=void 0===t?[]:t,r=e.fallbackIcon,l=void 0===r?N.U:r,c=(0,Ee.X)(n);return a.createElement("div",{className:G},a.createElement("div",{className:W},a.createElement(ve.E,{className:q,src:null==c?void 0:c.url,loading:"lazy",testid:"shortcut-image"},a.createElement(l,{"aria-hidden":!0}))))})),pe=a.memo((function(e){var t,n,r=e.index,l=e.item,i=e.fallbackIcon,o=e.showPlayButton,u=e.extraContent,s=e.onContextMenu,m=void 0===s?function(){}:s,d=e.onTouchStart,f=void 0===d?function(){}:d,v=e.onTouchEnd,E=void 0===v?function(){}:v,g=(0,ae.k6)(),p=(0,de.o)(),h=(0,y.WQ)(),C=h.setColorFromUri,S=h.resetColor,N=h.clearColor,k=(0,oe.G3)(l.uri,l.release_date,null===(t=l.resume_point)||void 0===t?void 0:t.resume_position_ms,null===(n=l.resume_point)||void 0===n?void 0:n.fully_played),T=(0,se.fU)(ce.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:r,uri:l.uri}}),P=T.spec,O=T.logger,L=(0,ue.n)({uri:l.uri},{featureIdentifier:"home",referrerIdentifier:"home"}),_=L.isPlaying,w=L.isActive,x=L.togglePlay;var Z=(0,a.useCallback)((function(){p({targetUri:l.uri,intent:"navigate",type:"click"});var e=P.hitUiNavigate({destination:l.uri});O.logInteraction(e),g.push(b().from(l.uri).toURLPath(!0))}),[g,l.uri,O,p,P]),B=(0,a.useCallback)((function(){C(l.uri)}),[l.uri,C]);(0,a.useEffect)((function(){return function(){N()}}),[N]);var I=(0,se.Wi)(P),U=(0,me.O1)([l.uri],l.name);return a.createElement("div",{ref:I,className:H,onContextMenu:m,onTouchStart:f,onTouchEnd:E,onMouseEnter:B,onMouseLeave:S},a.createElement("div",{className:z,onDragStart:U},a.createElement(ge,{images:l.images,fallbackIcon:i}),a.createElement("div",{className:K},a.createElement("div",{className:V},a.createElement("div",{className:J},k&&a.createElement(oe.Rd,{className:X}),a.createElement(fe.r,{to:l.uri,onClick:Z,title:l.name},a.createElement(le.D,{as:"p",variant:"balladBold",className:Y},l.name))),u||null),o&&a.createElement("div",{className:c()(ee,(0,re.Z)({},te,_))},a.createElement(ie.f,{isPlaying:_,onClick:function(){p({targetUri:l.uri,intent:_?"pause":"play",type:"click"});var e,t=P.playButtonFactory();e=_?t.hitPause({itemToBePaused:l.uri}):w?t.hitResume({itemToBeResumed:l.uri}):t.hitPlay({itemToBePlayed:l.uri});var n=O.logInteraction(e);x({loggingParams:n})}}))),a.createElement("div",{onClick:Z,className:F})))})),he=a.memo((function(e){return b().isCollection(e.item.uri)?a.createElement(pe,(0,C.Z)({},e,{fallbackIcon:N.U})):a.createElement(O._,{menu:a.createElement(x.X,{uri:e.item.uri})},a.createElement(pe,(0,C.Z)({},e,{fallbackIcon:N.U})))})),ye=a.memo((function(e){return a.createElement(O._,{menu:a.createElement(L.Y,{uri:e.item.uri})},a.createElement(pe,(0,C.Z)({},e,{fallbackIcon:k.c})))})),Ce=a.memo((function(e){return a.createElement(O._,{menu:a.createElement(_.m,{uri:e.item.uri})},a.createElement(pe,(0,C.Z)({},e,{fallbackIcon:T.a})))})),Se=a.memo((function(e){return a.createElement(O._,{menu:a.createElement(Z.M,{uri:e.item.uri})},a.createElement(pe,(0,C.Z)({},e,{fallbackIcon:P.J,showPlayButton:!1})))})),be=a.memo((function(e){return a.createElement(O._,{menu:a.createElement(w.k,{uri:e.item.uri})},a.createElement(pe,(0,C.Z)({},e,{fallbackIcon:P.J,extraContent:a.createElement(ne,e)})))}));n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070);var Ne=n(11436),ke=n(49068);const Te="J6UEDIqMSJhYlwGoeUZB",Pe="ZjFf4lVC48DSryAjP9qB";function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,re.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=a.memo((function(e){var t=(0,ke.x)(),n=Le(Le({},e.item),t);return a.createElement(pe,(0,C.Z)({},e,{item:n,fallbackIcon:function(){return a.createElement("div",{className:Te},a.createElement(Ne.P,{iconSize:32,className:Pe}))}}))})),we=24,xe=270;function Ze(e){if(null===e)return{cssProperties:{"--min-column-width":"".concat(xe,"px"),"--item-height":"".concat(80,"px"),"--column-gap":"".concat(we,"px"),"--row-gap":"".concat(16,"px")},showPlayButton:!0};var t=e.offsetWidth,n=t<600?200:xe,r=Math.min(Math.floor((t+we)/(n+we)),3),a=t>=858?80:64,l=64===a?12:16,c=(t-(r-1)*we)/r>=xe;return{cssProperties:{"--min-column-width":"".concat(n,"px"),"--item-height":"".concat(a,"px"),"--column-gap":"".concat(we,"px"),"--row-gap":"".concat(l,"px")},showPlayButton:c}}function Be(){var e=(0,a.useRef)(null),t=(0,a.useState)(Ze(null)),n=(0,s.Z)(t,2),r=n[0],l=n[1],c=(0,a.useCallback)((function(){null!==e.current&&l(Ze(e.current))}),[]),i=(0,a.useCallback)((function(t){e.current=t,c()}),[c]);return(0,v.a)((function(){return c()})),[r,i]}var Ie=a.memo((function(e){var t,n,r=e.title,l=e.tagline,c=e.items,i=(0,y.WQ)().fetchMultipleColors,u=!(0,p.k)(),m=null!=r?r:(t=(new Date).getHours(),n=o.ag.get("home.evening"),t>=5&&t<12?n=o.ag.get("home.morning"):t>=12&&t<18&&(n=o.ag.get("home.afternoon")),n),f=Be(),v=(0,s.Z)(f,2),E=v[0],C=v[1];return(0,a.useEffect)((function(){var e=(null==c?void 0:c.map(y.lh))||[];i(e)}),[c,i]),u||null==c||!c.length?null:a.createElement("section",{className:M,"aria-label":m,ref:C},a.createElement(h.r,{title:m,titleVariant:"alto",tagline:l}),a.createElement("div",{className:j,style:E.cssProperties},c.filter((function(e,t){return t<6})).map((function(e,t){if(function(e){if(null!==e&&"object"===(0,d.Z)(e)){var t=e,n=t.type,r=t.name;return n===g.p.YOUR_EPISODES&&"string"==typeof r}return!1}(e))return a.createElement(_e,{index:t,key:"".concat(t,"-").concat(e.uri),item:e,showPlayButton:E.showPlayButton,shouldSetBackgroundColor:0===t});var n=function(e){var t=(b().from(e)||{}).type;switch(t){case b().Type.ARTIST:return Ce;case b().Type.ALBUM:case b().Type.COLLECTION_ALBUM:return ye;case b().Type.PLAYLIST:case b().Type.PLAYLIST_V2:return he;case b().Type.SHOW:return Se;case b().Type.EPISODE:return be;case b().Type.COLLECTION:return he;default:return console.warn("Unable to resolve entity shortcut from ".concat(e,' of type "').concat(t||"unknown",'"')),Se}}(e.uri);return a.createElement(n,{index:t,key:"".concat(t,"-").concat(e.uri),item:e,showPlayButton:E.showPlayButton,shouldSetBackgroundColor:0===t})}))))})),Ue=(0,f.P)(Ie,(function(){return null}),(function(e){return(0,E.vK)(e,"HomeShortcutsGrid")})),Ae=n(96001);const De="zUf7jtv9GPOKC1jYO5TO",Re="T8QLel3PoQTgJUpGYj7Q";var Me=a.memo((function(e){var t=e.isLoading,n=(0,Ae.h)("shimmer");return a.createElement("div",{className:G},a.createElement("div",{ref:n,className:c()(W,(0,re.Z)({},Re,t))}))})),je=a.memo((function(e){var t=e.isLoading;return a.createElement("div",{className:c()(H,De),"data-testid":"skeleton-shortcut"},a.createElement("div",{className:z},a.createElement(Me,{isLoading:t}),a.createElement("div",{className:K},a.createElement(m.C,{as:"p",variant:"balladBold",className:Y,isLoading:t}))))}));const Fe="v7dc5ekmeBiAYnLzV8oT";var He=a.memo((function(e){var t=e.shortcutCount,n=Be(),l=(0,s.Z)(n,2),c=l[0],i=l[1];return a.createElement("section",{className:M,ref:i},a.createElement(m.C,{as:"h2",variant:"alto",className:Fe,charCount:25,isLoading:!0}),a.createElement("div",{className:j,style:c.cssProperties},(0,r.Z)(new Array(t).keys()).slice(0,6).map((function(e,t){return a.createElement(je,{key:t,isLoading:!0})}))))})),ze=n(6158),Ge=n(13983),We=n(87577),qe=n(49207),Ke=n(28638),Ve=n(62572),Je=function(){return(0,We.W6)(qe.Jw)===qe.pF.ONHOME?a.createElement(Ke.w,null,a.createElement(Ve.M,{onSearch:!1})):null},Ye=n(81993),Xe=n(29393),Qe=n(38470),$e=n(86868),et=n(45987),tt=(n(79753),n(48817)),nt=n(86706),rt=n(24697),at=n(98197),lt=n(86604),ct=n(8716);const it="pdLDCowVOiUIfeu9hihi",ot="yuNKB15IIjFkFJbXil2H",ut="zjhp3VC76BipaXjVHuGx",st="ge8K7iQqLE77g0FDGfDn",mt="iqDYHLUedgX8y1eM1zep";var dt=function(e){var t=e.scrollNode,n=(0,a.useState)((function(){return vt(t)})),r=(0,s.Z)(n,2),l=r[0],c=r[1],i=(0,nt.v9)((function(e){var t,n;return null!==(t=e.ui)&&void 0!==t&&null!==(n=t.textDirection)&&void 0!==n&&n.isRTL?"rtl":"ltr"})),u=(0,rt.y1)((function(){return c(vt(t))}),50);return(0,a.useEffect)((function(){var e=t.current;return null==e||e.addEventListener("scroll",u),function(){null==e||e.removeEventListener("scroll",u)}}),[u,t]),a.createElement(a.Fragment,null,a.createElement(ct.E,{disabled:!l.canScrollLeft,size:"sm",onClick:function(){return ft(t,"left",i)},icon:at.e,ariaLabel:o.ag.get("carousel.left"),tabIndex:-1,className:mt}),a.createElement(ct.E,{disabled:!l.canScrollRight,size:"sm",onClick:function(){return ft(t,"right",i)},icon:lt.V,ariaLabel:o.ag.get("carousel.right"),tabIndex:-1,className:mt}))};function ft(e,t,n){var r,a="left"===t?-1:1;"rtl"===n&&(a*=-1),null===(r=e.current)||void 0===r||r.scrollBy({top:0,left:a})}function vt(e){var t=!1,n=!1;if(e.current){var r=e.current,a=r.scrollLeft,l=r.offsetWidth,c=r.scrollWidth,i=Math.abs(a);t=i>0,n=i+l<c}return{canScrollLeft:t,canScrollRight:n}}var Et=n(36522),gt=a.memo((function(e){var t=e.children,n=e.title,r=e.seeAllUri,l=e.pageId,i=e.total,o=e.onClickShelfTitle,u=e.onClickShelfSeeAll,m=e.elementRef,d=(0,a.useRef)(null),f=(0,a.useState)(0),v=(0,s.Z)(f,2),E=v[0],g=v[1],p=(0,a.useCallback)((function(e){return e>0?t:null}),[t]),y=(0,a.useCallback)((function(e){var t=e.columnCount;g(t)}),[]);if(!Array.isArray(t)||0===t.length)return null;var C=i>t.length,S=t.length>E&&E>0,b={"--carousel-number-of-items":t.length};return a.createElement("section",{ref:m,style:b,className:Et.Z.shelf,"aria-label":n},a.createElement("div",{className:c()(Et.Z.header,ot)},a.createElement(h.r,{title:n,seeAllUri:r,pageId:l,hasMoreElements:C,onClickTitle:o,onClickSeeAll:u,className:ut}),S&&a.createElement("div",{className:st},a.createElement(dt,{scrollNode:d}))),a.createElement(tt.T,{className:c()(Et.Z.shelfGrid,it),render:p,onLayoutChange:y,ref:d}))}));gt.displayName="BaseCarouselShelf";var pt=(0,f.P)(gt,(function(){return null}),(function(e){return(0,E.vK)(e,"Carousel")}));pt.displayName="Carousel";var ht=n(98624),yt=["index","id"],Ct=function(e){var t=e.index,n=e.id,r=(0,et.Z)(e,yt),l=r.seeAllUri,c=(0,ht.e)({seeAllUri:l,index:t,id:n}),i=c.onClickShelfTitle,o=c.onClickShelfSeeAll,u=c.elementRef,s=c.UBIWrapper;return a.createElement(s,null,a.createElement(pt,(0,C.Z)({},r,{onClickShelfTitle:i,onClickShelfSeeAll:o,elementRef:u})))},St=n(18686),bt=n(30343),Nt=function(e){var t,n,r=e.spec,l=e.section,c=e.index,i=(0,We.W6)(qe.ty,{loadingValue:!1})?Ct:St.q;return a.createElement(se.Nh,{spec:r.shelvesFactory()},a.createElement(i,{total:l.sectionItems.totalCount,seeAllUri:l.uri,pageId:l.uri,title:null!==(t=null===(n=l.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:"",index:c,id:l.uri},l.sectionItems.items.map(bt.x)))},kt=n(56607),Tt=function(e){var t,n,r=e.spec,l=e.section,c=e.index;return a.createElement(se.Nh,{spec:r.shelvesFactory()},a.createElement(kt.default,{title:null!==(t=null===(n=l.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:void 0,showAll:!1,index:c}))},Pt=n(28791),Ot=function(e){var t=e.spec,n=e.greeting,r=e.section;return a.createElement(se.Nh,{spec:t.shortcutsFactory()},a.createElement(Ue,{items:r.sectionItems.items.map(Pt.lh),title:null!=n?n:void 0}))},Lt=function(e){var t,n=e.spec,r=e.greeting,l=e.section,c=e.index;switch(null===(t=l.data)||void 0===t?void 0:t.__typename){case"HomeGenericSectionData":return a.createElement(Nt,{spec:n,section:(0,$e.f)(l,l.data),index:c});case"HomeShortsSectionData":return a.createElement(Ot,{spec:n,greeting:r,section:(0,$e.f)(l,l.data)});case"HomeRecentlyPlayedSectionData":return a.createElement(Tt,{spec:n,section:(0,$e.f)(l,l.data),index:c});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case null:case void 0:return null;default:return(0,Qe._)(l.data),null}},_t=function(e){var t=e.spec,n=e.greeting,r=e.container;return a.createElement(a.Fragment,null,r.sections.items.map((function(e,r){return a.createElement(Lt,{key:"".concat(r,"-").concat(e.uri),spec:t,greeting:n,section:e,index:r})})))},wt=n(69756),xt=n(60653),Zt=a.memo((function(e){var t=e.cardCount;return a.createElement(xt.X,{isLoading:!0},(0,r.Z)(new Array(t).keys()).map((function(e,t){return a.createElement(wt.A,{key:t,isLoading:!0})})))})),Bt=n(76728),It=6,Ut=6,At=6,Dt=a.memo((function(e){var t=e.shortcutCount,n=e.shelfCount,l=e.cardCount;return a.createElement("section",{"data-testid":"home-page"},a.createElement("div",{className:Bt.Z.home},a.createElement("div",{className:c()(Bt.Z.content,"contentSpacing")},a.createElement(He,{shortcutCount:t}),(0,r.Z)(new Array(n).keys()).map((function(e,t){return a.createElement(Zt,{key:t,cardCount:l})})))))})),Rt=function(e){var t,n,r=e.spec;(0,Ge.z)("home");var l=(0,Ye.b3)({timeZone:(0,Xe.L7)()},{cacheTime:Xe.us,staleTime:Xe.fS}),i=l.data,u=l.error;if(l.loading)return a.createElement(Dt,{shortcutCount:It,shelfCount:Ut,cardCount:At});if(null!==u)return a.createElement(ze.h,{hasError:!0,errorMessage:o.ag.get("error.generic")});var s=null==i?void 0:i.home;return"HomeResponsePayload"!==(null==s?void 0:s.__typename)||0===s.sectionContainer.sections.totalCount||0===s.sectionContainer.sections.items.length?a.createElement(ze.h,{hasError:!0,errorMessage:o.ag.get("error.generic")}):a.createElement("section",{"data-testid":"home-page"},a.createElement("div",{className:Bt.Z.home},a.createElement("div",{className:c()(Bt.Z.content,"contentSpacing")},a.createElement(_t,{spec:r,greeting:null!==(t=null===(n=s.greeting)||void 0===n?void 0:n.text)&&void 0!==t?t:null,container:s.sectionContainer}))))};const Mt=function(){var e=(0,se.fU)(i.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}}).spec;return a.createElement(se.Nh,{spec:e},a.createElement(u.$,null,o.ag.get("page.generic-title")),a.createElement(a.Suspense,{fallback:null},a.createElement(Je,null)),a.createElement(Rt,{spec:e}))}}}]);
//# sourceMappingURL=home-v2.js.map