"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8059,8396],{57106:(e,r,t)=>{t.d(r,{Q:()=>c});var n=t(87462),o=t(67294),s=t(94184),i=t.n(s);const a="_pMNGOs2KBLWGpGmunYI";function c(e){return o.createElement("section",(0,n.Z)({},e,{className:i()(a,e.className)}))}},14784:(e,r,t)=>{t.r(r),t.d(r,{ALL_EPISODE_SPONSORS_TESTID:()=>l,AllEpisodeSponsors:()=>v,allEpisodeSponsorsPath:()=>d.e,default:()=>O});var n=t(87462),o=t(67294),s=t(51615),i=t(74414),a=t(28975),c=t(57106),p=t(77186);var u=t(88396),f=t(99922),d=t(61737),l="all-episode-sponsors";function v(e){var r=e.EpisodeSponsorsWrapper,t=void 0===r?u.EpisodeSponsorsWrapper:r,d=(0,s.UO)()[a.hd],v=(0,p.P)(),O=(0,f.o)();return v.location.state?o.createElement(c.Q,{"data-testid":l},o.createElement(t,(0,n.Z)({},O,{numberOfSponsorsToDisplay:1/0,reason:"Episode page See All"}))):o.createElement(i.o,{to:(0,a.lc)(d)})}const O=v},88396:(e,r,t)=>{t.r(r),t.d(r,{EPISODE_SPONSORS_SHELF_TESTID:()=>P,EpisodeSponsorsWrapper:()=>j,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>w,default:()=>k});var n=t(87462),o=t(4942),s=(t(66992),t(41539),t(88674),t(78783),t(33948),t(47941),t(82526),t(57327),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070),t(67294)),i=t(15861),a=t(87757),c=t.n(a),p=(t(21249),t(92222),t(1486)),u=t(8271);t(47042);var f=(0,s.lazy)((function(){return Promise.all([t.e(1814),t.e(9033)]).then(t.bind(t,99033))}));function d(e){var r=e.fetchedEpisodeSponsorsData,t=e.fireTrackingEvent,o=e.numberOfSponsorsToDisplay,a=e.firedViewedEvents,d=e.version,l=e.reason,v=e.uri,O=function(e){var r=e.fetchedEpisodeSponsorsData,t=e.numberOfSponsorsToDisplay;return(0,s.useMemo)((function(){return{displayedEpisodeSponsorsData:r.slice(0,t)}}),[r,t])}({fetchedEpisodeSponsorsData:r,numberOfSponsorsToDisplay:o}),b=O.displayedEpisodeSponsorsData,E=(0,u.s4)(),S=(0,s.useMemo)((function(){return b.map((function(e,r){return s.createElement(f,(0,n.Z)({key:"".concat(e.metadata.lineitem_id,"-").concat(r),fireTrackingEvent:t,firedViewedEvents:a,version:d,onClick:function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.send((0,p.$)({uri:v,reason:l,lineitem_id:b.map((function(e){return e.metadata.lineitemId})),ui_navigate:b.map((function(e,t){var n=e.clickthrough;return r===t?n:""})),navigate_to_external_uri:b.map((function(e,t){return r===t}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e))}))}),[b,t,a,d,l,v,E]);return{displayedEpisodeSponsorsData:b,displayedSponsors:S}}var l=t(69518),v=t.n(l);var O=t(51615);var b=t(18693);t(70189);function E(e){var r,t=e.firedViewedEvents,n=(0,s.useRef)();return{firedViewedEvents:n.current=null!==(r=null!=t?t:n.current)&&void 0!==r?r:new Set}}function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function m(e){var r=e.uri,t=e.getEpisodeSponsors,n=e.fireTrackingEvent,o=e.numberOfSponsorsToDisplay,i=e.version,a=e.reason,c=(0,O.TH)().state,p=function(e){var r=e.uri,t=e.episodeBase62Id;return{episodeBase62Id:(0,s.useMemo)((function(){var e;return t||(null===(e=v().from(r))||void 0===e?void 0:e.getBase62Id())}),[r,t])}}(y(y({},c),{},{uri:r})),u=p.episodeBase62Id,f=(0,b.m)(y(y({},c),{},{episodeBase62Id:u,getEpisodeSponsors:t,version:i})).fetchedEpisodeSponsorsData,l=E(y({},c)).firedViewedEvents;return y(y({uri:r,episodeBase62Id:u,fetchedEpisodeSponsorsData:f},d({fetchedEpisodeSponsorsData:f,fireTrackingEvent:n,numberOfSponsorsToDisplay:o,firedViewedEvents:l,version:i,reason:a,uri:r})),{},{firedViewedEvents:l,reason:a})}function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g=(0,s.lazy)((function(){return t.e(4791).then(t.bind(t,54791))})),P="episode-sponsors-shelf",w="see-all-episode-sponsors";function j(e){var r,t={numberOfSponsorsToDisplay:void 0===(r=e.numberOfSponsorsToDisplay)?3:r}.numberOfSponsorsToDisplay,o=m(h(h({},e),{},{numberOfSponsorsToDisplay:t}));return o.episodeBase62Id&&o.displayedSponsors.length?s.createElement(s.Suspense,{fallback:!0},s.createElement(g,(0,n.Z)({},e,{numberOfSponsorsToDisplay:t,state:o}))):null}const k=j},18693:(e,r,t)=>{t.d(r,{F:()=>u,m:()=>f});var n=t(15861),o=t(29439),s=t(87757),i=t.n(s),a=(t(21703),t(96647),t(66992),t(41539),t(88674),t(78783),t(33948),t(67294)),c=t(24697),p=t(31604),u=420;function f(e){var r=e.episodeBase62Id,s=e.getEpisodeSponsors,f=e.fetchedEpisodeSponsorsData,d=void 0===f?[]:f,l=e.version,v=(0,a.useState)(d),O=(0,o.Z)(v,2),b=O[0],E=O[1],S=(0,a.useCallback)((0,n.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("episodeBase62Id is required to fetch episode sponsors");case 3:if(null==s){e.next=7;break}e.t0=s,e.next=10;break;case 7:return e.next=9,Promise.resolve().then(t.bind(t,11401));case 9:e.t0=e.sent.getEpisodeSponsors;case 10:return n=e.t0,e.t1=E,e.next=14,n(r,{version:l});case 14:e.t2=e.sent,(0,e.t1)(e.t2),e.next=21;break;case 18:e.prev=18,e.t3=e.catch(0),E([]);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),[r,s,l]),y=(0,c.y1)(S,u);return(0,a.useEffect)((function(){d.length||y()}),[y,d.length]),(0,p.H)(y),{fetchedEpisodeSponsorsData:b}}},99922:(e,r,t)=>{t.d(r,{o:()=>s});var n=t(87577),o=t(49207);function s(){return{version:(0,n.W6)(o.GE)?2:1}}},31604:(e,r,t)=>{t.d(r,{H:()=>p});t(32564);var n=t(67294),o=t(87577),s=t(49207),i=t(40080),a=t(8341),c=t(89952);function p(e){var r=(0,o.W6)(s.oF),t=(0,a.Y)((function(e){var r,t,n=null!==(r=null==e?void 0:e.item)&&void 0!==r?r:void 0;return(0,c.k6)(n)&&n.isPodcastAd&&null!==(t=n.id)&&void 0!==t?t:void 0})),p=(0,i.D)(t);(0,n.useEffect)((function(){t!==p&&Boolean(t)&&setTimeout(e,r)}),[e,t,p,r])}},77186:(e,r,t)=>{t.d(r,{P:()=>c});t(47941),t(82526),t(57327),t(41539),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070);var n=t(4942),o=t(67294),s=t(51615);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(){var e=(0,s.k6)(),r=e.listen,t=e.location;return(0,o.useEffect)((function(){return r((function(e,r){"POP"===r&&(e.state=a(a(a({},void 0),t.state),e.state))}))})),e}},40080:(e,r,t)=>{t.d(r,{D:()=>o});var n=t(67294);function o(e){var r=(0,n.useRef)();return(0,n.useEffect)((function(){r.current=e}),[e]),r.current}}}]);
//# sourceMappingURL=xpui-routes-all-episode-sponsors.js.map