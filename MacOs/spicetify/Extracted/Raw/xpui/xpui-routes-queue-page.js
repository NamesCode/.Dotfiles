"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7521],{31469:(e,i,t)=>{t.d(i,{n:()=>U});t(10817);var n=t(59496),a=t(84875),s=t.n(a),r=t(86695),l=t(88778),o=t(58084),u=t(38314),c=t(25007),d=t(27002),m=t(31928),x=t(36682);var g=t(73414),h=t(49353),p=t(39625),y=t(20731);const j="main-topBar-contentArea",f="muYk5XIwKmqR9iNibk_f",b="queue-tabBar-headerItem",v="queue-tabBar-moreButton",C="queue-tabBar-moreButtonActive",N="yxf_6IsQEmHjijEBUMTP",k="queue-tabBar-active",P="queue-tabBar-headerItemLink",I="queue-tabBar-header",w="queue-tabBar-chevron";var E=t(4637);const D=({items:e,activeItemId:i})=>(0,E.jsx)(p.v,{children:e.map((e=>e.disabled?(0,E.jsx)(y.s,{disabled:!0,role:"menuitemradio",className:N,onClick:e.handleClick,children:e.title},e.uri):(0,E.jsx)(y.s,{role:"menuitemradio",to:e.to,exact:!0,"aria-checked":e.itemId===i,className:N,activeClassName:k,onClick:e.handleClick,children:e.title},e.uri)))}),U=(0,n.memo)((function({isCentered:e,links:i,landmarkLabel:t,className:a}){const p=(0,n.useRef)(null),[y,N]=(0,n.useState)([]),[U,S]=(0,n.useState)(0),[A,T]=(0,n.useState)([]),q=function(){const[e,i]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:t}=(0,n.useContext)(m.VX),a=(0,d.y1)((e=>{e?.width&&i(e.width)}),250);return(0,x.y)({refOrElement:t,observeOnly:"width",onResize:a}),e}()??1/0,{pathname:O}=(0,r.TH)(),R=i.find((e=>e.to===O));return(0,n.useEffect)((()=>{p.current&&S(p.current.clientWidth)}),[q]),(0,n.useEffect)((()=>{if(!p.current)return;const e=Array.from(p.current.children).map((e=>e.clientWidth));N(e)}),[i]),(0,n.useEffect)((()=>{if(!p.current)return;if(y.slice(0,-1).reduce(((e,i)=>e+i),0)<=U)return void T([]);const e=y.reduce(((e,i)=>e>i?e:i),0),i=[];let t=e;y.forEach(((e,n)=>{U>=t+e?t+=e:i.push(n)})),T(i)}),[U,y]),(0,E.jsx)("nav",{className:s()(a,j),"aria-label":t,children:(0,E.jsxs)("ul",{className:e?f:I,ref:p,children:[i.filter(((e,i)=>!A.includes(i))).map((e=>(e?.render??(e=>e))((0,E.jsx)("li",{className:b,children:e.disabled?(0,E.jsx)("div",{className:P,children:(0,E.jsx)(l.D,{variant:"mestoBold",children:e.title})}):(0,E.jsx)(h.O,{exact:!0,className:P,activeClassName:k,to:e.to,onClick:e.handleClick,children:(0,E.jsx)(l.D,{variant:"mestoBold",children:e.title})})},e.to)))),A.length||0===y.length?(0,E.jsx)("li",{className:b,children:(0,E.jsx)(g.xV,{renderInline:!0,menu:(0,E.jsx)(D,{items:i.filter(((e,i)=>A.includes(i))),activeItemId:R?.itemId}),children:(e,i,t)=>(0,E.jsxs)("button",{className:s()(v,{[C]:R}),type:"button",onClick:i,ref:t,children:[(0,E.jsx)(l.D,{variant:"mestoBold",children:R?R.title:c.ag.get("more")}),e?(0,E.jsx)(o.U,{iconSize:16,className:w,"aria-hidden":"true"}):(0,E.jsx)(u.i,{iconSize:16,className:w,"aria-hidden":"true"})]})})}):null]})})}))},32195:(e,i,t)=>{t.d(i,{I:()=>x});var n=t(63678),a=t(59496),s=t(25007),r=t(31469),l=t(46213),o=t(85037),u=t(33269);const c="queue-tabBar-nav";var d=t(4637);const m=()=>{const e=(0,u.Y)(),i=(0,a.useCallback)((e=>(0,d.jsx)(o.v,{placement:"bottomEnd",arrow:"topStart",title:s.ag.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),t=(0,a.useMemo)((()=>[{title:s.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:i,disabled:e},{title:s.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,i]);return(0,d.jsx)(l.w,{children:(0,d.jsx)(r.n,{className:c,links:t})})},x=({children:e})=>{const i=(0,n.nF)();return(0,d.jsxs)("section",{className:"contentSpacing",children:[e,i&&(0,d.jsx)(m,{})]})}},69965:(e,i,t)=>{t.r(i),t.d(i,{default:()=>be});var n=t(59496),a=t(33269),s=t(36026),r=t(84875),l=t.n(r),o=t(88778),u=t(26453),c=t(59044),d=t(25007),m=t(31716),x=t(91800),g=t(29009),h=t(32693),p=t(98082),y=t(91684),j=t(74056);var f=t(5211),b=t(77003),v=t(29113),C=t(4637);const N=({onClick:e})=>(0,C.jsx)(v.P,{onClick:e,buttonSize:"sm",children:d.ag.get("queue.clear-queue")});var k=t(50895),P=t(73037),I=t(87155),w=(t(98801),t(42662));const E="i9rTNwKyT_NMDghd8q65",D="DXBMXJD8Zoj4V8MxIVTB",U="UEtqSfWDubkNdPIaEkfA",S="I_Rc74Je7W4sk6KAVR05",A=n.memo((function({onClose:e,onConfirm:i,isOpen:t,itemCount:a}){const s=(0,n.useCallback)((t=>{i(),e(t)}),[i,e]),r=d.ag.get("queue.confirm-title",a);return(0,C.jsx)(w.Z,{shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:r,isOpen:t,children:(0,C.jsxs)("div",{className:E,children:[(0,C.jsx)(o.D,{as:"h2",variant:"cello",className:D,children:r}),(0,C.jsx)(o.D,{as:"p",variant:"mesto",className:U,paddingBottom:k.g4V,children:d.ag.get("queue.confirm-message")}),(0,C.jsxs)("div",{className:l()("encore-light-theme",S),children:[(0,C.jsx)(P.o,{onClick:e,children:d.ag.get("queue.cancel-button")}),(0,C.jsx)(I.D,{onClick:s,children:d.ag.get("queue.confirm-button")})]})]})})}));var T=t(95530),q=t(12800),O=t(61366);const R=()=>(0,C.jsxs)("div",{className:O.Z.emptyContainer,children:[(0,C.jsx)(q.S,{iconSize:64,"aria-hidden":"true"}),(0,C.jsx)(o.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:O.Z.emptyContainerTitle,children:d.ag.get("queue.empty-title")}),(0,C.jsx)("p",{children:d.ag.get("queue.empty-description")}),(0,C.jsx)(T.OL,{to:"/search",className:O.Z.findSomething,children:(0,C.jsx)(I.D,{colorSet:"invertedLight",children:d.ag.get("queue.fine-something")})})]});let Q;!function(e){e[e.NowPlaying=0]="NowPlaying",e[e.NextInQueue=1]="NextInQueue",e[e.NextUp=2]="NextUp"}(Q||(Q={}));var F=t(45476),L=t(68001),M=t(23390),B=t(78034),_=t(92910),$=t(57559),G=t(88585),Z=t.n(G),W=t(94774),z=t(62094),K=t(61295),H=t(43181),X=t(71748),V=t(34657),J=t(42721),Y=t(74313),ee=t(59950),ie=t(72899),te=t(38205),ne=t(57915),ae=t(45462),se=t(86364),re=t(31269),le=t(53703),oe=t(43229),ue=t(17754);let ce;!function(e){e.TRACK="track",e.EPISODE="episode",e.CHAPTER="chapter",e.LOCAL="local",e.AD="ad"}(ce||(ce={}));const de=n.memo((function({uri:e,uid:i,contextUri:t,name:a,duration_ms:s,artists:r,index:l,rowNumberOffset:o,imgUrl:u,isExplicit:c,isPlayable:m,isMOGEFRestricted:x,album:p,type:y,section:j,usePlayContextItem:f,isAutoPlay:v=!1,isEnhanced:N,queueSpec:k}){const P=(0,b.$P)(),I=(0,h.g)(),{triggerPlay:w,togglePlay:E}=f({uid:i,uri:e,index:l}),{spec:D}=(0,b.fU)(z.createDesktopTrackListRowEventFactory,{data:{position:l,reason:"",uri:e}}),{isActive:U,isPlaying:S}=(0,le.$o)(e),A=(0,n.useCallback)(((t,n)=>{i?w({loggingParams:n},(()=>I.skipToNext({uri:e,uid:i}))):w({loggingParams:n})}),[I,w,e,i]),T=(0,n.useCallback)((t=>{i?E({loggingParams:t},(()=>U?S?I.pause():I.resume():I.skipToNext({uri:e,uid:i}))):E({loggingParams:t})}),[I,E,e,i,U,S]),q=y===ce.TRACK,O=y===ce.EPISODE,R=y===ce.CHAPTER,F=O&&"video"===p?.mediaType,L=y===ce.LOCAL,M=y===ce.AD,B=r?.map((e=>e.name)).join(d.ag.getSeparator())||"",_=(0,re._)(e),$=(0,ue.k)(e,m,Z().isLocalTrack(e)),{badges:G,hasBadges:de}=(0,oe.r)({downloadAvailability:_,isExplicit:c,isMOGEFRestricted:x,isEnhanced:N});let me;me=O?(0,C.jsx)(H.k,{uri:e,uid:v?void 0:i,showUri:p.uri,contextUri:t}):R?(0,C.jsx)(K.r,{uri:e,uid:v?void 0:i,showUri:p.uri,contextUri:t}):L?(0,C.jsx)(X.N,{uri:e,uid:v?void 0:i,contextUri:t}):M?null:(0,C.jsx)(V.$,{uri:e,uid:v?void 0:i,albumUri:p.uri,artists:r,contextUri:t});const xe=(0,n.useCallback)(((t,n)=>{const{meta:a,uris:s}=t,r=s.map((e=>({uri:e,uid:null})));let l;l=n===ee.W.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},a.section===Q.NowPlaying?I.addToQueue(r):a.origin===Q.NowPlaying?I.insertIntoQueue(r,l):I.reorderQueue(r,l)}),[I,i,e]),ge=(0,n.useCallback)(((t,n)=>{const{uids:a}=t,s=a.map((e=>({uri:"",uid:e})));let r;r=n===ee.W.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},I.reorderQueue(s,r)}),[I,i,e]),he=v?[]:[ie.aN[Z().Type.TRACK],ie.aN[Z().Type.EPISODE]];return(0,C.jsx)(g.ZP,{value:"row",index:l,children:(0,C.jsx)(te._,{menu:me,children:(0,C.jsxs)(ee.c,{uri:e,contextUri:t,index:l,onTriggerPlay:A,isActive:j===Q.NowPlaying&&U,ariaRowIndex:l,isPlayable:$,ageRestricted:x,spec:D,dragMetadata:{name:a,createdBy:B,sectionId:j},onInsert:(i,t,n,a,s)=>{xe({uris:i,dropIndex:t,meta:s},n),k&&P.logInteraction(k.dragAddItemToQueue({itemToAddToQueue:e}))},onMove:(e,i,t,n)=>{ge({uids:e,dropIndex:i,meta:n},t),k&&P.logInteraction(k.dragSort())},allowedDropTypes:he,children:[(0,C.jsx)(J.Dd,{ariaColIndex:0,children:(0,C.jsx)(J.Du,{uri:e,playAriaLabel:d.ag.get("tracklist.a11y.play",a,B),isPlaying:j===Q.NowPlaying&&S,isActive:j===Q.NowPlaying&&U,spec:D,onClick:(e,i)=>{T(i)},children:(0,C.jsx)(J.km,{children:l+o+1})})}),(0,C.jsxs)(J.vZ,{ariaColIndex:1,children:[(0,C.jsx)(J.lD,{src:u,isVideo:F,isEpisode:O||R}),(0,C.jsxs)(J.vm,{children:[(0,C.jsx)(J.Wh,{titleText:a,children:a}),de&&(0,C.jsxs)(J.g3,{children:[G.enhanced&&(0,C.jsx)(W._,{iconSize:16,className:Y.Z.enhanced,title:d.ag.get("web-player.enhance.button_text_enhanced"),"aria-label":d.ag.get("web-player.enhance.button_text_enhanced")}),G.download&&(0,C.jsx)(ne.G,{size:16}),G.explicit&&(0,C.jsx)(ae.N,{}),G.nineteen&&(0,C.jsx)(se.X,{className:Y.Z.nineteen,size:16})]}),(0,C.jsxs)(J.K9,{children:[q&&(0,C.jsx)(J.T6,{artists:r,spec:D}),(O||L)&&!F&&B]})]})]}),(0,C.jsx)(J.UA,{ariaColIndex:2,children:(0,C.jsx)(J.BM,{nonInteractive:L,uri:p.uri,name:p.name,creatorUri:r?.[0]?.uri,spec:D,children:p.name})}),(0,C.jsxs)(J.mU,{ariaColIndex:3,children:[!L&&!R&&(0,C.jsx)(J.qS,{uri:e,type:y}),(0,C.jsx)(J.A$,{duration:s}),(0,C.jsx)(J.Zv,{menu:me,label:d.ag.get("more.label.track",a,B),spec:D})]})]})})})}),((e,i)=>e.uri===i.uri&&e.index===i.index&&e.name===i.name)),me=n.memo((function({tracks:e,ariaLabel:i,contextUri:t,rowNumberOffset:a=0,section:s,usePlayContextItem:r}){const l=(0,L.o)(),o=(0,h.g)(),u=(0,n.useCallback)(((e,i)=>{l({intent:"remove-from-queue",type:"click"}),o.removeFromQueue(e.map((e=>({uid:e.id,uri:e.uri})))).then(i)}),[o,l]),c=(0,n.useCallback)(((e,i)=>{if((0,B.iw)(e)){const n=(0,$.X)(e.show?.images,{desiredSize:40});return(0,C.jsx)(de,{index:i,rowNumberOffset:a,imgUrl:n?.url||"",uri:(0,M.$)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:ce.EPISODE,section:s,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider},`${i}${a}${e.uid}`)}if((0,B.G7)(e)){const n=(0,$.X)(e.images||void 0,{desiredSize:40});return(0,C.jsx)(de,{index:i,rowNumberOffset:a,imgUrl:n?.url||"",uri:(0,M.$)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:ce.CHAPTER,section:s,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider},`${i}${a}${e.uid}`)}if((0,B.k6)(e)){const n=(0,$.X)(e.images||void 0,{desiredSize:40});return(0,C.jsx)(de,{index:i,rowNumberOffset:a,imgUrl:n?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??d.ag.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:ce.AD,section:s,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${i}${a}${e.uid}`)}if((0,B.G_)(e)||(0,B.RB)(e)){const n=(0,$.X)(e?.album?.images,{desiredSize:40}),l=e.type===_.p.TRACK?e:null;return(0,C.jsx)(de,{index:i,rowNumberOffset:a,imgUrl:n?.url||"",uri:(0,M.$)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:l?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:l?.is19PlusOnly??!1,type:l?.isLocal?ce.LOCAL:ce.TRACK,section:s,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider,isEnhanced:"enhanced_recommendation"===e.metadata?.provider},`${i}${a}${e.uid}`)}return(0,C.jsx)(F.Lb,{height:`${F.dN}px`})}),[a,t,s,r]),m=(0,n.useMemo)((()=>[F.QD.INDEX,F.QD.TITLE,F.QD.ALBUM,F.QD.DURATION]),[]),x=(0,n.useCallback)((e=>e.uri),[]),g=(0,n.useCallback)((e=>e.uid??e.uri),[]);return(0,C.jsx)(F.Pv,{ariaLabel:i,tracks:e,nrTracks:e.length,onRemove:u,renderRow:c,resolveUri:x,resolveUid:g,columns:m})})),xe="rHpv7osDRvs3SUPMpQ_g",ge="DG9CsoFIptJhAneKoo_F",he="jf2HafzDEI9jn7Yo05eM",pe="H3Puuvc2nV0GoZRrfpRS",ye="HckHyQocDDePWQL2baOY",je=()=>{const{uri:e,description:i}=(0,f.$)(),{spec:t,logger:a,UBIFragment:s}=(0,b.fU)(u.createDesktopNowPlayingQueueEventFactory,{data:{identifier:c.Wg.NOWPLAYING_QUEUE,uri:e??""}}),r=(0,n.useMemo)((()=>t.nowPlayingSectionFactory()),[t]),v=(0,n.useMemo)((()=>t.nextInQueueSectionFactory()),[t]),k=(0,n.useMemo)((()=>t.nextFromSectionFactory()),[t]),P=(0,h.g)(),{current:I,nextUp:w,queued:E}=function(){const e=(0,h.g)(),[i,t]=(0,n.useState)(e.getQueue());return(0,j.G)(y.rg.QUEUE_UPDATE,(e=>t(e.data))),i}(),[D,U]=(0,n.useState)(!1),S=(0,n.useCallback)((()=>{U(!1)}),[U]),T=(0,n.useCallback)((()=>{P.clearQueue(),U(!1)}),[P]),q=(0,n.useCallback)((async()=>{let e;const i=v.clearQueueButtonFactory();E.length>0&&(e=i.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:E.length}),a.logInteraction(e)),U(!0)}),[a,v,E]),{usePlayContextItem:O}=(0,p.n)({uri:e??""},{featureIdentifier:"queue"}),F="autoplay"===I?.provider,L=w.filter((e=>F?e:"autoplay"!==e.provider)),M=!!E?.length,B=!!L?.length,_=!1===(I||M||B),$=(0,n.useCallback)((async()=>{if(!B)return;const i=t.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});a.logInteraction(i)}),[B,a,t,e]);return _?(0,C.jsx)(R,{}):(0,C.jsxs)("div",{className:xe,children:[(0,C.jsx)(m.$,{children:d.ag.get("queue.page-title")}),(0,C.jsx)(o.D,{as:"h1",variant:"canon",semanticColor:"textBase",className:ge,children:d.ag.get("playback-control.queue")}),I&&e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",children:d.ag.get("queue.now-playing")}),(0,C.jsx)(s,{spec:r,children:(0,C.jsx)(g.ZP,{value:"now-playing",children:(0,C.jsx)(me,{ariaLabel:d.ag.get("queue.now-playing"),tracks:[I],contextUri:e,section:Q.NowPlaying,usePlayContextItem:O})})})]}),M&&e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:l()(ye,he),children:[(0,C.jsx)(o.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",children:d.ag.get("queue.next-in-queue")}),M&&(0,C.jsx)(N,{onClick:q})]}),(0,C.jsx)(s,{spec:v,children:(0,C.jsx)(g.ZP,{value:"next-in-queue",children:(0,C.jsx)(me,{ariaLabel:d.ag.get("queue.next-in-queue"),tracks:E,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",section:Q.NextInQueue,usePlayContextItem:O})})})]}),B&&e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",className:l()(he,"standalone-ellipsis-one-line"),children:i&&!F?(0,C.jsxs)(C.Fragment,{children:[d.ag.get("queue.next-from")," ",(0,C.jsx)(x.r,{className:pe,to:e,onClick:$,children:i})]}):d.ag.get("queue.next-up")}),(0,C.jsx)(s,{spec:k,children:(0,C.jsx)(g.ZP,{value:"next-up",children:(0,C.jsx)(me,{ariaLabel:d.ag.get("queue.next-up"),tracks:L,rowNumberOffset:1+(E?.length||0),contextUri:"spotify:app:queue:NextUp",section:Q.NextUp,usePlayContextItem:O})})})]}),(0,C.jsx)(A,{itemCount:E?.length||0,isOpen:D,onClose:S,onConfirm:T})]})};var fe=t(32195);const be=()=>(0,a.Y)()?(0,C.jsx)(s.w,{to:"/history"}):(0,C.jsx)(fe.I,{children:(0,C.jsx)(n.Suspense,{fallback:null,children:(0,C.jsx)(je,{})})})},23390:(e,i,t)=>{t.d(i,{$:()=>n});const n=e=>e?.linked_from?.uri||e.uri},61366:(e,i,t)=>{t.d(i,{Z:()=>n});const n={emptyContainer:"gTvMl6pwfRD9PobMSB5x",emptyContainerTitle:"hNAQG0TAe2WFYyf_iZEB",findSomething:"Zhzrb2k9nQRActS2lp4U"}}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map