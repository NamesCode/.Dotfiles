"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7553],{63294:(e,t,a)=>{a.d(t,{u:()=>p});var n=a(59496),i=a(84875),l=a.n(i),s=a(88778),r=a(87155),o=a(83719),c=a(93646);const d="FvfvGU3jvHRskUU9v9_8",u="Q9AlbZn2EGzy3MTWXa8X",m="mxmxS0y8LiwSs5nueKPT",g="GXxVAveNFStY3pBI_NO4",h="eHcXC2s97InYP7rMNT0H";var x=a(4637);const p=(0,n.memo)((function(e){const{children:t,message:a,title:n,linkTitle:i,linkTo:p,onClick:f,renderInline:y=!1}=e,{isXSOnly:k,isSMOnly:j}=(0,o.e)(),D=k||j;return(0,x.jsxs)("section",{className:l()(d,{[u]:y}),children:[t,(0,x.jsx)(s.D,{as:"h1",variant:D?"cello":"alto",className:g,children:n}),(0,x.jsx)(s.D,{variant:D?"mesto":"ballad",className:h,children:a}),i&&(p||f)&&(0,x.jsx)(r.D,{colorSet:"invertedLight",className:m,href:p,onClick:f,component:c.Z,children:i})]})}))},91502:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var n=a(59496),i=a(77646),l=a(86695),s=a(88585),r=a.n(s),o=a(43244),c=a(32963),d=a(25007),u=a(43543),m=a(61719),g=a(31716),h=a(63294),x=a(4763),p=a(53354),f=a(87654),y=a(18824),k=a(45476),j=a(92431),D=a(42702),b=a(51488),w=a(32126),S=a(4608),v=a(46395),C=a(87700),F=a(80131),I=a(98082),T=a(77003),E=a(97013),L=a(38550),P=a(76322),O=a(59689),N=a(72102),A=a(50022),M=a(23826),R=a(12999),U=a(57593);var _=a(18720),B=a(23266),Q=a(66080),X=a(74639),G=a(4637);const z=n.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,T.fU)(B.createDesktopSearchBarEventFactory,{}),i=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),l=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),s=(0,n.useCallback)((()=>{a.logInteraction(t.sortButtonFactory().hitSort())}),[a,t]);return(0,G.jsxs)("div",{className:f.Z.searchBoxContainer,children:[(0,G.jsx)(n.Suspense,{fallback:null,children:(0,G.jsx)(Q.K,{placeholder:d.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:i,onClear:l})}),(0,G.jsx)(X.l,{columns:j.P0,onSort:s})]})}));var H=a(88748);const Z=n.lazy((()=>Promise.all([a.e(1814),a.e(9605),a.e(682)]).then(a.bind(a,59605)))),K=[k.QD.INDEX,k.QD.TITLE,k.QD.ALBUM,k.QD.ADDED_AT,k.QD.DURATION],V="your_library",W=({data:e,canFilter:t,canSort:a})=>{const{uri:i,name:s,totalLength:r}=e.metadata,b=(0,n.useRef)(null),C=r>0,L=r>0,O=(0,S.Y5)("#5038a0"),{filter:N}=(0,n.useContext)(y.fo),{sortState:A,setSortState:M}=(0,n.useContext)(j.Gb),{spec:R,logger:U}=(0,T.fU)(c.createDesktopLikedSongsEventFactory,{data:{uri:i}}),B=n.useMemo((()=>R.headerFactory()),[R]),Q=n.useMemo((()=>R.tracklistFactory()),[R]);(0,n.useEffect)((()=>{null===A.column&&M({column:k.QD.ADDED_AT,order:k.kn.DESC})}),[A,M]);const X=(0,l.k6)(),Z="POP"!==X.action?new URLSearchParams(X.location.search).get("uri"):null,{isPlaying:W,togglePlay:Y,usePlayContextItem:$,isActive:q}=(0,I.n)((0,v.I)(i,(0,_.w)(A),N),{featureIdentifier:V,referrerIdentifier:"your_library"}),J=()=>{const e=(0,E.aK)({isPlaying:W,isActive:q,spec:R.actionBarFactory().playButtonFactory(),logger:U,uri:i});Y({loggingParams:e})},ee=(0,n.useCallback)(((e,t)=>{const a=R.actionBarFactory().downloadButtonFactory();t===F.mc.ADD?U.logInteraction(a.hitDownload({itemToDownload:i})):t===F.mc.REMOVE?U.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:i})):t===F.mc.NO_PERMISSION&&U.logInteraction(a.hitUiReveal())}),[U,R,i]);return(0,G.jsxs)("section",{role:"presentation",className:f.Z.playlist,"data-testid":"playlist-page",children:[(0,G.jsx)(g.$,{children:d.ag.get("playlist.page-title",s)}),(0,G.jsx)(w.s,{metadata:e.metadata,isPlaying:W,togglePlay:J,backgroundColor:O,specLikedSongs:B}),(0,G.jsx)(u.o,{backgroundColor:O,children:(0,G.jsxs)(u.F,{children:[L?(0,G.jsx)(p.$,{onClick:J,isPlaying:W,size:"lg",uri:i,ariaPauseLabel:d.ag.get("playlist.a11y.pause",s),ariaPlayLabel:d.ag.get("playlist.a11y.play",s)}):null,e.metadata.totalLength>0&&(0,G.jsx)(P.v,{uri:i,renderEnabled:()=>(0,G.jsx)(D.v,{uri:i})}),(0,G.jsx)(m.o,{uri:i,canDownload:C,isFollowing:!0,onFollow:()=>{},size:m.q.md,onClick:ee}),t&&a&&(0,G.jsx)(T.Nh,{spec:R.actionBarFactory(),children:(0,G.jsx)(z,{tracklistDomRef:b})})]})}),(0,G.jsx)("div",{className:"contentSpacing",children:r>0?(0,G.jsx)(n.Suspense,{fallback:(0,G.jsx)(x.h,{hasError:!1,errorMessage:d.ag.get("error.request-collection-tracks-failure")}),children:(0,G.jsx)(T.Nh,{spec:Q,children:(0,G.jsx)(H.p,{nrTracks:r,columns:K,collectionUri:i,scrollToUri:Z,usePlayContextItem:$,outerDomRef:b,spec:Q,initialItems:e.contents.items})})}):(0,G.jsx)(h.u,{message:d.ag.get("collection.empty-page.songs-subtitle"),title:d.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:d.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,G.jsx)(o.F,{"aria-hidden":"true"})})})]})},Y=n.memo((function({user:e,uri:t}){const{filter:a}=(0,n.useContext)(y.fo),{sortState:l}=(0,n.useContext)(j.Gb),s=function(e,t,a){const i=(0,n.useContext)(C.H),l=(0,O.useQueryClient)(),s=(0,N.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:r}=(0,O.useQuery)(s(),(()=>i.getTracks(a)),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}),o=(0,n.useCallback)((()=>{l.invalidateQueries(s())}),[l,s]);(0,M.b)(A.EW.UPDATE,o);const c=(0,U.I2)(t.id);return c&&r?{metadata:{uri:e,name:c.name,images:c.images,totalLength:r?.totalLength,unfilteredTotalLength:r.unfilteredTotalLength,owner:(0,R.V3)(t)},contents:r}:null}(t,e,{offset:0,limit:25,sort:(0,_.w)(l),filter:a}),r=(0,n.useContext)(C.H).getCapabilities(),o=(0,i.v9)(L.n5),{isEnhanced:c}=(0,b.U)(`spotify:user:${o}:collection`);if(s){const e=(0,G.jsx)(W,{data:s,canFilter:r.canFilterTracksAndEpisodes&&s.metadata.unfilteredTotalLength>0,canSort:r.canSortTracksAndEpisodes&&s.metadata.unfilteredTotalLength>0});return(0,G.jsx)(P.v,{uri:s.metadata.uri,renderEnabled:()=>c?(0,G.jsx)(n.Suspense,{fallback:null,children:(0,G.jsx)(j.kz,{uri:s.metadata.uri,children:(0,G.jsx)(Z,{metadata:{...s.metadata,collaborators:{count:1,items:[{isOwner:!0,user:s.metadata.owner,tracksAdded:s.metadata.totalLength}]}},capabilities:r,featureIdentifier:V})})}):e,renderDisabled:()=>e})}return(0,G.jsx)(x.h,{hasError:!1,errorMessage:d.ag.get("error.not_found.title.playlist"),loadOffline:r.canModifyOffline})})),$=()=>{const{user:e}=(0,i.v9)(L.Gg);if(null===e)return null;const t=r().collectionURI(e.id).toURI();return(0,G.jsx)(j.kz,{uri:t,children:(0,G.jsx)(y.hz,{uri:t,children:(0,G.jsx)(Y,{uri:t,user:e})})})}},32126:(e,t,a)=>{a.d(t,{s:()=>n.s});var n=a(36171)},83719:(e,t,a)=>{a.d(t,{e:()=>g});var n=a(65297);const i="(min-width: 0px)",l="(min-width: 0px) and (max-width: 767px)",s="(min-width: 768px)",r="(min-width: 768px) and (max-width: 1023px)",o="(min-width: 1024px)",c="(min-width: 1024px) and (max-width: 1279px)",d="(min-width: 1280px)",u="(min-width: 1280px) and (max-width: 1919px)",m="(min-width: 1920px)",g=()=>({isXS:(0,n.a)(i),isXSOnly:(0,n.a)(l),isSM:(0,n.a)(s),isSMOnly:(0,n.a)(r),isMD:(0,n.a)(o),isMDOnly:(0,n.a)(c),isLG:(0,n.a)(d),isLGOnly:(0,n.a)(u),isXL:(0,n.a)(m)})}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map