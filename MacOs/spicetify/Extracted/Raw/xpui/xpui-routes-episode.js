"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{99922:(e,t,n)=>{n.d(t,{o:()=>r});var i=n(87577),a=n(49207);function r(){return{version:(0,i.W6)(a.GE)?2:1}}},23103:(e,t,n)=>{n.r(t),n.d(t,{default:()=>En});var i=n(29439),a=(n(82526),n(41817),n(66992),n(41539),n(78783),n(33948),n(41637),n(74916),n(64765),n(91058),n(68309),n(15306),n(67294)),r=n(51615),o=n(69518),s=n.n(o),l=n(87577),c=n(97348),d=n(73305),u=n(96206),p=n(70369),v=n(63567),y=n(6158),m=n(86706),g=n(74257),f=n(77995),h=n(84629),x=n(60210),b=n(48690),k=n(22345),j=n(60289),P=n(59482),C=n(72907),T=n(67892),I=n(62515),N=n(32626),S=n(18261),U=n(57978),w=n(26482),E=n(84242),D=n(8341),M=n(5944),O=n(15852),A=n(7073),R=n(13759),L=n(84788),B=n(60410),F=n(40771),_=n(38894),Z=n(51441),K=n(79896),W=n(15861),z=n(87757),H=n.n(z),J=n(32667),X=n(86025),q=n(34011),V=n(1447),Y=n(9983),G=n(89948),Q=n(42781);const $="u0Jj3wfs4s9tmaXUTK41",ee="NSXGSulVKC8FxHx5f1f3",te="PN1uMk_51r_KQvgJ6sCR",ne="N6NnRc_msmFFxUoAfuKQ",ie="qaYOSFBanH3vJvosOwsU";var ae=n(85893),re=function(e){var t,n,i,a,r=e.showUri,o=(0,V.qT)(),s=(0,G.l)(r,!0).data;if((null==s?void 0:s.type)!==Q.p.AUDIOBOOK)return null;var l=null===(t=s.price)||void 0===t||null===(n=t.finalPrice)||void 0===n?void 0:n.amount,c=null===(i=s.price)||void 0===i||null===(a=i.finalPrice)||void 0===a?void 0:a.currency;return l&&c?(0,ae.jsxs)("div",{className:$,children:[(0,ae.jsx)(J.D,{as:"div",variant:"cello",className:ee,children:u.ag.get("web-player.audiobooks.chapterUpsell.title")}),(0,ae.jsx)(J.D,{as:"div",variant:"mesto",className:te,children:u.ag.get("web-player.audiobooks.chapterUpsell.description")}),(0,ae.jsxs)("div",{className:ne,children:[(0,ae.jsx)(X.o,{className:ie,buttonSize:"sm",onClick:function(){o({type:"close"})},children:u.ag.get("action-trigger.button.not-now")}),(0,ae.jsx)(q.D,{buttonSize:"sm",colorSet:"invertedLight",onClick:(0,W.Z)(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.Q)({show_uri:r,currency:c,price:l});case 2:case"end":return e.stop()}}),e)}))),children:u.ag.get("web-player.audiobooks.chapterUpsell.cta")})]})]}):(console.error("Audiobook has no price information."),null)},oe=function(e){var t=e.children,n=e.enabled,i=e.showUri,a=e.renderInline,r=void 0===a||a;return n?(0,ae.jsx)(K.Nt,{trigger:"click",action:"toggle",offset:[-2,20],renderInline:r,content:(0,ae.jsx)(K.yv,{children:(0,ae.jsx)(re,{showUri:i})}),children:t}):(0,ae.jsx)(ae.Fragment,{children:t})},se=function(e){var t=e.chapterUri,n=e.showUri,i=e.isLocked,r=e.isPlayDisabled,o=e.isActive,s=e.isPlaying,l=e.togglePlay,c=e.triggerPlay,d=e.playButtonPlayLabel,u=e.playButtonPauseLabel,p=e.playPositionMs,v=e.durationMs,y=e.logger,m=e.event,g=(0,_.g)(),f=(0,a.useCallback)((function(e){var n;i?y.logInteraction(m.hitShowPaywall({paywalledItem:t})):o?(n=s?y.logInteraction(m.hitPause({itemToBePaused:t})):y.logInteraction(m.hitResume({itemToBeResumed:t})),l({loggingParams:n})):(n=y.logInteraction(m.hitPlay({itemToBePlayed:t})),c({seekTo:e,loggingParams:n}))}),[i,o,y,m,t,s,l,c]);(0,a.useEffect)((function(){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",n=1e3*parseInt(t,10);n<=v&&f(n)}}),[v,f]);var h=function(){return(0,ae.jsx)(Z.JM,{size:Z.qE.lg,onClick:function(){f(p)},isPlaying:s,disabled:r,locked:i,ariaPlayLabel:d,ariaPauseLabel:u})};return g?h():(0,ae.jsx)(oe,{showUri:n,enabled:i,renderInline:!1,children:h()})},le=n(31610);const ce="UVWRbDQd2DM0ShkvMq54",de="Eoy1M3AAKeAUI9cNWsuq",ue="rmgkmccGmTBvrw7gXMyS",pe="JKIiOrx9EhZCkyBsu7YI";var ve=a.memo((function(e){var t,n=e.chapter,r=n.name,o=n.uri,l=n.playedState,c=n.contentRating,d=n.duration,p=n.playability,v=n.book,y=n.coverArt.length?n.coverArt:v.coverArt||[],_=null===(t=y[0])||void 0===t?void 0:t.url,Z=(0,I.Z)(_||null),K=(0,m.I0)(),W=(0,a.useState)(l.state===A.sY.Completed),z=(0,i.Z)(W,2),H=z[0],J=z[1],X=(0,O.fU)(f.createDesktopAudiobookChapterEventFactory,{data:{uri:o}}),q=X.spec,V=X.logger,Y=(0,E.n)({uri:o},{featureIdentifier:"chapter"}),G=Y.triggerPlay,Q=Y.togglePlay,$=Y.isPlaying,ee=Y.isActive,te=(0,D.Y)((function(e){var t;return null!==(t=(0,M.k)(e))&&void 0!==t?t:void 0})),ne=(0,B.S)(n),ie=(0,L.r)({contentRating:null==c?void 0:c.label}).badges,re=(0,a.useCallback)((function(e){!p.playable&&ie.nineteen&&(e.stopPropagation(),K((0,h.RM)(o||"")))}),[o,p.playable,ie.nineteen,K]),oe=v.uri,ve=function(e){var t=s().from(e),n=s().hexToId((null==t?void 0:t.id)||"");return"/show/".concat(n)}(oe),ye=(0,a.useCallback)((function(){var e=q.headerFactory().audiobookLinkFactory().hitUiNavigate({destination:ve});V.logInteraction(e)}),[V,ve,q]),me=(0,a.useCallback)((function(e,t){var n=q.actionBarFactory().downloadButtonFactory();t===w.mc.ADD?V.logInteraction(n.hitDownload({itemToDownload:o})):t===w.mc.REMOVE?V.logInteraction(n.hitRemoveDownload({itemToRemoveFromDownloads:o})):t===w.mc.NO_PERMISSION&&V.logInteraction(n.hitUiReveal())}),[V,q,o]),ge=(0,a.useCallback)((function(){var e=q.actionBarFactory().contextMenuButtonFactory().hitUiReveal();V.logInteraction(e)}),[V,q]),fe=(0,a.useCallback)((function(){var e=q.allChaptersLinkFactory().hitUiNavigate({destination:ve});V.logInteraction(e)}),[V,ve,q]),he=!ne&&!p.playable,xe=v.name,be=u.ag.get("tracklist.a11y.play",r,xe),ke=u.ag.get("tracklist.a11y.pause",r,xe);return(0,ae.jsxs)("section",{"data-testid":"chapter",className:ce,children:[(0,ae.jsxs)(j.gF,{backgroundColor:Z,children:[(0,ae.jsx)(P.W,{children:(0,ae.jsx)(C.i,{text:r})}),(0,ae.jsx)("div",{className:ue,children:(0,ae.jsx)(S._,{menu:(0,ae.jsx)(k.r,{uri:o,isPlayed:H,onMarkAsPlayed:J,contextUri:o,isLocked:ne}),children:(0,ae.jsx)(j.Oe,{loading:"eager",name:r,images:y,placeholderType:"episode",shape:j.Kc.ROUNDED_CORNERS})})}),(0,ae.jsxs)(j.sP,{children:[(0,ae.jsx)(j.dy,{small:!0,uppercase:!0,children:u.ag.get("web-player.audiobooks.chapter")}),(0,ae.jsx)(S._,{menu:(0,ae.jsx)(k.r,{uri:o,isPlayed:H,onMarkAsPlayed:J,contextUri:o,isLocked:ne}),children:(0,ae.jsx)(j.xd,{dragUri:o,dragLabel:r,children:(0,ae.jsx)("span",{"data-testid":"chapterTitle",children:r})})}),(0,ae.jsx)(S._,{menu:(0,ae.jsx)(k.r,{uri:o,isPlayed:H,onMarkAsPlayed:J,contextUri:o,isLocked:ne}),children:(0,ae.jsx)(T.Z,{to:ve,onClick:ye,children:(0,ae.jsx)(j.dy,{large:!0,bold:!0,children:(0,ae.jsx)("span",{"data-testid":"bookTitle",children:xe})})})})]})]}),(0,ae.jsxs)(x.o,{backgroundColor:Z,children:[(0,ae.jsxs)(x.F,{children:[ie.nineteen&&(0,ae.jsx)(U.X,{className:de,size:16}),(0,ae.jsx)(R.E,{size:R.$.LARGE,fullyPlayed:H,durationMs:d.milliseconds,resumePositionMs:l.playPositionMilliseconds,isPlaying:$,position:ee&&te||void 0})]}),(0,ae.jsxs)(x.F,{children:[(0,ae.jsx)("div",{onClick:re,children:(0,ae.jsx)(se,{chapterUri:o,showUri:oe,isLocked:ne,durationMs:d.milliseconds,playPositionMs:l.playPositionMilliseconds,isPlayDisabled:he,isActive:ee,isPlaying:$,togglePlay:Q,triggerPlay:G,playButtonPlayLabel:be,playButtonPauseLabel:ke,logger:V,event:q.actionBarFactory().playButtonFactory()})}),!ne&&(0,ae.jsx)(le.o,{uri:o,bookUri:oe,onClick:me}),!ne&&(0,ae.jsx)(N.yj,{menu:(0,ae.jsx)(k.r,{uri:o,isPlayed:H,onMarkAsPlayed:J,contextUri:o,isLocked:ne}),children:(0,ae.jsx)(b.z,{label:u.ag.get("more.label.context",r),onClick:ge})})]})]}),(0,ae.jsx)("div",{className:"contentSpacing",children:(0,ae.jsx)(g.P,{buttonSize:"sm",href:oe,component:F.Z,className:pe,onClick:fe,children:u.ag.get("web-player.audiobooks.seeAllChapters")})})]})})),ye=n(4942),me=(n(88674),n(47941),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070),n(99922)),ge=n(74849);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,ye.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=(0,a.lazy)((function(){return Promise.all([n.e(1814),n.e(8396)]).then(n.bind(n,88396))}));function be(e){var t=(0,ge.m)(),n=(0,me.o)();return t?(0,ae.jsx)(a.Suspense,{fallback:!0,children:(0,ae.jsx)(xe,he(he({reason:"Episode page"},n),e))}):null}const ke="dpN5ViPOceUWNB5EQPHN",je="vBcxPq3E2okwgXOkVPEM",Pe="HCCBXwdFvq6omWW2hR0N",Ce="bJOPO5Zo7dpjSVDwEpSw",Te="TXdDDpokVTyJzDEDWHHf",Ie="HaSbtEVJnxBsaJ5SRi0M",Ne="YldGldlfaI9myEGXQf9g",Se="qJHVIpJn1vLPWsAKfTEZ",Ue="wSIzjkVlr0Zdy7di2vRm",we="hYS_K1NATGyWt6tCSRqQ",Ee="hVVaM4pF9arpQ8Nvn2a1",De="zf0Eac1LugsHUacz74Zf",Me="TnNaqxbaI0hzhBQZ7wE0",Oe="zSw1lG1TNe_xm6KTqtCv",Ae="MlEQDkXnjdKKJueJ9kkB",Re="jg0xlyD1yjh0DPNG6eOg",Le="QiHXpFb4dLZNOFe5gpp3";n(73210);var Be,Fe=n(97656),_e=n(49207),Ze=function(e){var t=e.cardHeaderText,n=e.cardBodyText,i=e.buttonText,a=e.buttonTarget;return(0,l.W6)(_e.vp)?(0,ae.jsxs)("div",{className:Ne,children:[(0,ae.jsxs)("div",{className:Se,children:[(0,ae.jsx)(J.D,{variant:"balladBold",semanticColor:"textBase",children:t}),(0,ae.jsx)(J.D,{semanticColor:"textBase",children:n})]}),(0,ae.jsx)(q.D,{buttonSize:"sm",colorSet:"invertedLight",href:s().from(a).toURLPath(!0),component:F.Z,children:i})]}):null},Ke=function(e){var t=e.areHTMLDescriptionsEnabled,n=e.contentInformation,i=e.description,r=e.hasDescription,o=e.htmlDescription,s=e.onExpanded,l=e.onTimeStampClick,c=e.playability,d=e.showHeader,p=void 0===d||d,v=e.spec,y=(0,O.$P)(),m=(r||n)&&p,g=(0,a.useCallback)((function(e){var t=v.readMoreButtonFactory();y.logInteraction(e?t.hitUiReveal():t.hitUiHide()),null==s||s()}),[v,y,s]);return(0,ae.jsxs)(ae.Fragment,{children:[m&&(0,ae.jsx)(J.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Pe,children:u.ag.get("episode.description-title")}),n&&(0,ae.jsx)(Ze,{cardHeaderText:n.cardHeaderText,cardBodyText:n.cardBodyText,buttonText:n.buttonText,buttonTarget:n.buttonTarget}),r&&(0,ae.jsx)(Fe.o,{className:je,onTimeStampClick:l,maxLines:4,onExpanded:g,content:(i||"").trim(),htmlContent:t&&o?o:void 0,enableTimestamps:c.playable})]})},We=n(94184),ze=n.n(We),He=n(97650),Je=n(29325),Xe=n(61102),qe=n(3822),Ve=n(13406),Ye=n(32648);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(Be||(Be={}));var Ge=a.memo((function(e){var t=e.transcriptSections,n=e.descriptionContent,r=e.transcriptContent,o=e.spec,s=(0,O.$P)(),l=(0,a.useState)(Be.DESCRIPTION),c=(0,i.Z)(l,2),d=c[0],p=c[1],v=a.useContext(Ye.VX).scrollNodeRef,y=(0,He.YD)({threshold:[1],root:v.current,rootMargin:"-".concat(Ve.K1+1,"px 100000px 0px 100000px")}),m=y.ref,g=y.inView,f=(0,a.useRef)(null),h=(0,a.useCallback)((function(e){f.current=e,m(e)}),[m]);return(0,a.useEffect)((function(){var e,t,n=null===(e=f.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.offsetTop,i=null==v?void 0:v.current;if(n&&i){var a=n-Ve.K1;i.scrollTop>a&&i.scrollTo({top:a})}}),[v,d]),(0,ae.jsx)(Je.l,{list:(0,ae.jsxs)(Xe.F,{className:ze()(Ae,(0,ye.Z)({},Re,!g)),ref:h,children:[(0,ae.jsx)(qe.c,{label:u.ag.get("web-player.episode.description"),sentenceCase:!0,active:d===Be.DESCRIPTION,onClick:function(){var e=o.tabsFactory().descriptionTabButtonFactory().hitUiReveal();s.logInteraction(e),p(Be.DESCRIPTION)},className:ze()(Le,(0,ye.Z)({},Ue,d===Be.DESCRIPTION))}),(0,ae.jsx)(qe.c,{label:u.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===t,active:d===Be.TRANSCRIPT,onClick:function(){var e=o.tabsFactory().transcriptTabButtonFactory().hitUiReveal();s.logInteraction(e),p(Be.TRANSCRIPT)},className:ze()(Le,(0,ye.Z)({},Ue,d===Be.TRANSCRIPT))})]}),children:null===t||d===Be.DESCRIPTION?n:r})})),Qe=(n(21249),n(43914)),$e=n(49104),et=(0,a.memo)((function(e){var t=e.transcriptSections,n=e.onTimeStampClick,i=e.episodeUri;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:Ee,children:(0,ae.jsx)(J.D,{variant:"viola",semanticColor:"textBase",children:u.ag.get("web-player.episode.transcript.disclaimer")})}),t.map((function(e,t){var a="transcript-section-".concat(t);return(0,ae.jsxs)("div",{className:we,children:[(0,ae.jsx)("button",{className:De,onClick:function(){n(e.startMs,a)},children:(0,ae.jsx)(Qe.D,{id:a,targetURI:s().from(i),fadeOut:!0,children:(0,ae.jsx)(J.D,{variant:"finaleBold",semanticColor:"textSubdued",className:Me,children:(0,$e.m)(e.startMs)})})}),e.content.map((function(e,t){return(0,ae.jsx)(J.D,{variant:"viola",semanticColor:"textBase",className:Oe,dir:"auto",children:e},"transcript-text-".concat(t))}))]},a)}))]})})),tt=(n(92222),n(85827),n(74600)),nt=n(28248),it=n(86543),at=n(38470),rt=n(1848),ot=n(88214),st=n(21509),lt=n(82760),ct=n(86064),dt=n(42922);const ut="OYehkMWcGJRKPkByp46K",pt="uc1bXkrZqrCz0CMK4lBb",vt="qZeibBbA3SVClzEueYND";var yt=function(e){var t,n=e.episodeUri,i=e.index,r=e.duration,o=e.start,s=e.stop,l=e.name,c=e.uri,d=e.artists,p=e.album,v=e.playable,y=(0,ct.k)({episodeUri:n,start:o,stop:s}),m=y.isActive,g=y.isPlaying,f=y.onClick,h=(0,a.useCallback)((function(e,t){f(t)}),[f]),x=(0,O.fU)(rt.createDesktopTrackListRowEventFactory,{data:{position:i,reason:"",uri:c}}).spec;return(0,ae.jsx)(dt.ZP,{value:"row",index:i,children:(0,ae.jsx)(N.xV,{trigger:"right-click",action:"open",menu:(0,ae.jsx)(ot.$,{uri:c}),children:(0,ae.jsxs)(lt.c,{uri:c,index:i,ariaRowIndex:i+1,dragMetadata:{name:l,createdBy:null!==(t=null==d?void 0:d[0].name)&&void 0!==t?t:""},onTriggerPlay:h,isActive:m,isPlayable:v,spec:x,children:[(0,ae.jsxs)(st.vZ,{ariaColIndex:0,children:[(0,ae.jsx)(st.Du,{uri:c,playAriaLabel:u.ag.get("tracklist.a11y.play",l,null==d?void 0:d[0].name),onClick:h,isPlaying:g,isActive:m,spec:x,children:(0,ae.jsx)(st.km,{children:(0,ae.jsx)("img",{className:pt,src:p.image,alt:p.name})})}),(0,ae.jsxs)(st.vm,{children:[(0,ae.jsx)(st.Wh,{titleText:l,children:l}),(0,ae.jsx)(st.K9,{children:(0,ae.jsx)(st.T6,{artists:d,spec:x})})]})]}),(0,ae.jsx)(st.UA,{ariaColIndex:1,children:(0,ae.jsx)(st.BM,{uri:p.uri,name:p.name,spec:x,children:p.name})}),(0,ae.jsxs)(st.mU,{ariaColIndex:2,children:[(0,ae.jsx)(st.qS,{uri:c,spec:x}),(0,ae.jsx)(st.A$,{duration:r}),(0,ae.jsx)(st.Zv,{spec:x,menu:(0,ae.jsx)(ot.$,{uri:c,artists:d}),label:u.ag.get("more.label.track",l,null==d?void 0:d[0].name)})]})]})})})};function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,ye.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ft(e,t,n){return e.reduce((function(e,i,a){return(a>0||t>0)&&e.push({type:"SPACER",id:"spacer-".concat(e.length)}),"MUSIC"===i.type?e.push(function(e,t,n){return{type:"MUSIC",index:t,uri:n.uri,episodeUri:e,start:n.start,stop:n.stop,duration:n.duration,name:n.track.name,artists:n.track.artists,album:n.track.album,playable:n.track.playable}}(n,a,i)):"TALK"===i.type&&e.push(function(e,t,n){return{type:"TALK",index:t,uri:e,title:n.title,subtitle:n.subtitle,start:n.start,stop:n.stop,duration:n.duration,showUri:n.show.uri,showName:n.show.name}}(n,a,i)),e}),[])}const ht=function(e){var t=e.uri,n=e.segmentCount,i=(0,it.G)(),r=(0,a.useCallback)(function(){var e=(0,W.Z)(H().mark((function e(n,a){var r,o;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Math.ceil(n/2),e.prev=1,e.next=4,i.getSegments(t,r,a);case 4:return o=e.sent,e.abrupt("return",ft(o,r,t));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,t]),o=(0,a.useCallback)((function(e){switch(e.type){case"SPACER":return(0,ae.jsx)("div",{className:vt},e.id);case"MUSIC":return(0,ae.jsx)(yt,gt({},e),"".concat(t,"-").concat(e.index));case"TALK":return(0,ae.jsx)(tt.t,gt({},e),"".concat(t,"-").concat(e.index));default:return(0,at.U)(e)}}),[t]),s=u.ag.get("music_and_talk.in_this_episode");return(0,ae.jsxs)("div",{children:[(0,ae.jsx)(J.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:ut,children:s}),(0,ae.jsx)(nt.Pv,{ariaLabel:s,hasHeaderRow:!0,rowPlaceholder:nt.hU,columns:[nt.QD.TITLE,nt.QD.ALBUM_OR_SHOW,nt.QD.DURATION],renderRow:o,fetchTracks:r,resolveUri:function(e){return"MUSIC"===e.type?e.uri:""},limit:50,nrTracks:2*n-1,testID:"music-and-talk-tracklist"})]})};n(39575),n(82472),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(37380),n(1118),n(79753),n(5735),n(83753),n(9653),n(47042),n(91038),n(77601),n(32165),n(21703),n(96647);var xt=n(43720),bt=n.n(xt),kt=n(62100),jt=n.n(kt);function Pt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Tt;function It(e){switch(e){case 0:case"UNKNOWN":return Tt.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return Tt.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return Tt.MUSIC_TRACK;default:return Tt.UNRECOGNIZED}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Tt||(Tt={}));var Nt=function(e,t){for(var n=e instanceof jt().Reader?e:new(jt().Reader)(e),i=void 0===t?n.len:n.pos+t,a={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};n.pos<i;){var r=n.uint32();switch(r>>>3){case 1:a.version=n.string();break;case 2:a.episodeUri=n.string();break;case 3:a.publishedAt=n.string();break;case 4:a.sections.push(St.decode(n,n.uint32()));break;case 5:a.language=n.string();break;case 6:a.curated=n.bool();break;default:n.skipType(7&r)}}return a};var St={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt().Writer.create();return 0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&Ut.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&wt.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&Ut.encode(e.fallback,t.uint32(42).fork()).ldelim(),t},decode:function(e,t){for(var n=e instanceof jt().Reader?e:new(jt().Reader)(e),i=void 0===t?n.len:n.pos+t,a={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};n.pos<i;){var r=n.uint32();switch(r>>>3){case 1:a.type=n.int32();break;case 2:a.startMs=n.int32();break;case 3:a.plaintextContent=Ut.decode(n,n.uint32());break;case 6:a.musicTrack=wt.decode(n,n.uint32());break;case 4:a.title=n.string();break;case 5:a.fallback=Ut.decode(n,n.uint32());break;default:n.skipType(7&r)}}return a},fromJSON:function(e){return{type:Et(e.type)?It(e.type):0,startMs:Et(e.startMs)?Number(e.startMs):0,plaintextContent:Et(e.plaintextContent)?Ut.fromJSON(e.plaintextContent):void 0,musicTrack:Et(e.musicTrack)?wt.fromJSON(e.musicTrack):void 0,title:Et(e.title)?String(e.title):"",fallback:Et(e.fallback)?Ut.fromJSON(e.fallback):void 0}},toJSON:function(e){var t={};return void 0!==e.type&&(t.type=function(e){switch(e){case Tt.UNKNOWN:return"UNKNOWN";case Tt.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case Tt.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?Ut.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?wt.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?Ut.toJSON(e.fallback):void 0),t},fromPartial:function(e){var t,n,i,a={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return a.type=null!==(t=e.type)&&void 0!==t?t:0,a.startMs=null!==(n=e.startMs)&&void 0!==n?n:0,a.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?Ut.fromPartial(e.plaintextContent):void 0,a.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?wt.fromPartial(e.musicTrack):void 0,a.title=null!==(i=e.title)&&void 0!==i?i:"",a.fallback=void 0!==e.fallback&&null!==e.fallback?Ut.fromPartial(e.fallback):void 0,a}};var Ut={encode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt().Writer.create(),i=Pt(e.plaintext);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.uint32(10).string(a)}}catch(e){i.e(e)}finally{i.f()}return n},decode:function(e,t){for(var n=e instanceof jt().Reader?e:new(jt().Reader)(e),i=void 0===t?n.len:n.pos+t,a={plaintext:[]};n.pos<i;){var r=n.uint32();if(r>>>3==1)a.plaintext.push(n.string());else n.skipType(7&r)}return a},fromJSON:function(e){return{plaintext:Array.isArray(null==e?void 0:e.plaintext)?e.plaintext.map((function(e){return String(e)})):[]}},toJSON:function(e){var t={};return e.plaintext?t.plaintext=e.plaintext.map((function(e){return e})):t.plaintext=[],t},fromPartial:function(e){var t,n={plaintext:[]};return n.plaintext=(null===(t=e.plaintext)||void 0===t?void 0:t.map((function(e){return e})))||[],n}};var wt={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt().Writer.create();return""!==e.uri&&t.uint32(10).string(e.uri),t},decode:function(e,t){for(var n=e instanceof jt().Reader?e:new(jt().Reader)(e),i=void 0===t?n.len:n.pos+t,a={uri:""};n.pos<i;){var r=n.uint32();if(r>>>3==1)a.uri=n.string();else n.skipType(7&r)}return a},fromJSON:function(e){return{uri:Et(e.uri)?String(e.uri):""}},toJSON:function(e){var t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial:function(e){var t,n={uri:""};return n.uri=null!==(t=e.uri)&&void 0!==t?t:"",n}};function Et(e){return null!=e}function Dt(e){var t,n,i;return e.type===Tt.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:(null===(n=e.fallback)||void 0===n?void 0:n.plaintext)||[],trackUri:null===(i=e.musicTrack)||void 0===i?void 0:i.uri}:{type:"text",startMs:e.startMs,content:(null===(t=e.plaintextContent)||void 0===t?void 0:t.plaintext)||[]}}function Mt(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,W.Z)(H().mark((function e(t){var n,i,a,r;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{});case 3:if(!(n=e.sent).ok||!n.body){e.next=11;break}return e.next=7,n.arrayBuffer();case 7:return i=e.sent,a=Nt(new Uint8Array(i)),r=a.sections.map(Dt),e.abrupt("return",r);case 11:return e.abrupt("return",null);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}jt().util.Long!==bt()&&(jt().util.Long=bt(),jt().configure());var At=function(e){var t=e.areHTMLDescriptionsEnabled,n=e.contentInformation,r=e.description,o=e.hasDescription,s=e.hasMusicAndTalkSegements,l=e.htmlDescription,c=e.onExpanded,d=e.onDescriptionTimestampClick,p=e.onTranscriptTimestampClick,v=e.playability,y=e.segmentCount,m=e.showUrl,f=e.transcript,h=e.transcriptEnabled,x=e.uri,b=e.spec,k=(0,O.$P)(),j=(0,a.useMemo)((function(){return b.descriptionSectionFactory()}),[b]),P=(0,a.useMemo)((function(){return j.trackListFactory()}),[j]),C=(0,a.useState)(null),T=(0,i.Z)(C,2),I=T[0],N=T[1],S=(0,a.useCallback)(function(){var e=(0,W.Z)(H().mark((function e(t){var n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(t);case 2:n=e.sent,N(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);(0,a.useEffect)((function(){f&&f.length>0&&S(f[0].cdnUrl)}),[S,f]);var U=function(e){return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ke,{hasDescription:o,contentInformation:n,onTimeStampClick:d,onExpanded:c,description:r,areHTMLDescriptionsEnabled:t,htmlDescription:l,playability:v,showHeader:e,spec:j}),s&&(0,ae.jsx)(O.Nh,{spec:P,children:(0,ae.jsx)(ht,{segmentCount:y,uri:x})}),m&&(0,ae.jsx)(g.P,{buttonSize:"sm",className:Ce,href:m,component:F.Z,onClick:function(){k.logInteraction(j.allEpisodesLinkFactory().hitUiNavigate({destination:m}))},children:u.ag.get("episode.see_all_episodes")}),(0,ae.jsx)(be,{uri:x})]})};return(0,ae.jsx)(ae.Fragment,{children:h&&f&&(null==f?void 0:f.length)>0?(0,ae.jsx)(Ge,{transcriptSections:I,descriptionContent:U(!1),transcriptContent:(0,ae.jsx)(et,{transcriptSections:I||[],onTimeStampClick:p,episodeUri:x}),spec:b}):U(!0)})},Rt=n(88435),Lt=n(87093),Bt="activation-trigger-mme",Ft=function(e){var t=e.episodeUri,n=e.showUri,i=e.isLocked,a=e.isPlaying,r=e.isPlayDisabled,o=e.playButtonPlayLabel,l=e.playButtonPauseLabel,c=e.onClick,d=(0,Lt.E)();if((0,_.g)())return(0,ae.jsx)(Z.JM,{size:Z.qE.lg,onClick:c,isPlaying:a,disabled:r,locked:i,ariaPlayLabel:o,ariaPauseLabel:l});var u=(0,ae.jsx)(Rt.l,{showUri:n,enabled:i,renderInline:!1,children:(0,ae.jsx)(Z.JM,{size:Z.qE.lg,onClick:c,isPlaying:a,disabled:r,locked:i,ariaPlayLabel:o,ariaPauseLabel:l})});return d?(0,ae.jsx)(Qe.D,{id:Bt,targetURI:s().from(t),fadeOut:!0,children:u}):u},_t=n(74414),Zt=n(31990);const Kt="o6AdXY67I_0xmTg8LBCI",Wt="MMZAjWZzcPpNIE06SNuf",zt="Ccgbgvk9PwclKl5rA6Zj",Ht="NHVXJRN6IZANogQjMWei",Jt="orBUEK6aY0SZVOnrDerw",Xt="ym1d5PDeTaJLIK0SspBF",qt="Hko6tpIRefr4NKiTEemO",Vt="ptUwXq9IK8IQAOE2UiDA",Yt="mpyCCCudeQ3uBmgrSAcA";var Gt=function(e){var t=e.cardHeaderText,n=e.cardBodyText,i=e.buttonText,a=e.buttonTarget;return(0,l.W6)(_e.vp)?(0,ae.jsxs)("div",{className:qt,children:[(0,ae.jsxs)("div",{className:Vt,children:[(0,ae.jsx)(J.D,{variant:"balladBold",semanticColor:"textBase",children:t}),(0,ae.jsx)(J.D,{semanticColor:"textBase",children:n})]}),(0,ae.jsx)(q.D,{buttonSize:"sm",colorSet:"invertedLight",href:s().from(a).toURLPath(!0),component:F.Z,children:i})]}):null},Qt=function(e){var t=e.areHTMLDescriptionsEnabled,n=e.contentInformation,i=e.description,a=e.hasDescription,r=e.htmlDescription,o=e.onExpanded,s=e.onTimeStampClick,l=e.playability,c=e.showHeader,d=(a||n)&&(void 0===c||c);return(0,ae.jsxs)(ae.Fragment,{children:[d&&(0,ae.jsx)(J.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:zt,children:u.ag.get("episode.description-title")}),n&&(0,ae.jsx)(Gt,{cardHeaderText:n.cardHeaderText,cardBodyText:n.cardBodyText,buttonText:n.buttonText,buttonTarget:n.buttonTarget}),a&&(0,ae.jsx)(Fe.o,{className:Wt,onTimeStampClick:s,maxLines:4,onExpanded:o,content:(i||"").trim(),htmlContent:t&&r?r:void 0,enableTimestamps:l.playable})]})},$t=function(e){var t,n=e.areHTMLDescriptionsEnabled,i=e.contentInformation,a=e.description,r=e.hasDescription,o=e.htmlDescription,s=e.onExpanded,l=e.onTimeStampClick,c=e.playability,d=e.showUrl,p=e.uri,v=e.seeAllButtonClick;return t=!0,(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Qt,{hasDescription:r,contentInformation:i,onTimeStampClick:l,onExpanded:s,description:a,areHTMLDescriptionsEnabled:n,htmlDescription:o,playability:c,showHeader:t}),d&&(0,ae.jsx)(g.P,{onClick:v,buttonSize:"sm",className:Ht,href:d,component:F.Z,children:u.ag.get("episode.see_all_episodes")}),(0,ae.jsx)(be,{uri:p})]})},en=n(82627),tn="activation-trigger-mme",nn=function(e){var t=e.episodeUri,n=e.showUri,i=e.isLocked,a=e.isPlaying,r=e.isPlayDisabled,o=e.playButtonPlayLabel,l=e.playButtonPauseLabel,c=e.onClick,d=(0,Lt.E)(),u=(0,ae.jsx)(Rt.l,{showUri:n,enabled:i,renderInline:!1,children:(0,ae.jsx)(en.f,{size:"lg",onClick:c,isPlaying:a,disabled:r,locked:i,ariaPlayLabel:o,ariaPauseLabel:l})});return d?(0,ae.jsx)(Qe.D,{id:tn,targetURI:s().from(t),fadeOut:!0,children:u}):u},an=n(92823),rn=n(80219),on=n(61901),sn=n(53538),ln=n(23716),cn=n(69691),dn=n(37483),un=n(89744),pn=n(95134),vn=n(20246),yn=n(87257),mn=n(52759),gn=function(e){var t,n,r,o,s=e.podcastShort,l=e.onPlayEpisode,c=e.isPlaying,d=e.isActive,p=e.isFullyPlayed,v=e.setIsFullyPlayed,y=e.backgroundColor,g=e.isLocked,f=e.onDownloadClick,k=e.onContextMenuClick,j=s.uri,P=s.playedState,C=s.contentRating,T=s.playability,I=(0,m.I0)(),N=(0,mn.z)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===j})),S=(0,i.Z)(N,1)[0],w=(0,D.Y)((function(e){return null==e?void 0:e.duration})),E=(0,L.r)({contentRating:null==C?void 0:C.label}),M=E.badges,O=E.hasBadges,A=(0,a.useCallback)((function(e){!T.playable&&M.nineteen&&(e.stopPropagation(),I((0,h.RM)(j||"")))}),[j,T.playable,M.nineteen,I]),B=!g&&!s.playability.playable,F=u.ag.get("tracklist.a11y.play",s.name,null===(t=s.podcast)||void 0===t?void 0:t.name),_=u.ag.get("tracklist.a11y.pause",s.name,null===(n=s.podcast)||void 0===n?void 0:n.name),Z=null===(r=s.podcast)||void 0===r?void 0:r.uri;return(0,ae.jsxs)(x.o,{backgroundColor:y,children:[(0,ae.jsxs)("div",{className:Yt,children:[O&&(0,ae.jsxs)(pn.g,{children:[M.nineteen&&(0,ae.jsx)(U.X,{className:Jt,size:16}),M.explicit?(0,ae.jsx)(yn.N,{}):null]}),(0,ae.jsx)(x.F,{children:(0,ae.jsx)(R.E,{size:R.$.LARGE,fullyPlayed:p,durationMs:d&&w?w:s.duration.milliseconds,releaseDate:bn(null===(o=s.releaseDate)||void 0===o?void 0:o.isoString),resumePositionMs:P.playPositionMilliseconds,isPlaying:c,position:d&&S||void 0})})]}),(0,ae.jsxs)(x.F,{children:[(0,ae.jsx)("div",{onClick:A,children:(0,ae.jsx)(nn,{episodeUri:s.uri,showUri:Z,isLocked:g,onClick:function(){l(P.playPositionMilliseconds,!1)},isPlaying:c,isPlayDisabled:B,playButtonPlayLabel:F,playButtonPauseLabel:_})}),!g&&(0,ae.jsx)(dn.p,{onClick:f,uri:s.uri,showUri:Z}),(0,ae.jsx)(vn.y,{onShow:k,menu:(0,ae.jsx)(un.v,{uri:s.uri,sharingInfo:s.sharingInfo,showUri:Z,contextUri:s.uri,isPlayed:p,onMarkAsPlayed:v,userCreated:s.userCreated}),children:(0,ae.jsx)(b.z,{label:u.ag.get("more.label.context",s.name)})})]})]})},fn=n(91355);var hn=function(e){var t,n=e.podcastShort,i=e.isFullyPlayed,a=e.setIsFullyPlayed,r=e.backgroundColor,o=e.spec,s=n.uri,l=n.name,c=n.sharingInfo,d=n.playedState,p=n.episodeType,v=n.releaseDate,y=n.userCreated,m=(0,O.$P)(),g=function(e,t,n,i,a){var r=t===A.Wf.Episode;return(0,fn.G3)(e,i,n,a)?(0,ae.jsx)(fn.Fg,{isMusicAndTalk:r}):r?u.ag.get("type.showEpisode"):u.ag.get("type.podcastEpisode")}(s,p||A.Wf.Unknown,d.playPositionMilliseconds,bn(null==v?void 0:v.isoString),d.state===A.sY.Completed),f=null===(t=n.podcast)||void 0===t?void 0:t.uri;return(0,ae.jsxs)(j.gF,{backgroundColor:r,children:[(0,ae.jsx)(P.W,{children:(0,ae.jsx)(C.i,{text:n.name,dragUri:s,dragLabel:n.name})}),(0,ae.jsx)("div",{className:Xt,children:(null==y?void 0:y.userUri)&&(0,ae.jsx)(S._,{menu:(0,ae.jsx)(un.v,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:f,contextUri:n.uri,isPlayed:i,onMarkAsPlayed:a,userCreated:y}),children:(0,ae.jsx)(j.Oe,{loading:"eager",name:n.name,images:n.coverArt,placeholderType:"episode",shape:j.Kc.ROUNDED_CORNERS})})}),(0,ae.jsxs)(j.sP,{children:[(0,ae.jsx)(j.dy,{small:!0,uppercase:!0,children:g}),(null==y?void 0:y.userUri)&&(0,ae.jsx)(S._,{menu:(0,ae.jsx)(un.v,{uri:s,sharingInfo:c,showUri:f,contextUri:s,isPlayed:i,onMarkAsPlayed:a,userCreated:y}),children:(0,ae.jsx)(j.xd,{dragUri:s,dragLabel:l,children:l})}),(null==y?void 0:y.userUri)&&(0,ae.jsx)(S._,{menu:(0,ae.jsx)(un.v,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:f,contextUri:n.uri,isPlayed:i,onMarkAsPlayed:a,userCreated:y}),children:(0,ae.jsx)(T.Z,{onClick:function(){var e,t=o.hitUiNavigate({destination:null!==(e=null==y?void 0:y.userUri)&&void 0!==e?e:""});m.logInteraction(t)},to:y.userUri,children:(0,ae.jsx)(j.dy,{large:!0,bold:!0,children:(0,ae.jsx)("span",{"data-testid":"showTitle",children:null==y?void 0:y.displayName})})})})]})]})},xn=function(e){var t,n,r,o,c=e.podcastShort,d=c.uri,y=c.episodeType,m=c.description,g=c.htmlDescription,f=c.podcastSubscription,h=c.segmentsCount,x=c.podcast,b=c.contentInformation,k=c.playedState,j=c.coverArt,P=c.userCreated,C=(0,O.fU)(Zt.createDesktopPodcastShortEventFactory,{data:{uri:d}}).spec,T=a.useMemo((function(){return C.userProfileLinkFactory({uri:d})}),[C,d]),I=a.useMemo((function(){return C.actionBarFactory()}),[C]),N=(0,a.useState)(k.state===A.sY.Completed),S=(0,i.Z)(N,2),U=S[0],w=S[1],M=(0,ln.g)(),R=(0,an.o)(),L=(0,l.W6)(_e.Cz),B=void 0!==h&&h>0,F=(0,_.g)(),Z=(0,E.n)({uri:d},{featureIdentifier:"episode"}),K=Z.triggerPlay,W=Z.togglePlay,z=Z.isActive,H=(0,cn.$o)(d),J=H.isPlaying,X=H.isActive,q=j[0].url,V=(0,on.Zj)(q||null),Y=(0,D.Y)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),G=(0,Lt.E)(),Q=(null==f?void 0:f.isPaywalled)&&!f.isUserSubscribed,$=(0,rn.s)(c,x),ee=(0,O.$P)(),te=(0,a.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=function(){Y?M.resume():M.pause()};if(!Q){var a="play";if(!J||0!==e&&t||(a="pause"),R({intent:a,targetUri:d,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),y===A.Wf.Episode&&G)v.y.set((function(){return{triggerId:n||tn,triggerAction:null}}));else if(z&&!t)if(F)i();else{var r=(0,sn.aK)({isPlaying:J,isActive:X,spec:C.actionBarFactory().playButtonFactory(),logger:ee,uri:d});W({loggingParams:r})}else X?i():F?$({seekTo:e}):K({seekTo:e})}}),[Q,J,R,d,X,C,ee,W,y,G,z,Y,M,F,$,K]),ne=(0,a.useCallback)((function(){(0,sn.qq)(I,ee)}),[I,ee]),ie=(0,a.useCallback)((function(e,t){(0,sn.l7)(t,I.downloadButtonFactory(),ee,d)}),[ee,d,I]),re=(0,a.useCallback)((function(){R({intent:"expand-description",type:"click"})}),[R]),oe=(0,a.useCallback)((function(){var e,t=null!==(e=null==P?void 0:P.userUri)&&void 0!==e?e:"",n=C.seeAllEpisodesButtonFactory({uri:t}).hitUiNavigate({destination:t});ee.logInteraction(n)}),[P,ee,C]);(0,a.useEffect)((function(){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",n=1e3*parseInt(t,10);n<=c.duration.milliseconds&&te(n)}}),[te,c.duration.milliseconds]);var se=!!m||L&&!!g,le=null===(t=c.podcast)||void 0===t?void 0:t.uri,ce=null===(n=s().from(le))||void 0===n?void 0:n.toURLPath(!0);return(0,ae.jsxs)("section",{"data-testid":"episode",className:Kt,children:[(0,ae.jsx)(p.$,{children:u.ag.get("podcasts.episode.seo.title",{name:c.name,show:null!==(r=null===(o=c.podcast)||void 0===o?void 0:o.name)&&void 0!==r?r:""})}),(0,ae.jsx)(hn,{podcastShort:c,isFullyPlayed:U,setIsFullyPlayed:w,backgroundColor:V,spec:T}),(0,ae.jsx)(gn,{podcastShort:c,onPlayEpisode:te,isPlaying:J,isActive:X||z,isFullyPlayed:U,setIsFullyPlayed:w,backgroundColor:V,isLocked:!!Q,onContextMenuClick:ne,onDownloadClick:ie}),(0,ae.jsx)("div",{className:"contentSpacing",children:(0,ae.jsx)($t,{seeAllButtonClick:oe,hasDescription:se,contentInformation:b,onTimeStampClick:te,onExpanded:re,description:c.description,areHTMLDescriptionsEnabled:L,htmlDescription:c.htmlDescription,playability:c.playability,hasMusicAndTalkSegements:B,segmentCount:h,uri:c.uri,showUrl:ce})})]})};function bn(e){return(null==e?void 0:e.replace(/T.*/,""))||""}var kn=n(11486),jn=n(52404),Pn=n(86649),Cn=n(87834),Tn=n(51871),In=n(25988),Nn=n(44065),Sn=function(e){var t,n,r,o,s=e.episode,l=e.onPlayEpisode,c=e.isPlaying,d=e.isActive,p=e.isFullyPlayed,v=e.setIsFullyPlayed,y=e.backgroundColor,g=e.isLocked,f=e.spec,k=s.uri,j=s.playedState,P=s.contentRating,C=s.playability,T=(0,O.$P)(),I=(0,m.I0)(),N=(0,mn.z)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===k})),S=(0,i.Z)(N,1)[0],w=(0,D.Y)((function(e){return null==e?void 0:e.duration})),E=(0,L.r)({contentRating:null==P?void 0:P.label}).badges,M=(0,a.useCallback)((function(e){!C.playable&&E.nineteen&&(e.stopPropagation(),I((0,h.RM)(k||"")))}),[k,C.playable,E.nineteen,I]),A=(0,a.useCallback)((function(){var e=f.contextMenuButtonFactory().hitUiReveal();T.logInteraction(e)}),[T,f]),B=(0,a.useCallback)((function(e,t){(0,sn.l7)(t,f.downloadButtonFactory(),T,k)}),[T,f,k]),F=(0,a.useCallback)((function(e){var t=f.saveButtonFactory();T.logInteraction(e?t.hitLike({itemToBeLiked:k}):t.hitRemoveLike({itemNoLongerLiked:k}))}),[T,f,k]),_=!g&&!s.playability.playable,Z=u.ag.get("tracklist.a11y.play",s.name,null===(t=s.podcast)||void 0===t?void 0:t.name),K=u.ag.get("tracklist.a11y.pause",s.name,null===(n=s.podcast)||void 0===n?void 0:n.name),W=null===(r=s.podcast)||void 0===r?void 0:r.uri;return(0,ae.jsxs)(x.o,{backgroundColor:y,children:[(0,ae.jsxs)(x.F,{children:[E.nineteen&&(0,ae.jsx)(U.X,{className:Te,size:16}),(0,ae.jsx)(R.E,{size:R.$.LARGE,fullyPlayed:p,durationMs:d&&w?w:s.duration.milliseconds,releaseDate:Dn(null===(o=s.releaseDate)||void 0===o?void 0:o.isoString),resumePositionMs:j.playPositionMilliseconds,isPlaying:c,position:d&&S||void 0})]}),(0,ae.jsxs)(x.F,{children:[(0,ae.jsx)("div",{onClick:M,children:(0,ae.jsx)(Ft,{episodeUri:s.uri,showUri:W,isLocked:g,onClick:function(){l(j.playPositionMilliseconds)},isPlaying:c,isPlayDisabled:_,playButtonPlayLabel:Z,playButtonPauseLabel:K})}),!g&&(0,ae.jsx)(dn.p,{uri:s.uri,showUri:W,onClick:B}),(0,ae.jsx)(Tn.w,{uri:s.uri,size:Nn.q.md,onClick:F}),(0,ae.jsx)(vn.y,{onShow:A,menu:(0,ae.jsx)(In.k,{uri:s.uri,sharingInfo:s.sharingInfo,showUri:W,contextUri:s.uri,isPlayed:p,onMarkAsPlayed:v}),children:(0,ae.jsx)(b.z,{label:u.ag.get("more.label.context",s.name)})})]})]})};var Un=function(e){var t,n,i=e.episode,r=e.isFullyPlayed,o=e.setIsFullyPlayed,l=e.backgroundColor,c=e.spec,d=i.uri,p=i.name,v=i.sharingInfo,y=i.playedState,m=i.episodeType,g=i.releaseDate,f=(0,O.$P)(),h=function(e,t,n,i,a){var r=t===A.Wf.Episode;return(0,fn.G3)(e,i,n,a)?(0,ae.jsx)(fn.Fg,{isMusicAndTalk:r}):r?u.ag.get("type.showEpisode"):u.ag.get("type.podcastEpisode")}(d,m||A.Wf.Unknown,y.playPositionMilliseconds,Dn(null==g?void 0:g.isoString),y.state===A.sY.Completed),x=null===(t=i.podcast)||void 0===t?void 0:t.uri,b=function(e){var t=s().from(e),n=s().hexToId((null==t?void 0:t.id)||"");return"/show/".concat(n)}(x),k=(0,a.useCallback)((function(){f.logInteraction(c.podcastLinkFactory().hitUiNavigate({destination:b}))}),[f,b,c]);return(0,ae.jsxs)(j.gF,{backgroundColor:l,children:[(0,ae.jsx)(P.W,{children:(0,ae.jsx)(C.i,{text:i.name,dragUri:d,dragLabel:i.name})}),(0,ae.jsx)("div",{className:Ie,children:(0,ae.jsx)(S._,{menu:(0,ae.jsx)(In.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:x,contextUri:i.uri,isPlayed:r,onMarkAsPlayed:o}),children:(0,ae.jsx)(j.Oe,{loading:"eager",name:i.name,images:i.coverArt,placeholderType:"episode",shape:j.Kc.ROUNDED_CORNERS})})}),(0,ae.jsxs)(j.sP,{children:[(0,ae.jsx)(j.dy,{small:!0,uppercase:!0,children:h}),(0,ae.jsx)(S._,{menu:(0,ae.jsx)(In.k,{uri:d,sharingInfo:v,showUri:x,contextUri:d,isPlayed:r,onMarkAsPlayed:o}),children:(0,ae.jsx)(j.xd,{dragUri:d,dragLabel:p,children:(0,ae.jsx)("span",{"data-testid":"episodeTitle",children:p})})}),(0,ae.jsx)(S._,{menu:(0,ae.jsx)(In.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:x,contextUri:i.uri,isPlayed:r,onMarkAsPlayed:o}),children:(0,ae.jsx)(j.dy,{large:!0,bold:!0,children:(0,ae.jsx)(T.Z,{to:b,onClick:k,children:(0,ae.jsx)("span",{"data-testid":"showTitle",children:null===(n=i.podcast)||void 0===n?void 0:n.name})})})})]})]})},wn=function(e){var t,n,r,o,d=e.episode,y=d.uri,m=d.episodeType,g=d.description,f=d.htmlDescription,h=d.podcastSubscription,x=d.segmentsCount,b=d.podcast,k=d.contentInformation,j=d.playedState,P=d.coverArt,C=(0,O.fU)(c.createDesktopEpisodeEventFactory,{data:{uri:y}}),T=C.spec,I=C.logger,N=(0,a.useMemo)((function(){return T.headerFactory()}),[T]),S=(0,a.useMemo)((function(){return T.actionBarFactory()}),[T]),U=(0,a.useState)(j.state===A.sY.Completed),w=(0,i.Z)(U,2),M=w[0],R=w[1],L=(0,ln.g)(),B=(0,an.o)(),F=(0,l.W6)(_e.Cz),Z=void 0!==x&&x>0,K=(0,l.W6)(_e.WE,{loadingValue:!1}),W=(0,_.g)(),z=(0,E.n)({uri:y},{featureIdentifier:"episode"}),H=z.triggerPlay,J=z.togglePlay,X=z.isActive,q=(0,cn.$o)(y),V=q.isPlaying,Y=q.isActive,G=P[0].url,Q=(0,on.Zj)(G||null),$=(0,D.Y)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),ee=(0,Lt.E)(),te=h.isPaywalled&&!h.isUserSubscribed,ne=Y||X,ie=(0,rn.s)(d,b),re=(0,a.useCallback)((function(e,t,n,i){var a=function(){$?(null==i||i("resume"),L.resume()):(null==i||i("pause"),L.pause())};if(!te){var r="play";if(!V||0!==e&&t||(r="pause"),B({intent:r,targetUri:y,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),m===A.Wf.Episode&&ee)v.y.set((function(){return{triggerId:n||Bt,triggerAction:null}}));else if(X&&!t)W?a():J({loggingParams:null==i?void 0:i()});else if(Y&&!t)a();else{var o=null==i?void 0:i("play");W?ie({seekTo:e,loggingParams:o}):H({seekTo:e,loggingParams:o})}}}),[te,V,B,y,m,ee,Y,X,W,$,L,J,ie,H]),oe=(0,a.useCallback)((function(e){re(e,!1,void 0,(function(e){var t,n=T.actionBarFactory().playButtonFactory();return t="pause"===e||V?n.hitPause({itemToBePaused:y}):"resume"===e||ne?n.hitResume({itemToBeResumed:y}):n.hitPlay({itemToBePlayed:y}),I.logInteraction(t)}))}),[re,ne,V,I,T,y]),se=(0,a.useCallback)((function(e){re(e,!0,void 0,(function(){return I.logInteraction(T.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:y}))}))}),[re,I,T,y]),le=(0,a.useCallback)((function(e,t){re(e,!0,t,(function(){return I.logInteraction(T.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:y}))}))}),[re,I,T,y]),ce=(0,a.useCallback)((function(){B({intent:"expand-description",type:"click"})}),[B]);(0,a.useEffect)((function(){if(d&&!ne){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",n=1e3*parseInt(t,10);n<=d.duration.milliseconds&&re(n,!0)}}}),[d,ne]);var de=!!g||F&&!!f,ue=null===(t=d.podcast)||void 0===t?void 0:t.uri,pe=null===(n=s().from(ue))||void 0===n?void 0:n.toURLPath(!0);return(0,ae.jsxs)("section",{"data-testid":"episode",className:ke,children:[(0,ae.jsx)(p.$,{children:u.ag.get("podcasts.episode.seo.title",{name:d.name,show:null!==(r=null===(o=d.podcast)||void 0===o?void 0:o.name)&&void 0!==r?r:""})}),(0,ae.jsx)(Un,{episode:d,isFullyPlayed:M,setIsFullyPlayed:R,backgroundColor:Q,spec:N}),(0,ae.jsx)(Sn,{episode:d,onPlayEpisode:oe,isPlaying:V,isActive:ne,isFullyPlayed:M,setIsFullyPlayed:R,backgroundColor:Q,isLocked:te,spec:S}),(0,ae.jsx)("div",{className:"contentSpacing",children:(0,ae.jsx)(At,{transcriptEnabled:K,transcript:d.transcript,hasDescription:de,contentInformation:k,onDescriptionTimestampClick:se,onTranscriptTimestampClick:le,onExpanded:ce,description:d.description,areHTMLDescriptionsEnabled:F,htmlDescription:d.htmlDescription,playability:d.playability,hasMusicAndTalkSegements:Z,segmentCount:x,uri:d.uri,showUrl:pe,spec:T})})]})};const En=a.memo((function(){var e=(0,r.UO)().episodeId,t=s().episodeURI(e).toURI(),n=(0,l.W6)(_e.uB),i=(0,l.W6)(_e.Nf),o=(0,jn.I)(t,n),c=(0,kn.V)("episode",o);return c?(0,ae.jsx)(_t.o,{to:c}):o?(0,Pn.Ey)(o)?(0,ae.jsx)(a.Suspense,{fallback:null,children:(0,ae.jsx)(Cn.C,{pageId:d.Wg.PODCAST_EPISODE_AUDIOBOOK,uri:t,children:(0,ae.jsx)(ve,{chapter:o})})}):(0,Pn.Qj)(o)&&i?(0,ae.jsx)(a.Suspense,{fallback:null,children:(0,ae.jsx)(Cn.C,{pageId:d.Wg.PODCAST_EPISODE,uri:t,children:(0,ae.jsx)(xn,{podcastShort:o})})}):(0,ae.jsx)(a.Suspense,{fallback:null,children:(0,ae.jsx)(Cn.C,{pageId:d.Wg.PODCAST_EPISODE,uri:t,children:(0,ae.jsx)(wn,{episode:o})})}):(0,ae.jsx)(y.h,{hasError:!1,errorMessage:u.ag.get("error.not_found.title.podcast")})}));function Dn(e){return(null==e?void 0:e.replace(/T.*/,""))||""}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map