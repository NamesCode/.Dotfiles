"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8396],{88396:(e,r,n)=>{n.r(r),n.d(r,{EPISODE_SPONSORS_SHELF_TESTID:()=>w,EpisodeSponsorsWrapper:()=>j,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>P,default:()=>k});var t=n(87462),o=n(4942),s=(n(66992),n(41539),n(88674),n(78783),n(33948),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070),n(67294)),i=n(15861),a=n(87757),p=n.n(a),u=(n(21249),n(92222),n(1486)),c=n(8271);n(47042);var d=(0,s.lazy)((function(){return Promise.all([n.e(1814),n.e(9033)]).then(n.bind(n,99033))}));function f(e){var r=e.fetchedEpisodeSponsorsData,n=e.fireTrackingEvent,o=e.numberOfSponsorsToDisplay,a=e.firedViewedEvents,f=e.version,l=e.reason,v=e.uri,b=function(e){var r=e.fetchedEpisodeSponsorsData,n=e.numberOfSponsorsToDisplay;return(0,s.useMemo)((function(){return{displayedEpisodeSponsorsData:r.slice(0,n)}}),[r,n])}({fetchedEpisodeSponsorsData:r,numberOfSponsorsToDisplay:o}),O=b.displayedEpisodeSponsorsData,S=(0,c.s4)(),E=(0,s.useMemo)((function(){return O.map((function(e,r){return s.createElement(d,(0,t.Z)({key:"".concat(e.metadata.lineitem_id,"-").concat(r),fireTrackingEvent:n,firedViewedEvents:a,version:f,onClick:function(){var e=(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.send((0,u.$)({uri:v,reason:l,lineitem_id:O.map((function(e){return e.metadata.lineitemId})),ui_navigate:O.map((function(e,n){var t=e.clickthrough;return r===n?t:""})),navigate_to_external_uri:O.map((function(e,n){return r===n}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e))}))}),[O,n,a,f,l,v,S]);return{displayedEpisodeSponsorsData:O,displayedSponsors:E}}var l=n(69518),v=n.n(l);var b=n(51615);var O=n(18693);n(70189);function S(e){var r,n=e.firedViewedEvents,t=(0,s.useRef)();return{firedViewedEvents:t.current=null!==(r=null!=n?n:t.current)&&void 0!==r?r:new Set}}function E(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?E(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function m(e){var r=e.uri,n=e.getEpisodeSponsors,t=e.fireTrackingEvent,o=e.numberOfSponsorsToDisplay,i=e.version,a=e.reason,p=(0,b.TH)().state,u=function(e){var r=e.uri,n=e.episodeBase62Id;return{episodeBase62Id:(0,s.useMemo)((function(){var e;return n||(null===(e=v().from(r))||void 0===e?void 0:e.getBase62Id())}),[r,n])}}(y(y({},p),{},{uri:r})),c=u.episodeBase62Id,d=(0,O.m)(y(y({},p),{},{episodeBase62Id:c,getEpisodeSponsors:n,version:i})).fetchedEpisodeSponsorsData,l=S(y({},p)).firedViewedEvents;return y(y({uri:r,episodeBase62Id:c,fetchedEpisodeSponsorsData:d},f({fetchedEpisodeSponsorsData:d,fireTrackingEvent:t,numberOfSponsorsToDisplay:o,firedViewedEvents:l,version:i,reason:a,uri:r})),{},{firedViewedEvents:l,reason:a})}function h(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function D(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var g=(0,s.lazy)((function(){return n.e(4791).then(n.bind(n,54791))})),w="episode-sponsors-shelf",P="see-all-episode-sponsors";function j(e){var r,n={numberOfSponsorsToDisplay:void 0===(r=e.numberOfSponsorsToDisplay)?3:r}.numberOfSponsorsToDisplay,o=m(D(D({},e),{},{numberOfSponsorsToDisplay:n}));return o.episodeBase62Id&&o.displayedSponsors.length?s.createElement(s.Suspense,{fallback:!0},s.createElement(g,(0,t.Z)({},e,{numberOfSponsorsToDisplay:n,state:o}))):null}const k=j},18693:(e,r,n)=>{n.d(r,{F:()=>c,m:()=>d});var t=n(15861),o=n(29439),s=n(87757),i=n.n(s),a=(n(21703),n(96647),n(66992),n(41539),n(88674),n(78783),n(33948),n(67294)),p=n(24697),u=n(31604),c=420;function d(e){var r=e.episodeBase62Id,s=e.getEpisodeSponsors,d=e.fetchedEpisodeSponsorsData,f=void 0===d?[]:d,l=e.version,v=(0,a.useState)(f),b=(0,o.Z)(v,2),O=b[0],S=b[1],E=(0,a.useCallback)((0,t.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("episodeBase62Id is required to fetch episode sponsors");case 3:if(null==s){e.next=7;break}e.t0=s,e.next=10;break;case 7:return e.next=9,Promise.resolve().then(n.bind(n,11401));case 9:e.t0=e.sent.getEpisodeSponsors;case 10:return t=e.t0,e.t1=S,e.next=14,t(r,{version:l});case 14:e.t2=e.sent,(0,e.t1)(e.t2),e.next=21;break;case 18:e.prev=18,e.t3=e.catch(0),S([]);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),[r,s,l]),y=(0,p.y1)(E,c);return(0,a.useEffect)((function(){f.length||y()}),[y,f.length]),(0,u.H)(y),{fetchedEpisodeSponsorsData:O}}},31604:(e,r,n)=>{n.d(r,{H:()=>u});n(32564);var t=n(67294),o=n(87577),s=n(49207),i=n(40080),a=n(8341),p=n(89952);function u(e){var r=(0,o.W6)(s.oF),n=(0,a.Y)((function(e){var r,n,t=null!==(r=null==e?void 0:e.item)&&void 0!==r?r:void 0;return(0,p.k6)(t)&&t.isPodcastAd&&null!==(n=t.id)&&void 0!==n?n:void 0})),u=(0,i.D)(n);(0,t.useEffect)((function(){n!==u&&Boolean(n)&&setTimeout(e,r)}),[e,n,u,r])}}}]);
//# sourceMappingURL=8396.js.map