"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1289],{61112:(e,t,n)=>{n.r(t),n.d(t,{default:()=>he});var r,a,i=n(4942),l=(n(57327),n(41539),n(67294)),o=n(6695),s=n(96206),c=n(30731),u=n(6158),d=n(1838),m=n(22423),f=n(47032),g=n(38911),y=n(4236),p=n(61901),E=n(45342),b=n(84242),h=n(89952),P=n(70369),v=n(23609),C=(n(68309),n(18270)),k=n(55120),O=n(64971),A=(n(26699),n(32023),n(69600),n(21249),n(92222),n(74483)),x=(r={},(0,i.Z)(r,A.yW.NAME,d.hI.TITLE),(0,i.Z)(r,A.yW.SHOW_NAME,d.hI.SHOW),(0,i.Z)(r,A.yW.ADDED_AT,d.hI.ADDED_AT),r),D=[g.oT.ADDED_AT,g.oT.CREATOR_NAME,g.oT.EPISODE_ALPHABETICAL],I=(a={},(0,i.Z)(a,g.oT.ADDED_AT,{field:A.yW.ADDED_AT,order:A.As.DESC}),(0,i.Z)(a,g.oT.CREATOR_NAME,{field:A.yW.SHOW_NAME,order:A.As.ASC}),(0,i.Z)(a,g.oT.EPISODE_ALPHABETICAL,{field:A.yW.NAME,order:A.As.ASC}),a),S=function(e){if(D.includes(e))return I[e]},w=function(e){if(D.includes(e)){var t=S(e);if(null!=t&&t.field){var n=x[t.field];if(n)return d.Vd[n].map((function(e){return t.order?"".concat(e," ").concat(t.order):e})).join(",")}}};const T="m9xwK71Ieq9cySIq4FAP",_="PkEMTu8sGqJeQWJ7HvEs",N="DbH2KkRA8yVWWpXGaNSW";var R=function(e){var t=e.metadata,n=e.canSort,r=e.backgroundColor,a=e.isPlaying,i=e.isOnline,o=e.togglePlay,c=t.uri,u=t.name,d=t.totalLength>0;return l.createElement(C.o,{backgroundColor:r},l.createElement(C.F,null,d&&l.createElement(k.$,{onClick:function(){return o()},isPlaying:a,size:"lg",uri:c,disabled:!i,ariaPlayLabel:s.ag.get("playlist.a11y.play",u),ariaPauseLabel:s.ag.get("playlist.a11y.pause",u)}),n&&l.createElement("div",{className:N},l.createElement(O.h,{filterPlaceholder:s.ag.get("playlist.search_in_playlist"),sortOptions:D}))))},L=n(93433),Z=n(15861),M=n(29439),U=n(87757),W=n.n(U),j=(n(9653),n(40561),n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070),n(70937)),H=n(42922),z=n(18864),G=(n(41817),n(25988)),q=n(48194),F=n(88435),B=n(56294),K=n(57784),$=n(56802),Q=n(18261),V=n(87257),J=n(57978),X=n(4383),Y=n(8341),ee=n(5944),te=n(42781),ne=n(84788),re=n(67062),ae=n(43028),ie={small:64,standard:300,large:640,xlarge:1024},le=l.memo((function(e){var t,n,r,a,i=e.index,o=e.contextUri,s=e.episode,c=e.onRemove,u=e.usePlayContextItem,d=(0,l.useRef)(s.duration.milliseconds-s.timeLeft.milliseconds),f=s.uri,g=(0,l.useState)(0===s.timeLeft.milliseconds),p=(0,M.Z)(g,2),E=p[0],h=p[1],P=(0,l.useContext)(m.fo).filter,v=(0,K.O1)(),C=(0,z.jh)(),k=(0,$.o)(),O=(0,X.Z)(f,!0),A=(0,M.Z)(O,1)[0],x=(0,ae.k)(s.uri,s.isPlayable),D=(0,y.k)(),I=(0,Y.Y)((function(e){var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===s.uri){var n,r=null!==(n=(0,ee.k)(e))&&void 0!==n?n:0;return d.current=r,r}return 0})),S=u({uri:f,index:i}),w=S.isPlaying,T=S.isActive,_=S.togglePlay,N=(0,b.n)({uri:f,pages:[{items:[{type:te.p.EPISODE,uri:f,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),R=N.isPlaying,L=N.isActive,Z=N.togglePlay;(0,l.useEffect)((function(){A||c()}),[A,c]),(0,l.useEffect)((function(){w||s.duration.milliseconds<=d.current&&h(!0)}),[w,s.duration.milliseconds]);var U=(0,l.useCallback)((function(e){e||(d.current=0),h(e)}),[]),W=(0,l.useCallback)((function(){k({type:"click",targetUri:f,intent:"navigate"})}),[f,k]),j=(0,l.useCallback)((function(){D?(k({type:"click",intent:w?"pause":"play"}),_()):(k({type:"click",intent:R?"pause":"play"}),Z())}),[D,w,R,k,_,Z]),le=(0,l.useCallback)((function(e){return l.createElement(re.o,{searchWords:[P],textToHighlight:e})}),[P]),oe=null!==(t=null===(n=s.podcastSubscription)||void 0===n?void 0:n.isPaywalled)&&void 0!==t&&t,se=null!==(r=null===(a=s.podcastSubscription)||void 0===a?void 0:a.isUserSubscribed)&&void 0!==r&&r,ce=(0,ne.r)({isExplicit:s.isExplicit,isMOGEFRestricted:s.is19PlusOnly,isPaywalled:oe}).badges,ue=!1;return(T||!D&&L)&&(ue=!0),A?l.createElement(H.ZP,{value:"row",index:i},l.createElement(Q._,{menu:l.createElement(G.k,{uri:f,showUri:s.show.uri,isPlayed:E,onMarkAsPlayed:U})},l.createElement(q.X,{requestId:s.requestId,index:i,uri:f,uid:f,size:C,images:s.images.map((function(e){return{url:e.url,width:e.width||(e.label?ie[e.label]:null),height:e.height||(e.label?ie[e.label]:null)}})),isPaywalled:oe,isUserSubscribed:se,name:s.name,highlightText:le,showName:s.show.name,showUri:s.show.uri,description:s.description,isPlayable:x,fullyPlayed:E,durationMs:s.duration.milliseconds,releaseDate:s.release.date||"",resumePositionMs:d.current,handleDragStart:function(e){if(e.target===e.currentTarget){var t="".concat(s.name," â€¢ ").concat(s.show.name);v(e,[f],t,o)}},handlePlaybackClick:j,handleClick:W,isCurrentlyPlaying:ue,isPlaying:D?w:R,position:ue?I:void 0,episodeSharingInfo:null,onMarkAsPlayed:U,badges:l.createElement(l.Fragment,null,ce.explicit&&l.createElement(V.N,null),ce.paid&&l.createElement(B.g,null),ce.nineteen&&l.createElement(J.X,{size:16})),playButtonWrapper:function(e){return l.createElement(F.l,{enabled:oe&&!se,showUri:s.show.uri},e)}}))):null}));const oe="p6DKqBcwmVtxmHt8ju43",se="_OxEpxzAgJiTENfolVUN";function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=l.memo((function(e){var t,n=e.contextUri,r=e.usePlayContextItem,a=(0,l.useContext)(E.H),o=(0,l.useContext)(f.Q).sortState,s=(0,l.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),c=(0,M.Z)(s,2),u=c[0],d=c[1],g=(0,l.useRef)(!1),y=(0,l.useRef)(0),p=(0,l.useRef)(0),b=(0,l.useContext)(m.fo).filter,h=(0,l.useCallback)((function(){p.current++}),[]),P=(0,z.Db)((t={},(0,i.Z)(t,z.Uo.MEDIUM,0),(0,i.Z)(t,z.Uo.LARGE,600),t)),v=P.ref,C=P.breakpoint,k=(0,l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){var e=(0,Z.Z)(W().mark((function e(t){var n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getEpisodes({offset:t-p.current,limit:50,sort:S(o),filter:b});case 2:return n=e.sent,p.current=0,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=y.current;null!==n&&(g.current||(g.current=!0,t(Number(n)).then((function(t){d((function(r){var a=Number(t.offset)+t.items.length,i=e?[]:(0,L.Z)(r.items);return i.splice.apply(i,[Number(n),t.items.length].concat((0,L.Z)(t.items))),y.current=a<t.totalLength?a:null,ue(ue({},t),{},{items:i})})),g.current=!1}))))}),[b,a,o]);return(0,l.useEffect)((function(){y.current=0,k(!0)}),[k]),l.createElement(z.ZU.Provider,{value:C},l.createElement(H.ZP,{value:"track-list"},l.createElement("div",{ref:v},l.createElement(j.C,{onReachBottom:k,triggerOnInitialLoad:!0},u.items.map((function(e,t){return l.createElement("div",{className:se,key:"".concat(t).concat(e.uri)},l.createElement("hr",{className:oe,"aria-hidden":!0}),l.createElement(le,{key:"".concat(e.uri,"/").concat(t),index:t,episode:e,contextUri:n,onRemove:h,usePlayContextItem:r}))}))))))})),me=n(60289),fe=n(59482),ge=n(72907),ye=n(37761),pe=n(83209),Ee=function(e){var t=e.metadata,n=e.backgroundColor,r=e.isPlaying,a=e.isOnline,i=e.togglePlay,o=t.uri,c=t.name,u=t.images,d=t.totalLength,m=t.owner,f=(0,l.useMemo)((function(){return{id:m.username,uri:m.uri,name:m.username,displayName:m.displayName||void 0,images:m.images||[]}}),[m]);return l.createElement(me.gF,{backgroundColor:n},l.createElement(fe.W,null,l.createElement(k.$,{size:"md",onClick:function(){return i()},isPlaying:r,uri:o,disabled:!a,ariaPlayLabel:s.ag.get("playlist.a11y.play",c),ariaPauseLabel:s.ag.get("playlist.a11y.pause",c)}),l.createElement(ge.i,{text:c})),l.createElement(me.Oz,{images:u,name:c,shape:ye.K.ROUNDED_CORNERS,renderImage:function(){return l.createElement(pe.$,null)}}),l.createElement(me.sP,null,l.createElement(me.dy,{small:!0,uppercase:!0},s.ag.get("playlist")),l.createElement(me.xd,{canEdit:!1,onClick:function(){}},c),l.createElement(me.QS,{creators:[f],totalEpisodes:d})))},be=function(e){var t,n=e.metadata,r=e.canSort,a=(0,p.Y5)("#006450"),u=(0,y.k)(),g=(0,l.useContext)(f.Q).sortState,E=(0,l.useContext)(m.fo).filter,v=(0,b.n)({uri:n.uri,metadata:(t={},(0,i.Z)(t,h.sb.SORTING_CRITERIA,w(g)),(0,i.Z)(t,h.sb.FILTERING_PREDICATE,(0,d.aK)(E)),t)},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),C=v.isPlaying,k=v.togglePlay,O=v.usePlayContextItem;return l.createElement("section",{className:_,"data-testid":"your-episodes-page"},l.createElement(P.$,null,s.ag.get("sidebar.your_episodes")),l.createElement(Ee,{metadata:n,backgroundColor:a,isPlaying:C,isOnline:u,togglePlay:k}),l.createElement("div",{className:T},l.createElement(R,{metadata:n,backgroundColor:a,isPlaying:C,isOnline:u,togglePlay:k,canSort:r}),l.createElement("div",{className:"contentSpacing"},n.totalLength>0?l.createElement(de,{contextUri:n.uri,usePlayContextItem:O}):l.createElement(c.u,{message:s.ag.get("collection.empty-page.episodes-subtitle"),title:s.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:s.ag.get("collection.empty-page.shows-cta"),renderInline:!0},l.createElement(o.G,null)))))};const he=l.memo((function(){var e=(0,l.useContext)(E.H).getCapabilities(),t=(0,v.x)();return t?l.createElement(f.$,{uri:t.uri,defaultSortOption:g.oT.ADDED_AT},l.createElement(m.hz,{uri:t.uri},l.createElement(be,{metadata:t,canSort:e.canSort&&t.totalLength>0}))):l.createElement(u.h,{hasError:!1,errorMessage:s.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map