"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[9678],{99678:(e,s,o)=>{o.r(s),o.d(s,{EPISODE_SPONSORS_SHELF_TESTID:()=>v,EpisodeSponsorsWrapper:()=>D,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>m,default:()=>h});var n=o(59496),i=o(46281),r=o(43372);var t=o(4637);const a=(0,n.lazy)((()=>o.e(9050).then(o.bind(o,9050))));function d({fetchedEpisodeSponsorsData:e,fireTrackingEvent:s,numberOfSponsorsToDisplay:o,firedViewedEvents:d,version:p,reason:u,uri:f}){const{displayedEpisodeSponsorsData:c}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:s}){return(0,n.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,s)})),[e,s])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:o}),l=(0,r.s4)(),S=(0,n.useMemo)((()=>c.map(((e,o)=>(0,t.jsx)(a,{fireTrackingEvent:s,firedViewedEvents:d,version:p,onClick:async function(){return l.send((0,i.$)({uri:f,reason:u,lineitem_id:c.map((e=>e.metadata.lineitemId)),ui_navigate:c.map((({clickthrough:e},s)=>o===s?e:"")),navigate_to_external_uri:c.map(((e,s)=>o===s))}))},...e},`${e.metadata.lineitem_id}-${o}`)))),[c,s,d,p,u,f,l]);return{displayedEpisodeSponsorsData:c,displayedSponsors:S}}var p=o(88585),u=o.n(p);var f=o(50885),c=o(47309);function l({firedViewedEvents:e}){const s=(0,n.useRef)();return{firedViewedEvents:s.current=e??s.current??new Set}}function S({uri:e,getEpisodeSponsors:s,fireTrackingEvent:o,numberOfSponsorsToDisplay:i,version:r,reason:t}){const{state:a}=(0,f.b)(),{episodeBase62Id:p}=function({uri:e,episodeBase62Id:s}){return{episodeBase62Id:(0,n.useMemo)((()=>s||u().from(e)?.getBase62Id()),[e,s])}}({...a?.[f.H],uri:e}),{fetchedEpisodeSponsorsData:S}=(0,c.m)({...a,episodeBase62Id:p,getEpisodeSponsors:s,version:r}),{firedViewedEvents:E}=l({...a?.[f.H]});return{uri:e,episodeBase62Id:p,fetchedEpisodeSponsorsData:S,...d({fetchedEpisodeSponsorsData:S,fireTrackingEvent:o,numberOfSponsorsToDisplay:i,firedViewedEvents:E,version:r,reason:t,uri:e}),firedViewedEvents:E,reason:t}}const E=(0,n.lazy)((()=>o.e(1727).then(o.bind(o,1727)))),v="episode-sponsors-shelf",m="see-all-episode-sponsors";function D(e){const{numberOfSponsorsToDisplay:s}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),o=S({...e,numberOfSponsorsToDisplay:s});return o.episodeBase62Id&&o.displayedSponsors.length?(0,t.jsx)(n.Suspense,{fallback:!0,children:(0,t.jsx)(E,{...e,numberOfSponsorsToDisplay:s,state:o})}):null}const h=D},50885:(e,s,o)=>{o.d(s,{H:()=>i,b:()=>r});var n=o(86695);const i="episodeSponsorsStateWithRequiredProps";function r(){return(0,n.TH)()}},47309:(e,s,o)=>{o.d(s,{F:()=>t,m:()=>a});var n=o(59496),i=o(27002),r=o(90005);const t=420;function a({episodeBase62Id:e,getEpisodeSponsors:s,fetchedEpisodeSponsorsData:a=[],version:d}){const[p,u]=(0,n.useState)(a),f=(0,n.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const n=s??(await Promise.resolve().then(o.bind(o,82664))).getEpisodeSponsors;u(await n(e,{version:d}))}catch(e){u([])}}),[e,s,d]),c=(0,i.y1)(f,t);return(0,n.useEffect)((function(){a.length||c()}),[c,a.length]),(0,r.H)(c),{fetchedEpisodeSponsorsData:p}}},90005:(e,s,o)=>{o.d(s,{H:()=>p});var n=o(59496),i=o(83600),r=o(33428),t=o(6106),a=o(7209),d=o(78034);function p(e){const s=(0,i.W6)(r.oF),o=(0,a.Y)((e=>{const s=e?.item??void 0;return(0,d.k6)(s)&&s.isPodcastAd?s.id??void 0:void 0})),p=(0,t.D)(o);(0,n.useEffect)((function(){o!==p&&Boolean(o)&&setTimeout(e,s)}),[e,o,p,s])}}}]);
//# sourceMappingURL=9678.js.map