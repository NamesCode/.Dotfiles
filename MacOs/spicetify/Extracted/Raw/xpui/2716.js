"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[2716],{82716:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ze});var r=t(4942),a=t(93433),i=t(29439),o=(t(68309),t(66992),t(41539),t(78783),t(33948),t(41637),t(74916),t(64765),t(92222),t(40561),t(47941),t(82526),t(57327),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070),t(67294)),l=t(86706),s=t(51615),c=t(69518),u=t.n(c),d=t(48556),m=t(73305),f=t(96206),v=t(42038),p=t(60210),h=t(48690),g=t(35410),x=t(20534),b=t(70369),y=t(55120),j=t(35213),I=t(26700),k=t(23232),R=t(57784),P=t(92823),w=t(62515),C=t(20246),E=t(84242),O=t(15852),U=t(60289),T=t(98562),S=t(45987),A=t(15861),D=t(87757),B=t.n(D),F=(t(3843),t(83710),t(70189),t(91038),t(26541),t(34553),t(9653),t(94967)),N=t(11680),_=t(45287),Z=["pageItems"];function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function M(e,n,t,a){var i=a?{}:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e);return n.forEach((function(e,n){i[t+n]=e})),i}var z=t(87972),K=t(40254),X=t(42781);var V=t(77495),Q=(t(21249),t(46895)),G=t(1848),H=t(61728),J=t(28248),W=t(73785),$=t(4236),Y=t(42922),q=t(7073),ee=t(49961),ne=(t(69600),t(6695)),te=t(74548),re=t(72527),ae=t(88214),ie=t(56294),oe=t(21509),le=t(94107),se=t(82760),ce=t(32626),ue=t(85576),de=t(87257),me=t(57978),fe=t(19986),ve=t(84788),pe=t(43028),he=t(46128),ge=t(94184),xe=t.n(ge),be=t(51674);const ye="TRDgmejiOzKjissuLFSx";var je=t(85893),Ie=function(e){var n=e.onClick,t=void 0===n?function(){}:n,r=e.className,a=e.label,i=e.ariaLabel,o=void 0===i?a:i,l=e.Icon;return(0,je.jsx)(be._,{label:a,children:(0,je.jsx)("button",{type:"button","aria-label":o,className:xe()(ye,r),onClick:t,children:(0,je.jsx)(l,{iconSize:16})})})},ke=o.memo((function(e){var n,t,r,a,i=e.uri,o=e.uid,l=e.name,s=e.durationMs,c=e.artists,d=e.album,m=e.isMOGEFRestricted,v=e.isExplicit,p=e.isPlayable,h=e.index,g=e.playIndex,x=void 0===g?null:g,b=e.imgUrl,y=e.contextUri,j=e.usePlayContextItem,I=e.isEnhanced,k=e.playContextPageIndex,R=e.isFirstRecommendation,P=e.add,w=e.remove,C=e.canBeRemovedFromPlaylist,E=e.addedBy,U=e.addedAt,T=(0,fe._)(i),S=(0,pe.k)(i,p),A=(0,ve.r)({downloadAvailability:T,isExplicit:v,isMOGEFRestricted:m,isEnhanced:I}),D=A.badges,B=A.hasBadges,F=h+1,N=c.items.map((function(e){return{uri:e.uri,name:e.profile.name}})),_=(0,je.jsx)(ae.$,{uri:i,uid:o,albumUri:null==d?void 0:d.uri,artists:N,contextUri:y,isRecommendation:I,removePlaylistItems:function(){return w([o])},removeRecommendation:function(){return w([o])},addRecommendation:function(){return P(o)},canBeRemovedFromPlaylist:C}),Z=(null==N?void 0:N.map((function(e){return e.name})).join(f.ag.getSeparator()))||"",L=j({uid:o,uri:i,index:null!=x?x:h,pageIndex:k}),M=L.isActive,z=L.isPlaying,K=L.triggerPlay,X=L.togglePlay,V=(0,O.fU)(G.createDesktopTrackListRowEventFactory,{data:{position:h,reason:"",uri:i}}),Q=V.spec,H=V.logger,J=(0,je.jsx)(Ie,{onClick:function(){P(o),H.logInteraction(Q.addRecommendationButtonFactory().hitAddToPlaylist({playlist:y,itemToBeAdded:i}))},label:f.ag.get("web-player.enhance.button_label_keep_in_playlist"),Icon:ne.G});return(0,je.jsx)(Y.ZP,{value:"row",index:h,children:(0,je.jsx)(ce._P,{menu:_,children:(0,je.jsxs)(se.c,{uri:i,contextUri:y,index:h,onTriggerPlay:function(e,n){K({loggingParams:n})},isActive:M,ariaRowIndex:h+1,isPlayable:S,ageRestricted:m,dragMetadata:{name:l,createdBy:Z},spec:Q,removePlaylistItems:function(e){return w(e.map((function(e){return e.id})))},children:[(0,je.jsx)(oe.Dd,{ariaColIndex:0,children:(0,je.jsx)(oe.Du,{uri:i,playAriaLabel:f.ag.get("tracklist.a11y.play",l,Z),onClick:function(e,n){X({loggingParams:n})},isPlaying:z,isActive:M,spec:Q,children:(0,je.jsx)(oe.km,{children:F})})}),(0,je.jsxs)(oe.vZ,{ariaColIndex:1,children:[(0,je.jsx)(oe.lD,{src:b}),(0,je.jsxs)(oe.vm,{children:[(0,je.jsx)(oe.Wh,{titleText:l,children:l}),B&&(0,je.jsxs)(oe.g3,{children:[D.enhanced&&(0,je.jsx)(te._,{iconSize:16,className:le.Z.enhanced,title:f.ag.get("web-player.enhance.button_text_enhanced"),"aria-label":f.ag.get("web-player.enhance.button_text_enhanced")}),D.download&&(0,je.jsx)(ue.G,{size:16}),D.explicit&&(0,je.jsx)(de.N,{}),D.paid&&(0,je.jsx)(ie.g,{}),D.nineteen&&(0,je.jsx)(me.X,{className:le.Z.nineteen,size:16})]}),(0,je.jsx)(oe.K9,{children:(0,je.jsx)(oe.T6,{artists:N,spec:Q})})]})]}),(0,je.jsx)(oe.UA,{ariaColIndex:2,children:(0,je.jsx)(oe.BM,{uri:d.uri,name:d.name,creatorUri:null==N||null===(n=N[0])||void 0===n?void 0:n.uri,spec:Q,children:d.name})}),(0,je.jsx)(oe.UA,{ariaColIndex:3,children:(0,je.jsx)(oe.p_,{name:(null==E?void 0:E.name)||(null==E?void 0:E.id)||"",uri:(null==E?void 0:E.id)&&u().profileURI(E.id).toURI()||"",imageUrl:(null==E||null===(t=E.avatar)||void 0===t?void 0:t.sources)&&(null===(r=(0,ee.X)(null==E||null===(a=E.avatar)||void 0===a?void 0:a.sources,{desiredWidth:24,desiredLabel:"small"}))||void 0===r?void 0:r.url)||"",showAvatar:!0})}),(0,je.jsx)(oe.UA,{ariaColIndex:4,children:U?(0,je.jsx)(oe.Op,{dateAdded:U}):null}),(0,je.jsxs)(oe.mU,{ariaColIndex:5,children:[I?(0,je.jsxs)(je.Fragment,{children:[R?(0,je.jsx)(he.T,{id:"enhance-add-recommendation",bodyText:f.ag.get("web-player.enhance.onboarding.add-recommendation-to-playlist"),shouldScrollIntoView:!0,children:J}):J,(0,je.jsx)(Ie,{onClick:function(){w([o]),H.logInteraction(Q.removeRecommendationButtonFactory().hitRemoveRecommendation({recommendedItemUri:i,contextUri:y}))},label:f.ag.get("web-player.enhance.button_label_remove_from_playlist"),Icon:re.H})]}):(0,je.jsx)(oe.qS,{uri:i,type:"track",spec:Q}),(0,je.jsx)(oe.A$,{duration:s}),(0,je.jsx)(oe.Zv,{menu:_,label:f.ag.get("more.label.track",l,Z),spec:Q})]})]})})})})),Re=[W.Q.INDEX,W.Q.TITLE,W.Q.ALBUM,W.Q.ADDED_BY,W.Q.ADDED_AT,W.Q.DURATION],Pe=o.memo((function(e){var n=e.ariaLabel,t=e.uri,r=e.name,a=e.usePlayContextItem,l=e.tracklistRef,s=e.fetchTracks,c=e.addRecommendation,u=e.removeItems,d=e.nrTracks,m=e.canBeRemovedFromPlaylist,v=(0,o.useRef)(!1),p=(0,$.k)();(0,o.useEffect)((function(){var e;v.current&&p&&(null==l||null===(e=l.current)||void 0===e||e.update());v.current=!0}),[p,l]);var h=50,g=(0,o.useRef)((function(){})),x=(0,o.useState)([]),b=(0,i.Z)(x,2),y=b[0],j=b[1],I=(0,O.fU)(Q.createDesktopTrackListEventFactory,{data:{uri:t,identifier:"enhanced-tracklist"}}),k=I.logger,R=I.spec,P=I.UBIFragment,w=(0,o.useCallback)((function(){if(l&&l.current){var e=l.current.getVisibleTrackWindow(),n=e.firstIndex,t=e.lastIndex-n;return Math.max(0,n-Math.round((h-t)/2))}return 0}),[l]),C=(0,o.useCallback)((function(e){var n;g.current(),u({itemIds:e.map((function(e){return e.id})),offset:w(),limit:h});var r,a=new Set(e.map((function(e){return e.id}))),i=(null==l||null===(n=l.current)||void 0===n?void 0:n.getRows())||{},o=[];for(var s in i)if(a.has(i[s].uid)){var c={index:Number(s),item:i[s]};i[s].isEnhanced&&o.push(c)}o.length&&((r=1===o.length?(0,G.createDesktopTrackListRowEventFactory)({data:{uri:o[0].item.uri,position:o[0].index,reason:""}}).removeRecommendationButtonFactory().hitRemoveRecommendation({contextUri:t,recommendedItemUri:o[0].item.uri}):R.removeItemsButtonFactory().hitRemoveRecommendations({contextUri:t,numberOfRecommendationsToRemove:o.length}))&&k.logInteraction(r))}),[u,w,k,l,t,R]),E=(0,o.useCallback)((function(e,n){g.current=n,e.length>1?j(e):C(e)}),[C]),U=(0,o.useCallback)((function(e){c({itemIds:[e],offset:w(),limit:h})}),[c,w]),T=(0,o.useCallback)((function(e){u({itemIds:e,offset:w(),limit:h})}),[u,w]),S=(0,o.useCallback)((function(e,n){var r,i,o,l=(0,ee.X)(null===(r=e.album.coverArt)||void 0===r?void 0:r.sources,{desiredSize:40,desiredLabel:"small"});return(0,je.jsx)(ke,{index:n,playIndex:n,contextUri:t,uri:e.uri,uid:e.uid,isPlayable:e.playability.playable,durationMs:e.duration.totalMilliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:(null===(i=e.contentRating)||void 0===i?void 0:i.label)===q.KS.Explicit,isMOGEFRestricted:(null===(o=e.contentRating)||void 0===o?void 0:o.label)===q.KS.NineteenPlus,imgUrl:(null==l?void 0:l.url)||"",usePlayContextItem:a,isEnhanced:e.isEnhanced,playContextPageIndex:e.playContextPageIndex,isFirstRecommendation:e.isFirstRecommendationOfPage&&n<h,add:U,remove:T,canBeRemovedFromPlaylist:m,addedBy:e.addedBy,addedAt:e.addedAt},e.uid)}),[a,t,U,T,m]),A=(0,o.useCallback)((function(e){return e.uri}),[]),D=(0,o.useCallback)((function(e){return e.uid}),[]);return(0,je.jsxs)(P,{spec:R,children:[(0,je.jsx)(Y.ZP,{value:"playlist-tracklist",children:(0,je.jsx)(J.Pv,{testID:"playlist-tracklist",ariaLabel:n,hasHeaderRow:!0,columns:Re,onRemove:E,renderRow:S,resolveUri:A,resolveUid:D,nrTracks:d,fetchTracks:s,limit:h,outerRef:l},t)}),(0,je.jsx)(H.h,{title:f.ag.get("playlist.remove_from_playlist",r),isOpen:y.length>0,tracks:y,onClose:function(e){e.stopPropagation(),j([])},onRemove:C})]})})),we=t(91281),Ce=t(55914),Ee=t(86025),Oe=t(39838),Ue=t(34011),Te=t(20452);const Se="z9JdxJgW3OxYysR2dkal";function Ae(e){return"function"==typeof e}var De=function(e){var n=e.contextUri,t=e.title,r=e.message,a=e.children,l=(0,o.useRef)(null),s=(0,o.useState)(!1),c=(0,i.Z)(s,2),u=c[0],d=c[1],m=(0,o.useState)("topStart"),v=(0,i.Z)(m,2),p=v[0],h=v[1],g=(0,o.useCallback)((function(){var e;d(!1),null===(e=l.current)||void 0===e||e.focus()}),[]),x=(0,o.useCallback)((function(){d(!0)}),[]),b=(0,_.U)(n).setIsEnhanced,y=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(y.current){if(!y.current)return;var e=y.current.getBoundingClientRect(),n=e.top,t=e.bottom;n<16?h("bottomStart"):t>window.innerHeight-16&&h("topStart")}}),[u]),(0,je.jsx)(we.x,{onShow:x,onHide:g,placement:p,withPortal:!0,overlay:u&&(0,je.jsx)(Te.i,{children:(0,je.jsx)("div",{className:"encore-dark-theme",ref:y,children:(0,je.jsxs)(Ce.J,{role:"alertdialog",popoverTitle:t,arrow:"topStart"===p?"bottomEnd":"topEnd",colorSet:"announcement",children:[r,(0,je.jsxs)("div",{className:Se,children:[(0,je.jsx)(Ee.o,{buttonSize:Oe.z.sm,onClick:g,children:f.ag.get("web-player.enhance.missing-functionality-callout.dismiss")}),(0,je.jsx)(Ue.D,{buttonSize:Oe.z.sm,onClick:function(){g(),b(!1)},colorSet:"invertedLight",children:f.ag.get("web-player.enhance.missing-functionality-callout.turn-off-enhance")})]})]})})}),children:Ae(a)?(0,je.jsx)(je.Fragment,{children:a(x)}):a})};const Be="A4dupilHPIEDfhXDE0m0",Fe="JYAfUd8XXrVwcPbq9QaC";function Ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ne(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const Ze=o.memo((function(e){var n,t,r,c=e.metadata,D=e.capabilities,L=e.featureIdentifier,Q=c.uri,G=c.name,H=c.images,J=c.totalLength,W=(0,i.Z)(H,1)[0],$=(0,w.Z)((null==W?void 0:W.url)||null),Y=(0,s.k6)(),q=(0,l.I0)(),ee=(0,P.o)(),ne=(0,o.useRef)(null),te=u().isPlaylistV1OrV2(Q),re=function(e){var n,t,r=(0,N._)(),a=(0,_.U)(e),l=a.isEnhanced,s=a.iteration,c=a.setIsEnhanced,u=a.toggleIsEnhanced,d=(0,o.useState)(null),m=(0,i.Z)(d,2),f=m[0],v=m[1],p=(0,o.useRef)(Date.now()),h=(0,o.useCallback)((function(){return Date.now()-p.current>3e3}),[]),g=(0,o.useRef)({}),x=(0,o.useRef)(null),b=(0,o.useCallback)(function(){var e=(0,A.Z)(B().mark((function e(n,t,a,i,o,l,s){var c,u,d,m,f,h,b,y,j,I;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l&&(p.current=Date.now()),f=null===(c=x.current)||void 0===c?void 0:c.enhancedRevision,e.prev=2,e.next=5,s;case 5:h=e.sent,e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),409!==(null===e.t0||void 0===e.t0?void 0:e.t0.status)){e.next=14;break}return e.next=13,r.getPage(n,t,a,i,o);case 13:h=e.sent;case 14:if(b=null===(u=h)||void 0===u?void 0:u.enhancePage){e.next=17;break}return e.abrupt("return",[]);case 17:return y=b.pageItems,j=(0,S.Z)(b,Z),e.next=20,r.decoratePageItems(y);case 20:if(I=e.sent,f===(null===(d=x.current)||void 0===d?void 0:d.enhancedRevision)){e.next=24;break}return e.abrupt("return",[]);case 24:return(null===(m=x.current)||void 0===m?void 0:m.enhancedRevision)!==j.enhancedRevision&&(l=!0),g.current=M(g.current,I,i,l),v(j),x.current=j,e.abrupt("return",I);case 30:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n,t,r,a,i,o,l){return e.apply(this,arguments)}}(),[r]),y=(0,o.useCallback)(function(){var n=(0,A.Z)(B().mark((function n(t){var a,i,o,l,c;return B().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.itemIds,i=t.offset,o=void 0===i?0:i,l=t.limit,c=void 0===l?1:l,x.current&&s){n.next=3;break}return n.abrupt("return");case 3:b(e,s,x.current.sessionId,o,c,!0,r.addRecommendation(e,x.current.sessionId,a,o,c));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[b,e,r,s]),j=(0,o.useCallback)(function(){var n=(0,A.Z)(B().mark((function n(t){var a,i,o,l,c,u,d,m,f;return B().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.itemIds,i=t.offset,o=void 0===i?0:i,l=t.limit,c=void 0===l?1:l,x.current&&s){n.next=3;break}return n.abrupt("return");case 3:u=g.current,d=new Set(a),m=!1,n.t0=B().keys(u);case 7:if((n.t1=n.t0()).done){n.next=14;break}if(f=n.t1.value,!d.has(u[f].uid)||!u[f].isEnhanced){n.next=12;break}return m=!0,n.abrupt("break",14);case 12:n.next=7;break;case 14:b(e,s,x.current.sessionId,o,c,!0,r.removeItems(e,x.current.sessionId,a,o,c,m));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[b,e,r,s]),I=(0,o.useMemo)((function(){return new F.tL}),[]),k=(0,o.useCallback)(function(){var n=(0,A.Z)(B().mark((function n(t,a){var i,o,l,c,u;return B().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",[]);case 2:if(c=Math.min(a,((null===(i=x.current)||void 0===i?void 0:i.numTotalItems)||1/0)-t),!(u=Array.from({length:c},(function(e,n){return g.current[n+t]}))).every((function(e){return!!e}))||0===c){n.next=7;break}return n.abrupt("return",u);case 7:return n.abrupt("return",b(e,s,null===(o=x.current)||void 0===o?void 0:o.sessionId,t,a,!1,I.create("".concat(e,":").concat(s,":").concat(null===(l=x.current)||void 0===l?void 0:l.sessionId,":").concat(t,":").concat(a),(function(){var n;return r.getPage(e,s,null===(n=x.current)||void 0===n?void 0:n.sessionId,t,a)}))));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[I,b,e,r,s]),R=(0,o.useMemo)((function(){return{uri:e,url:null==f?void 0:f.dspContextUri}}),[e,null==f?void 0:f.dspContextUri]),P=(0,o.useCallback)((function(){g.current={}}),[]),w=(0,o.useCallback)(function(){var n=(0,A.Z)(B().mark((function n(t){var a,i,o,l;return B().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",-1);case 2:return n.next=4,r.getPage(e,s,null===(a=x.current)||void 0===a?void 0:a.sessionId,0,r.MAX_PAGE_SIZE);case 4:return o=n.sent,l=o.enhancePage,n.abrupt("return",null!==(i=null==l?void 0:l.pageItems.findIndex((function(e){return e.itemId===t})))&&void 0!==i?i:-1);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[r,s,e]);return{isEnhanced:l,setIsEnhanced:c,toggleIsEnhanced:u,addRecommendation:y,removeItems:j,playContext:R,numTotalItems:isNaN(Number(null==f?void 0:f.numTotalItems))?void 0:Number(null==f?void 0:f.numTotalItems),numTotalRecs:isNaN(Number(null==f?void 0:f.numTotalRecs))?void 0:Number(null==f?void 0:f.numTotalRecs),fetchTracks:k,clearCache:P,enhancedInvalidationKey:"".concat(null!==(n=null==f?void 0:f.enhancedRevision)&&void 0!==n?n:"").concat(null!=s?s:""),shouldUnderlyingContextChangeRefreshView:h,UBIReason:f?"enhanced|".concat(null==f?void 0:f.sessionId,"#").concat(null==f||null===(t=f.logging)||void 0===t?void 0:t.correlationId):"enhanced|",fetchIndexOfItemId:w}}(Q),ae=re.isEnhanced,ie=re.playContext,oe=re.numTotalItems,le=re.numTotalRecs,se=re.addRecommendation,ce=re.removeItems,ue=re.fetchTracks,de=re.enhancedInvalidationKey,me=re.shouldUnderlyingContextChangeRefreshView,fe=re.UBIReason,ve=re.clearCache,pe=re.fetchIndexOfItemId,he=(null!=oe?oe:J)>0,ge=(null==D?void 0:D.canFilter)&&J>0,xe=(null==D?void 0:D.canSort)&&J>0;(0,o.useEffect)((function(){if(ae&&"POP"!==Y.action){var e=new URLSearchParams(Y.location.search).get("uid");if(!e)return;pe(e).then((function(e){var n;-1!==e&&(null===(n=ne.current)||void 0===n||n.scrollToIndex(e))}))}}),[Y,Y.action,Y.location.search,pe,ae]),(0,o.useEffect)((function(){var e;de&&(null===(e=ne.current)||void 0===e||e.update())}),[de]),(0,o.useEffect)((function(){var e;me()&&(ve(),null===(e=ne.current)||void 0===e||e.update())}),[J,ve,me]);var be=(0,O.fU)(d.createDesktopEnhancedEventFactory,{data:{uri:Q,identifier:"enhanced-session",reason:fe}}),ye=be.spec,Ie=be.logger,ke=be.UBIFragment,Re=(0,o.useMemo)((function(){return{header:ye.headerFactory()}}),[ye]),we=(0,E.n)(ie,{featureIdentifier:L}),Ce=we.isPlaying,Ee=we.isActive,Oe=we.togglePlay,Ue=we.usePlayContextItem,Te=(0,o.useCallback)((function(){var e;Oe(),e=Ee?Ce?ye.playButtonFactory().hitPause({itemToBePaused:Q}):ye.playButtonFactory().hitResume({itemToBeResumed:Q}):ye.playButtonFactory().hitPlay({itemToBePlayed:Q}),Ie.logInteraction(e)}),[Oe,Ce,Ee,Ie,ye,Q]),Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,z.J)(K.n5.getUser,["spotify"]).data;return(0,o.useMemo)((function(){return null!=n&&n.body?{isOwner:!1,tracksAdded:e,user:{uri:n.body.uri,type:X.p.USER,username:n.body.id,displayName:n.body.display_name,images:n.body.images}}:null}),[n,e])}(le),Ae=null!==(n=null===(t=c.collaborators)||void 0===t||null===(r=t.items)||void 0===r?void 0:r.concat())&&void 0!==n?n:[];Se&&Ae.splice(U.ms-1,0,Se);var Ne={count:Ae.length,items:Ae},Ze=(0,o.useCallback)((function(e,n){var t=[].concat((0,a.Z)(n[R.aN[u().Type.ALBUM]]||[]),(0,a.Z)(n[R.aN[u().Type.TRACK]]||[]));t.length>0&&(q((0,v.jV)(Q,t)),ee({targetUri:Q,intent:"add",type:"drop"}))}),[q,ee,Q]);return(0,je.jsxs)(o.Suspense,{fallback:null,children:[(0,je.jsx)(I.l,{path:"/playlist/:playlistId",pageId:m.Wg.ENHANCED_SESSION}),(0,je.jsxs)(ke,{spec:ye,children:[(0,je.jsx)(b.$,{children:f.ag.get("playlist.page-title",G)}),(0,je.jsx)(x.Z,{types:[R.aN[u().Type.ALBUM],R.aN[u().Type.TRACK]],onDrop:Ze,children:(0,je.jsxs)("section",{role:"presentation",className:Be,"data-testid":"enhanced-page",children:[(0,je.jsxs)(ke,{spec:Re.header,children:[(0,je.jsx)(k.s,{metadata:_e(_e({},c),{},{collaborators:Ne,duration:void 0,totalLength:null!=oe?oe:J}),isPlaying:Ce,togglePlay:Te,backgroundColor:$}),(0,je.jsx)("div",{children:(0,je.jsx)(p.o,{backgroundColor:$,children:(0,je.jsxs)(p.F,{children:[he?(0,je.jsx)(y.$,{onClick:Te,isPlaying:Ce,size:"lg",uri:Q}):null,(0,je.jsx)(V.v,{uri:Q}),te&&(0,je.jsx)(C.y,{menu:(0,je.jsx)(g.X,{uri:Q,isEnhanced:ae}),children:(0,je.jsx)(h.z,{})}),(ge||xe)&&(0,je.jsxs)("div",{className:Fe,children:[ge&&(0,je.jsx)(o.Suspense,{fallback:null,children:(0,je.jsx)(De,{contextUri:Q,title:f.ag.get("web-player.enhance.missing-functionality-callout.filtering-playlist-disabled-title"),message:f.ag.get("web-player.enhance.missing-functionality-callout.filtering-playlist-disabled-message"),children:function(e){return(0,je.jsx)(T.K,{placeholder:f.ag.get("playlist.search_in_playlist"),onActivate:function(){return e(),!1}})}})}),xe&&(0,je.jsx)(De,{contextUri:Q,title:f.ag.get("web-player.enhance.missing-functionality-callout.sorting-playlist-disabled-title"),message:f.ag.get("web-player.enhance.missing-functionality-callout.sorting-playlist-disabled-message"),children:(0,je.jsx)(j.l,{columns:[],disabled:!0})})]})]})})})]}),(0,je.jsx)("div",{className:"contentSpacing",children:(0,je.jsx)(o.Suspense,{fallback:null,children:(0,je.jsx)(Pe,{ariaLabel:G,nrTracks:null!=oe?oe:Math.max(15,J),uri:Q,name:G,usePlayContextItem:Ue,tracklistRef:ne,fetchTracks:ue,addRecommendation:se,removeItems:ce,canBeRemovedFromPlaylist:te},Q)})})]})})]})]})}))}}]);
//# sourceMappingURL=2716.js.map