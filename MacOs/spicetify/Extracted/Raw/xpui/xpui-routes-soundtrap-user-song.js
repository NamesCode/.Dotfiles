"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1248],{97939:(e,r,a)=>{a.d(r,{t:()=>l});var s=a(7586),i=a(14643),t=a(75262),n=a(4637);const l=({project:e,index:r,onClick:a})=>(0,n.jsx)(s.C,{index:r,onClick:()=>a(e.key),headerText:e.title,featureIdentifier:"make_music",uri:e.originalTrackUri,delegateNavigation:!0,renderCardImage:()=>(0,n.jsx)(i.x,{images:[{url:e.imageUri}]}),renderSubHeaderContent:()=>(0,n.jsx)(t.NB,{source:e.templateDescription})})},92291:(e,r,a)=>{a.r(r),a.d(r,{UserSong:()=>J,default:()=>V,parseReleaseDate:()=>Z});var s=a(59496),i=a(77646),t=a(86695),n=a(87518),l=a(88585),o=a.n(l),c=a(88778),u=a(4061),d=a(59044),m=a(25007),g=a(43543),h=a(50116),p=a(81366),x=a(31716),f=a(91393),j=a(68415),y=a(21855),b=a(4763),I=a(53354),k=a(7184),P=a(87124),v=a(80891),C=a(68001),S=a(4608),U=a(38550),R=a(73414),w=a(3142),T=a(32693),D=a(98082),E=a(53703),N=a(7209),L=a(55667),A=a(74276),_=a(77003),O=a(92910),B=a(41299),H=a(78486),F=a(97939),z=a(4830),Q=a(45476),Y=a(29009),W=a(4637);const $=[Q.QD.INDEX,Q.QD.TITLE,Q.QD.DURATION],q=s.memo((function({ariaLabel:e,tracks:r,creator:a,highlightUri:i,scrollToIndex:t,usePlayContextItem:n,hasHeaderRow:l=!0}){const o=(0,s.useRef)(null),c=(0,s.useRef)(!1),[u]=(0,s.useState)(null);(0,s.useEffect)((()=>{o.current&&(u?o.current.scrollToIndex(u):t&&o.current.scrollToIndex(t))}),[u,t]);const d=(0,s.useCallback)(((e,r)=>{const s=!c.current&&!!i&&i===e.uri;return s&&(c.current=!0),(0,W.jsx)(Q.Ym,{index:r,trackNumber:r+1,contextUri:a.uri,uri:e.uri,duration_ms:e.duration.milliseconds,name:e.name,isPlayable:e.playability.playable,artists:[{uri:a.uri,profile:{name:a.displayName??a.name??""}}],playcount:0,shouldRenderPlayCount:!1,shouldHighLight:s,usePlayContextItem:n},r+e.uri)}),[a,i,n]),m=(0,s.useCallback)((e=>"track"in e?e.track.uri:""),[]);return(0,W.jsx)(Y.ZP,{value:"album-tracklist",children:(0,W.jsx)(Q.Pv,{ariaLabel:e,tracks:r,hasHeaderRow:l,rowPlaceholder:Q.uD,columns:$,renderRow:d,resolveUri:m,nrTracks:r.length,outerRef:o},a.uri)})})),G="a4JGtYPrNWmb5GUgrYMX",M="Y3jBRL4mS97_u1yK6lml",X="uV9hvAknI8LQmO3fPuqx",J=({episode:e,creator:r})=>{const{uri:a,coverArt:t}=e,l=(0,n.TH)(),{spec:o,logger:d}=(0,_.fU)(u.createDesktopEpisodeEventFactory,{data:{uri:a}}),b=(0,T.g)(),P=(0,C.o)(),v=parseInt(new URLSearchParams(l.search).get("index")||"0",10),{usePlayContextItem:w,triggerPlay:L,togglePlay:A,isActive:O}=(0,D.n)({uri:a},{featureIdentifier:"episode"}),{isPlaying:Q,isActive:Y}=(0,E.$o)(a),$=t[0].url,J=(0,S.Zj)($||null),V=(0,N.Y)((e=>e?.isPaused??void 0)),K=Y||O,ee=(0,s.useCallback)(((e,r,s)=>{let i="play";if(!Q||0!==e&&r||(i="pause"),P({intent:i,targetUri:a,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),O&&!r)A({loggingParams:s?.()});else if(Y&&!r)V?(s?.("resume"),b.resume()):(s?.("pause"),b.pause());else{const r=s?.("play");L({seekTo:e,loggingParams:r})}}),[Q,P,a,Y,O,V,b,A,L]),re=(0,s.useCallback)((()=>{ee(0,!1,(e=>{const r=o.actionBarFactory().playButtonFactory();let s;return s="pause"===e||Q?r.hitPause({itemToBePaused:a}):"resume"===e||K?r.hitResume({itemToBeResumed:a}):r.hitPlay({itemToBePlayed:a}),d.logInteraction(s)}))}),[ee,K,Q,d,o,a]);(0,s.useEffect)((()=>{if(e){const r=new URLSearchParams(l.search);if(r.has("t")){const a=r.get("t")||"0",s=1e3*parseInt(a,10);s<=e.duration.milliseconds&&ee(s,!0)}}}),[e]);const ae=e.playability.playable,se=(e.coverArt||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),ie=(0,s.useCallback)((()=>new URLSearchParams(l.search.slice(1)).get("highlight")||""),[l.search])(),te=(0,i.v9)(U.Gg),ne=te.overrides?.locale??te.locale,{projects:le}=(0,H.w)(!1,r.id),[oe,ce]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const r=le.filter((r=>r.publishedTrackUri!==e.uri));ce(r)}),[le,e.uri]),(0,W.jsxs)("section",{"data-testid":"user-song",className:G,children:[(0,W.jsx)(x.$,{children:m.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,W.jsxs)(f.gF,{backgroundColor:J,children:[(0,W.jsxs)(j.W,{children:[(0,W.jsx)(I.$,{size:"md",onClick:()=>A(),disabled:!ae,isPlaying:Q,uri:a}),(0,W.jsx)(y.i,{text:e.name})]}),(0,W.jsx)(R._P,{menu:(0,W.jsx)(z.kn,{uri:a,sharingInfo:e.sharingInfo}),children:(0,W.jsx)(f.Oz,{dragUri:a,images:se,name:e.name,placeholderType:"album"})}),(0,W.jsxs)(f.sP,{children:[(0,W.jsx)(f.dy,{small:!0,uppercase:!0,children:"Song"}),(0,W.jsx)(R._P,{menu:(0,W.jsx)(z.kn,{uri:a,sharingInfo:e.sharingInfo}),children:(0,W.jsx)(f.xd,{dragUri:e.uri,dragLabel:e.name,children:e.name})}),(0,W.jsx)(f.QS,{creators:[r],releaseDate:Z(e.releaseDate?.isoString),durationMilliseconds:e.duration.milliseconds})]})]}),(0,W.jsx)(g.o,{backgroundColor:J,children:(0,W.jsxs)(g.F,{children:[(0,W.jsx)(I.$,{onClick:re,disabled:!ae,isPlaying:Q,size:"lg",uri:a}),(0,W.jsx)(p.w,{uri:e.uri,size:h.q.md}),(0,W.jsx)(R.yj,{menu:(0,W.jsx)(z.kn,{uri:e.uri,sharingInfo:e.sharingInfo}),children:(0,W.jsx)(h.z,{label:m.ag.get("more.label.context",e.name)})})]})}),(0,W.jsxs)("div",{className:"contentSpacing",children:[(0,W.jsx)(q,{ariaLabel:e.name,tracks:[e],creator:r,highlightUri:ie,scrollToIndex:v,usePlayContextItem:w}),(0,W.jsx)("div",{className:X,children:(0,W.jsx)("div",{children:e.releaseDate?.isoString&&(0,W.jsx)(c.D,{as:"p",variant:"mesto",children:(0,B.BI)((0,B.RX)(e.releaseDate.isoString),ne,{year:"numeric",month:"long",day:"numeric"})})})})]}),oe.length>0&&(0,W.jsx)("div",{className:"contentSpacing",children:(0,W.jsx)(k.q,{index:0,id:"more-user-songs",className:M,title:m.ag.get("album-page.more-by-artist",r.displayName??r.name??"User"),total:oe.length,seeAllUri:r.uri,seeAllLabel:"Show profile",alwaysShowSeeAll:!0,children:oe.map(((e,r)=>(0,W.jsx)(F.t,{index:r,project:e,onClick:()=>{}},e.key)))})})]})},V=s.memo((function(){const{episodeId:e}=(0,t.UO)(),r=o().episodeURI(e).toURI(),a=(0,L.I)(r,!1);let i="";a?.type===O.p.EPISODE&&(i=a.podcast?.uri||"");const{data:n,error:l}=(0,A.l)(i||"",!1);let c="",u="",g="";n?.type===O.p.SHOW&&(c=n.publisherName,u=o().profileURI(c).toURI(),g=n.name);const{data:h}=(0,v.J)(w.n5.getProfile,[{uri:u,playlists:10,artists:10,episodes:10}]),p={uri:u,name:g,displayName:g,id:c,images:h?[{url:h.image_url}]:[]};return!a||a.type!==O.p.EPISODE||l?(0,W.jsx)(b.h,{hasError:!1,errorMessage:m.ag.get("error.not_found.title.podcast")}):(0,W.jsx)(s.Suspense,{fallback:null,children:(0,W.jsx)(P.C,{pageId:d.Wg.PODCAST_EPISODE,uri:r,children:(0,W.jsx)(J,{episode:a,creator:p})})})}));function Z(e){return e?.replace(/T.*/,"")||""}},87124:(e,r,a)=>{a.d(r,{C:()=>n});var s=a(59496),i=a(77446),t=a(4637);const n=({pageId:e,uri:r,children:a})=>{const n=(0,i.b)(),l=(0,i.H)();return(0,s.useEffect)((()=>{n?.reportPageView({pageId:e,navigationalRoot:l??void 0,entityUri:r})}),[e,l,n,r]),(0,t.jsx)(t.Fragment,{children:a})}}}]);
//# sourceMappingURL=xpui-routes-soundtrap-user-song.js.map